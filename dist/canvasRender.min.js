function Scalar(){}var Utils=function(e){return e.getGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,s="x"===e?t:3&t|8;return s.toString(16)})},e.parseUrl=function(e){var t=document.createElement("a");return t.href=e,{protocol:t.protocol,port:t.port,pathname:t.pathname,search:t.search,hash:t.hash,host:t.host}},e.sleep=function(e){for(var t=new Date;new Date-t<1e3*e;);},e}(Utils||{}),Utils=function(e){"use strict";return e.convertToRad=function(e){return e*(Math.PI/180)},e.getMousePos=function(e,t){var s=e.getBoundingClientRect();return{x:t.clientX-s.left,y:t.clientY-s.top}},e.getCanvas=function(e,t){var s=document.createElement("canvas");return s.width=e,s.height=t,s},e.getPixels=function(e){var t,s;if(e.getContext){t=e;try{s=t.getContext("2d")}catch(n){}}return s||(t=Utils.getCanvas(e.width,e.height),s=t.getContext("2d"),s.drawImage(e,0,0)),s.getImageData(0,0,t.width,t.height)},e}(Utils||{}),Utils=function(e){return e.isNumber=function(e){return!isNaN(e)},e}(Utils||{}),LinkedList=function(){"use strict";var e=[];this.length=function(){return e.length},this.first=function(){return e[0]},this.last=function(){return e[e.length-1]},this.buildList=function(e){for(var t=0,s=e.length;s>t;t++)0===t&&(this.first=e[t]),t===s-1&&(this.last=e[t]),e[t].prev=e[t-1],e[t].next=e[t+1],e.push(e[t])},this.append=function(t){var s=this.last();e.length>0&&(s.next=t,t.prev=s),e.push(t)},this.getEnumerator=function(){var t=-1;return{current:function(){return e[t]},next:function(){return t!==e.length-1?e[++t]:void 0},prev:function(){return 0!==t?e[t--]:void 0}}}};dependencyContainer.registerType("jQuery",$),dependencyContainer.registerType("linq",linq),dependencyContainer.registerType("Utils",Utils),dependencyContainer.registerType("EventDispatcher",EventDispatcher),dependencyContainer.registerType("LinkedList",LinkedList),registerNamespace("RenderJs.Canvas"),RenderJs.Canvas.Animation=inject().class(function(e,t){var s,n=0,i=!1,r=!1,a=!1,o=function(t){e({frameRate:t,lastTime:n,time:n+1e3/t}),n+=1e3/t};this.start=function(){i||(i=!0,r=a=!1,s=t.on("animate",o))},this.reset=function(){n=0},this.pause=function(){i&&s&&s(),i=!1,a=!0},this.stop=function(){i&&s&&(this.reset(),s()),i=!1,r=!0}}),registerNamespace("RenderJs.Canvas.Filters"),RenderJs.Canvas.Filters.Convolute=function(e,t,s){for(var n=Math.round(Math.sqrt(t.length)),i=Math.floor(n/2),r=Utils.getPixels(e),a=r.data,o=r.width,h=r.height,c=o,l=h,u=Utils.getCanvas(c,l).getContext("2d").createImageData(c,l),d=u.data,v=s?1:0,f=0;l>f;f++)for(var g=0;c>g;g++){for(var p=f,y=g,R=4*(f*c+g),J=0,x=0,C=0,m=0,w=0;n>w;w++)for(var b=0;n>b;b++){var E=p+w-i,M=y+b-i;if(E>=0&&h>E&&M>=0&&o>M){var V=4*(E*o+M),S=t[w*n+b];J+=a[V]*S,x+=a[V+1]*S,C+=a[V+2]*S,m+=a[V+3]*S}}d[R]=J,d[R+1]=x,d[R+2]=C,d[R+3]=m+v*(255-m)}return u},RenderJs.Canvas.Filters.Blur=function(e,t){return stackBlurImage(e,t)},RenderJs.Canvas.Filters.Grayscale=function(e){for(var t=Utils.getPixels(e),s=t.data,n=0;n<s.length;n+=4){var i=s[n],r=s[n+1],a=s[n+2],o=.2126*i+.7152*r+.0722*a;s[n]=s[n+1]=s[n+2]=o}return t},RenderJs.Canvas.Filters.Brightness=function(e,t){for(var s=Utils.getPixels(e),n=s.data,i=0;i<n.length;i+=4)n[i]+=t,n[i+1]+=t,n[i+2]+=t;return s},RenderJs.Canvas.Filters.Threshold=function(e,t){for(var s=Utils.getPixels(e),n=s.data,i=0;i<n.length;i+=4){var r=n[i],a=n[i+1],o=n[i+2],h=.2126*r+.7152*a+.0722*o>=t?255:0;n[i]=n[i+1]=n[i+2]=h}return s},registerNamespace("RenderJs.Canvas"),RenderJs.Canvas.Layer=inject("Utils","EventDispatcher","jQuery").class(function(e,t,s,n,i,r,a){var o=this,h=!1,c=!1,l=new t,u=0;this.canvas=document.createElement("canvas"),document.getElementById(n).appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.canvas.width=i,this.canvas.height=r,this.active=a,this.prev=null,this.next=null,this.objects=[];var d,v=function(){var e=new Date,t=1e3/(e-d);return d=e,t},f=function(e,t){t=t||Utils.getMousePos(e.target,e),l.trigger(RenderJs.Canvas.Events.click,[e,t]);for(var n=this.objects.length-1;n>=0;n--)if(RenderJs.Physics.Collisions.pointInObject(t,this.objects[n]))return this.objects[n].trigger(RenderJs.Canvas.Events.click,e),!0;this.prev&&s(this.prev.canvas).trigger("click",t)},g=function(e,t){t=t||Utils.getMousePos(e.target,e),l.trigger(RenderJs.Canvas.Events.mousemove,[e,t]);for(var n=this.objects.length-1;n>=0;n--)if(RenderJs.Physics.Collisions.pointInObject(t,this.objects[n]))return this.objects[n].trigger(RenderJs.Canvas.Events.mousemove,[e,t]),!0;this.prev&&s(this.prev.canvas).trigger("mousemove",t)},p=function(e,t){t=t||Utils.getMousePos(e.target,e),l.trigger(RenderJs.Canvas.Events.mouseenter,[e,t]);for(var n=this.objects.length-1;n>=0;n--)if(RenderJs.Physics.Collisions.pointInObject(t,this.objects[n]))return this.objects[n].trigger(RenderJs.Canvas.Events.mouseenter,[e,t]),!0;this.prev&&s(this.prev.canvas).trigger("mouseenter",t)},y=function(e,t){t=t||Utils.getMousePos(e.target,e),l.trigger(RenderJs.Canvas.Events.mouseleave,[e,t]);for(var n=this.objects.length-1;n>=0;n--)if(RenderJs.Physics.Collisions.pointInObject(t,this.objects[n]))return this.objects[n].trigger(RenderJs.Canvas.Events.mouseleave,[e,t]),!0;this.prev&&s(this.prev.canvas).trigger("mouseleave",t)},R=function(e){l.trigger(RenderJs.Canvas.Events.keydown,e)},J=function(e){l.trigger(RenderJs.Canvas.Events.keyup,e)},x=function(e){l.trigger(RenderJs.Canvas.Events.keypress,e)};s(this.canvas).on("click",function(e,t){f.call(o,e,t)}),s(this.canvas).on("mousemove",function(e,t){g.call(o,e,t)}),s(this.canvas).on("mouseenter",function(e,t){p.call(o,e,t)}),s(this.canvas).on("mouseleave",function(e,t){y.call(o,e,t)}),s(document).on("keydown",function(e){R.call(o,e)}),s(document).on("keyup",function(e){J.call(o,e)}),s(document).on("keypress",function(e){x.call(o,e)}),this.on=function(e,t){return RenderJs.Canvas.Events[e]?l.subscribe(e,t):void 0},this.addObject=function(e){if(!(e instanceof RenderJs.Canvas.Object))throw new Error("An object on the canvas should be inherited from CanvasObject!");e.layer=this,this.objects.push(e)},this.removeObject=function(e){linq(this.objects).remove(function(t){return t===e}),e.dispose(),c=!0},this.resize=function(e,t){this.canvas.width=e,this.canvas.height=t,c=!0},this.hasSprites=function(){for(var e=0,t=this.objects.length;t>e;e++)if(this.objects[e]instanceof RenderJs.Canvas.Shapes.Sprite)return!0;return!1},this.drawObjects=function(e){if(d||(d=1*new Date-1),c||(!h||l.hasSubscribers("animate")||this.hasSprites(this)||this.active)&&0!==this.objects.length){var t=v();this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var s=Math.floor(1e3/t);l.trigger("animate",t);for(var n=!0,i=0,r=this.objects.length;r>i;i++)this.objects[i].loaded||(n=!1),this.objects[i].draw(this.ctx,{frameRate:t,lastTime:u,time:u+s},e);n&&(h=!0),c&&(c=!1),u+=s}}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Events={animate:"animate",click:"click",keydown:"keydown",keyup:"keyup",keypress:"keypress",mousemove:"mousemove",mousehover:"mousehover",mouseleave:"mouseleave",collision:"collision",objectChanged:"objectChanged"},RenderJs.Canvas.Object=inject("EventDispatcher","jQuery","Utils").class(function(e,t,s,n){this.dispatcher=new e,n=n||{},this.id=s.getGuid(),this.pos=new RenderJs.Vector(n.x,n.y),this.width=n.width||0,this.height=n.height||0,this.angle=n.angle||0,this.scaleX=n.scaleX,this.scaleY=n.scaleY,this.blurRadius=n.blurRadius,this.collision=n.collision||!1,this.filters=[],this.layer=null,this.loaded=!0,this.getCenter=function(){return new RenderJs.Vector(this.pos.x+this.width/2,this.pos.y+this.height/2)},this.getCenteredRect=function(){var e=this.pos;return{x:e.x,y:e.y,width:this.width,height:this.height}},this.setfilters=function(e){this.filters=e},this.updatePosition=function(e,t){var s=RenderJs.Vector.clone(this.pos.x,this.pos.y),n=this.pos.add(new RenderJs.Vector(Math.floor(e),Math.floor(t)));this.pos=n,(s.x!==n.x||s.y!==n.y)&&this.trigger(RenderJs.Canvas.Events.objectChanged,this)},this.rotateShape=function(e){if(0!==this.angle){var t=this.getCenter();e.translate(t.x,t.y),e.rotate(s.convertToRad(this.angle)),e.translate(-t.x,-t.y)}},this.scaleShape=function(e,t,s){var n=this.getCenter();e.translate(n.x,n.y),e.scale(t,s),e.translate(-n.x,-n.y)},this.on=function(e,t){return RenderJs.Canvas.Events[e]?this.dispatcher.subscribe(e,t):void 0},this.trigger=function(e,t){RenderJs.Canvas.Events[e]&&this.dispatcher.trigger(e,t)},this.dispose=function(){this.dispatcher.dispose()}});var RenderJs=RenderJs||{};RenderJs.Canvas=RenderJs.Canvas||{},RenderJs.Canvas.Space=function(e){var t=function(e){this.stage=e.stage};t(e)},registerNamespace("RenderJs.Canvas"),RenderJs.Canvas.Stage=inject("Utils","EventDispatcher","LinkedList").class(function(e,t,s,n){var i=n.container||"viewport",r=new t;this.layers=new s,this.position=new RenderJs.Vector(-50,-50);var a=function(){for(var e=this,t=this.layers.getEnumerator();void 0!==t.next();)t.current().drawObjects(this.position);requestAnimationFrame(function(){a.call(e)})};a.call(this),this.resize=function(e,t){this.width=e,this.height=t,document.getElementById(i).style.width=this.width+"px",document.getElementById(i).style.height=this.height+"px";for(var s=this.layers.getEnumerator();void 0!==s.next();)s.current().resize(e,t)},this.onInvalidate=function(e){return r.subscribe("onInvalidate",e)},this.createLayer=function(e){var t=new RenderJs.Canvas.Layer(i,this.width,this.height,e);return this.layers.append(t),t},this.resize(n.width||1200,n.height||800)});var RenderJs=RenderJs||{};RenderJs.Canvas=RenderJs.Canvas||{},RenderJs.Canvas.Easings=RenderJs.Canvas.Easings||{},RenderJs.Canvas.Easings.BounceEaseOut=function(e,t,s,n){return(e/=n)<1/2.75?7.5625*s*e*e+t:2/2.75>e?s*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?s*(7.5625*(e-=2.25/2.75)*e+.9375)+t:s*(7.5625*(e-=2.625/2.75)*e+.984375)+t},RenderJs.Canvas.Easings.BounceEaseIn=function(e,t,s,n){return s-Kinetic.Easings.BounceEaseOut(n-e,0,s,n)+t},RenderJs.Canvas.Easings.BounceEaseInOut=function(e,t,s,n){return n/2>e?.5*Kinetic.Easings.BounceEaseIn(2*e,0,s,n)+t:.5*Kinetic.Easings.BounceEaseOut(2*e-n,0,s,n)+.5*s+t},RenderJs.Canvas.Easings.EaseIn=function(e,t,s,n){return s*(e/=n)*e+t},RenderJs.Canvas.Easings.EaseOut=function(e,t,s,n){return-s*(e/=n)*(e-2)+t},RenderJs.Canvas.Easings.EaseInOut=function(e,t,s,n){return(e/=n/2)<1?s/2*e*e+t:-s/2*(--e*(e-2)-1)+t},RenderJs.Canvas.Easings.ElasticEaseIn=function(e,t,s,n,i,r){var a=0;return 0===e?t:1===(e/=n)?t+s:(r||(r=.3*n),!i||i<Math.abs(s)?(i=s,a=r/4):a=r/(2*Math.PI)*Math.asin(s/i),-(i*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/r))+t)},RenderJs.Canvas.Easings.ElasticEaseOut=function(e,t,s,n,i,r){var a=0;return 0===e?t:2===(e/=n/2)?t+s:(r||(r=.3*n*1.5),!i||i<Math.abs(s)?(i=s,a=r/4):a=r/(2*Math.PI)*Math.asin(s/i),1>e?-.5*i*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/r)+t:i*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/r)*.5+s+t)},RenderJs.Canvas.Easings.ElasticEaseInOut=function(e,t,s,n,i,r){var a=0;return 0===e?t:2===(e/=n/2)?t+s:(r||(r=.3*n*1.5),!i||i<Math.abs(s)?(i=s,a=r/4):a=r/(2*Math.PI)*Math.asin(s/i),1>e?-.5*i*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/r)+t:i*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/r)*.5+s+t)},RenderJs.Canvas.Transition=function(e){var t=this,s=!1;this.duration=1e3*e.duration||1e3,this.shape=e.shape,this.props=e.props||{},this.origProps={};for(var n in e.props)this.origProps[n]=this.shape[n];this.easing=e.easing||RenderJs.Canvas.Easings.EaseInOut;var i=new RenderJs.Canvas.Animation(function(e){e.time>=t.duration&&i.stop();for(var n in t.props)t.shape[n]=s?t.easing(e.time,t.origProps[n]+t.props[n],-1*t.props[n],t.duration):t.easing(e.time,t.origProps[n],t.props[n],t.duration)},this.shape.layer);this.play=function(){i.start()},this.pause=function(){i.pause()},this.stop=function(){i.stop()},this.reverse=function(){s=!0,i.start()}};var RenderJs=RenderJs||{};RenderJs.Vector=function(e,t){this.x=e||0,this.y=t||0,this.set=function(e){return this.x=e.x,this.y=e.y,this},this.lengthSquared=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},this.length=function(){return Math.sqrt(this.lengthSquared())},this.length2=function(){return this.dot(this)},this.perp=function(){return new RenderJs.Vector(this.y,-this.x)},this.scale=function(e){return new RenderJs.Vector(this.x*e,this.y*e)},this.sub=function(e){return e instanceof RenderJs.Vector?new RenderJs.Vector(this.x-e.x,this.y-e.y):new RenderJs.Vector(this.x-e,this.y-e)},this.add=function(e){return e instanceof RenderJs.Vector?new RenderJs.Vector(this.x+e.x,this.y+e.y):new RenderJs.Vector(this.x+e,this.y+e)},this.dot=function(e){return this.x*e.x+this.y*e.y},this.dist=function(e){return this.sub(e).length()},this.normalize=function(){return this.scale(1/this.length())},this.angle=function(e){return this.dot(e)/(this.length()*e.length())},this.truncate=function(e){var t=Math.min(e,this.length());return t},this.rotate=function(e){var t=this.x,s=this.y;this.x=t*Math.cos(Utils.convertToRad(e))-s*Math.sin(Utils.convertToRad(e)),this.y=s*Math.cos(Utils.convertToRad(e))+t*Math.sin(Utils.convertToRad(e))},this.toString=function(e){return e?"("+Math.round(this.x)+", "+Math.round(this.y)+")":"("+this.x+", "+this.y+")"}},RenderJs.Vector.clone=function(e,t){return new RenderJs.Vector(e,t)},RenderJs.Vector.area=function(e,t,s){return(t.x-e.x)*(s.y-e.y)-(s.x-e.x)*(t.y-e.y)},RenderJs.Vector.left=function(e,t,s){return RenderJs.Vector.area(e,t,s)>0},RenderJs.Vector.leftOn=function(e,t,s){return RenderJs.Vector.area(e,t,s)>=0},RenderJs.Vector.right=function(e,t,s){return RenderJs.Vector.area(e,t,s)<0},RenderJs.Vector.rightOn=function(e,t,s){return RenderJs.Vector.area(e,t,s)<=0},RenderJs.Vector.sqdist=function(e,t){var s=t.x-e.x,n=t.y-e.y;return s*s+n*n},Scalar.eq=function(e,t,s){return s=s||0,Math.abs(e-t)<s};var RenderJs=RenderJs||{};RenderJs.Physics=RenderJs.Physics||{},RenderJs.Physics.Collisions=function(e){var t=function(e,t){"takes a point p=Pt() and an edge of two endpoints a,b=Pt() of a line segment returns boolean";var s,n=1e-5,i=Number.MAX_VALUE,r=Number.MIN_VALUE,a=0,o=t.p1,h=t.p2;o.y>h.y&&(o.set(h),h.set(o)),(e.y==o.y||e.y==h.y)&&(e.y+=n);var c=!1;return e.y>h.y||e.y<o.y||e.x>Math.max(o.x,h.x)?!1:(e.x<Math.min(o.x,h.x)?c=!0:(a=Math.abs(o.x-h.x)>r?(h.y-o.y)/(h.x-o.x):i,s=Math.abs(o.x-e.x)>r?(e.y-o.y)/(e.x-o.x):i,c=s>=a),c)},s=function(e,t){var s=e.length2(),n=t.dot(e);return 0>n?-1:n>s?1:0},n=function(e,s){for(var n=!1,i=0;i<s.rEdges.length;i++)t(e,s.rEdges[i])&&(n=!n);return n},i=function(e,t){var s=(t.pos2.y-t.pos.y)/(t.pos2.x-t.pos.x);return e.y-t.pos.y==s*(e.x-t.pos.y)},r=function(e,t){return o=t.getCenter(),Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2)<=Math.pow(this.width/2,2)},a=function(e,t){var s=e.width,n=e.height,i=t.width,r=t.height;if(0>=i||0>=r||0>=s||0>=n)return!1;var a=e.x,o=e.y,h=t.x,c=t.y;return i+=h,r+=c,s+=a,n+=o,(h>i||i>a)&&(c>r||r>o)&&(a>s||s>h)&&(o>n||n>c)},h=function(e,t){return d(t.getCenter(),e)||c(e.topEdge(),t)||c(e.rightEdge(),t)||c(e.bottomEdge(),t)||c(e.leftEdge(),t)},c=function(e,t){var s=t.getCenter(),n=t.radius,i=new RenderJs.Vector(e.pos2.x-e.pos.x,e.pos2.y-e.pos.y),r=new RenderJs.Vector(e.pos.x-s.x,e.pos.y-s.y),a=i.dot(i),o=2*r.dot(i),t=r.dot(r)-n*n,h=o*o-4*a*t;if(0>h)return!1;h=Math.sqrt(h);var c=(-o-h)/(2*a),l=(-o+h)/(2*a);return c>=0&&1>=c?!0:l>=0&&1>=l?!0:!1},l=function(e,t){var s=t.v,n=e.radius+t.radius,i=(e.pos.x-t.pos.x)*(e.pos.x-t.pos.x)+(e.pos.y-t.pos.y)*(e.pos.y-t.pos.y);if(n*n>i){{var r=Math.sqrt(i),a=n-r,o=new RenderJs.Vector(e.pos.sub(t.pos).x/r,e.pos.sub(t.pos).y/r);t.pos.sub(e.pos)}return s.add(o.scale(a/2))}return null},u=function(e,t){for(var n=e.pos.sub(t.pos),i=e.radius,r=i*i,a=t.vertices.slice(),o=a.length,h=new RenderJs.Vector(0,0),c=new RenderJs.Vector(0,0),l={overlap:Number.MAX_VALUE,overlapN:new RenderJs.Vector(0,0),overlapV:new RenderJs.Vector(0,0)},u=0;o>u;u++){var d=u===o-1?0:u+1,v=0===u?o-1:u-1,f=0,g=null;h.set(t.vertices[u]),c.set(n),c.set(c.sub(a[u])),l&&c.length2()>r&&(l.aInB=!1);var p=s(h,c);if(-1===p){h.set(t.edges[v]);var y=new RenderJs.Vector(0,0).set(n).sub(a[v]);if(p=s(h,y),1===p){var R=c.length();if(R>i)return!1;l&&(l.bInA=!1,g=c.normalize(),f=i-R)}}else if(1===p){if(h.set(t.edges[d]),c.set(n),c.set(c.sub(a[d])),p=s(h,c),-1===p){var R=c.length();if(R>i)return!1;l&&(l.bInA=!1,g=c.normalize(),f=i-R)}}else{var J=h.perp().normalize(),R=c.dot(J),x=Math.abs(R);if(R>0&&x>i)return!1;l&&(g=J,f=i-R,(R>=0||2*i>f)&&(l.bInA=!1))}g&&l&&Math.abs(f)<Math.abs(l.overlap)&&(l.overlap=f,l.overlapN=new RenderJs.Vector(0,0).set(g))}return l&&(l.a=t,l.b=e,l.overlapV=new RenderJs.Vector(0,0).set(l.overlapN).scale(l.overlap)),!0},d=function(e,t){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height};return e.AabbCollision=function(e,t){return Math.abs(e.x-t.x)<e.width+t.width&&Math.abs(e.y-t.y)<e.height+t.height?!0:!1},e.pointInObject=function(e,t){return t instanceof RenderJs.Canvas.Shapes.Rectangle?d(e,t):t instanceof RenderJs.Canvas.Shapes.Arc?r(e,t):t instanceof RenderJs.Canvas.Shapes.Polygon?n(e,t):t instanceof RenderJs.Canvas.Shapes.Line?i(e,t):!1},e.checkCollision=function(t,s,n){if(t instanceof RenderJs.Canvas.Shapes.Rectangle&&s instanceof RenderJs.Canvas.Shapes.Rectangle)return a(t,s);if(t instanceof RenderJs.Canvas.Shapes.Rectangle&&s instanceof RenderJs.Canvas.Shapes.Arc)return h(t,s);if(t instanceof RenderJs.Canvas.Shapes.Arc&&s instanceof RenderJs.Canvas.Shapes.Rectangle)return h(s,t);if(t instanceof RenderJs.Canvas.Shapes.Arc&&s instanceof RenderJs.Canvas.Shapes.Arc)return l(t,s,n);if(t instanceof RenderJs.Canvas.Shapes.Line&&s instanceof RenderJs.Canvas.Shapes.Arc)return c(t,s);if(t instanceof RenderJs.Canvas.Shapes.Arc&&s instanceof RenderJs.Canvas.Shapes.Line)return c(s,t);if(t instanceof RenderJs.Canvas.Shapes.Polygon&&s instanceof RenderJs.Canvas.Shapes.Polygon){for(var i=0;i<t.subPolys.length;i++)for(var r=0;r<s.subPolys.length;r++){var o=e.polygonCollision(t.subPolys[i],s.subPolys[r],n);if(o.intersect||o.willIntersect)return o}return null}return t instanceof RenderJs.Canvas.Shapes.Arc&&s instanceof RenderJs.Canvas.Shapes.Polygon?u(t,s,n):t instanceof RenderJs.Canvas.Shapes.Polygon&&s instanceof RenderJs.Canvas.Shapes.Arc?u(s,t,n):!1},e}(RenderJs.Physics.Collisions||{});var RenderJs=RenderJs||{};RenderJs.Physics.Collisions=function(e){e.polygonCollision=function(e,n,i){for(var r,a={intersect:!0,willIntersect:!0},o=e.edges.length,h=n.edges.length,c=1/0,l=new RenderJs.Vector,u=0,v=o+h;v>u;u++){r=o>u?e.edges[u]:n.edges[u-o];var f=new RenderJs.Vector(-r.y,r.x);f.set(f.normalize());var g=0,p=0,y=0,R=0,J=s(f,e,g,y);g=J.min,y=J.max;var x=s(f,n,p,R);p=x.min,R=x.max,t(g,y,p,R)>0&&(a.intersect=!1);var C=f.dot(i);0>C?g+=C:y+=C;var m=t(g,y,p,R);if(m>0&&(a.willIntersect=!1),!a.intersect&&!a.willIntersect)break;m=Math.abs(m),c>m&&(c=m,l=f,d=e.getCenter().sub(n.getCenter()),d.dot(l)<0&&(l=l.scale(-1)))}return a.willIntersect&&(a.minimumTranslationVector=l.scale(c)),a};var t=function(e,t,s,n){return s>e?s-t:e-n},s=function(e,t,s,n){var i=e.dot(t.vertices[0]);s=i,n=i;for(var r=0;r<t.vertices.length;r++)i=t.vertices[r].dot(e),s>i?s=i:i>n&&(n=i);return{min:s,max:n}};return e}(RenderJs.Physics.Collisions||{}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Arc=inject("Utils").base(RenderJs.Canvas.Object).class(function(e,t){"use strict";this.base(t),t=t||{},t.width=t.height=2*t.radius,2*t.radius,this.radius=t.radius,this.sAngle=e.convertToRad(t.sAngle||0),this.eAngle=e.convertToRad(t.eAngle||360),this.color=t.color,this.fillColor=t.fillColor,this.lineWidth=t.lineWidth||1,this.getCenter=function(){return new RenderJs.Vector(this.pos.x+this.width/2,this.pos.y+this.height/2)},this.pointIntersect=function(e){var t=this.getCenter();return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(this.width/2,2)},this.draw=function(e){0!==this.angle&&(e.save(),this.rotateShape(e)),e.beginPath(),e.lineWidth=this.lineWidth,e.strokeStyle=this.color,e.fillStyle=this.fillColor,e.arc(this.pos.x+this.width/2,this.pos.y+this.height/2,this.width/2,this.sAngle,this.eAngle),this.color&&e.stroke(),this.fillColor&&e.fill(),e.closePath(),0!==this.angle&&e.restore()}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Image=inject("Utils").base(RenderJs.Canvas.Object).class(function(e,t){this.base(t);var s=document.createElement("img");s.src=t.url,s.onload=function(){o.width=s.width,o.height=s.height,n=!0};var n=!1,i=t.blurRadius||0,r=void 0==t.cache?!0:t.cache,a=null,o=this;this.draw=function(e){if(n){if(!a)for(var t=0;t<this.filters.length;t++)switch(this.filters[t]){case RenderJs.Canvas.Filters.Blur:a=RenderJs.Canvas.Filters.Blur(s,i)}a?e.putImageData(a,this.pos.x,this.pos.y):e.drawImage(s,this.pos.x,this.pos.y),r||(a=null)}}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Line=inject().base(RenderJs.Canvas.Object).class(function(e){this.base({x:e.x1,y:e.y1,width:Math.abs(e.x2-e.x1),height:Math.abs(e.y2-e.y1)}),this.color="#000",this.lineWidth=1,this.pos2=new RenderJs.Vector(e.x2,e.y2),this.color=e.color,this.lineWidth=e.lineWidth||1,this.draw=function(e,t,s){var n=this.pos.sub(s),i=this.pos2.sub(s);e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(i.x,i.y),e.closePath(),e.lineWidth=this.lineWidth,e.strokeStyle=this.color,e.stroke()}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Polygon=inject("Utils").base(RenderJs.Canvas.Object).class(function(e,t){this.base(t),this.color=t.color||"#000",this.lineWidth=t.lineWidth||1,this.vertices=t.points||[],this.subPolys=[],this.edges=[],this.rEdges=[],this.buildEdges(),this.decompose=function(e,t,s,n,i,r){i=i||100,r=r||0,n=n||25,e="undefined"!=typeof e?e:[],t=t||[],s=s||[];var a=new RenderJs.Vector(0,0),o=new RenderJs.Vector(0,0),h=new RenderJs.Vector(0,0),c=0,l=0,u=0,d=0,v=0,f=0,g=0,p=new RenderJs.Canvas.Shapes.Polygon,y=new RenderJs.Canvas.Shapes.Polygon,R=this,J=this.vertices;if(J.length<3)return e;if(r++,r>i)return console.warn("quickDecomp: max level ("+i+") reached."),e;for(var x=0;x<this.vertices.length;++x)if(R.isReflex(x)){t.push(R.vertices[x]),c=l=Number.MAX_VALUE;for(var C=0;C<this.vertices.length;++C)RenderJs.Vector.left(R.at(x-1),R.at(x),R.at(C))&&RenderJs.Vector.rightOn(R.at(x-1),R.at(x),R.at(C-1))&&(h=this.getIntersectionPoint(R.at(x-1),R.at(x),R.at(C),R.at(C-1)),RenderJs.Vector.right(R.at(x+1),R.at(x),h)&&(u=RenderJs.Vector.sqdist(R.vertices[x],h),l>u&&(l=u,o=h,f=C))),RenderJs.Vector.left(R.at(x+1),R.at(x),R.at(C+1))&&RenderJs.Vector.rightOn(R.at(x+1),R.at(x),R.at(C))&&(h=this.getIntersectionPoint(R.at(x+1),R.at(x),R.at(C),R.at(C+1)),RenderJs.Vector.left(R.at(x-1),R.at(x),h)&&(u=RenderJs.Vector.sqdist(R.vertices[x],h),c>u&&(c=u,a=h,v=C)));if(f==(v+1)%this.vertices.length)h.x=(o.x+a.x)/2,h.y=(o.y+a.y)/2,s.push(h),v>x?(p.append(R,x,v+1),p.vertices.push(h),y.vertices.push(h),0!=f&&y.append(R,f,R.vertices.length),y.append(R,0,x+1)):(0!=x&&p.append(R,x,R.vertices.length),p.append(R,0,v+1),p.vertices.push(h),y.vertices.push(h),y.append(R,f,x+1));else{if(f>v&&(v+=this.vertices.length),d=Number.MAX_VALUE,f>v)return e;for(var C=f;v>=C;++C)RenderJs.Vector.leftOn(R.at(x-1),R.at(x),R.at(C))&&RenderJs.Vector.rightOn(R.at(x+1),R.at(x),R.at(C))&&(u=RenderJs.Vector.sqdist(R.at(x),R.at(C)),d>u&&(d=u,g=C%this.vertices.length));g>x?(p.append(R,x,g+1),0!==g&&y.append(R,g,J.length),y.append(R,0,x+1)):(0!==x&&p.append(R,x,J.length),p.append(R,0,g+1),y.append(R,g,x+1))}p.vertices.length<y.vertices.length?(p.decompose(e,t,s,n,i,r),y.decompose(e,t,s,n,i,r)):(y.decompose(e,t,s,n,i,r),p.decompose(e,t,s,n,i,r));for(var m=0;m<e.length;m++)e[m].buildEdges();return e}return e.push(this),e},this.append=function(e,t,s){if("undefined"==typeof t)throw new Error("From is not given!");if("undefined"==typeof s)throw new Error("To is not given!");if(t>s-1)throw new Error("lol1");if(s>e.vertices.length)throw new Error("lol2");if(0>t)throw new Error("lol3");for(var n=t;s>n;n++)this.vertices.push(e.vertices[n])},this.at=function(e){var t=this.vertices,s=t.length;return t[0>e?e%s+s:e%s]},this.first=function(){return this.vertices[0]},this.last=function(){return this.vertices[this.vertices.length-1]},this.isSimple=function(){for(var e=this.vertices,t=0;t<e.length-1;t++)for(var s=0;t-1>s;s++)if(this.segmentsIntersect(e[t],e[t+1],e[s],e[s+1]))return!1;for(var t=1;t<e.length-2;t++)if(this.segmentsIntersect(e[0],e[e.length-1],e[t],e[t+1]))return!1;return!0},this.getIntersectionPoint=function(e,t,s,n,i){i=i||0;var r=t.y-e.y,a=e.x-t.x,o=r*e.x+a*e.y,h=n.y-s.y,c=s.x-n.x,l=h*s.x+c*s.y,u=r*c-h*a;return Scalar.eq(u,0,i)?RenderJs.Vector.clone(0,0):RenderJs.Vector.clone((c*o-a*l)/u,(r*l-h*o)/u)},this.isReflex=function(e){return RenderJs.Vector.right(this.at(e-1),this.at(e),this.at(e+1))},this.makeCCW=function(){for(var e=0,t=this.vertices,s=1;s<this.vertices.length;++s)(t[s].y<t[e].y||t[s].y==t[e].y&&t[s].x>t[e].x)&&(e=s);RenderJs.Vector.left(this.at(e-1),this.at(e),this.at(e+1))||this.reverse()},this.reverse=function(){for(var e=[],t=0,s=this.vertices.length;t!==s;t++)e.push(this.vertices.pop());this.vertices=e},this.segmentsIntersect=function(e,t,s,n){var i=t.x-e.x,r=t.y-e.y,a=n.x-s.x,o=n.y-s.y;if(a*r-o*i==0)return!1;var h=(i*(s.y-e.y)+r*(e.x-s.x))/(a*r-o*i),c=(a*(e.y-s.y)+o*(s.x-e.x))/(o*i-a*r);return h>=0&&1>=h&&c>=0&&1>=c},this.buildEdges=function(){var e,t;this.edges=[],this.rEdges=[];for(var s=0;s<this.vertices.length;s++)e=this.vertices[s],t=s+1>=this.vertices.length?this.vertices[0]:this.vertices[s+1],this.edges.push(t.sub(e)),this.rEdges.push({p1:new RenderJs.Vector(e.x,e.y),p2:new RenderJs.Vector(t.x,t.y)})},this.getCenter=function(){for(var e=0,t=0,s=0;s<this.vertices.length;s++)e+=this.vertices[s].x,t+=this.vertices[s].y;return new RenderJs.Vector(e/this.vertices.length,t/this.vertices.length)},this.offset=function(){var e=2===arguments.length?new RenderJs.Vector(arguments[0],arguments[1]):arguments[0];this.pos.set(this.pos.add(e));for(var t=0;t<this.vertices.length;t++){var s=this.vertices[t];this.vertices[t].set(s.add(e))}this.subPolys=this.decompose()},this.toString=function(){for(var e="",t=0;t<this.vertices.length;t++)""!=e&&(e+=" "),e+="{"+this.vertices[t].toString(!0)+"}";return e},this.draw=function(e){for(var t=["indianred","yellow","green"],s=0;s<this.subPolys.length;s++){var n=this.subPolys[s].vertices;e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;i++)e.lineTo(n[i].x,n[i].y);e.closePath(),e.lineWidth=this.lineWidth,e.strokeStyle=this.color,e.fillStyle=t[s],e.fill(),e.stroke()}}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Rectangle=inject("Utils").base(RenderJs.Canvas.Object).class(function(e,t){this.base(t),this.color=t.color,this.fillColor=t.fillColor,this.lineWidth=t.lineWidth||1,this.draw=function(e){this.color&&e.strokeRect(this.pos.x,this.pos.y,this.width,this.height),this.fillColor&&e.fillRect(this.pos.x,this.pos.y,this.width,this.height),e.lineWidth=this.lineWidth,e.strokeStyle=this.color,e.fillStyle=this.fillColor}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Sprite=inject("Utils").base(RenderJs.Canvas.Object).class(function(e,t){this.base(t);var s=this,n=document.createElement("img");n.onload=function(){s.width=n.width,s.height=n.height,a=!0},n.src=t.url;var i,r,a=!1,o=0,h=t.frameCount,c=!1,l=!1,u=t.defAnimation,d=t.animations,v=function(e,t){o=0,c=!0,l=t,d[e]&&(r=i,i=d[e])};this.start=function(){v(u,!0)},this.setAnimation=function(e,t){v(e,t)},this.pointIntersect=function(){return!1},this.getRect=function(){var e=d[u][0];return{x:this.pos.x,y:this.pos.y,width:e[2],height:e[3]}},this.rotateShape=function(t,s){if(0!==this.angle){var n=d[u][0],i=new RenderJs.Vector(s.x+n[2]/2,s.y+n[3]/2);t.translate(i.x,i.y),t.rotate(e.convertToRad(this.angle)),t.translate(-i.x,-i.y)}},this.draw=function(e,t,s){if(a&&c){var r=this.pos.sub(s);0!==this.angle&&(e.save(),this.rotateShape(e,r));var d=i[o];e.drawImage(n,d[0],d[1],d[2],d[3],r.x,r.y,d[2],d[3]),Math.floor(t.time)%h===0&&(o=o>=i.length-1?0:o+1,0!==o||l||v(u,!0)),0!==this.angle&&e.restore()}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvdmVjdG9yLmpzIiwiZ2VuZXJhbC5qcyIsImdyYXBoaWNzLmpzIiwibnVtYmVyLmpzIiwibGlua2VkbGlzdC5qcyIsIm1haW4uanMiLCJtb2R1bGVzL2FuaW1hdGlvbi5qcyIsIm1vZHVsZXMvZmlsdGVycy5qcyIsIm1vZHVsZXMvbGF5ZXIuanMiLCJtb2R1bGVzL29iamVjdC5qcyIsIm1vZHVsZXMvc3BhY2UuanMiLCJtb2R1bGVzL3N0YWdlLmpzIiwibW9kdWxlcy90cmFuc2l0aW9uLmpzIiwibW9kdWxlcy9nYW1lL3BoeXNpY3MuanMiLCJtb2R1bGVzL2dhbWUvcG9seWdvbkNvbGxpc2lvbi5qcyIsIm1vZHVsZXMvc2hhcGVzL2FyYy5qcyIsIm1vZHVsZXMvc2hhcGVzL2ltYWdlLmpzIiwibW9kdWxlcy9zaGFwZXMvbGluZS5qcyIsIm1vZHVsZXMvc2hhcGVzL3BvbHlnb24uanMiLCJtb2R1bGVzL3NoYXBlcy9yZWN0YW5nbGUuanMiLCJtb2R1bGVzL3NoYXBlcy9zcHJpdGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBZ0lBLFFBQUEsV0NoSUEsR0FBQSxPQUFBLFNBQUEsR0E0QkEsTUExQkEsR0FBQSxRQUFBLFdBQ0EsTUFBQSx1Q0FBQSxRQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEtBQUEsU0FBQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBQ0EsT0FBQSxHQUFBLFNBQUEsT0FJQSxFQUFBLFNBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLGNBQUEsSUFFQSxPQURBLEdBQUEsS0FBQSxHQUVBLFNBQUEsRUFBQSxTQUNBLEtBQUEsRUFBQSxLQUNBLFNBQUEsRUFBQSxTQUNBLE9BQUEsRUFBQSxPQUNBLEtBQUEsRUFBQSxLQUNBLEtBQUEsRUFBQSxPQUlBLEVBQUEsTUFBQSxTQUFBLEdBRUEsSUFEQSxHQUFBLEdBQUEsR0FBQSxNQUNBLEdBQUEsTUFBQSxFQUFBLElBQUEsTUFJQSxHQUNBLFdDN0JBLE1BQUEsU0FBQSxHQUNBLFlBc0NBLE9BcENBLEdBQUEsYUFBQSxTQUFBLEdBQ0EsTUFBQSxJQUFBLEtBQUEsR0FBQSxNQUdBLEVBQUEsWUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSx1QkFDQSxRQUNBLEVBQUEsRUFBQSxRQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsUUFBQSxFQUFBLE1BSUEsRUFBQSxVQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLGNBQUEsU0FHQSxPQUZBLEdBQUEsTUFBQSxFQUNBLEVBQUEsT0FBQSxFQUNBLEdBR0EsRUFBQSxVQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsQ0FDQSxJQUFBLEVBQUEsV0FBQSxDQUNBLEVBQUEsQ0FDQSxLQUNBLEVBQUEsRUFBQSxXQUFBLE1BQ0EsTUFBQSxLQVFBLE1BTEEsS0FDQSxFQUFBLE1BQUEsVUFBQSxFQUFBLE1BQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxXQUFBLE1BQ0EsRUFBQSxVQUFBLEVBQUEsRUFBQSxJQUVBLEVBQUEsYUFBQSxFQUFBLEVBQUEsRUFBQSxNQUFBLEVBQUEsU0FHQSxHQUNBLFdDeENBLE1BQUEsU0FBQSxHQUlBLE1BRkEsR0FBQSxTQUFBLFNBQUEsR0FBQSxPQUFBLE1BQUEsSUFFQSxHQUNBLFdDTEEsV0FBQSxXQUNBLFlBQ0EsSUFBQSxLQUVBLE1BQUEsT0FBQSxXQUNBLE1BQUEsR0FBQSxRQUVBLEtBQUEsTUFBQSxXQUNBLE1BQUEsR0FBQSxJQUVBLEtBQUEsS0FBQSxXQUNBLE1BQUEsR0FBQSxFQUFBLE9BQUEsSUFHQSxLQUFBLFVBQUEsU0FBQSxHQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsSUFBQSxJQUNBLEtBQUEsTUFBQSxFQUFBLElBRUEsSUFBQSxFQUFBLElBQ0EsS0FBQSxLQUFBLEVBQUEsSUFHQSxFQUFBLEdBQUEsS0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsS0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxLQUlBLEtBQUEsT0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsTUFFQSxHQUFBLE9BQUEsSUFDQSxFQUFBLEtBQUEsRUFDQSxFQUFBLEtBQUEsR0FFQSxFQUFBLEtBQUEsSUFHQSxLQUFBLGNBQUEsV0FDQSxHQUFBLEdBQUEsRUFDQSxRQUNBLFFBQUEsV0FDQSxNQUFBLEdBQUEsSUFFQSxLQUFBLFdBQ0EsTUFBQSxLQUFBLEVBQUEsT0FBQSxFQUNBLElBQUEsR0FEQSxRQUdBLEtBQUEsV0FDQSxNQUFBLEtBQUEsRUFHQSxFQUFBLEtBSEEsVUNoREEscUJBQUEsYUFBQSxTQUFBLEdBQ0Esb0JBQUEsYUFBQSxPQUFBLE1BQ0Esb0JBQUEsYUFBQSxRQUFBLE9BQ0Esb0JBQUEsYUFBQSxrQkFBQSxpQkFDQSxvQkFBQSxhQUFBLGFBQUEsWUNOQSxrQkFBQSxtQkFFQSxTQUFBLE9BQUEsVUFBQSxTQUNBLE1BQUEsU0FBQSxFQUFBLEdBRUEsR0FDQSxHQURBLEVBQUEsRUFFQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFFQSxFQUFBLFNBQUEsR0FDQSxHQUNBLFVBQUEsRUFDQSxTQUFBLEVBQ0EsS0FBQSxFQUFBLElBQUEsSUFFQSxHQUFBLElBQUEsRUFHQSxNQUFBLE1BQUEsV0FDQSxJQUdBLEdBQUEsRUFDQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsR0FBQSxVQUFBLEtBR0EsS0FBQSxNQUFBLFdBQ0EsRUFBQSxHQUdBLEtBQUEsTUFBQSxXQUNBLEdBQUEsR0FDQSxJQUdBLEdBQUEsRUFDQSxHQUFBLEdBR0EsS0FBQSxLQUFBLFdBQ0EsR0FBQSxJQUNBLEtBQUEsUUFDQSxLQUVBLEdBQUEsRUFDQSxHQUFBLEtDaERBLGtCQUFBLDJCQUVBLFNBQUEsT0FBQSxRQUFBLFVBQUEsU0FBQSxFQUFBLEVBQUEsR0FjQSxJQUFBLEdBYkEsR0FBQSxLQUFBLE1BQUEsS0FBQSxLQUFBLEVBQUEsU0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLFVBQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsT0FFQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsTUFBQSxVQUFBLEVBQUEsR0FBQSxXQUFBLE1BQUEsZ0JBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxLQUVBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsQ0FPQSxJQUFBLEdBTkEsR0FBQSxFQUNBLEVBQUEsRUFDQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBR0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLENBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsSUFBQSxFQUFBLEdBQUEsRUFDQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUNBLEdBQUEsRUFBQSxFQUFBLEdBQUEsR0FJQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLElBQUEsR0FHQSxNQUFBLElBR0EsU0FBQSxPQUFBLFFBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLGdCQUFBLEVBQUEsSUFHQSxTQUFBLE9BQUEsUUFBQSxVQUFBLFNBQUEsR0FHQSxJQUFBLEdBRkEsR0FBQSxNQUFBLFVBQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFFQSxNQUFBLElBR0EsU0FBQSxPQUFBLFFBQUEsV0FBQSxTQUFBLEVBQUEsR0FHQSxJQUFBLEdBRkEsR0FBQSxNQUFBLFVBQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsR0FBQSxFQUNBLEVBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxJQUFBLEVBQ0EsRUFBQSxFQUFBLElBQUEsQ0FFQSxPQUFBLElBR0EsU0FBQSxPQUFBLFFBQUEsVUFBQSxTQUFBLEVBQUEsR0FHQSxJQUFBLEdBRkEsR0FBQSxNQUFBLFVBQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsR0FBQSxFQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFFQSxNQUFBLElDdEZBLGtCQUFBLG1CQUVBLFNBQUEsT0FBQSxNQUFBLE9BQUEsUUFBQSxrQkFBQSxVQUNBLE1BQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxLQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsRUFBQSxHQUFBLEdBQ0EsRUFBQSxDQUVBLE1BQUEsT0FBQSxTQUFBLGNBQUEsVUFDQSxTQUFBLGVBQUEsR0FBQSxZQUFBLEtBQUEsUUFDQSxLQUFBLElBQUEsS0FBQSxPQUFBLFdBQUEsTUFDQSxLQUFBLE9BQUEsTUFBQSxFQUNBLEtBQUEsT0FBQSxPQUFBLEVBQ0EsS0FBQSxPQUFBLEVBRUEsS0FBQSxLQUFBLEtBQ0EsS0FBQSxLQUFBLEtBR0EsS0FBQSxVQUVBLElBQUEsR0FFQSxFQUFBLFdBQ0EsR0FBQSxHQUFBLEdBQUEsTUFDQSxFQUFBLEtBQUEsRUFBQSxFQUdBLE9BREEsR0FBQSxFQUNBLEdBR0EsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsTUFBQSxZQUFBLEVBQUEsT0FBQSxHQUNBLEVBQUEsUUFBQSxTQUFBLE9BQUEsT0FBQSxPQUFBLEVBQUEsR0FDQSxLQUFBLEdBQUEsR0FBQSxLQUFBLFFBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLEdBQUEsU0FBQSxRQUFBLFdBQUEsY0FBQSxFQUFBLEtBQUEsUUFBQSxJQUVBLE1BREEsTUFBQSxRQUFBLEdBQUEsUUFBQSxTQUFBLE9BQUEsT0FBQSxNQUFBLElBQ0EsQ0FHQSxNQUFBLE1BQ0EsRUFBQSxLQUFBLEtBQUEsUUFBQSxRQUFBLFFBQUEsSUFJQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxNQUFBLFlBQUEsRUFBQSxPQUFBLEdBQ0EsRUFBQSxRQUFBLFNBQUEsT0FBQSxPQUFBLFdBQUEsRUFBQSxHQUNBLEtBQUEsR0FBQSxHQUFBLEtBQUEsUUFBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsR0FBQSxTQUFBLFFBQUEsV0FBQSxjQUFBLEVBQUEsS0FBQSxRQUFBLElBRUEsTUFEQSxNQUFBLFFBQUEsR0FBQSxRQUFBLFNBQUEsT0FBQSxPQUFBLFdBQUEsRUFBQSxLQUNBLENBR0EsTUFBQSxNQUNBLEVBQUEsS0FBQSxLQUFBLFFBQUEsUUFBQSxZQUFBLElBSUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsTUFBQSxZQUFBLEVBQUEsT0FBQSxHQUNBLEVBQUEsUUFBQSxTQUFBLE9BQUEsT0FBQSxZQUFBLEVBQUEsR0FDQSxLQUFBLEdBQUEsR0FBQSxLQUFBLFFBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLEdBQUEsU0FBQSxRQUFBLFdBQUEsY0FBQSxFQUFBLEtBQUEsUUFBQSxJQUVBLE1BREEsTUFBQSxRQUFBLEdBQUEsUUFBQSxTQUFBLE9BQUEsT0FBQSxZQUFBLEVBQUEsS0FDQSxDQUdBLE1BQUEsTUFDQSxFQUFBLEtBQUEsS0FBQSxRQUFBLFFBQUEsYUFBQSxJQUlBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLE1BQUEsWUFBQSxFQUFBLE9BQUEsR0FDQSxFQUFBLFFBQUEsU0FBQSxPQUFBLE9BQUEsWUFBQSxFQUFBLEdBQ0EsS0FBQSxHQUFBLEdBQUEsS0FBQSxRQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsSUFDQSxHQUFBLFNBQUEsUUFBQSxXQUFBLGNBQUEsRUFBQSxLQUFBLFFBQUEsSUFFQSxNQURBLE1BQUEsUUFBQSxHQUFBLFFBQUEsU0FBQSxPQUFBLE9BQUEsWUFBQSxFQUFBLEtBQ0EsQ0FHQSxNQUFBLE1BQ0EsRUFBQSxLQUFBLEtBQUEsUUFBQSxRQUFBLGFBQUEsSUFJQSxFQUFBLFNBQUEsR0FDQSxFQUFBLFFBQUEsU0FBQSxPQUFBLE9BQUEsUUFBQSxJQUdBLEVBQUEsU0FBQSxHQUNBLEVBQUEsUUFBQSxTQUFBLE9BQUEsT0FBQSxNQUFBLElBR0EsRUFBQSxTQUFBLEdBQ0EsRUFBQSxRQUFBLFNBQUEsT0FBQSxPQUFBLFNBQUEsR0FJQSxHQUFBLEtBQUEsUUFBQSxHQUFBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxLQUdBLEVBQUEsS0FBQSxRQUFBLEdBQUEsWUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEtBR0EsRUFBQSxLQUFBLFFBQUEsR0FBQSxhQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLEVBQUEsS0FHQSxFQUFBLEtBQUEsUUFBQSxHQUFBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxLQUdBLEVBQUEsVUFBQSxHQUFBLFVBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLEtBR0EsRUFBQSxVQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsS0FHQSxFQUFBLFVBQUEsR0FBQSxXQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxLQUdBLEtBQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLFVBQUEsT0FBQSxPQUFBLEdBR0EsRUFBQSxVQUFBLEVBQUEsR0FIQSxRQU9BLEtBQUEsVUFBQSxTQUFBLEdBQ0EsS0FBQSxZQUFBLFVBQUEsT0FBQSxRQUNBLEtBQUEsSUFBQSxPQUFBLGlFQUVBLEdBQUEsTUFBQSxLQUNBLEtBQUEsUUFBQSxLQUFBLElBR0EsS0FBQSxhQUFBLFNBQUEsR0FDQSxLQUFBLEtBQUEsU0FBQSxPQUFBLFNBQUEsR0FDQSxNQUFBLEtBQUEsSUFFQSxFQUFBLFVBQ0EsR0FBQSxHQUdBLEtBQUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLE9BQUEsTUFBQSxFQUNBLEtBQUEsT0FBQSxPQUFBLEVBQ0EsR0FBQSxHQUlBLEtBQUEsV0FBQSxXQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxLQUFBLFFBQUEsT0FBQSxFQUFBLEVBQUEsSUFDQSxHQUFBLEtBQUEsUUFBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLE9BQ0EsT0FBQSxDQUdBLFFBQUEsR0FJQSxLQUFBLFlBQUEsU0FBQSxHQUlBLEdBSEEsSUFDQSxFQUFBLEVBQUEsR0FBQSxNQUFBLEdBRUEsS0FBQSxHQUFBLEVBQUEsZUFBQSxZQUFBLEtBQUEsV0FBQSxPQUFBLEtBQUEsU0FBQSxJQUFBLEtBQUEsUUFBQSxPQUFBLENBSUEsR0FBQSxHQUFBLEdBQ0EsTUFBQSxJQUFBLFVBQUEsRUFBQSxFQUFBLEtBQUEsT0FBQSxNQUFBLEtBQUEsT0FBQSxPQUVBLElBQUEsR0FBQSxLQUFBLE1BQUEsSUFBQSxFQUVBLEdBQUEsUUFBQSxVQUFBLEVBRUEsS0FBQSxHQURBLElBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxLQUFBLFFBQUEsT0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLFFBQUEsR0FBQSxTQUNBLEdBQUEsR0FFQSxLQUFBLFFBQUEsR0FBQSxLQUFBLEtBQUEsS0FDQSxVQUFBLEVBQ0EsU0FBQSxFQUNBLEtBQUEsRUFBQSxHQUNBLEVBRUEsS0FDQSxHQUFBLEdBQ0EsSUFDQSxHQUFBLEdBRUEsR0FBQSxNQzFNQSxrQkFBQSwwQkFFQSxTQUFBLE9BQUEsUUFDQSxRQUFBLFVBQ0EsTUFBQSxRQUNBLFFBQUEsVUFDQSxNQUFBLFFBQ0EsU0FBQSxXQUNBLFVBQUEsWUFDQSxXQUFBLGFBQ0EsV0FBQSxhQUNBLFVBQUEsWUFDQSxjQUFBLGlCQU1BLFNBQUEsT0FBQSxPQUFBLE9BQUEsa0JBQUEsU0FBQSxTQUNBLE1BQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEtBQUEsV0FBQSxHQUFBLEdBRUEsRUFBQSxNQUNBLEtBQUEsR0FBQSxFQUFBLFVBQ0EsS0FBQSxJQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsS0FBQSxNQUFBLEVBQUEsT0FBQSxFQUNBLEtBQUEsT0FBQSxFQUFBLFFBQUEsRUFDQSxLQUFBLE1BQUEsRUFBQSxPQUFBLEVBQ0EsS0FBQSxPQUFBLEVBQUEsT0FDQSxLQUFBLE9BQUEsRUFBQSxPQUNBLEtBQUEsV0FBQSxFQUFBLFdBQ0EsS0FBQSxVQUFBLEVBQUEsWUFBQSxFQUNBLEtBQUEsV0FDQSxLQUFBLE1BQUEsS0FDQSxLQUFBLFFBQUEsRUFLQSxLQUFBLFVBQUEsV0FDQSxNQUFBLElBQUEsVUFBQSxPQUFBLEtBQUEsSUFBQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEtBQUEsT0FBQSxJQUtBLEtBQUEsZ0JBQUEsV0FDQSxHQUFBLEdBQUEsS0FBQSxHQUNBLFFBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsTUFBQSxLQUFBLE1BQUEsT0FBQSxLQUFBLFNBS0EsS0FBQSxXQUFBLFNBQUEsR0FDQSxLQUFBLFFBQUEsR0FHQSxLQUFBLGVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsT0FBQSxNQUFBLEtBQUEsSUFBQSxFQUFBLEtBQUEsSUFBQSxHQUNBLEVBQUEsS0FBQSxJQUFBLElBQUEsR0FBQSxVQUFBLE9BQUEsS0FBQSxNQUFBLEdBQUEsS0FBQSxNQUFBLElBQ0EsTUFBQSxJQUFBLEdBQ0EsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxJQUNBLEtBQUEsUUFBQSxTQUFBLE9BQUEsT0FBQSxjQUFBLE9BU0EsS0FBQSxZQUFBLFNBQUEsR0FDQSxHQUFBLElBQUEsS0FBQSxNQUFBLENBR0EsR0FBQSxHQUFBLEtBQUEsV0FDQSxHQUFBLFVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLE9BQUEsRUFBQSxhQUFBLEtBQUEsUUFDQSxFQUFBLFdBQUEsRUFBQSxHQUFBLEVBQUEsS0FTQSxLQUFBLFdBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxXQUNBLEdBQUEsVUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsTUFBQSxFQUFBLEdBQ0EsRUFBQSxXQUFBLEVBQUEsR0FBQSxFQUFBLElBR0EsS0FBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsVUFBQSxPQUFBLE9BQUEsR0FHQSxLQUFBLFdBQUEsVUFBQSxFQUFBLEdBSEEsUUFNQSxLQUFBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsU0FBQSxPQUFBLE9BQUEsSUFHQSxLQUFBLFdBQUEsUUFBQSxFQUFBLElBR0EsS0FBQSxRQUFBLFdBQ0EsS0FBQSxXQUFBLFlDMUdBLElBQUEsVUFBQSxZQUNBLFVBQUEsT0FBQSxTQUFBLFdBRUEsU0FBQSxPQUFBLE1BQUEsU0FBQSxHQUVBLEdBQUEsR0FBQSxTQUFBLEdBQ0EsS0FBQSxNQUFBLEVBQUEsTUFFQSxHQUFBLElDWEEsa0JBQUEsbUJBRUEsU0FBQSxPQUFBLE1BQUEsT0FBQSxRQUFBLGtCQUFBLGNBQ0EsTUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLEVBQUEsV0FBQSxXQUNBLEVBQUEsR0FBQSxFQUNBLE1BQUEsT0FBQSxHQUFBLEdBRUEsS0FBQSxTQUFBLEdBQUEsVUFBQSxPQUFBLElBQUEsSUFFQSxJQUFBLEdBQUEsV0FJQSxJQUhBLEdBQUEsR0FBQSxLQUVBLEVBQUEsS0FBQSxPQUFBLGdCQUNBLFNBQUEsRUFBQSxRQUNBLEVBQUEsVUFBQSxZQUFBLEtBQUEsU0FHQSx1QkFBQSxXQUNBLEVBQUEsS0FBQSxLQUdBLEdBQUEsS0FBQSxNQUVBLEtBQUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLE1BQUEsRUFDQSxLQUFBLE9BQUEsRUFDQSxTQUFBLGVBQUEsR0FBQSxNQUFBLE1BQUEsS0FBQSxNQUFBLEtBQ0EsU0FBQSxlQUFBLEdBQUEsTUFBQSxPQUFBLEtBQUEsT0FBQSxJQUVBLEtBREEsR0FBQSxHQUFBLEtBQUEsT0FBQSxnQkFDQSxTQUFBLEVBQUEsUUFDQSxFQUFBLFVBQUEsT0FBQSxFQUFBLElBSUEsS0FBQSxhQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsVUFBQSxlQUFBLElBR0EsS0FBQSxZQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxVQUFBLE9BQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxLQUFBLE9BQUEsRUFHQSxPQUZBLE1BQUEsT0FBQSxPQUFBLEdBRUEsR0FHQSxLQUFBLE9BQUEsRUFBQSxPQUFBLEtBQUEsRUFBQSxRQUFBLE1DL0NBLElBQUEsVUFBQSxZQUNBLFVBQUEsT0FBQSxTQUFBLFdBRUEsU0FBQSxPQUFBLFFBQUEsU0FBQSxPQUFBLFlBRUEsU0FBQSxPQUFBLFFBQUEsY0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsT0FBQSxHQUFBLEdBQUEsRUFBQSxLQUNBLE9BQUEsRUFBQSxFQUFBLEVBQUEsRUFFQSxFQUFBLEtBQUEsRUFDQSxHQUFBLFFBQUEsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLEVBRUEsSUFBQSxLQUFBLEVBQ0EsR0FBQSxRQUFBLEdBQUEsS0FBQSxNQUFBLEVBQUEsT0FBQSxFQUdBLEdBQUEsUUFBQSxHQUFBLE1BQUEsTUFBQSxFQUFBLFNBQUEsR0FJQSxTQUFBLE9BQUEsUUFBQSxhQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsUUFBQSxRQUFBLGNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBR0EsU0FBQSxPQUFBLFFBQUEsZ0JBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxRQUFBLFFBQUEsYUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFHQSxHQUFBLFFBQUEsUUFBQSxjQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUlBLFNBQUEsT0FBQSxRQUFBLE9BQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxHQUFBLEdBQUEsRUFBQSxHQUdBLFNBQUEsT0FBQSxRQUFBLFFBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE9BQUEsR0FBQSxHQUFBLElBQUEsRUFBQSxHQUFBLEdBR0EsU0FBQSxPQUFBLFFBQUEsVUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsT0FBQSxHQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxHQUdBLFNBQUEsT0FBQSxRQUFBLGNBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsQ0FDQSxPQUFBLEtBQUEsRUFDQSxFQUVBLEtBQUEsR0FBQSxHQUNBLEVBQUEsR0FFQSxJQUNBLEVBQUEsR0FBQSxJQUVBLEdBQUEsRUFBQSxLQUFBLElBQUEsSUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEdBR0EsRUFBQSxHQUFBLEVBQUEsS0FBQSxJQUFBLEtBQUEsS0FBQSxFQUFBLEtBRUEsRUFBQSxLQUFBLElBQUEsRUFBQSxJQUFBLEdBQUEsSUFBQSxLQUFBLElBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxLQUFBLEdBQUEsSUFBQSxJQUdBLFNBQUEsT0FBQSxRQUFBLGVBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsQ0FDQSxPQUFBLEtBQUEsRUFDQSxFQUVBLEtBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxHQUVBLElBQ0EsRUFBQSxHQUFBLEVBQUEsTUFFQSxHQUFBLEVBQUEsS0FBQSxJQUFBLElBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxHQUdBLEVBQUEsR0FBQSxFQUFBLEtBQUEsSUFBQSxLQUFBLEtBQUEsRUFBQSxHQUVBLEVBQUEsR0FDQSxHQUFBLEVBQUEsS0FBQSxJQUFBLEVBQUEsSUFBQSxHQUFBLElBQUEsS0FBQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsS0FBQSxHQUFBLEdBQUEsRUFFQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEtBQUEsR0FBQSxJQUFBLEtBQUEsSUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEtBQUEsR0FBQSxHQUFBLEdBQUEsRUFBQSxJQUdBLFNBQUEsT0FBQSxRQUFBLGlCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLENBQ0EsT0FBQSxLQUFBLEVBQ0EsRUFFQSxLQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsR0FFQSxJQUNBLEVBQUEsR0FBQSxFQUFBLE1BRUEsR0FBQSxFQUFBLEtBQUEsSUFBQSxJQUNBLEVBQUEsRUFDQSxFQUFBLEVBQUEsR0FHQSxFQUFBLEdBQUEsRUFBQSxLQUFBLElBQUEsS0FBQSxLQUFBLEVBQUEsR0FFQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEtBQUEsSUFBQSxFQUFBLElBQUEsR0FBQSxJQUFBLEtBQUEsSUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEtBQUEsR0FBQSxHQUFBLEVBRUEsRUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLEdBQUEsSUFBQSxLQUFBLElBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxLQUFBLEdBQUEsR0FBQSxHQUFBLEVBQUEsSUFLQSxTQUFBLE9BQUEsV0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBRUEsR0FBQSxDQUVBLE1BQUEsU0FBQSxJQUFBLEVBQUEsVUFBQSxJQUVBLEtBQUEsTUFBQSxFQUFBLE1BRUEsS0FBQSxNQUFBLEVBQUEsVUFDQSxLQUFBLFlBQ0EsS0FBQSxHQUFBLEtBQUEsR0FBQSxNQUNBLEtBQUEsVUFBQSxHQUFBLEtBQUEsTUFBQSxFQUdBLE1BQUEsT0FBQSxFQUFBLFFBQUEsU0FBQSxPQUFBLFFBQUEsU0FFQSxJQUFBLEdBQUEsR0FBQSxVQUFBLE9BQUEsVUFBQSxTQUFBLEdBQ0EsRUFBQSxNQUFBLEVBQUEsVUFDQSxFQUFBLE1BRUEsS0FBQSxHQUFBLEtBQUEsR0FBQSxNQUVBLEVBQUEsTUFBQSxHQURBLEVBQ0EsRUFBQSxPQUFBLEVBQUEsS0FBQSxFQUFBLFVBQUEsR0FBQSxFQUFBLE1BQUEsR0FBQSxHQUFBLEVBQUEsTUFBQSxHQUFBLEVBQUEsVUFHQSxFQUFBLE9BQUEsRUFBQSxLQUFBLEVBQUEsVUFBQSxHQUFBLEVBQUEsTUFBQSxHQUFBLEVBQUEsV0FJQSxLQUFBLE1BQUEsTUFFQSxNQUFBLEtBQUEsV0FDQSxFQUFBLFNBR0EsS0FBQSxNQUFBLFdBQ0EsRUFBQSxTQUdBLEtBQUEsS0FBQSxXQUNBLEVBQUEsUUFHQSxLQUFBLFFBQUEsV0FDQSxHQUFBLEVBQ0EsRUFBQSxTWnhLQSxJQUFBLFVBQUEsWUFFQSxVQUFBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsS0FBQSxFQUFBLEdBQUEsRUFDQSxLQUFBLEVBQUEsR0FBQSxFQUVBLEtBQUEsSUFBQSxTQUFBLEdBR0EsTUFGQSxNQUFBLEVBQUEsRUFBQSxFQUNBLEtBQUEsRUFBQSxFQUFBLEVBQ0EsTUFHQSxLQUFBLGNBQUEsV0FDQSxNQUFBLE1BQUEsSUFBQSxLQUFBLEVBQUEsR0FBQSxLQUFBLElBQUEsS0FBQSxFQUFBLElBR0EsS0FBQSxPQUFBLFdBQ0EsTUFBQSxNQUFBLEtBQUEsS0FBQSxrQkFHQSxLQUFBLFFBQUEsV0FDQSxNQUFBLE1BQUEsSUFBQSxPQUdBLEtBQUEsS0FBQSxXQUNBLE1BQUEsSUFBQSxVQUFBLE9BQUEsS0FBQSxHQUFBLEtBQUEsSUFHQSxLQUFBLE1BQUEsU0FBQSxHQUNBLE1BQUEsSUFBQSxVQUFBLE9BQUEsS0FBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLElBR0EsS0FBQSxJQUFBLFNBQUEsR0FDQSxNQUFBLGFBQUEsVUFBQSxPQUNBLEdBQUEsVUFBQSxPQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsR0FHQSxHQUFBLFVBQUEsT0FBQSxLQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsSUFJQSxLQUFBLElBQUEsU0FBQSxHQUNBLE1BQUEsYUFBQSxVQUFBLE9BQ0EsR0FBQSxVQUFBLE9BQUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxHQUdBLEdBQUEsVUFBQSxPQUFBLEtBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxJQUlBLEtBQUEsSUFBQSxTQUFBLEdBQ0EsTUFBQSxNQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEdBR0EsS0FBQSxLQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsSUFBQSxHQUFBLFVBR0EsS0FBQSxVQUFBLFdBQ0EsTUFBQSxNQUFBLE1BQUEsRUFBQSxLQUFBLFdBR0EsS0FBQSxNQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsSUFBQSxJQUFBLEtBQUEsU0FBQSxFQUFBLFdBR0EsS0FBQSxTQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxTQUNBLE9BQUEsSUFHQSxLQUFBLE9BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLEVBQ0EsRUFBQSxLQUFBLENBQ0EsTUFBQSxFQUFBLEVBQUEsS0FBQSxJQUFBLE1BQUEsYUFBQSxJQUFBLEVBQUEsS0FBQSxJQUFBLE1BQUEsYUFBQSxJQUNBLEtBQUEsRUFBQSxFQUFBLEtBQUEsSUFBQSxNQUFBLGFBQUEsSUFBQSxFQUFBLEtBQUEsSUFBQSxNQUFBLGFBQUEsS0FHQSxLQUFBLFNBQUEsU0FBQSxHQUNBLE1BQUEsR0FDQSxJQUFBLEtBQUEsTUFBQSxLQUFBLEdBQUEsS0FBQSxLQUFBLE1BQUEsS0FBQSxHQUFBLElBR0EsSUFBQSxLQUFBLEVBQUEsS0FBQSxLQUFBLEVBQUEsTUFNQSxTQUFBLE9BQUEsTUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsVUFBQSxPQUFBLEVBQUEsSUFZQSxTQUFBLE9BQUEsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE9BQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsSUFHQSxTQUFBLE9BQUEsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsVUFBQSxPQUFBLEtBQUEsRUFBQSxFQUFBLEdBQUEsR0FHQSxTQUFBLE9BQUEsT0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsVUFBQSxPQUFBLEtBQUEsRUFBQSxFQUFBLElBQUEsR0FHQSxTQUFBLE9BQUEsTUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsVUFBQSxPQUFBLEtBQUEsRUFBQSxFQUFBLEdBQUEsR0FHQSxTQUFBLE9BQUEsUUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsVUFBQSxPQUFBLEtBQUEsRUFBQSxFQUFBLElBQUEsR0FHQSxTQUFBLE9BQUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBQ0EsT0FBQSxHQUFBLEVBQUEsRUFBQSxHQWVBLE9BQUEsR0FBQSxTQUFBLEVBQUEsRUFBQSxHQUVBLE1BREEsR0FBQSxHQUFBLEVBQ0EsS0FBQSxJQUFBLEVBQUEsR0FBQSxFYTlJQSxJQUFBLFVBQUEsWUFDQSxVQUFBLFFBQUEsU0FBQSxZQUVBLFNBQUEsUUFBQSxXQUFBLFNBQUEsR0FFQSxHQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsOEZBQ0EsSUFHQSxHQUhBLEVBQUEsS0FDQSxFQUFBLE9BQUEsVUFDQSxFQUFBLE9BQUEsVUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBRUEsR0FBQSxFQUFBLEVBQUEsSUFDQSxFQUFBLElBQUEsR0FDQSxFQUFBLElBQUEsS0FFQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEtBQ0EsRUFBQSxHQUFBLEVBRUEsSUFBQSxJQUFBLENBRUEsT0FBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxJQUNBLEdBRUEsRUFBQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FHQSxFQURBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBR0EsRUFEQSxLQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUNBLEVBQUEsR0FBQSxHQUdBLElBR0EsRUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxVQUNBLEVBQUEsRUFBQSxJQUFBLEVBR0EsT0FBQSxHQUFBLEVBQ0EsR0FJQSxFQUFBLEVBQ0EsRUFJQSxHQUlBLEVBQUEsU0FBQSxFQUFBLEdBRUEsSUFBQSxHQURBLElBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsT0FBQSxJQUNBLEVBQUEsRUFBQSxFQUFBLE9BQUEsTUFDQSxHQUFBLEVBRUEsT0FBQSxJQUdBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsSUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsSUFBQSxFQUVBLE9BQUEsR0FBQSxFQUFBLEVBQUEsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxJQUdBLEVBQUEsU0FBQSxFQUFBLEdBR0EsTUFGQSxHQUFBLEVBQUEsWUFFQSxLQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsTUFBQSxFQUFBLElBR0EsRUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxNQUNBLEVBQUEsRUFBQSxPQUNBLEVBQUEsRUFBQSxNQUNBLEVBQUEsRUFBQSxNQUNBLElBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxFQUNBLE9BQUEsQ0FFQSxJQUFBLEdBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxDQU1BLE9BTEEsSUFBQSxFQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxHQUVBLEVBQUEsR0FBQSxFQUFBLEtBQ0EsRUFBQSxHQUFBLEVBQUEsS0FDQSxFQUFBLEdBQUEsRUFBQSxLQUNBLEVBQUEsR0FBQSxFQUFBLElBR0EsRUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsRUFBQSxZQUFBLElBQ0EsRUFBQSxFQUFBLFVBQUEsSUFDQSxFQUFBLEVBQUEsWUFBQSxJQUNBLEVBQUEsRUFBQSxhQUFBLElBQ0EsRUFBQSxFQUFBLFdBQUEsSUFHQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFlBQ0EsRUFBQSxFQUFBLE9BQ0EsRUFBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLElBQUEsR0FDQSxFQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxFQUFBLElBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEdBQ0EsRUFBQSxFQUFBLElBQUEsR0FBQSxFQUFBLEVBRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBRUEsSUFBQSxFQUFBLEVBRUEsT0FBQSxDQU9BLEdBQUEsS0FBQSxLQUFBLEVBS0EsSUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLEdBQ0EsSUFBQSxFQUFBLElBQUEsRUFBQSxFQVVBLE9BQUEsSUFBQSxHQUFBLEdBQUEsR0FJQSxFQUtBLEdBQUEsR0FBQSxHQUFBLEdBRUEsR0FJQSxHQUlBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFFQSxFQUFBLEVBQUEsT0FBQSxFQUFBLE9BRUEsR0FBQSxFQUFBLElBQUEsRUFBQSxFQUFBLElBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLElBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLElBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLElBQUEsRUFFQSxJQUFBLEVBQUEsRUFBQSxFQUFBLENBQ0EsQ0FBQSxHQUFBLEdBQUEsS0FBQSxLQUFBLEdBRUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLElBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLEVBQ0EsR0FBQSxJQUFBLElBQUEsRUFBQSxLQUdBLE1BQUEsR0FBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLElBRUEsTUFBQSxPQUdBLEVBQUEsU0FBQSxFQUFBLEdBZUEsSUFBQSxHQWJBLEdBQUEsRUFBQSxJQUFBLElBQUEsRUFBQSxLQUNBLEVBQUEsRUFBQSxPQUNBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxTQUFBLFFBQ0EsRUFBQSxFQUFBLE9BQ0EsRUFBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEdBQ0EsR0FDQSxRQUFBLE9BQUEsVUFDQSxTQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsR0FDQSxTQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsSUFHQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxJQUdBLEdBQUEsSUFBQSxFQUFBLFNBQUEsSUFFQSxFQUFBLElBQUEsR0FDQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsS0FJQSxHQUFBLEVBQUEsVUFBQSxJQUNBLEVBQUEsTUFBQSxFQUlBLElBQUEsR0FBQSxFQUFBLEVBQUEsRUFFQSxJQUFBLEtBQUEsRUFBQSxDQUVBLEVBQUEsSUFBQSxFQUFBLE1BQUEsR0FFQSxJQUFBLEdBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxHQUFBLElBQUEsR0FBQSxJQUFBLEVBQUEsR0FFQSxJQURBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsSUFBQSxFQUFBLENBRUEsR0FBQSxHQUFBLEVBQUEsUUFDQSxJQUFBLEVBQUEsRUFFQSxPQUFBLENBQ0EsS0FFQSxFQUFBLE1BQUEsRUFDQSxFQUFBLEVBQUEsWUFDQSxFQUFBLEVBQUEsUUFJQSxJQUFBLElBQUEsR0FPQSxHQUxBLEVBQUEsSUFBQSxFQUFBLE1BQUEsSUFFQSxFQUFBLElBQUEsR0FDQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEtBQUEsRUFBQSxDQUVBLEdBQUEsR0FBQSxFQUFBLFFBQ0EsSUFBQSxFQUFBLEVBRUEsT0FBQSxDQUNBLEtBRUEsRUFBQSxNQUFBLEVBQ0EsRUFBQSxFQUFBLFlBQ0EsRUFBQSxFQUFBLFFBSUEsQ0FHQSxHQUFBLEdBQUEsRUFBQSxPQUFBLFlBR0EsRUFBQSxFQUFBLElBQUEsR0FDQSxFQUFBLEtBQUEsSUFBQSxFQUVBLElBQUEsRUFBQSxHQUFBLEVBQUEsRUFFQSxPQUFBLENBQ0EsS0FFQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEdBR0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxLQUNBLEVBQUEsTUFBQSxJQU9BLEdBQUEsR0FBQSxLQUFBLElBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxXQUNBLEVBQUEsUUFBQSxFQUNBLEVBQUEsU0FBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEdBQUEsSUFBQSxJQVVBLE1BTEEsS0FDQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFDQSxFQUFBLFNBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxHQUFBLElBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQSxXQUVBLEdBeUZBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUNBLEVBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE9BNERBLE9BekRBLEdBQUEsY0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLE9BQ0EsS0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsUUFDQSxHQUdBLEdBR0EsRUFBQSxjQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsYUFBQSxVQUFBLE9BQUEsT0FBQSxVQUNBLEVBQUEsRUFBQSxHQUNBLFlBQUEsVUFBQSxPQUFBLE9BQUEsSUFDQSxFQUFBLEVBQUEsR0FDQSxZQUFBLFVBQUEsT0FBQSxPQUFBLFFBQ0EsRUFBQSxFQUFBLEdBQ0EsWUFBQSxVQUFBLE9BQUEsT0FBQSxLQUNBLEVBQUEsRUFBQSxJQUVBLEdBR0EsRUFBQSxlQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLFdBQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxVQUNBLE1BQUEsR0FBQSxFQUFBLEVBRUEsSUFBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLFdBQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxJQUNBLE1BQUEsR0FBQSxFQUFBLEVBQ0EsSUFBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLEtBQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxVQUNBLE1BQUEsR0FBQSxFQUFBLEVBRUEsSUFBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLEtBQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxJQUNBLE1BQUEsR0FBQSxFQUFBLEVBQUEsRUFFQSxJQUFBLFlBQUEsVUFBQSxPQUFBLE9BQUEsTUFBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLElBQ0EsTUFBQSxHQUFBLEVBQUEsRUFDQSxJQUFBLFlBQUEsVUFBQSxPQUFBLE9BQUEsS0FBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLEtBQ0EsTUFBQSxHQUFBLEVBQUEsRUFFQSxJQUFBLFlBQUEsVUFBQSxPQUFBLE9BQUEsU0FBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLFFBQUEsQ0FDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLE9BQUEsSUFDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLE9BQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLGlCQUFBLEVBQUEsU0FBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEVBQ0EsSUFBQSxFQUFBLFdBQUEsRUFBQSxjQUNBLE1BQUEsR0FHQSxNQUFBLE1BRUEsTUFBQSxhQUFBLFVBQUEsT0FBQSxPQUFBLEtBQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxRQUNBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsWUFBQSxVQUFBLE9BQUEsT0FBQSxTQUFBLFlBQUEsVUFBQSxPQUFBLE9BQUEsSUFDQSxFQUFBLEVBQUEsRUFBQSxJQUVBLEdBR0EsR0FFQSxTQUFBLFFBQUEsZUM3Y0EsSUFBQSxVQUFBLFlBQ0EsVUFBQSxRQUFBLFdBQUEsU0FBQSxHQUdBLEVBQUEsaUJBQUEsU0FBQSxFQUFBLEVBQUEsR0FhQSxJQUFBLEdBSEEsR0FUQSxHQUNBLFdBQUEsRUFDQSxlQUFBLEdBR0EsRUFBQSxFQUFBLE1BQUEsT0FDQSxFQUFBLEVBQUEsTUFBQSxPQUNBLEVBQUEsSUFDQSxFQUFBLEdBQUEsVUFBQSxPQUlBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxDQUVBLEVBREEsRUFBQSxFQUNBLEVBQUEsTUFBQSxHQUVBLEVBQUEsTUFBQSxFQUFBLEVBTUEsSUFBQSxHQUFBLEdBQUEsVUFBQSxRQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsR0FBQSxJQUFBLEVBQUEsWUFHQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxHQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsR0FFQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEdBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxJQUdBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUEsV0FBQSxFQUtBLElBQUEsR0FBQSxFQUFBLElBQUEsRUFHQSxHQUFBLEVBQ0EsR0FBQSxFQUVBLEdBQUEsQ0FJQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUlBLElBSEEsRUFBQSxJQUFBLEVBQUEsZUFBQSxJQUdBLEVBQUEsWUFBQSxFQUFBLGNBQUEsS0FLQSxHQUFBLEtBQUEsSUFBQSxHQUNBLEVBQUEsSUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUVBLEVBQUEsRUFBQSxZQUFBLElBQUEsRUFBQSxhQUNBLEVBQUEsSUFBQSxHQUFBLElBQUEsRUFBQSxFQUFBLE1BQUEsTUFTQSxNQUZBLEdBQUEsZ0JBQUEsRUFBQSx5QkFBQSxFQUFBLE1BQUEsSUFFQSxFQUtBLElBQUEsR0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUVBLEVBQUEsR0FLQSxFQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsU0FBQSxHQUNBLEdBQUEsRUFDQSxFQUFBLENBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBQ0EsRUFBQSxFQUFBLFNBQUEsR0FBQSxJQUFBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsRUFFQSxFQUFBLElBQ0EsRUFBQSxFQUlBLFFBQ0EsSUFBQSxFQUNBLElBQUEsR0FJQSxPQUFBLElBRUEsU0FBQSxRQUFBLGdCQ3RIQSxrQkFBQSwwQkFLQSxTQUFBLE9BQUEsT0FBQSxJQUFBLE9BQUEsU0FDQSxLQUFBLFNBQUEsT0FBQSxRQUNBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsWUFDQSxNQUFBLEtBQUEsR0FFQSxFQUFBLE1BQ0EsRUFBQSxNQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsT0FFQSxLQUFBLE9BQUEsRUFBQSxPQUNBLEtBQUEsT0FBQSxFQUFBLGFBQUEsRUFBQSxRQUFBLEdBQ0EsS0FBQSxPQUFBLEVBQUEsYUFBQSxFQUFBLFFBQUEsS0FDQSxLQUFBLE1BQUEsRUFBQSxNQUNBLEtBQUEsVUFBQSxFQUFBLFVBQ0EsS0FBQSxVQUFBLEVBQUEsV0FBQSxFQUtBLEtBQUEsVUFBQSxXQUNBLE1BQUEsSUFBQSxVQUFBLE9BQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxNQUFBLEVBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxPQUFBLElBTUEsS0FBQSxlQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxXQUVBLE9BQUEsTUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLE1BQUEsRUFBQSxJQVFBLEtBQUEsS0FBQSxTQUFBLEdBQ0EsSUFBQSxLQUFBLFFBQ0EsRUFBQSxPQUNBLEtBQUEsWUFBQSxJQUVBLEVBQUEsWUFDQSxFQUFBLFVBQUEsS0FBQSxVQUNBLEVBQUEsWUFBQSxLQUFBLE1BQ0EsRUFBQSxVQUFBLEtBQUEsVUFDQSxFQUFBLElBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxNQUFBLEVBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxPQUFBLEVBQUEsS0FBQSxNQUFBLEVBQUEsS0FBQSxPQUFBLEtBQUEsUUFDQSxLQUFBLE9BQ0EsRUFBQSxTQUVBLEtBQUEsV0FDQSxFQUFBLE9BR0EsRUFBQSxZQUNBLElBQUEsS0FBQSxPQUNBLEVBQUEsYUM3REEsa0JBQUEsMEJBS0EsU0FBQSxPQUFBLE9BQUEsTUFBQSxPQUFBLFNBQ0EsS0FBQSxTQUFBLE9BQUEsUUFDQSxNQUFBLFNBQUEsRUFBQSxHQUVBLEtBQUEsS0FBQSxFQUlBLElBQUEsR0FBQSxTQUFBLGNBQUEsTUFDQSxHQUFBLElBQUEsRUFBQSxJQUNBLEVBQUEsT0FBQSxXQUNBLEVBQUEsTUFBQSxFQUFBLE1BQ0EsRUFBQSxPQUFBLEVBQUEsT0FDQSxHQUFBLEVBRUEsSUFBQSxJQUFBLEVBQ0EsRUFBQSxFQUFBLFlBQUEsRUFDQSxFQUFBLFFBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxNQUNBLEVBQUEsS0FDQSxFQUFBLElBTUEsTUFBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEVBQUEsQ0FJQSxJQUFBLEVBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEtBQUEsUUFBQSxPQUFBLElBQ0EsT0FBQSxLQUFBLFFBQUEsSUFDQSxJQUFBLFVBQUEsT0FBQSxRQUFBLEtBQ0EsRUFBQSxTQUFBLE9BQUEsUUFBQSxLQUFBLEVBQUEsR0FLQSxFQUNBLEVBQUEsYUFBQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEtBQUEsSUFBQSxHQUdBLEVBQUEsVUFBQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEtBQUEsSUFBQSxHQUVBLElBQ0EsRUFBQSxVQ25EQSxrQkFBQSwwQkFLQSxTQUFBLE9BQUEsT0FBQSxLQUFBLFNBQ0EsS0FBQSxTQUFBLE9BQUEsUUFDQSxNQUFBLFNBQUEsR0FFQSxLQUFBLE1BQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsSUFDQSxPQUFBLEtBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxNQUdBLEtBQUEsTUFBQSxPQUNBLEtBQUEsVUFBQSxFQUNBLEtBQUEsS0FBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLEtBQUEsTUFBQSxFQUFBLE1BQ0EsS0FBQSxVQUFBLEVBQUEsV0FBQSxFQU9BLEtBQUEsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLElBQUEsSUFBQSxHQUNBLEVBQUEsS0FBQSxLQUFBLElBQUEsRUFDQSxHQUFBLFlBQ0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxZQUNBLEVBQUEsVUFBQSxLQUFBLFVBQ0EsRUFBQSxZQUFBLEtBQUEsTUFDQSxFQUFBLFlDckNBLGtCQUFBLDBCQUtBLFNBQUEsT0FBQSxPQUFBLFFBQUEsT0FBQSxTQUNBLEtBQUEsU0FBQSxPQUFBLFFBQ0EsTUFBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLEtBQUEsR0FFQSxLQUFBLE1BQUEsRUFBQSxPQUFBLE9BQ0EsS0FBQSxVQUFBLEVBQUEsV0FBQSxFQUNBLEtBQUEsU0FBQSxFQUFBLFdBQ0EsS0FBQSxZQUNBLEtBQUEsU0FDQSxLQUFBLFVBQ0EsS0FBQSxhQUtBLEtBQUEsVUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxJQUNBLEVBQUEsR0FBQSxFQUNBLEVBQUEsR0FBQSxHQUNBLEVBQUEsbUJBQUEsR0FBQSxLQUNBLEVBQUEsTUFDQSxFQUFBLEtBRUEsSUFBQSxHQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxHQUFBLFVBQUEsT0FBQSxPQUFBLFFBQUEsRUFBQSxHQUFBLFVBQUEsT0FBQSxPQUFBLFFBQ0EsRUFBQSxLQUNBLEVBQUEsS0FBQSxRQUVBLElBQUEsRUFBQSxPQUFBLEVBQ0EsTUFBQSxFQUlBLElBREEsSUFDQSxFQUFBLEVBRUEsTUFEQSxTQUFBLEtBQUEsMkJBQUEsRUFBQSxjQUNBLENBR0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEtBQUEsU0FBQSxTQUFBLEVBQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxDQUNBLEVBQUEsS0FBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLEVBQUEsT0FBQSxTQUdBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsU0FBQSxFQUNBLFNBQUEsT0FBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEtBQ0EsU0FBQSxPQUFBLFFBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxNQUNBLEVBQUEsS0FBQSxxQkFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsU0FBQSxPQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxLQUNBLEVBQUEsU0FBQSxPQUFBLE9BQUEsRUFBQSxTQUFBLEdBQUEsR0FDQSxFQUFBLElBQ0EsRUFBQSxFQUNBLEVBQUEsRUFDQSxFQUFBLEtBSUEsU0FBQSxPQUFBLEtBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxLQUNBLFNBQUEsT0FBQSxRQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLE1BQ0EsRUFBQSxLQUFBLHFCQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsSUFDQSxTQUFBLE9BQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEtBQ0EsRUFBQSxTQUFBLE9BQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxHQUNBLEVBQUEsSUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsSUFPQSxJQUFBLElBQUEsRUFBQSxHQUFBLEtBQUEsU0FBQSxPQUVBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEtBQUEsR0FFQSxFQUFBLEdBRUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEtBQUEsR0FDQSxFQUFBLFNBQUEsS0FBQSxHQUNBLEdBQUEsR0FFQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxRQUdBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxLQUVBLEdBQUEsR0FFQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxRQUdBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsU0FBQSxLQUFBLEdBQ0EsRUFBQSxTQUFBLEtBQUEsR0FFQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsUUFFQSxDQVNBLEdBTEEsRUFBQSxJQUNBLEdBQUEsS0FBQSxTQUFBLFFBRUEsRUFBQSxPQUFBLFVBRUEsRUFBQSxFQUNBLE1BQUEsRUFHQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsSUFBQSxFQUNBLFNBQUEsT0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEtBQ0EsU0FBQSxPQUFBLFFBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsTUFDQSxFQUFBLFNBQUEsT0FBQSxPQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxJQUNBLEVBQUEsSUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEtBQUEsU0FBQSxRQUtBLEdBQUEsR0FDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxJQUFBLEdBQ0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLFFBRUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEtBRUEsSUFBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxRQUVBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxJQUtBLEVBQUEsU0FBQSxPQUFBLEVBQUEsU0FBQSxRQUNBLEVBQUEsVUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLFVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEtBRUEsRUFBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsVUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxHQUFBLFlBRUEsT0FBQSxHQUtBLE1BRkEsR0FBQSxLQUFBLE1BRUEsR0FXQSxLQUFBLE9BQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLG1CQUFBLEdBQUEsS0FBQSxJQUFBLE9BQUEscUJBQ0EsSUFBQSxtQkFBQSxHQUFBLEtBQUEsSUFBQSxPQUFBLG1CQUVBLElBQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxJQUFBLE9BQUEsT0FDQSxJQUFBLEVBQUEsRUFBQSxTQUFBLE9BQUEsS0FBQSxJQUFBLE9BQUEsT0FDQSxJQUFBLEVBQUEsRUFBQSxLQUFBLElBQUEsT0FBQSxPQUVBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxTQUFBLEtBQUEsRUFBQSxTQUFBLEtBVUEsS0FBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxTQUNBLEVBQUEsRUFBQSxNQUNBLE9BQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQVFBLEtBQUEsTUFBQSxXQUNBLE1BQUEsTUFBQSxTQUFBLElBUUEsS0FBQSxLQUFBLFdBQ0EsTUFBQSxNQUFBLFNBQUEsS0FBQSxTQUFBLE9BQUEsSUFXQSxLQUFBLFNBQUEsV0FHQSxJQUFBLEdBRkEsR0FBQSxLQUFBLFNBRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsSUFDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQ0EsR0FBQSxLQUFBLGtCQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLElBQ0EsT0FBQSxDQU1BLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxJQUNBLEdBQUEsS0FBQSxrQkFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLElBQ0EsT0FBQSxDQUlBLFFBQUEsR0FHQSxLQUFBLHFCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxDQUNBLElBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBRUEsT0FBQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBR0EsU0FBQSxPQUFBLE1BQUEsRUFBQSxHQUZBLFNBQUEsT0FBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLElBV0EsS0FBQSxTQUFBLFNBQUEsR0FDQSxNQUFBLFVBQUEsT0FBQSxNQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsS0FBQSxHQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsS0FHQSxLQUFBLFFBQUEsV0FLQSxJQUFBLEdBSkEsR0FBQSxFQUNBLEVBQUEsS0FBQSxTQUdBLEVBQUEsRUFBQSxFQUFBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEtBQ0EsRUFBQSxFQUtBLFVBQUEsT0FBQSxLQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsS0FBQSxHQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsS0FDQSxLQUFBLFdBT0EsS0FBQSxRQUFBLFdBRUEsSUFBQSxHQURBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsS0FBQSxTQUFBLE9BQUEsSUFBQSxFQUFBLElBQ0EsRUFBQSxLQUFBLEtBQUEsU0FBQSxNQUVBLE1BQUEsU0FBQSxHQUdBLEtBQUEsa0JBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxDQUdBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUNBLE9BQUEsQ0FFQSxJQUFBLElBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxFQUVBLE9BQUEsSUFBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUdBLEtBQUEsV0FBQSxXQUNBLEdBQUEsR0FDQSxDQUNBLE1BQUEsU0FDQSxLQUFBLFNBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEtBQUEsU0FBQSxPQUFBLElBQ0EsRUFBQSxLQUFBLFNBQUEsR0FFQSxFQURBLEVBQUEsR0FBQSxLQUFBLFNBQUEsT0FDQSxLQUFBLFNBQUEsR0FFQSxLQUFBLFNBQUEsRUFBQSxHQUVBLEtBQUEsTUFBQSxLQUFBLEVBQUEsSUFBQSxJQUNBLEtBQUEsT0FBQSxNQUFBLEdBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLE1BSUEsS0FBQSxVQUFBLFdBR0EsSUFBQSxHQUZBLEdBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsS0FBQSxTQUFBLE9BQUEsSUFDQSxHQUFBLEtBQUEsU0FBQSxHQUFBLEVBQ0EsR0FBQSxLQUFBLFNBQUEsR0FBQSxDQUdBLE9BQUEsSUFBQSxVQUFBLE9BQUEsRUFBQSxLQUFBLFNBQUEsT0FBQSxFQUFBLEtBQUEsU0FBQSxTQUdBLEtBQUEsT0FBQSxXQUNBLEdBQUEsR0FBQSxJQUFBLFVBQUEsT0FBQSxHQUFBLFVBQUEsT0FBQSxVQUFBLEdBQUEsVUFBQSxJQUFBLFVBQUEsRUFDQSxNQUFBLElBQUEsSUFBQSxLQUFBLElBQUEsSUFBQSxHQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsT0FBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLEtBQUEsU0FBQSxFQUNBLE1BQUEsU0FBQSxHQUFBLElBQUEsRUFBQSxJQUFBLElBRUEsS0FBQSxTQUFBLEtBQUEsYUFHQSxLQUFBLFNBQUEsV0FHQSxJQUFBLEdBRkEsR0FBQSxHQUVBLEVBQUEsRUFBQSxFQUFBLEtBQUEsU0FBQSxPQUFBLElBQ0EsSUFBQSxJQUFBLEdBQUEsS0FDQSxHQUFBLElBQUEsS0FBQSxTQUFBLEdBQUEsVUFBQSxHQUFBLEdBR0EsT0FBQSxJQVFBLEtBQUEsS0FBQSxTQUFBLEdBRUEsSUFBQSxHQURBLElBQUEsWUFBQSxTQUFBLFNBQ0EsRUFBQSxFQUFBLEVBQUEsS0FBQSxTQUFBLE9BQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxLQUFBLFNBQUEsR0FBQSxRQUNBLEdBQUEsWUFDQSxFQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFFQSxHQUFBLFlBQ0EsRUFBQSxVQUFBLEtBQUEsVUFDQSxFQUFBLFlBQUEsS0FBQSxNQUNBLEVBQUEsVUFBQSxFQUFBLEdBQ0EsRUFBQSxPQUNBLEVBQUEsYUNqWUEsa0JBQUEsMEJBS0EsU0FBQSxPQUFBLE9BQUEsVUFBQSxPQUFBLFNBQ0EsS0FBQSxTQUFBLE9BQUEsUUFDQSxNQUFBLFNBQUEsRUFBQSxHQUVBLEtBQUEsS0FBQSxHQUNBLEtBQUEsTUFBQSxFQUFBLE1BQ0EsS0FBQSxVQUFBLEVBQUEsVUFDQSxLQUFBLFVBQUEsRUFBQSxXQUFBLEVBTUEsS0FBQSxLQUFBLFNBQUEsR0FDQSxLQUFBLE9BQ0EsRUFBQSxXQUFBLEtBQUEsSUFBQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEtBQUEsTUFBQSxLQUFBLFFBRUEsS0FBQSxXQUNBLEVBQUEsU0FBQSxLQUFBLElBQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLE1BQUEsS0FBQSxRQUVBLEVBQUEsVUFBQSxLQUFBLFVBQ0EsRUFBQSxZQUFBLEtBQUEsTUFDQSxFQUFBLFVBQUEsS0FBQSxhQzNCQSxrQkFBQSwwQkFLQSxTQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsU0FDQSxLQUFBLFNBQUEsT0FBQSxRQUNBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsS0FBQSxLQUFBLEVBS0EsSUFBQSxHQUFBLEtBQ0EsRUFBQSxTQUFBLGNBQUEsTUFDQSxHQUFBLE9BQUEsV0FDQSxFQUFBLE1BQUEsRUFBQSxNQUNBLEVBQUEsT0FBQSxFQUFBLE9BQ0EsR0FBQSxHQUVBLEVBQUEsSUFBQSxFQUFBLEdBQ0EsSUFNQSxHQUNBLEVBUEEsR0FBQSxFQUNBLEVBQUEsRUFDQSxFQUFBLEVBQUEsV0FDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEVBQUEsRUFBQSxhQUdBLEVBQUEsRUFBQSxXQUVBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUNBLEdBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxLQUdBLEVBQUEsRUFDQSxFQUFBLEVBQUEsSUFJQSxNQUFBLE1BQUEsV0FDQSxFQUFBLEdBQUEsSUFHQSxLQUFBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLElBR0EsS0FBQSxlQUFBLFdBQ0EsT0FBQSxHQUdBLEtBQUEsUUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFDQSxRQUFBLEVBQUEsS0FBQSxJQUFBLEVBQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxPQUFBLEVBQUEsS0FHQSxLQUFBLFlBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxJQUFBLEtBQUEsTUFBQSxDQUdBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsR0FBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxPQUFBLEVBQUEsYUFBQSxLQUFBLFFBQ0EsRUFBQSxXQUFBLEVBQUEsR0FBQSxFQUFBLEtBT0EsS0FBQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsQ0FJQSxHQUFBLEdBQUEsS0FBQSxJQUFBLElBQUEsRUFFQSxLQUFBLEtBQUEsUUFDQSxFQUFBLE9BQ0EsS0FBQSxZQUFBLEVBQUEsR0FHQSxJQUFBLEdBQUEsRUFBQSxFQUVBLEdBQUEsVUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsS0FBQSxNQUFBLEVBQUEsTUFBQSxJQUFBLElBQ0EsRUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLElBQUEsR0FBQSxHQUNBLEVBQUEsR0FBQSxJQUdBLElBQUEsS0FBQSxPQUNBLEVBQUEiLCJmaWxlIjoiY2FudmFzUmVuZGVyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBSZW5kZXJKcyA9IFJlbmRlckpzIHx8IHt9O1xyXG5cclxuUmVuZGVySnMuVmVjdG9yID0gZnVuY3Rpb24gKHgsIHkpIHtcclxuICAgIHRoaXMueCA9IHggfHwgMDtcclxuICAgIHRoaXMueSA9IHkgfHwgMDtcclxuXHJcbiAgICB0aGlzLnNldCA9IGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgdGhpcy54ID0gdi54O1xyXG4gICAgICAgIHRoaXMueSA9IHYueTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5sZW5ndGhTcXVhcmVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnBvdyh0aGlzLngsIDIpICsgTWF0aC5wb3codGhpcy55LCAyKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5sZW5ndGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLmxlbmd0aFNxdWFyZWQoKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMubGVuZ3RoMiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kb3QodGhpcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucGVycCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJlbmRlckpzLlZlY3Rvcih0aGlzLnksIC10aGlzLngpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNjYWxlID0gZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJlbmRlckpzLlZlY3Rvcih0aGlzLnggKiBzLCB0aGlzLnkgKiBzKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zdWIgPSBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIGlmICh2IGluc3RhbmNlb2YgUmVuZGVySnMuVmVjdG9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVuZGVySnMuVmVjdG9yKHRoaXMueCAtIHYueCwgdGhpcy55IC0gdi55KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVuZGVySnMuVmVjdG9yKHRoaXMueCAtIHYsIHRoaXMueSAtIHYpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hZGQgPSBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIGlmICh2IGluc3RhbmNlb2YgUmVuZGVySnMuVmVjdG9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVuZGVySnMuVmVjdG9yKHRoaXMueCArIHYueCwgdGhpcy55ICsgdi55KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVuZGVySnMuVmVjdG9yKHRoaXMueCArIHYsIHRoaXMueSArIHYpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kb3QgPSBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnggKiB2LnggKyB0aGlzLnkgKiB2Lnk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGlzdCA9IGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ViKHYpLmxlbmd0aCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zY2FsZSgxIC8gdGhpcy5sZW5ndGgoKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYW5nbGUgPSBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvdCh2KSAvICh0aGlzLmxlbmd0aCgpICogdi5sZW5ndGgoKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudHJ1bmNhdGUgPSBmdW5jdGlvbiAobWF4KSB7XHJcbiAgICAgICAgdmFyIGxlbmd0aCA9IE1hdGgubWluKG1heCwgdGhpcy5sZW5ndGgoKSk7XHJcbiAgICAgICAgcmV0dXJuIGxlbmd0aDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5yb3RhdGUgPSBmdW5jdGlvbiAoYW5nbGUpIHtcclxuICAgICAgICB2YXIgeCA9IHRoaXMueDtcclxuICAgICAgICB2YXIgeSA9IHRoaXMueTtcclxuICAgICAgICB0aGlzLnggPSB4ICogIE1hdGguY29zKFV0aWxzLmNvbnZlcnRUb1JhZChhbmdsZSkpIC0geSAqIE1hdGguc2luKFV0aWxzLmNvbnZlcnRUb1JhZChhbmdsZSkpO1xyXG4gICAgICAgIHRoaXMueSA9IHkgKiAgTWF0aC5jb3MoVXRpbHMuY29udmVydFRvUmFkKGFuZ2xlKSkgKyB4ICogTWF0aC5zaW4oVXRpbHMuY29udmVydFRvUmFkKGFuZ2xlKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudG9TdHJpbmcgPSBmdW5jdGlvbiAocm91bmRlZCkge1xyXG4gICAgICAgIGlmIChyb3VuZGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIihcIiArIE1hdGgucm91bmQodGhpcy54KSArIFwiLCBcIiArIE1hdGgucm91bmQodGhpcy55KSArIFwiKVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiKFwiICsgdGhpcy54ICsgXCIsIFwiICsgdGhpcy55ICsgXCIpXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbn07XHJcblxyXG5SZW5kZXJKcy5WZWN0b3IuY2xvbmUgPSBmdW5jdGlvbiAoeCwgeSkge1xyXG4gICAgcmV0dXJuIG5ldyBSZW5kZXJKcy5WZWN0b3IoeCwgeSk7XHJcbn07XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBhcmVhIG9mIGEgdHJpYW5nbGUgc3Bhbm5lZCBieSB0aGUgdGhyZWUgZ2l2ZW4gcG9pbnRzLiBOb3RlIHRoYXQgdGhlIGFyZWEgd2lsbCBiZSBuZWdhdGl2ZSBpZiB0aGUgcG9pbnRzIGFyZSBub3QgZ2l2ZW4gaW4gY291bnRlci1jbG9ja3dpc2Ugb3JkZXIuXHJcbiAqIEBzdGF0aWNcclxuICogQG1ldGhvZCBhcmVhXHJcbiAqIEBwYXJhbSAge0FycmF5fSBhXHJcbiAqIEBwYXJhbSAge0FycmF5fSBiXHJcbiAqIEBwYXJhbSAge0FycmF5fSBjXHJcbiAqIEByZXR1cm4ge051bWJlcn1cclxuICovXHJcblJlbmRlckpzLlZlY3Rvci5hcmVhID0gZnVuY3Rpb24gKGEsIGIsIGMpIHtcclxuICAgIHJldHVybiAoKChiLnggLSBhLngpICogKGMueSAtIGEueSkpIC0gKChjLnggLSBhLngpICogKGIueSAtIGEueSkpKTtcclxufTtcclxuXHJcblJlbmRlckpzLlZlY3Rvci5sZWZ0ID0gZnVuY3Rpb24gKGEsIGIsIGMpIHtcclxuICAgIHJldHVybiBSZW5kZXJKcy5WZWN0b3IuYXJlYShhLCBiLCBjKSA+IDA7XHJcbn07XHJcblxyXG5SZW5kZXJKcy5WZWN0b3IubGVmdE9uID0gZnVuY3Rpb24gKGEsIGIsIGMpIHtcclxuICAgIHJldHVybiBSZW5kZXJKcy5WZWN0b3IuYXJlYShhLCBiLCBjKSA+PSAwO1xyXG59O1xyXG5cclxuUmVuZGVySnMuVmVjdG9yLnJpZ2h0ID0gZnVuY3Rpb24gKGEsIGIsIGMpIHtcclxuICAgIHJldHVybiBSZW5kZXJKcy5WZWN0b3IuYXJlYShhLCBiLCBjKSA8IDA7XHJcbn07XHJcblxyXG5SZW5kZXJKcy5WZWN0b3IucmlnaHRPbiA9IGZ1bmN0aW9uIChhLCBiLCBjKSB7XHJcbiAgICByZXR1cm4gUmVuZGVySnMuVmVjdG9yLmFyZWEoYSwgYiwgYykgPD0gMDtcclxufTtcclxuXHJcblJlbmRlckpzLlZlY3Rvci5zcWRpc3QgPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgdmFyIGR4ID0gYi54IC0gYS54O1xyXG4gICAgdmFyIGR5ID0gYi55IC0gYS55O1xyXG4gICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xyXG59O1xyXG5cclxuZnVuY3Rpb24gU2NhbGFyKCkge1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgdHdvIHNjYWxhcnMgYXJlIGVxdWFsXHJcbiAqIEBzdGF0aWNcclxuICogQG1ldGhvZCBlcVxyXG4gKiBAcGFyYW0gIHtOdW1iZXJ9IGFcclxuICogQHBhcmFtICB7TnVtYmVyfSBiXHJcbiAqIEBwYXJhbSAge051bWJlcn0gW3ByZWNpc2lvbl1cclxuICogQHJldHVybiB7Qm9vbGVhbn1cclxuICovXHJcblNjYWxhci5lcSA9IGZ1bmN0aW9uIChhLCBiLCBwcmVjaXNpb24pIHtcclxuICAgIHByZWNpc2lvbiA9IHByZWNpc2lvbiB8fCAwO1xyXG4gICAgcmV0dXJuIE1hdGguYWJzKGEgLSBiKSA8IHByZWNpc2lvbjtcclxufTsiLCJ2YXIgVXRpbHMgPSAoZnVuY3Rpb24gKG1vZHVsZSkge1xyXG5cclxuICAgIG1vZHVsZS5nZXRHdWlkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgIHZhciByID0gTWF0aC5yYW5kb20oKSAqIDE2IHwgMCwgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCk7XHJcbiAgICAgICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgbW9kdWxlLnBhcnNlVXJsID0gZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgIHZhciBwYXJzZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgcGFyc2VyLmhyZWYgPSB1cmw7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcHJvdG9jb2w6IHBhcnNlci5wcm90b2NvbCxcclxuICAgICAgICAgICAgcG9ydDogcGFyc2VyLnBvcnQsXHJcbiAgICAgICAgICAgIHBhdGhuYW1lOiBwYXJzZXIucGF0aG5hbWUsXHJcbiAgICAgICAgICAgIHNlYXJjaDogcGFyc2VyLnNlYXJjaCxcclxuICAgICAgICAgICAgaGFzaDogcGFyc2VyLmhhc2gsXHJcbiAgICAgICAgICAgIGhvc3Q6IHBhcnNlci5ob3N0XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgbW9kdWxlLnNsZWVwID0gZnVuY3Rpb24gKHNlY29uZHMpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgd2hpbGUgKG5ldyBEYXRlKCkgLSBkYXRlIDwgc2Vjb25kcyAqIDEwMDApXHJcbiAgICAgICAgeyB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBtb2R1bGU7XHJcbn0oVXRpbHMgfHwge30pKTsiLCJ2YXIgVXRpbHMgPSAoZnVuY3Rpb24gKG1vZHVsZSkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgbW9kdWxlLmNvbnZlcnRUb1JhZCA9IGZ1bmN0aW9uIChkZWcpIHtcclxuICAgICAgICByZXR1cm4gZGVnICogKE1hdGguUEkgLyAxODApO1xyXG4gICAgfTtcclxuXHJcbiAgICBtb2R1bGUuZ2V0TW91c2VQb3MgPSBmdW5jdGlvbiAoY2FudmFzLCBldnQpIHtcclxuICAgICAgICB2YXIgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB4OiBldnQuY2xpZW50WCAtIHJlY3QubGVmdCxcclxuICAgICAgICAgICAgeTogZXZ0LmNsaWVudFkgLSByZWN0LnRvcFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmdldENhbnZhcyA9IGZ1bmN0aW9uICh3LCBoKSB7XHJcbiAgICAgICAgdmFyIGMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICBjLndpZHRoID0gdztcclxuICAgICAgICBjLmhlaWdodCA9IGg7XHJcbiAgICAgICAgcmV0dXJuIGM7XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmdldFBpeGVscyA9IGZ1bmN0aW9uIChpbWcpIHtcclxuICAgICAgICB2YXIgYywgY3R4O1xyXG4gICAgICAgIGlmIChpbWcuZ2V0Q29udGV4dCkge1xyXG4gICAgICAgICAgICBjID0gaW1nO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY3R4ID0gYy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFjdHgpIHtcclxuICAgICAgICAgICAgYyA9IFV0aWxzLmdldENhbnZhcyhpbWcud2lkdGgsIGltZy5oZWlnaHQpO1xyXG4gICAgICAgICAgICBjdHggPSBjLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgYy53aWR0aCwgYy5oZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBtb2R1bGU7XHJcbn0oVXRpbHMgfHwge30pKTsiLCJ2YXIgVXRpbHMgPSAoZnVuY3Rpb24gKG1vZHVsZSkge1xyXG5cclxuICAgIG1vZHVsZS5pc051bWJlciA9IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gIWlzTmFOKHZhbHVlKTsgfVxyXG5cclxuICAgIHJldHVybiBtb2R1bGU7XHJcbn0oVXRpbHMgfHwge30pKTtcclxuIiwidmFyIExpbmtlZExpc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHZhciBub2RlcyA9IFtdO1xyXG5cclxuICAgIHRoaXMubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBub2Rlcy5sZW5ndGg7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5maXJzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbm9kZXNbMF07XHJcbiAgICB9O1xyXG4gICAgdGhpcy5sYXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBub2Rlc1tub2Rlcy5sZW5ndGggLSAxXTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5idWlsZExpc3QgPSBmdW5jdGlvbiAobm9kZXMpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gbm9kZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlyc3QgPSBub2Rlc1tpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaSA9PT0gbGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0ID0gbm9kZXNbaV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5vZGVzW2ldLnByZXYgPSBub2Rlc1tpIC0gMV07XHJcbiAgICAgICAgICAgIG5vZGVzW2ldLm5leHQgPSBub2Rlc1tpICsgMV07XHJcbiAgICAgICAgICAgIG5vZGVzLnB1c2gobm9kZXNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmFwcGVuZCA9IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgdmFyIGxhc3QgPSB0aGlzLmxhc3QoKTtcclxuXHJcbiAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGFzdC5uZXh0ID0gbm9kZTtcclxuICAgICAgICAgICAgbm9kZS5wcmV2ID0gbGFzdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbm9kZXMucHVzaChub2RlKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nZXRFbnVtZXJhdG9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2Rlc1tpbmRleF07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gbm9kZXMubGVuZ3RoIC0gMSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVzWysraW5kZXhdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwcmV2OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZXNbaW5kZXgtLV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfTtcclxufSIsIi8vXHJcbi8vUmVnaXN0ZXIgdHlwZXNcclxuZGVwZW5kZW5jeUNvbnRhaW5lci5yZWdpc3RlclR5cGUoXCJqUXVlcnlcIiwgJCk7XHJcbmRlcGVuZGVuY3lDb250YWluZXIucmVnaXN0ZXJUeXBlKFwibGlucVwiLCBsaW5xKTtcclxuZGVwZW5kZW5jeUNvbnRhaW5lci5yZWdpc3RlclR5cGUoXCJVdGlsc1wiLCBVdGlscyk7XHJcbmRlcGVuZGVuY3lDb250YWluZXIucmVnaXN0ZXJUeXBlKFwiRXZlbnREaXNwYXRjaGVyXCIsIEV2ZW50RGlzcGF0Y2hlcik7XHJcbmRlcGVuZGVuY3lDb250YWluZXIucmVnaXN0ZXJUeXBlKFwiTGlua2VkTGlzdFwiLCBMaW5rZWRMaXN0KTsiLCJyZWdpc3Rlck5hbWVzcGFjZShcIlJlbmRlckpzLkNhbnZhc1wiKTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5BbmltYXRpb24gPSBpbmplY3QoKVxyXG4gICAgLmNsYXNzKGZ1bmN0aW9uIChoYW5kbGVyLCBsYXllcikge1xyXG5cclxuICAgICAgICB2YXIgdGltZSA9IDA7XHJcbiAgICAgICAgdmFyIHN1YnNjcmliZXI7XHJcbiAgICAgICAgdmFyIHN0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgc3RvcHBlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBwYXVzZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIGFuaW1hdGlvbiA9IGZ1bmN0aW9uIChmcmFtZVJhdGUpIHtcclxuICAgICAgICAgICAgaGFuZGxlcih7XHJcbiAgICAgICAgICAgICAgICBmcmFtZVJhdGU6IGZyYW1lUmF0ZSxcclxuICAgICAgICAgICAgICAgIGxhc3RUaW1lOiB0aW1lLFxyXG4gICAgICAgICAgICAgICAgdGltZTogdGltZSArIDEwMDAgLyBmcmFtZVJhdGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRpbWUgKz0gMTAwMCAvIGZyYW1lUmF0ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoc3RhcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBzdG9wcGVkID0gcGF1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHN1YnNjcmliZXIgPSBsYXllci5vbihcImFuaW1hdGVcIiwgYW5pbWF0aW9uKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aW1lID0gMDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnBhdXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoc3RhcnRlZCAmJiBzdWJzY3JpYmVyKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcGF1c2VkID0gdHJ1ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnN0b3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChzdGFydGVkICYmIHN1YnNjcmliZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHN0b3BwZWQgPSB0cnVlO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTsiLCJyZWdpc3Rlck5hbWVzcGFjZShcIlJlbmRlckpzLkNhbnZhcy5GaWx0ZXJzXCIpO1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLkZpbHRlcnMuQ29udm9sdXRlID0gZnVuY3Rpb24gKGltYWdlLCB3ZWlnaHRzLCBvcGFxdWUpIHtcclxuICAgIHZhciBzaWRlID0gTWF0aC5yb3VuZChNYXRoLnNxcnQod2VpZ2h0cy5sZW5ndGgpKTtcclxuICAgIHZhciBoYWxmU2lkZSA9IE1hdGguZmxvb3Ioc2lkZSAvIDIpO1xyXG4gICAgdmFyIHBpeGVscyA9IFV0aWxzLmdldFBpeGVscyhpbWFnZSk7XHJcbiAgICB2YXIgc3JjID0gcGl4ZWxzLmRhdGE7XHJcbiAgICB2YXIgc3cgPSBwaXhlbHMud2lkdGg7XHJcbiAgICB2YXIgc2ggPSBwaXhlbHMuaGVpZ2h0O1xyXG4gICAgLy8gcGFkIG91dHB1dCBieSB0aGUgY29udm9sdXRpb24gbWF0cml4XHJcbiAgICB2YXIgdyA9IHN3O1xyXG4gICAgdmFyIGggPSBzaDtcclxuICAgIHZhciBvdXRwdXQgPSBVdGlscy5nZXRDYW52YXModywgaCkuZ2V0Q29udGV4dChcIjJkXCIpLmNyZWF0ZUltYWdlRGF0YSh3LCBoKTtcclxuICAgIHZhciBkc3QgPSBvdXRwdXQuZGF0YTtcclxuICAgIC8vIGdvIHRocm91Z2ggdGhlIGRlc3RpbmF0aW9uIGltYWdlIHBpeGVsc1xyXG4gICAgdmFyIGFscGhhRmFjID0gb3BhcXVlID8gMSA6IDA7XHJcbiAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7IHkrKykge1xyXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrKSB7XHJcbiAgICAgICAgICAgIHZhciBzeSA9IHk7XHJcbiAgICAgICAgICAgIHZhciBzeCA9IHg7XHJcbiAgICAgICAgICAgIHZhciBkc3RPZmYgPSAoeSAqIHcgKyB4KSAqIDQ7XHJcbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgd2VpZ2hlZCBzdW0gb2YgdGhlIHNvdXJjZSBpbWFnZSBwaXhlbHMgdGhhdFxyXG4gICAgICAgICAgICAvLyBmYWxsIHVuZGVyIHRoZSBjb252b2x1dGlvbiBtYXRyaXhcclxuICAgICAgICAgICAgdmFyIHIgPSAwLCBnID0gMCwgYiA9IDAsIGEgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBjeSA9IDA7IGN5IDwgc2lkZTsgY3krKykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY3ggPSAwOyBjeCA8IHNpZGU7IGN4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2N5ID0gc3kgKyBjeSAtIGhhbGZTaWRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzY3ggPSBzeCArIGN4IC0gaGFsZlNpZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjeSA+PSAwICYmIHNjeSA8IHNoICYmIHNjeCA+PSAwICYmIHNjeCA8IHN3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcmNPZmYgPSAoc2N5ICogc3cgKyBzY3gpICogNDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHd0ID0gd2VpZ2h0c1tjeSAqIHNpZGUgKyBjeF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gc3JjW3NyY09mZl0gKiB3dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZyArPSBzcmNbc3JjT2ZmICsgMV0gKiB3dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYiArPSBzcmNbc3JjT2ZmICsgMl0gKiB3dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYSArPSBzcmNbc3JjT2ZmICsgM10gKiB3dDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZHN0W2RzdE9mZl0gPSByO1xyXG4gICAgICAgICAgICBkc3RbZHN0T2ZmICsgMV0gPSBnO1xyXG4gICAgICAgICAgICBkc3RbZHN0T2ZmICsgMl0gPSBiO1xyXG4gICAgICAgICAgICBkc3RbZHN0T2ZmICsgM10gPSBhICsgYWxwaGFGYWMgKiAoMjU1IC0gYSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dHB1dDtcclxufVxyXG5cclxuUmVuZGVySnMuQ2FudmFzLkZpbHRlcnMuQmx1ciA9IGZ1bmN0aW9uIChpbWFnZSwgYmx1clJhZGl1cykge1xyXG4gICAgcmV0dXJuIHN0YWNrQmx1ckltYWdlKGltYWdlLCBibHVyUmFkaXVzKTtcclxufVxyXG5cclxuUmVuZGVySnMuQ2FudmFzLkZpbHRlcnMuR3JheXNjYWxlID0gZnVuY3Rpb24gKGltYWdlLCBhcmdzKSB7XHJcbiAgICB2YXIgcGl4ZWxzID0gVXRpbHMuZ2V0UGl4ZWxzKGltYWdlKTtcclxuICAgIHZhciBkID0gcGl4ZWxzLmRhdGE7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGQubGVuZ3RoOyBpICs9IDQpIHtcclxuICAgICAgICB2YXIgciA9IGRbaV07XHJcbiAgICAgICAgdmFyIGcgPSBkW2kgKyAxXTtcclxuICAgICAgICB2YXIgYiA9IGRbaSArIDJdO1xyXG4gICAgICAgIC8vIENJRSBsdW1pbmFuY2UgZm9yIHRoZSBSR0JcclxuICAgICAgICB2YXIgdiA9IDAuMjEyNiAqIHIgKyAwLjcxNTIgKiBnICsgMC4wNzIyICogYjtcclxuICAgICAgICBkW2ldID0gZFtpICsgMV0gPSBkW2kgKyAyXSA9IHZcclxuICAgIH1cclxuICAgIHJldHVybiBwaXhlbHM7XHJcbn07XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRmlsdGVycy5CcmlnaHRuZXNzID0gZnVuY3Rpb24gKGltYWdlLCBhZGp1c3RtZW50KSB7XHJcbiAgICB2YXIgcGl4ZWxzID0gVXRpbHMuZ2V0UGl4ZWxzKGltYWdlKTtcclxuICAgIHZhciBkID0gcGl4ZWxzLmRhdGE7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGQubGVuZ3RoOyBpICs9IDQpIHtcclxuICAgICAgICBkW2ldICs9IGFkanVzdG1lbnQ7XHJcbiAgICAgICAgZFtpICsgMV0gKz0gYWRqdXN0bWVudDtcclxuICAgICAgICBkW2kgKyAyXSArPSBhZGp1c3RtZW50O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBpeGVscztcclxufTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5GaWx0ZXJzLlRocmVzaG9sZCA9IGZ1bmN0aW9uIChpbWFnZSwgdGhyZXNob2xkKSB7XHJcbiAgICB2YXIgcGl4ZWxzID0gVXRpbHMuZ2V0UGl4ZWxzKGltYWdlKTtcclxuICAgIHZhciBkID0gcGl4ZWxzLmRhdGE7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGQubGVuZ3RoOyBpICs9IDQpIHtcclxuICAgICAgICB2YXIgciA9IGRbaV07XHJcbiAgICAgICAgdmFyIGcgPSBkW2kgKyAxXTtcclxuICAgICAgICB2YXIgYiA9IGRbaSArIDJdO1xyXG4gICAgICAgIHZhciB2ID0gKDAuMjEyNiAqIHIgKyAwLjcxNTIgKiBnICsgMC4wNzIyICogYiA+PSB0aHJlc2hvbGQpID8gMjU1IDogMDtcclxuICAgICAgICBkW2ldID0gZFtpICsgMV0gPSBkW2kgKyAyXSA9IHZcclxuICAgIH1cclxuICAgIHJldHVybiBwaXhlbHM7XHJcbn07XHJcbiIsInJlZ2lzdGVyTmFtZXNwYWNlKFwiUmVuZGVySnMuQ2FudmFzXCIpO1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLkxheWVyID0gaW5qZWN0KFwiVXRpbHNcIiwgXCJFdmVudERpc3BhdGNoZXJcIiwgXCJqUXVlcnlcIilcclxuICAgIC5jbGFzcyhmdW5jdGlvbiAodXRpbHMsIGRpc3BhdGNoZXIsICQsIGNvbnRhaW5lciwgd2lkdGgsIGhlaWdodCwgYWN0aXZlKSB7XHJcblxyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdmFyIF9pbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBfZm9yY2VSZW5kZXIgPSBmYWxzZTtcclxuICAgICAgICB2YXIgX2Rpc3BhdGNoZXIgPSBuZXcgZGlzcGF0Y2hlcigpO1xyXG4gICAgICAgIHZhciBfdGltZSA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXIpLmFwcGVuZENoaWxkKHRoaXMuY2FudmFzKTtcclxuICAgICAgICB0aGlzLmN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICB0aGlzLmFjdGl2ZSA9IGFjdGl2ZTtcclxuICAgICAgICAvL0ZvciB0aGUgbGlua2VkIGxpc3RcclxuICAgICAgICB0aGlzLnByZXYgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubmV4dCA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vQXJyYXkgb2Ygb2JqZWN0cyBvbiB0aGUgbGF5ZXJcclxuICAgICAgICB0aGlzLm9iamVjdHMgPSBbXTtcclxuXHJcbiAgICAgICAgdmFyIGxhc3RVcGRhdGU7XHJcblxyXG4gICAgICAgIHZhciBnZXRGcHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgZnBzID0gMTAwMCAvIChub3cgLSBsYXN0VXBkYXRlKTtcclxuICAgICAgICAgICAgLy9mcHMgKz0gKHRoaXNGcmFtZUZQUyAtIGZwcykgLyByZWZGcHM7XHJcbiAgICAgICAgICAgIGxhc3RVcGRhdGUgPSBub3c7XHJcbiAgICAgICAgICAgIHJldHVybiBmcHM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIF9jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24gfHwgVXRpbHMuZ2V0TW91c2VQb3MoZXZlbnQudGFyZ2V0LCBldmVudCk7XHJcbiAgICAgICAgICAgIF9kaXNwYXRjaGVyLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5jbGljaywgW2V2ZW50LCBwb3NpdGlvbl0pO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5vYmplY3RzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoUmVuZGVySnMuUGh5c2ljcy5Db2xsaXNpb25zLnBvaW50SW5PYmplY3QocG9zaXRpb24sIHRoaXMub2JqZWN0c1tpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9iamVjdHNbaV0udHJpZ2dlcihSZW5kZXJKcy5DYW52YXMuRXZlbnRzLmNsaWNrLCBldmVudClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2KSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMucHJldi5jYW52YXMpLnRyaWdnZXIoXCJjbGlja1wiLCBwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgX21vdXNlbW92ZUhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24gfHwgVXRpbHMuZ2V0TW91c2VQb3MoZXZlbnQudGFyZ2V0LCBldmVudCk7XHJcbiAgICAgICAgICAgIF9kaXNwYXRjaGVyLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5tb3VzZW1vdmUsIFtldmVudCwgcG9zaXRpb25dKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMub2JqZWN0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKFJlbmRlckpzLlBoeXNpY3MuQ29sbGlzaW9ucy5wb2ludEluT2JqZWN0KHBvc2l0aW9uLCB0aGlzLm9iamVjdHNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmplY3RzW2ldLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5tb3VzZW1vdmUsIFtldmVudCwgcG9zaXRpb25dKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcy5wcmV2LmNhbnZhcykudHJpZ2dlcihcIm1vdXNlbW92ZVwiLCBwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgX21vdXNlZW50ZXJIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uIHx8IFV0aWxzLmdldE1vdXNlUG9zKGV2ZW50LnRhcmdldCwgZXZlbnQpO1xyXG4gICAgICAgICAgICBfZGlzcGF0Y2hlci50cmlnZ2VyKFJlbmRlckpzLkNhbnZhcy5FdmVudHMubW91c2VlbnRlciwgW2V2ZW50LCBwb3NpdGlvbl0pO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5vYmplY3RzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoUmVuZGVySnMuUGh5c2ljcy5Db2xsaXNpb25zLnBvaW50SW5PYmplY3QocG9zaXRpb24sIHRoaXMub2JqZWN0c1tpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9iamVjdHNbaV0udHJpZ2dlcihSZW5kZXJKcy5DYW52YXMuRXZlbnRzLm1vdXNlZW50ZXIsIFtldmVudCwgcG9zaXRpb25dKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcy5wcmV2LmNhbnZhcykudHJpZ2dlcihcIm1vdXNlZW50ZXJcIiwgcG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIF9tb3VzZWxlYXZlSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgcG9zaXRpb24gPSBwb3NpdGlvbiB8fCBVdGlscy5nZXRNb3VzZVBvcyhldmVudC50YXJnZXQsIGV2ZW50KTtcclxuICAgICAgICAgICAgX2Rpc3BhdGNoZXIudHJpZ2dlcihSZW5kZXJKcy5DYW52YXMuRXZlbnRzLm1vdXNlbGVhdmUsIFtldmVudCwgcG9zaXRpb25dKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMub2JqZWN0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKFJlbmRlckpzLlBoeXNpY3MuQ29sbGlzaW9ucy5wb2ludEluT2JqZWN0KHBvc2l0aW9uLCB0aGlzLm9iamVjdHNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmplY3RzW2ldLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5tb3VzZWxlYXZlLCBbZXZlbnQsIHBvc2l0aW9uXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMucHJldikge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzLnByZXYuY2FudmFzKS50cmlnZ2VyKFwibW91c2VsZWF2ZVwiLCBwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgX2tleWRvd25IYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF9kaXNwYXRjaGVyLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5rZXlkb3duLCBldmVudCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIF9rZXl1cEhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX2Rpc3BhdGNoZXIudHJpZ2dlcihSZW5kZXJKcy5DYW52YXMuRXZlbnRzLmtleXVwLCBldmVudCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIF9rZXlwcmVzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX2Rpc3BhdGNoZXIudHJpZ2dlcihSZW5kZXJKcy5DYW52YXMuRXZlbnRzLmtleXByZXNzLCBldmVudCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vRXZlbnQgd2lyZXVwc1xyXG4gICAgICAgICQodGhpcy5jYW52YXMpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICBfY2xpY2tIYW5kbGVyLmNhbGwoX3NlbGYsIGV2ZW50LCBwb3NpdGlvbik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQodGhpcy5jYW52YXMpLm9uKFwibW91c2Vtb3ZlXCIsIGZ1bmN0aW9uIChldmVudCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgX21vdXNlbW92ZUhhbmRsZXIuY2FsbChfc2VsZiwgZXZlbnQsIHBvc2l0aW9uKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCh0aGlzLmNhbnZhcykub24oXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uIChldmVudCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgX21vdXNlZW50ZXJIYW5kbGVyLmNhbGwoX3NlbGYsIGV2ZW50LCBwb3NpdGlvbik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQodGhpcy5jYW52YXMpLm9uKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoZXZlbnQsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIF9tb3VzZWxlYXZlSGFuZGxlci5jYWxsKF9zZWxmLCBldmVudCwgcG9zaXRpb24pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS5vbihcImtleWRvd25cIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF9rZXlkb3duSGFuZGxlci5jYWxsKF9zZWxmLCBldmVudCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKFwia2V5dXBcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF9rZXl1cEhhbmRsZXIuY2FsbChfc2VsZiwgZXZlbnQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS5vbihcImtleXByZXNzXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfa2V5cHJlc3NIYW5kbGVyLmNhbGwoX3NlbGYsIGV2ZW50KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbiA9IGZ1bmN0aW9uICh0eXBlLCBoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIGlmICghUmVuZGVySnMuQ2FudmFzLkV2ZW50c1t0eXBlXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBfZGlzcGF0Y2hlci5zdWJzY3JpYmUodHlwZSwgaGFuZGxlcik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9BZGQgYW4gb2JqZWN0IHRvIHRoZSBsYXllciwgaXQgd2lsbCBiZSByZW5kZXJlZCBvbiB0aGlzIGxheWVyXHJcbiAgICAgICAgdGhpcy5hZGRPYmplY3QgPSBmdW5jdGlvbiAob2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICghKG9iamVjdCBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5PYmplY3QpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbiBvYmplY3Qgb24gdGhlIGNhbnZhcyBzaG91bGQgYmUgaW5oZXJpdGVkIGZyb20gQ2FudmFzT2JqZWN0IVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvYmplY3QubGF5ZXIgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLm9iamVjdHMucHVzaChvYmplY3QpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMucmVtb3ZlT2JqZWN0ID0gZnVuY3Rpb24gKG9iamVjdCkge1xyXG4gICAgICAgICAgICBsaW5xKHRoaXMub2JqZWN0cykucmVtb3ZlKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbSA9PT0gb2JqZWN0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgb2JqZWN0LmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgX2ZvcmNlUmVuZGVyID0gdHJ1ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnJlc2l6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICAgICAgX2ZvcmNlUmVuZGVyID0gdHJ1ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL1JldHVybnMgdHJ1ZSBpZiB0aGUgbGF5ZXIgaGFzIHNwcml0ZSBvYmplY3RzIG90aGVyd2lzZSBmYWxzZVxyXG4gICAgICAgIHRoaXMuaGFzU3ByaXRlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHRoaXMub2JqZWN0cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub2JqZWN0c1tpXSBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuU3ByaXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vUmVkcmF3IG9iamVjdHMgb24gbGF5ZXJzIGlmIGl0J3MgYWN0aXZlXHJcbiAgICAgICAgdGhpcy5kcmF3T2JqZWN0cyA9IGZ1bmN0aW9uIChhYnNQb3NpdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoIWxhc3RVcGRhdGUpIHtcclxuICAgICAgICAgICAgICAgIGxhc3RVcGRhdGUgPSAobmV3IERhdGUoKSkgKiAxIC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIV9mb3JjZVJlbmRlciAmJiAoKF9pbml0aWFsaXplZCAmJiAhX2Rpc3BhdGNoZXIuaGFzU3Vic2NyaWJlcnMoJ2FuaW1hdGUnKSAmJiAhdGhpcy5oYXNTcHJpdGVzKHRoaXMpICYmICF0aGlzLmFjdGl2ZSkgfHwgdGhpcy5vYmplY3RzLmxlbmd0aCA9PT0gMCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGZwcyA9IGdldEZwcygpO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYWt0RnJhbWVSYXRlID0gTWF0aC5mbG9vcigxMDAwIC8gZnBzKTtcclxuXHJcbiAgICAgICAgICAgIF9kaXNwYXRjaGVyLnRyaWdnZXIoXCJhbmltYXRlXCIsIGZwcyk7XHJcbiAgICAgICAgICAgIHZhciBvYmplY3RzTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHRoaXMub2JqZWN0cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm9iamVjdHNbaV0ubG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0c0xvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3RzW2ldLmRyYXcodGhpcy5jdHgsIHtcclxuICAgICAgICAgICAgICAgICAgICBmcmFtZVJhdGU6IGZwcyxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0VGltZTogX3RpbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogX3RpbWUgKyBha3RGcmFtZVJhdGVcclxuICAgICAgICAgICAgICAgIH0sIGFic1Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob2JqZWN0c0xvYWRlZClcclxuICAgICAgICAgICAgICAgIF9pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmIChfZm9yY2VSZW5kZXIpIHtcclxuICAgICAgICAgICAgICAgIF9mb3JjZVJlbmRlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aW1lICs9IGFrdEZyYW1lUmF0ZTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4iLCJyZWdpc3Rlck5hbWVzcGFjZShcIlJlbmRlckpzLkNhbnZhcy5TaGFwZXNcIik7XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRXZlbnRzID0ge1xyXG4gICAgYW5pbWF0ZTogXCJhbmltYXRlXCIsXHJcbiAgICBjbGljazogXCJjbGlja1wiLFxyXG4gICAga2V5ZG93bjogXCJrZXlkb3duXCIsXHJcbiAgICBrZXl1cDogXCJrZXl1cFwiLFxyXG4gICAga2V5cHJlc3M6IFwia2V5cHJlc3NcIixcclxuICAgIG1vdXNlbW92ZTogXCJtb3VzZW1vdmVcIixcclxuICAgIG1vdXNlaG92ZXI6IFwibW91c2Vob3ZlclwiLFxyXG4gICAgbW91c2VsZWF2ZTogXCJtb3VzZWxlYXZlXCIsXHJcbiAgICBjb2xsaXNpb246IFwiY29sbGlzaW9uXCIsXHJcbiAgICBvYmplY3RDaGFuZ2VkOiBcIm9iamVjdENoYW5nZWRcIlxyXG59O1xyXG5cclxuLypcclxuICpSZXByZXNlbnRzIGEgYmFzZSBjbGFzcyBmb3IgZGlmZmVyZW50IHR5cGUgb2Ygc2hhcGVzXHJcbiAqL1xyXG5SZW5kZXJKcy5DYW52YXMuT2JqZWN0ID0gaW5qZWN0KFwiRXZlbnREaXNwYXRjaGVyXCIsIFwialF1ZXJ5XCIsIFwiVXRpbHNcIilcclxuICAgIC5jbGFzcyhmdW5jdGlvbiAoZGlzcGF0Y2hlciwgJCwgdXRpbHMsIG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaGVyID0gbmV3IGRpc3BhdGNoZXIoKTtcclxuXHJcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgdGhpcy5pZCA9IHV0aWxzLmdldEd1aWQoKTtcclxuICAgICAgICB0aGlzLnBvcyA9IG5ldyBSZW5kZXJKcy5WZWN0b3Iob3B0aW9ucy54LCBvcHRpb25zLnkpO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSBvcHRpb25zLndpZHRoIHx8IDA7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBvcHRpb25zLmhlaWdodCB8fCAwO1xyXG4gICAgICAgIHRoaXMuYW5nbGUgPSBvcHRpb25zLmFuZ2xlIHx8IDA7XHJcbiAgICAgICAgdGhpcy5zY2FsZVggPSBvcHRpb25zLnNjYWxlWDtcclxuICAgICAgICB0aGlzLnNjYWxlWSA9IG9wdGlvbnMuc2NhbGVZO1xyXG4gICAgICAgIHRoaXMuYmx1clJhZGl1cyA9IG9wdGlvbnMuYmx1clJhZGl1cztcclxuICAgICAgICB0aGlzLmNvbGxpc2lvbiA9IG9wdGlvbnMuY29sbGlzaW9uIHx8IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZmlsdGVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMubGF5ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubG9hZGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKlJldHVybnMgd2l0aCB0aGUgY2VudGVyIHBvaW50IG9mIHRoZSBzaGFwZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZ2V0Q2VudGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlbmRlckpzLlZlY3Rvcih0aGlzLnBvcy54ICsgKHRoaXMud2lkdGgpIC8gMiwgdGhpcy5wb3MueSArICh0aGlzLmhlaWdodCkgLyAyKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICpSZXR1cm5zIHdpdGggdGhlIHJlY3QgYXJvdW5kIHRoZSBzaGFwZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZ2V0Q2VudGVyZWRSZWN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbyA9IHRoaXMucG9zO1xyXG4gICAgICAgICAgICByZXR1cm4ge3g6IG8ueCwgeTogby55LCB3aWR0aDogdGhpcy53aWR0aCwgaGVpZ2h0OiB0aGlzLmhlaWdodH07XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIEZpbHRlcnMgd2hpY2ggd2lsbCBiZSBhcHBsaWVkIG9uIHRoZSBvYmplY3QoYmx1ciwgZ3JleXNjYWxlIGV0Yy4uLilcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnNldGZpbHRlcnMgPSBmdW5jdGlvbiAoZmlsdGVycykge1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlcnMgPSBmaWx0ZXJzO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlUG9zaXRpb24gPSBmdW5jdGlvbiAoZFgsIGRZKSB7XHJcbiAgICAgICAgICAgIHZhciBwcmV2UG9zID0gUmVuZGVySnMuVmVjdG9yLmNsb25lKHRoaXMucG9zLngsIHRoaXMucG9zLnkpO1xyXG4gICAgICAgICAgICB2YXIgbmV3UG9zID0gdGhpcy5wb3MuYWRkKG5ldyBSZW5kZXJKcy5WZWN0b3IoTWF0aC5mbG9vcihkWCksIE1hdGguZmxvb3IoZFkpKSk7XHJcbiAgICAgICAgICAgIHRoaXMucG9zID0gbmV3UG9zO1xyXG4gICAgICAgICAgICBpZiAocHJldlBvcy54ICE9PSBuZXdQb3MueCB8fCBwcmV2UG9zLnkgIT09IG5ld1Bvcy55KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5vYmplY3RDaGFuZ2VkLCB0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICpSb3RhdGUgdGhlIHNoYXBlIHRvIHRoZSBnaXZlbiBkZWdyZWUsIGR1cmluZyB0aGUgdGltZVxyXG4gICAgICAgICAqLWRlZyByb3RhdGlvbiBhbmdsZVxyXG4gICAgICAgICAqLXQgYW5pbWF0aW9uIHRpbWVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnJvdGF0ZVNoYXBlID0gZnVuY3Rpb24gKGN0eCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hbmdsZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBvID0gdGhpcy5nZXRDZW50ZXIoKTtcclxuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShvLngsIG8ueSk7XHJcbiAgICAgICAgICAgIGN0eC5yb3RhdGUodXRpbHMuY29udmVydFRvUmFkKHRoaXMuYW5nbGUpKTtcclxuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSgtby54LCAtby55KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqU2NhbGUgdGhlIHNoYXBlIHdpdGggdGhlIGdpdmVuIHdpZHRoIGFuZCBoZWlnaHQsIGR1cmluZyB0aGUgdGltZVxyXG4gICAgICAgICAqLXdpZHRoIHNjYWxlIGhvcml6b250YWxseSByYXRpbyBpbnRlZ2VyIDEgaXMgMTAwJVxyXG4gICAgICAgICAqLWhlaWdodCBzY2FsZSB2ZXJ0aWNhbGx5IHJhdGlvIGludGVnZXIgMSBpcyAxMDAlXHJcbiAgICAgICAgICotdCBhbmltYXRpb24gdGltZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc2NhbGVTaGFwZSA9IGZ1bmN0aW9uIChjdHgsIHNjYWxlWCwgc2NhbGVZKSB7XHJcbiAgICAgICAgICAgIHZhciBvID0gdGhpcy5nZXRDZW50ZXIoKTtcclxuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShvLngsIG8ueSk7XHJcbiAgICAgICAgICAgIGN0eC5zY2FsZShzY2FsZVgsIHNjYWxlWSk7XHJcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoLW8ueCwgLW8ueSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5vbiA9IGZ1bmN0aW9uICh0eXBlLCBoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIGlmICghUmVuZGVySnMuQ2FudmFzLkV2ZW50c1t0eXBlXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc3BhdGNoZXIuc3Vic2NyaWJlKHR5cGUsIGhhbmRsZXIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMudHJpZ2dlciA9IGZ1bmN0aW9uIChldmVudCwgYXJncykge1xyXG4gICAgICAgICAgICBpZiAoIVJlbmRlckpzLkNhbnZhcy5FdmVudHNbZXZlbnRdKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaGVyLnRyaWdnZXIoZXZlbnQsIGFyZ3MpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaGVyLmRpc3Bvc2UoKTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgTUNHIG9uIDIwMTUuMDEuMjUuLlxyXG4gKi9cclxudmFyIFJlbmRlckpzID0gUmVuZGVySnMgfHwge307XHJcblJlbmRlckpzLkNhbnZhcyA9IFJlbmRlckpzLkNhbnZhcyB8fCB7fTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5TcGFjZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcblxyXG4gICAgdmFyIF9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLnN0YWdlID0gb3B0aW9ucy5zdGFnZTtcclxuICAgIH07XHJcbiAgICBfaW5pdChvcHRpb25zKTtcclxufSIsInJlZ2lzdGVyTmFtZXNwYWNlKFwiUmVuZGVySnMuQ2FudmFzXCIpO1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLlN0YWdlID0gaW5qZWN0KFwiVXRpbHNcIiwgXCJFdmVudERpc3BhdGNoZXJcIiwgXCJMaW5rZWRMaXN0XCIpXHJcbiAgICAuY2xhc3MoZnVuY3Rpb24gKHV0aWxzLCBkaXNwYXRjaGVyLCBsaW5rZWRMaXN0LCBvcHRpb25zKSB7XHJcblxyXG4gICAgICAgIHZhciBfY29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXIgfHwgXCJ2aWV3cG9ydFwiO1xyXG4gICAgICAgIHZhciBfZGlzcGF0Y2hlciA9IG5ldyBkaXNwYXRjaGVyKCk7XHJcbiAgICAgICAgdGhpcy5sYXllcnMgPSBuZXcgbGlua2VkTGlzdCgpO1xyXG5cclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gbmV3IFJlbmRlckpzLlZlY3RvcigtNTAsIC01MCk7XHJcblxyXG4gICAgICAgIHZhciBfaW52YWxpZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzLmxheWVycy5nZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgICAgIHdoaWxlIChlbnVtZXJhdG9yLm5leHQoKSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBlbnVtZXJhdG9yLmN1cnJlbnQoKS5kcmF3T2JqZWN0cyh0aGlzLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF9pbnZhbGlkYXRlLmNhbGwoc2VsZik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgX2ludmFsaWRhdGUuY2FsbCh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXNpemUgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChfY29udGFpbmVyKS5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKF9jb250YWluZXIpLnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICB2YXIgZW51bWVyYXRvciA9IHRoaXMubGF5ZXJzLmdldEVudW1lcmF0b3IoKTtcclxuICAgICAgICAgICAgd2hpbGUgKGVudW1lcmF0b3IubmV4dCgpICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGVudW1lcmF0b3IuY3VycmVudCgpLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMub25JbnZhbGlkYXRlID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9kaXNwYXRjaGVyLnN1YnNjcmliZShcIm9uSW52YWxpZGF0ZVwiLCBoYW5kbGVyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZUxheWVyID0gZnVuY3Rpb24gKGFjdGl2ZSkge1xyXG4gICAgICAgICAgICB2YXIgbGF5ZXIgPSBuZXcgUmVuZGVySnMuQ2FudmFzLkxheWVyKF9jb250YWluZXIsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCBhY3RpdmUpO1xyXG4gICAgICAgICAgICB0aGlzLmxheWVycy5hcHBlbmQobGF5ZXIpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGxheWVyO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMucmVzaXplKG9wdGlvbnMud2lkdGggfHwgMTIwMCwgb3B0aW9ucy5oZWlnaHQgfHwgODAwKTtcclxuICAgIH0pOyIsInZhciBSZW5kZXJKcyA9IFJlbmRlckpzIHx8IHt9O1xyXG5SZW5kZXJKcy5DYW52YXMgPSBSZW5kZXJKcy5DYW52YXMgfHwge307XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRWFzaW5ncyA9IFJlbmRlckpzLkNhbnZhcy5FYXNpbmdzIHx8IHt9O1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLkVhc2luZ3MuQm91bmNlRWFzZU91dCA9IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XHJcbiAgICBpZiAoKHQgLz0gZCkgPCAoMSAvIDIuNzUpKSB7XHJcbiAgICAgICAgcmV0dXJuIGMgKiAoNy41NjI1ICogdCAqIHQpICsgYjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHQgPCAoMiAvIDIuNzUpKSB7XHJcbiAgICAgICAgcmV0dXJuIGMgKiAoNy41NjI1ICogKHQgLT0gKDEuNSAvIDIuNzUpKSAqIHQgKyAwLjc1KSArIGI7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0IDwgKDIuNSAvIDIuNzUpKSB7XHJcbiAgICAgICAgcmV0dXJuIGMgKiAoNy41NjI1ICogKHQgLT0gKDIuMjUgLyAyLjc1KSkgKiB0ICsgMC45Mzc1KSArIGI7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gYyAqICg3LjU2MjUgKiAodCAtPSAoMi42MjUgLyAyLjc1KSkgKiB0ICsgMC45ODQzNzUpICsgYjtcclxuICAgIH1cclxufTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5FYXNpbmdzLkJvdW5jZUVhc2VJbiA9IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XHJcbiAgICByZXR1cm4gYyAtIEtpbmV0aWMuRWFzaW5ncy5Cb3VuY2VFYXNlT3V0KGQgLSB0LCAwLCBjLCBkKSArIGI7XHJcbn07XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRWFzaW5ncy5Cb3VuY2VFYXNlSW5PdXQgPSBmdW5jdGlvbiAodCwgYiwgYywgZCkge1xyXG4gICAgaWYgKHQgPCBkIC8gMikge1xyXG4gICAgICAgIHJldHVybiBLaW5ldGljLkVhc2luZ3MuQm91bmNlRWFzZUluKHQgKiAyLCAwLCBjLCBkKSAqIDAuNSArIGI7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gS2luZXRpYy5FYXNpbmdzLkJvdW5jZUVhc2VPdXQodCAqIDIgLSBkLCAwLCBjLCBkKSAqIDAuNSArIGMgKiAwLjUgKyBiO1xyXG4gICAgfVxyXG59O1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLkVhc2luZ3MuRWFzZUluID0gZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcclxuICAgIHJldHVybiBjICogKHQgLz0gZCkgKiB0ICsgYjtcclxufTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5FYXNpbmdzLkVhc2VPdXQgPSBmdW5jdGlvbiAodCwgYiwgYywgZCkge1xyXG4gICAgcmV0dXJuIC1jICogKHQgLz0gZCkgKiAodCAtIDIpICsgYjtcclxufTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5FYXNpbmdzLkVhc2VJbk91dCA9IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XHJcbiAgICBpZiAoKHQgLz0gZCAvIDIpIDwgMSkge1xyXG4gICAgICAgIHJldHVybiBjIC8gMiAqIHQgKiB0ICsgYjtcclxuICAgIH1cclxuICAgIHJldHVybiAtYyAvIDIgKiAoKC0tdCkgKiAodCAtIDIpIC0gMSkgKyBiO1xyXG59O1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLkVhc2luZ3MuRWxhc3RpY0Vhc2VJbiA9IGZ1bmN0aW9uICh0LCBiLCBjLCBkLCBhLCBwKSB7XHJcbiAgICAvLyBhZGRlZCBzID0gMFxyXG4gICAgdmFyIHMgPSAwO1xyXG4gICAgaWYgKHQgPT09IDApIHtcclxuICAgICAgICByZXR1cm4gYjtcclxuICAgIH1cclxuICAgIGlmICgodCAvPSBkKSA9PT0gMSkge1xyXG4gICAgICAgIHJldHVybiBiICsgYztcclxuICAgIH1cclxuICAgIGlmICghcCkge1xyXG4gICAgICAgIHAgPSBkICogMC4zO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhIHx8IGEgPCBNYXRoLmFicyhjKSkge1xyXG4gICAgICAgIGEgPSBjO1xyXG4gICAgICAgIHMgPSBwIC8gNDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHMgPSBwIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihjIC8gYSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gLShhICogTWF0aC5wb3coMiwgMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSkgKyBiO1xyXG59O1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLkVhc2luZ3MuRWxhc3RpY0Vhc2VPdXQgPSBmdW5jdGlvbiAodCwgYiwgYywgZCwgYSwgcCkge1xyXG4gICAgLy8gYWRkZWQgcyA9IDBcclxuICAgIHZhciBzID0gMDtcclxuICAgIGlmICh0ID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGI7XHJcbiAgICB9XHJcbiAgICBpZiAoKHQgLz0gZCAvIDIpID09PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuIGIgKyBjO1xyXG4gICAgfVxyXG4gICAgaWYgKCFwKSB7XHJcbiAgICAgICAgcCA9IGQgKiAoMC4zICogMS41KTtcclxuICAgIH1cclxuICAgIGlmICghYSB8fCBhIDwgTWF0aC5hYnMoYykpIHtcclxuICAgICAgICBhID0gYztcclxuICAgICAgICBzID0gcCAvIDQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBzID0gcCAvICgyICogTWF0aC5QSSkgKiBNYXRoLmFzaW4oYyAvIGEpO1xyXG4gICAgfVxyXG4gICAgaWYgKHQgPCAxKSB7XHJcbiAgICAgICAgcmV0dXJuIC0wLjUgKiAoYSAqIE1hdGgucG93KDIsIDEwICogKHQgLT0gMSkpICogTWF0aC5zaW4oKHQgKiBkIC0gcykgKiAoMiAqIE1hdGguUEkpIC8gcCkpICsgYjtcclxuICAgIH1cclxuICAgIHJldHVybiBhICogTWF0aC5wb3coMiwgLTEwICogKHQgLT0gMSkpICogTWF0aC5zaW4oKHQgKiBkIC0gcykgKiAoMiAqIE1hdGguUEkpIC8gcCkgKiAwLjUgKyBjICsgYjtcclxufTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5FYXNpbmdzLkVsYXN0aWNFYXNlSW5PdXQgPSBmdW5jdGlvbiAodCwgYiwgYywgZCwgYSwgcCkge1xyXG4gICAgLy8gYWRkZWQgcyA9IDBcclxuICAgIHZhciBzID0gMDtcclxuICAgIGlmICh0ID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGI7XHJcbiAgICB9XHJcbiAgICBpZiAoKHQgLz0gZCAvIDIpID09PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuIGIgKyBjO1xyXG4gICAgfVxyXG4gICAgaWYgKCFwKSB7XHJcbiAgICAgICAgcCA9IGQgKiAoMC4zICogMS41KTtcclxuICAgIH1cclxuICAgIGlmICghYSB8fCBhIDwgTWF0aC5hYnMoYykpIHtcclxuICAgICAgICBhID0gYztcclxuICAgICAgICBzID0gcCAvIDQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBzID0gcCAvICgyICogTWF0aC5QSSkgKiBNYXRoLmFzaW4oYyAvIGEpO1xyXG4gICAgfVxyXG4gICAgaWYgKHQgPCAxKSB7XHJcbiAgICAgICAgcmV0dXJuIC0wLjUgKiAoYSAqIE1hdGgucG93KDIsIDEwICogKHQgLT0gMSkpICogTWF0aC5zaW4oKHQgKiBkIC0gcykgKiAoMiAqIE1hdGguUEkpIC8gcCkpICsgYjtcclxuICAgIH1cclxuICAgIHJldHVybiBhICogTWF0aC5wb3coMiwgLTEwICogKHQgLT0gMSkpICogTWF0aC5zaW4oKHQgKiBkIC0gcykgKiAoMiAqIE1hdGguUEkpIC8gcCkgKiAwLjUgKyBjICsgYjtcclxufTtcclxuXHJcblxyXG5cclxuUmVuZGVySnMuQ2FudmFzLlRyYW5zaXRpb24gPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHZhciByZXZlcnNlID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5kdXJhdGlvbiA9IG9wdGlvbnMuZHVyYXRpb24gKiAxMDAwIHx8IDEwMDA7XHJcblxyXG4gICAgdGhpcy5zaGFwZSA9IG9wdGlvbnMuc2hhcGU7XHJcblxyXG4gICAgdGhpcy5wcm9wcyA9IG9wdGlvbnMucHJvcHMgfHwge307XHJcbiAgICB0aGlzLm9yaWdQcm9wcyA9IHt9O1xyXG4gICAgZm9yICh2YXIgcHJvcCBpbiBvcHRpb25zLnByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5vcmlnUHJvcHNbcHJvcF0gPSB0aGlzLnNoYXBlW3Byb3BdO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZWFzaW5nID0gb3B0aW9ucy5lYXNpbmcgfHwgUmVuZGVySnMuQ2FudmFzLkVhc2luZ3MuRWFzZUluT3V0O1xyXG5cclxuICAgIHZhciBhbmltYXRpb24gPSBuZXcgUmVuZGVySnMuQ2FudmFzLkFuaW1hdGlvbihmdW5jdGlvbiAoZnJhbWUpIHtcclxuICAgICAgICBpZiAoZnJhbWUudGltZSA+PSBzZWxmLmR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGlvbi5zdG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gc2VsZi5wcm9wcykge1xyXG4gICAgICAgICAgICBpZiAocmV2ZXJzZSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zaGFwZVtwcm9wXSA9IHNlbGYuZWFzaW5nKGZyYW1lLnRpbWUsIHNlbGYub3JpZ1Byb3BzW3Byb3BdICsgc2VsZi5wcm9wc1twcm9wXSwgc2VsZi5wcm9wc1twcm9wXSAqIC0xLCBzZWxmLmR1cmF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2hhcGVbcHJvcF0gPSBzZWxmLmVhc2luZyhmcmFtZS50aW1lLCBzZWxmLm9yaWdQcm9wc1twcm9wXSwgc2VsZi5wcm9wc1twcm9wXSwgc2VsZi5kdXJhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfSwgdGhpcy5zaGFwZS5sYXllcik7XHJcblxyXG4gICAgdGhpcy5wbGF5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFuaW1hdGlvbi5zdGFydCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnBhdXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFuaW1hdGlvbi5wYXVzZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnN0b3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYW5pbWF0aW9uLnN0b3AoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5yZXZlcnNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldmVyc2UgPSB0cnVlO1xyXG4gICAgICAgIGFuaW1hdGlvbi5zdGFydCgpO1xyXG4gICAgfTtcclxufSIsInZhciBSZW5kZXJKcyA9IFJlbmRlckpzIHx8IHt9O1xyXG5SZW5kZXJKcy5QaHlzaWNzID0gUmVuZGVySnMuUGh5c2ljcyB8fCB7fTtcclxuXHJcblJlbmRlckpzLlBoeXNpY3MuQ29sbGlzaW9ucyA9IChmdW5jdGlvbiAobW9kdWxlKSB7XHJcblxyXG4gICAgdmFyIF9yYXlDYXN0aW5nQWxnID0gZnVuY3Rpb24gKHAsIGVkZ2UpIHtcclxuICAgICAgICAndGFrZXMgYSBwb2ludCBwPVB0KCkgYW5kIGFuIGVkZ2Ugb2YgdHdvIGVuZHBvaW50cyBhLGI9UHQoKSBvZiBhIGxpbmUgc2VnbWVudCByZXR1cm5zIGJvb2xlYW4nO1xyXG4gICAgICAgIHZhciBfZXBzID0gMC4wMDAwMTtcclxuICAgICAgICB2YXIgX2h1Z2UgPSBOdW1iZXIuTUFYX1ZBTFVFO1xyXG4gICAgICAgIHZhciBfdGlueSA9IE51bWJlci5NSU5fVkFMVUU7XHJcbiAgICAgICAgdmFyIG1fYmx1ZSwgbV9yZWQgPSAwO1xyXG4gICAgICAgIHZhciBhID0gZWRnZS5wMTtcclxuICAgICAgICB2YXIgYiA9IGVkZ2UucDI7XHJcblxyXG4gICAgICAgIGlmIChhLnkgPiBiLnkpIHtcclxuICAgICAgICAgICAgYS5zZXQoYik7XHJcbiAgICAgICAgICAgIGIuc2V0KGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocC55ID09IGEueSB8fCBwLnkgPT0gYi55KVxyXG4gICAgICAgICAgICBwLnkgKz0gX2VwcztcclxuXHJcbiAgICAgICAgdmFyIGludGVyc2VjdCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAoKHAueSA+IGIueSB8fCBwLnkgPCBhLnkpIHx8IChwLnggPiBNYXRoLm1heChhLngsIGIueCkpKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChwLnggPCBNYXRoLm1pbihhLngsIGIueCkpXHJcbiAgICAgICAgICAgIGludGVyc2VjdCA9IHRydWU7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhhLnggLSBiLngpID4gX3RpbnkpXHJcbiAgICAgICAgICAgICAgICBtX3JlZCA9IChiLnkgLSBhLnkpIC8gKGIueCAtIGEueCk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIG1fcmVkID0gX2h1Z2U7XHJcblxyXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoYS54IC0gcC54KSA+IF90aW55KVxyXG4gICAgICAgICAgICAgICAgbV9ibHVlID0gKHAueSAtIGEueSkgLyAocC54IC0gYS54KTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgbV9ibHVlID0gX2h1Z2VcclxuICAgICAgICAgICAgaW50ZXJzZWN0ID0gbV9ibHVlID49IG1fcmVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGludGVyc2VjdDtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgX3Zvcm5vaVJlZ2lvbiA9IGZ1bmN0aW9uIChsaW5lLCBwb2ludCkge1xyXG4gICAgICAgIHZhciBsZW4yID0gbGluZS5sZW5ndGgyKCk7XHJcbiAgICAgICAgdmFyIGRwID0gcG9pbnQuZG90KGxpbmUpO1xyXG4gICAgICAgIC8vIElmIHRoZSBwb2ludCBpcyBiZXlvbmQgdGhlIHN0YXJ0IG9mIHRoZSBsaW5lLCBpdCBpcyBpbiB0aGVcclxuICAgICAgICAvLyBsZWZ0IHZvcm5vaSByZWdpb24uXHJcbiAgICAgICAgaWYgKGRwIDwgMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHRoZSBwb2ludCBpcyBiZXlvbmQgdGhlIGVuZCBvZiB0aGUgbGluZSwgaXQgaXMgaW4gdGhlXHJcbiAgICAgICAgLy8gcmlnaHQgdm9ybm9pIHJlZ2lvbi5cclxuICAgICAgICBlbHNlIGlmIChkcCA+IGxlbjIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE90aGVyd2lzZSwgaXQncyBpbiB0aGUgbWlkZGxlIG9uZS5cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBfcG9pbnRJblBvbHlnb24gPSBmdW5jdGlvbiAocCwgcG9seWdvbikge1xyXG4gICAgICAgIHZhciByZXMgPSBmYWxzZTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvbHlnb24uckVkZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChfcmF5Q2FzdGluZ0FsZyhwLCBwb2x5Z29uLnJFZGdlc1tpXSkpXHJcbiAgICAgICAgICAgICAgICByZXMgPSAhcmVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBfcG9pbnRJbkxpbmUgPSBmdW5jdGlvbiAocCwgbGluZSkge1xyXG4gICAgICAgIHZhciBtID0gKGxpbmUucG9zMi55IC0gbGluZS5wb3MueSkgLyAobGluZS5wb3MyLnggLSBsaW5lLnBvcy54KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHAueSAtIGxpbmUucG9zLnkgPT0gbSAqIChwLnggLSBsaW5lLnBvcy55KTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgX3BvaW50SW5DaXJjbGUgPSBmdW5jdGlvbiAocCwgYykge1xyXG4gICAgICAgIG8gPSBjLmdldENlbnRlcigpO1xyXG5cclxuICAgICAgICByZXR1cm4gTWF0aC5wb3cocC54IC0gby54LCAyKSArIE1hdGgucG93KHAueSAtIG8ueSwgMikgPD0gTWF0aC5wb3coKHRoaXMud2lkdGggLyAyKSwgMik7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIF9yZWN0VnNSZWN0ID0gZnVuY3Rpb24gKHIxLCByMikge1xyXG4gICAgICAgIHZhciB0dyA9IHIxLndpZHRoO1xyXG4gICAgICAgIHZhciB0aCA9IHIxLmhlaWdodDtcclxuICAgICAgICB2YXIgcncgPSByMi53aWR0aDtcclxuICAgICAgICB2YXIgcmggPSByMi5oZWlnaHQ7XHJcbiAgICAgICAgaWYgKHJ3IDw9IDAgfHwgcmggPD0gMCB8fCB0dyA8PSAwIHx8IHRoIDw9IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdHggPSByMS54O1xyXG4gICAgICAgIHZhciB0eSA9IHIxLnk7XHJcbiAgICAgICAgdmFyIHJ4ID0gcjIueDtcclxuICAgICAgICB2YXIgcnkgPSByMi55O1xyXG4gICAgICAgIHJ3ICs9IHJ4O1xyXG4gICAgICAgIHJoICs9IHJ5O1xyXG4gICAgICAgIHR3ICs9IHR4O1xyXG4gICAgICAgIHRoICs9IHR5O1xyXG4gICAgICAgIC8vb3ZlcmZsb3cgfHwgaW50ZXJzZWN0XHJcbiAgICAgICAgcmV0dXJuICgocncgPCByeCB8fCBydyA+IHR4KSAmJlxyXG4gICAgICAgIChyaCA8IHJ5IHx8IHJoID4gdHkpICYmXHJcbiAgICAgICAgKHR3IDwgdHggfHwgdHcgPiByeCkgJiZcclxuICAgICAgICAodGggPCB0eSB8fCB0aCA+IHJ5KSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIF9yZWN0VnNDaXJjbGUgPSBmdW5jdGlvbiAociwgYykge1xyXG4gICAgICAgIHJldHVybiBfcG9pbnRJblJlY3RhbmdsZShjLmdldENlbnRlcigpLCByKSB8fFxyXG4gICAgICAgICAgICBfbGluZVZzQ2lyY2xlKHIudG9wRWRnZSgpLCBjKSB8fFxyXG4gICAgICAgICAgICBfbGluZVZzQ2lyY2xlKHIucmlnaHRFZGdlKCksIGMpIHx8XHJcbiAgICAgICAgICAgIF9saW5lVnNDaXJjbGUoci5ib3R0b21FZGdlKCksIGMpIHx8XHJcbiAgICAgICAgICAgIF9saW5lVnNDaXJjbGUoci5sZWZ0RWRnZSgpLCBjKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgX2xpbmVWc0NpcmNsZSA9IGZ1bmN0aW9uIChsLCBjKSB7XHJcbiAgICAgICAgdmFyIGNvID0gYy5nZXRDZW50ZXIoKTtcclxuICAgICAgICB2YXIgciA9IGMucmFkaXVzO1xyXG4gICAgICAgIHZhciBkID0gbmV3IFJlbmRlckpzLlZlY3RvcihsLnBvczIueCAtIGwucG9zLngsIGwucG9zMi55IC0gbC5wb3MueSk7XHJcbiAgICAgICAgdmFyIGYgPSBuZXcgUmVuZGVySnMuVmVjdG9yKGwucG9zLnggLSBjby54LCBsLnBvcy55IC0gY28ueSk7XHJcblxyXG4gICAgICAgIHZhciBhID0gZC5kb3QoZCk7XHJcbiAgICAgICAgdmFyIGIgPSAyICogZi5kb3QoZCk7XHJcbiAgICAgICAgdmFyIGMgPSBmLmRvdChmKSAtIHIgKiByO1xyXG5cclxuICAgICAgICB2YXIgZGlzY3JpbWluYW50ID0gYiAqIGIgLSA0ICogYSAqIGM7XHJcblxyXG4gICAgICAgIGlmIChkaXNjcmltaW5hbnQgPCAwKSB7XHJcbiAgICAgICAgICAgIC8vIG5vIGludGVyc2VjdGlvblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyByYXkgZGlkbid0IHRvdGFsbHkgbWlzcyBzcGhlcmUsXHJcbiAgICAgICAgICAgIC8vIHNvIHRoZXJlIGlzIGEgc29sdXRpb24gdG9cclxuICAgICAgICAgICAgLy8gdGhlIGVxdWF0aW9uLlxyXG5cclxuICAgICAgICAgICAgZGlzY3JpbWluYW50ID0gTWF0aC5zcXJ0KGRpc2NyaW1pbmFudCk7XHJcblxyXG4gICAgICAgICAgICAvLyBlaXRoZXIgc29sdXRpb24gbWF5IGJlIG9uIG9yIG9mZiB0aGUgcmF5IHNvIG5lZWQgdG8gdGVzdCBib3RoXHJcbiAgICAgICAgICAgIC8vIHQxIGlzIGFsd2F5cyB0aGUgc21hbGxlciB2YWx1ZSwgYmVjYXVzZSBCT1RIIGRpc2NyaW1pbmFudCBhbmRcclxuICAgICAgICAgICAgLy8gYSBhcmUgbm9ubmVnYXRpdmUuXHJcbiAgICAgICAgICAgIHZhciB0MSA9ICgtYiAtIGRpc2NyaW1pbmFudCkgLyAoMiAqIGEpO1xyXG4gICAgICAgICAgICB2YXIgdDIgPSAoLWIgKyBkaXNjcmltaW5hbnQpIC8gKDIgKiBhKTtcclxuXHJcbiAgICAgICAgICAgIC8vIDN4IEhJVCBjYXNlczpcclxuICAgICAgICAgICAgLy8gICAgICAgICAgLW8tPiAgICAgICAgICAgICAtLXwtLT4gIHwgICAgICAgICAgICB8ICAtLXwtPlxyXG4gICAgICAgICAgICAvLyBJbXBhbGUodDEgaGl0LHQyIGhpdCksIFBva2UodDEgaGl0LHQyPjEpLCBFeGl0V291bmQodDE8MCwgdDIgaGl0KSwgXHJcblxyXG4gICAgICAgICAgICAvLyAzeCBNSVNTIGNhc2VzOlxyXG4gICAgICAgICAgICAvLyAgICAgICAtPiAgbyAgICAgICAgICAgICAgICAgICAgIG8gLT4gICAgICAgICAgICAgIHwgLT4gfFxyXG4gICAgICAgICAgICAvLyBGYWxsU2hvcnQgKHQxPjEsdDI+MSksIFBhc3QgKHQxPDAsdDI8MCksIENvbXBsZXRlbHlJbnNpZGUodDE8MCwgdDI+MSlcclxuXHJcbiAgICAgICAgICAgIGlmICh0MSA+PSAwICYmIHQxIDw9IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIHQxIGlzIHRoZSBpbnRlcnNlY3Rpb24sIGFuZCBpdCdzIGNsb3NlciB0aGFuIHQyXHJcbiAgICAgICAgICAgICAgICAvLyAoc2luY2UgdDEgdXNlcyAtYiAtIGRpc2NyaW1pbmFudClcclxuICAgICAgICAgICAgICAgIC8vIEltcGFsZSwgUG9rZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGhlcmUgdDEgZGlkbid0IGludGVyc2VjdCBzbyB3ZSBhcmUgZWl0aGVyIHN0YXJ0ZWRcclxuICAgICAgICAgICAgLy8gaW5zaWRlIHRoZSBzcGhlcmUgb3IgY29tcGxldGVseSBwYXN0IGl0XHJcbiAgICAgICAgICAgIGlmICh0MiA+PSAwICYmIHQyIDw9IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIEV4aXRXb3VuZFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIG5vIGludG46IEZhbGxTaG9ydCwgUGFzdCwgQ29tcGxldGVseUluc2lkZVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBfY2lyY2xlVnNDaXJjbGUgPSBmdW5jdGlvbiAoYzEsIGMyKSB7XHJcbiAgICAgICAgdmFyIHZlbG9jaXR5ID0gYzIudjtcclxuICAgICAgICAvL2FkZCBib3RoIHJhZGlpIHRvZ2V0aGVyIHRvIGdldCB0aGUgY29sbGlkaW5nIGRpc3RhbmNlXHJcbiAgICAgICAgdmFyIHRvdGFsUmFkaXVzID0gYzEucmFkaXVzICsgYzIucmFkaXVzO1xyXG4gICAgICAgIC8vZmluZCB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgdHdvIGNpcmNsZXMgdXNpbmcgUHl0aGFnb3JlYW4gdGhlb3JlbS4gTm8gc3F1YXJlIHJvb3RzIGZvciBvcHRpbWl6YXRpb25cclxuICAgICAgICB2YXIgZGlzdGFuY2VTcXVhcmVkID0gKGMxLnBvcy54IC0gYzIucG9zLngpICogKGMxLnBvcy54IC0gYzIucG9zLngpICsgKGMxLnBvcy55IC0gYzIucG9zLnkpICogKGMxLnBvcy55IC0gYzIucG9zLnkpO1xyXG4gICAgICAgIC8vaWYgeW91ciBkaXN0YW5jZSBpcyBsZXNzIHRoYW4gdGhlIHRvdGFsUmFkaXVzIHNxdWFyZShiZWNhdXNlIGRpc3RhbmNlIGlzIHNxdWFyZWQpXHJcbiAgICAgICAgaWYgKGRpc3RhbmNlU3F1YXJlZCA8IHRvdGFsUmFkaXVzICogdG90YWxSYWRpdXMpIHtcclxuICAgICAgICAgICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KGRpc3RhbmNlU3F1YXJlZCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2VwYXJhdGlvbiA9IHRvdGFsUmFkaXVzIC0gZGlzdGFuY2U7XHJcbiAgICAgICAgICAgIHZhciB1bml0VmVjdG9yID0gbmV3IFJlbmRlckpzLlZlY3RvcihjMS5wb3Muc3ViKGMyLnBvcykueCAvIGRpc3RhbmNlLCBjMS5wb3Muc3ViKGMyLnBvcykueSAvIGRpc3RhbmNlKTtcclxuICAgICAgICAgICAgdmFyIGRpZmZWID0gYzIucG9zLnN1YihjMS5wb3MpO1xyXG5cclxuICAgICAgICAgICAgLy9maW5kIHRoZSBtb3ZlbWVudCBuZWVkZWQgdG8gc2VwYXJhdGUgdGhlIGNpcmNsZXNcclxuICAgICAgICAgICAgcmV0dXJuIHZlbG9jaXR5LmFkZCh1bml0VmVjdG9yLnNjYWxlKHNlcGFyYXRpb24gLyAyKSk7Ly9uZXcgUmVuZGVySnMuVmVjdG9yKChjMi5wb3MueCAtIGMxLnBvcy54KSAqIGRpZmZlcmVuY2UsIChjMi5wb3MueSAtIGMxLnBvcy55KSAqIGRpZmZlcmVuY2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDsgLy9ubyBjb2xsaXNpb24sIHJldHVybiBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgdmFyIF9jaXJjbGVWc1BvbHlnb24gPSBmdW5jdGlvbiAoY2lyY2xlLCBwb2x5Z29uKSB7XHJcbiAgICAgICAgLy8gR2V0IHRoZSBwb3NpdGlvbiBvZiB0aGUgY2lyY2xlIHJlbGF0aXZlIHRvIHRoZSBwb2x5Z29uLlxyXG4gICAgICAgIHZhciBjaXJjbGVQb3MgPSBjaXJjbGUucG9zLnN1Yihwb2x5Z29uLnBvcyk7XHJcbiAgICAgICAgdmFyIHJhZGl1cyA9IGNpcmNsZS5yYWRpdXM7XHJcbiAgICAgICAgdmFyIHJhZGl1czIgPSByYWRpdXMgKiByYWRpdXM7XHJcbiAgICAgICAgdmFyIHBvaW50cyA9IHBvbHlnb24udmVydGljZXMuc2xpY2UoKTtcclxuICAgICAgICB2YXIgbGVuID0gcG9pbnRzLmxlbmd0aDtcclxuICAgICAgICB2YXIgZWRnZSA9IG5ldyBSZW5kZXJKcy5WZWN0b3IoMCwgMCk7XHJcbiAgICAgICAgdmFyIHBvaW50ID0gbmV3IFJlbmRlckpzLlZlY3RvcigwLCAwKTtcclxuICAgICAgICB2YXIgcmVzcG9uc2UgPSB7XHJcbiAgICAgICAgICAgIG92ZXJsYXA6IE51bWJlci5NQVhfVkFMVUUsXHJcbiAgICAgICAgICAgIG92ZXJsYXBOOiBuZXcgUmVuZGVySnMuVmVjdG9yKDAsIDApLFxyXG4gICAgICAgICAgICBvdmVybGFwVjogbmV3IFJlbmRlckpzLlZlY3RvcigwLCAwKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gRm9yIGVhY2ggZWRnZSBpbiB0aGUgcG9seWdvbjpcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXh0ID0gaSA9PT0gbGVuIC0gMSA/IDAgOiBpICsgMTtcclxuICAgICAgICAgICAgdmFyIHByZXYgPSBpID09PSAwID8gbGVuIC0gMSA6IGkgLSAxO1xyXG4gICAgICAgICAgICB2YXIgb3ZlcmxhcCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBvdmVybGFwTiA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAvLyBHZXQgdGhlIGVkZ2UuXHJcbiAgICAgICAgICAgIGVkZ2Uuc2V0KHBvbHlnb24udmVydGljZXNbaV0pO1xyXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGNlbnRlciBvZiB0aGUgY2lyY2xlIHJlbGF0aXZlIHRvIHRoZSBzdGFydGluZyBwb2ludCBvZiB0aGUgZWRnZS5cclxuICAgICAgICAgICAgcG9pbnQuc2V0KGNpcmNsZVBvcyk7XHJcbiAgICAgICAgICAgIHBvaW50LnNldChwb2ludC5zdWIocG9pbnRzW2ldKSk7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBjZW50ZXIgb2YgdGhlIGNpcmNsZSBhbmQgdGhlIHBvaW50XHJcbiAgICAgICAgICAgIC8vIGlzIGJpZ2dlciB0aGFuIHRoZSByYWRpdXMsIHRoZSBwb2x5Z29uIGlzIGRlZmluaXRlbHkgbm90IGZ1bGx5IGluXHJcbiAgICAgICAgICAgIC8vIHRoZSBjaXJjbGUuXHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiBwb2ludC5sZW5ndGgyKCkgPiByYWRpdXMyKSB7XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZVsnYUluQiddID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB3aGljaCBWb3Jub2kgcmVnaW9uIHRoZSBjZW50ZXIgb2YgdGhlIGNpcmNsZSBpcyBpbi5cclxuICAgICAgICAgICAgdmFyIHJlZ2lvbiA9IF92b3Jub2lSZWdpb24oZWRnZSwgcG9pbnQpO1xyXG4gICAgICAgICAgICAvLyBJZiBpdCdzIHRoZSBsZWZ0IHJlZ2lvbjpcclxuICAgICAgICAgICAgaWYgKHJlZ2lvbiA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFrZSBzdXJlIHdlJ3JlIGluIHRoZSBSSUdIVF9WT1JOT0lfUkVHSU9OIG9mIHRoZSBwcmV2aW91cyBlZGdlLlxyXG4gICAgICAgICAgICAgICAgZWRnZS5zZXQocG9seWdvbi5lZGdlc1twcmV2XSk7XHJcbiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGNlbnRlciBvZiB0aGUgY2lyY2xlIHJlbGF0aXZlIHRoZSBzdGFydGluZyBwb2ludCBvZiB0aGUgcHJldmlvdXMgZWRnZVxyXG4gICAgICAgICAgICAgICAgdmFyIHBvaW50MiA9IG5ldyBSZW5kZXJKcy5WZWN0b3IoMCwgMCkuc2V0KGNpcmNsZVBvcykuc3ViKHBvaW50c1twcmV2XSk7XHJcbiAgICAgICAgICAgICAgICByZWdpb24gPSBfdm9ybm9pUmVnaW9uKGVkZ2UsIHBvaW50Mik7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVnaW9uID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSXQncyBpbiB0aGUgcmVnaW9uIHdlIHdhbnQuICBDaGVjayBpZiB0aGUgY2lyY2xlIGludGVyc2VjdHMgdGhlIHBvaW50LlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkaXN0ID0gcG9pbnQubGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3QgPiByYWRpdXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEl0IGludGVyc2VjdHMsIGNhbGN1bGF0ZSB0aGUgb3ZlcmxhcC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VbJ2JJbkEnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVybGFwTiA9IHBvaW50Lm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVybGFwID0gcmFkaXVzIC0gZGlzdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBpdCdzIHRoZSByaWdodCByZWdpb246XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVnaW9uID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIG1ha2Ugc3VyZSB3ZSdyZSBpbiB0aGUgbGVmdCByZWdpb24gb24gdGhlIG5leHQgZWRnZVxyXG4gICAgICAgICAgICAgICAgZWRnZS5zZXQocG9seWdvbi5lZGdlc1tuZXh0XSk7XHJcbiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGNlbnRlciBvZiB0aGUgY2lyY2xlIHJlbGF0aXZlIHRvIHRoZSBzdGFydGluZyBwb2ludCBvZiB0aGUgbmV4dCBlZGdlLlxyXG4gICAgICAgICAgICAgICAgcG9pbnQuc2V0KGNpcmNsZVBvcyk7XHJcbiAgICAgICAgICAgICAgICBwb2ludC5zZXQocG9pbnQuc3ViKHBvaW50c1tuZXh0XSkpO1xyXG4gICAgICAgICAgICAgICAgcmVnaW9uID0gX3Zvcm5vaVJlZ2lvbihlZGdlLCBwb2ludCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVnaW9uID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEl0J3MgaW4gdGhlIHJlZ2lvbiB3ZSB3YW50LiAgQ2hlY2sgaWYgdGhlIGNpcmNsZSBpbnRlcnNlY3RzIHRoZSBwb2ludC5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdCA9IHBvaW50Lmxlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXN0ID4gcmFkaXVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGludGVyc2VjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJdCBpbnRlcnNlY3RzLCBjYWxjdWxhdGUgdGhlIG92ZXJsYXAuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlWydiSW5BJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxhcE4gPSBwb2ludC5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxhcCA9IHJhZGl1cyAtIGRpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBpdCdzIHRoZSBtaWRkbGUgcmVnaW9uOlxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gTmVlZCB0byBjaGVjayBpZiB0aGUgY2lyY2xlIGlzIGludGVyc2VjdGluZyB0aGUgZWRnZSxcclxuICAgICAgICAgICAgICAgIC8vIENoYW5nZSB0aGUgZWRnZSBpbnRvIGl0cyBcImVkZ2Ugbm9ybWFsXCIuXHJcbiAgICAgICAgICAgICAgICB2YXIgbm9ybWFsID0gZWRnZS5wZXJwKCkubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBwZXJwZW5kaWN1bGFyIGRpc3RhbmNlIGJldHdlZW4gdGhlIGNlbnRlciBvZiB0aGUgXHJcbiAgICAgICAgICAgICAgICAvLyBjaXJjbGUgYW5kIHRoZSBlZGdlLlxyXG4gICAgICAgICAgICAgICAgdmFyIGRpc3QgPSBwb2ludC5kb3Qobm9ybWFsKTtcclxuICAgICAgICAgICAgICAgIHZhciBkaXN0QWJzID0gTWF0aC5hYnMoZGlzdCk7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY2lyY2xlIGlzIG9uIHRoZSBvdXRzaWRlIG9mIHRoZSBlZGdlLCB0aGVyZSBpcyBubyBpbnRlcnNlY3Rpb24uXHJcbiAgICAgICAgICAgICAgICBpZiAoZGlzdCA+IDAgJiYgZGlzdEFicyA+IHJhZGl1cykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vIGludGVyc2VjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJdCBpbnRlcnNlY3RzLCBjYWxjdWxhdGUgdGhlIG92ZXJsYXAuXHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmxhcE4gPSBub3JtYWw7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmxhcCA9IHJhZGl1cyAtIGRpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGNlbnRlciBvZiB0aGUgY2lyY2xlIGlzIG9uIHRoZSBvdXRzaWRlIG9mIHRoZSBlZGdlLCBvciBwYXJ0IG9mIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNpcmNsZSBpcyBvbiB0aGUgb3V0c2lkZSwgdGhlIGNpcmNsZSBpcyBub3QgZnVsbHkgaW5zaWRlIHRoZSBwb2x5Z29uLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXN0ID49IDAgfHwgb3ZlcmxhcCA8IDIgKiByYWRpdXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VbJ2JJbkEnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgc21hbGxlc3Qgb3ZlcmxhcCB3ZSd2ZSBzZWVuLCBrZWVwIGl0LiBcclxuICAgICAgICAgICAgLy8gKG92ZXJsYXBOIG1heSBiZSBudWxsIGlmIHRoZSBjaXJjbGUgd2FzIGluIHRoZSB3cm9uZyBWb3Jub2kgcmVnaW9uKS5cclxuICAgICAgICAgICAgaWYgKG92ZXJsYXBOICYmIHJlc3BvbnNlICYmIE1hdGguYWJzKG92ZXJsYXApIDwgTWF0aC5hYnMocmVzcG9uc2VbJ292ZXJsYXAnXSkpIHtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlWydvdmVybGFwJ10gPSBvdmVybGFwO1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VbJ292ZXJsYXBOJ10gPSBuZXcgUmVuZGVySnMuVmVjdG9yKDAsIDApLnNldChvdmVybGFwTik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgZmluYWwgb3ZlcmxhcCB2ZWN0b3IgLSBiYXNlZCBvbiB0aGUgc21hbGxlc3Qgb3ZlcmxhcC5cclxuICAgICAgICBpZiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmVzcG9uc2VbJ2EnXSA9IHBvbHlnb247XHJcbiAgICAgICAgICAgIHJlc3BvbnNlWydiJ10gPSBjaXJjbGU7XHJcbiAgICAgICAgICAgIHJlc3BvbnNlWydvdmVybGFwViddID0gbmV3IFJlbmRlckpzLlZlY3RvcigwLCAwKS5zZXQocmVzcG9uc2VbJ292ZXJsYXBOJ10pLnNjYWxlKHJlc3BvbnNlWydvdmVybGFwJ10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy92YXIgdGVzdDE7Ly9udW1iZXJzIGZvciB0ZXN0aW5nIG1heC9taW5zXHJcbiAgICAgICAgLy92YXIgdGVzdDI7XHJcbiAgICAgICAgLy92YXIgdGVzdDtcclxuICAgICAgICAvL3ZhciBtaW4xOy8vc2FtZSBhcyBhYm92ZVxyXG4gICAgICAgIC8vdmFyIG1heDE7XHJcbiAgICAgICAgLy92YXIgbWluMjtcclxuICAgICAgICAvL3ZhciBtYXgyO1xyXG4gICAgICAgIC8vdmFyIG5vcm1hbEF4aXM7XHJcbiAgICAgICAgLy92YXIgb2Zmc2V0O1xyXG4gICAgICAgIC8vdmFyIHZlY3Rvck9mZnNldDtcclxuICAgICAgICAvL3ZhciB2ZWN0b3JzO1xyXG4gICAgICAgIC8vdmFyIHAyO1xyXG4gICAgICAgIC8vdmFyIGRpc3RhbmNlO1xyXG4gICAgICAgIC8vdmFyIHRlc3REaXN0YW5jZSA9IE51bWJlci5NQVhfVkFMVUU7XHJcbiAgICAgICAgLy92YXIgY2xvc2VzdFZlY3RvciA9IG5ldyBSZW5kZXJKcy5WZWN0b3IoMCwgMCk7Ly90aGUgdmVjdG9yIHRvIHVzZSB0byBmaW5kIHRoZSBub3JtYWxcclxuICAgICAgICAvLy8vIGZpbmQgb2Zmc2V0XHJcbiAgICAgICAgLy92ZWN0b3JPZmZzZXQgPSBuZXcgUmVuZGVySnMuVmVjdG9yKHBvbHlnb24ucG9zLnggLSBjaXJjbGUucG9zLngsIHBvbHlnb24ucG9zLnkgLSBjaXJjbGUucG9zLnkpO1xyXG4gICAgICAgIC8vdmVjdG9ycyA9IHBvbHlnb24udmVydGljZXMuc2xpY2UoKTsvL2FnYWluLCB0aGlzIGlzIGp1c3QgYSBmdW5jdGlvbiBpbiBteSBwb2x5Z29uIGNsYXNzIHRoYXQgcmV0dXJucyB0aGUgdmVydGljZXMgb2YgdGhlIHBvbGdvblxyXG4gICAgICAgIC8vLy9hZGRzIHNvbWUgcGFkZGluZyB0byBtYWtlIGl0IG1vcmUgYWNjdXJhdGVcclxuICAgICAgICAvL2lmICh2ZWN0b3JzLmxlbmd0aCA9PSAyKSB7XHJcbiAgICAgICAgLy8gICAgdmFyIHRlbXAgPSBuZXcgUmVuZGVySnMuVmVjdG9yKC0odmVjdG9yc1sxXS55IC0gdmVjdG9yc1swXS55KSwgdmVjdG9yc1sxXS54IC0gdmVjdG9yc1swXS54KTtcclxuICAgICAgICAvLyAgICB0ZW1wLnRydW5jYXRlKDAuMDAwMDAwMDAwMSk7XHJcbiAgICAgICAgLy8gICAgdmVjdG9ycy5wdXNoKHZlY3RvcnNbMV0uYWRkKHRlbXApKTtcclxuICAgICAgICAvL31cclxuICAgICAgICAvLy8vIGZpbmQgdGhlIGNsb3Nlc3QgdmVydGV4IHRvIHVzZSB0byBmaW5kIG5vcm1hbFxyXG4gICAgICAgIC8vZm9yICh2YXIgaSA9IDA7IGkgPCB2ZWN0b3JzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gICAgZGlzdGFuY2UgPSAoY2lyY2xlLnBvcy54IC0gKHBvbHlnb24ucG9zLnggKyB2ZWN0b3JzW2ldLngpKSAqIChjaXJjbGUucG9zLnggLSAocG9seWdvbi5wb3MueCArIHZlY3RvcnNbaV0ueCkpICsgKGNpcmNsZS5wb3MueSAtIChwb2x5Z29uLnBvcy55ICsgdmVjdG9yc1tpXS55KSkgKiAoY2lyY2xlLnBvcy55IC0gKHBvbHlnb24ucG9zLnkgKyB2ZWN0b3JzW2ldLnkpKTtcclxuICAgICAgICAvLyAgICBpZiAoZGlzdGFuY2UgPCB0ZXN0RGlzdGFuY2UpIHsvL2Nsb3Nlc3QgaGFzIHRoZSBsb3dlc3QgZGlzdGFuY2VcclxuICAgICAgICAvLyAgICAgICAgdGVzdERpc3RhbmNlID0gZGlzdGFuY2U7XHJcbiAgICAgICAgLy8gICAgICAgIGNsb3Nlc3RWZWN0b3IueCA9IHBvbHlnb24ucG9zLnggKyB2ZWN0b3JzW2ldLng7XHJcbiAgICAgICAgLy8gICAgICAgIGNsb3Nlc3RWZWN0b3IueSA9IHBvbHlnb24ucG9zLnkgKyB2ZWN0b3JzW2ldLnk7XHJcbiAgICAgICAgLy8gICAgfVxyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIC8vLy9nZXQgdGhlIG5vcm1hbCB2ZWN0b3JcclxuICAgICAgICAvL25vcm1hbEF4aXMgPSBuZXcgUmVuZGVySnMuVmVjdG9yKGNsb3Nlc3RWZWN0b3IueCAtIGNpcmNsZS5wb3MueCwgY2xvc2VzdFZlY3Rvci55IC0gY2lyY2xlLnBvcy55KTtcclxuICAgICAgICAvL25vcm1hbEF4aXMuc2V0KG5vcm1hbEF4aXMubm9ybWFsaXplKCkpOy8vbm9ybWFsaXplIGlzKHNldCBpdHMgbGVuZ3RoIHRvIDEpXHJcbiAgICAgICAgLy8vLyBwcm9qZWN0IHRoZSBwb2x5Z29uJ3MgcG9pbnRzXHJcbiAgICAgICAgLy9taW4xID0gbm9ybWFsQXhpcy5kb3QodmVjdG9yc1swXSk7XHJcbiAgICAgICAgLy9tYXgxID0gbWluMTsvL3NldCBtYXggYW5kIG1pblxyXG4gICAgICAgIC8vZm9yIChqID0gMTsgaiA8IHZlY3RvcnMubGVuZ3RoOyBqKyspIHsvL3Byb2plY3QgYWxsIGl0cyBwb2ludHMsIHN0YXJ0aW5nIHdpdGggdGhlIGZpcnN0KHRoZSAwdGggd2FzIGRvbmUgdXAgdGhlcmVeKVxyXG4gICAgICAgIC8vICAgIHRlc3QgPSBub3JtYWxBeGlzLmRvdCh2ZWN0b3JzW2pdKTsvL2RvdFByb2R1Y3QgdG8gcHJvamVjdFxyXG4gICAgICAgIC8vICAgIGlmICh0ZXN0IDwgbWluMSkgbWluMSA9IHRlc3Q7Ly9zbWFsbGVzdCBtaW4gaXMgd2FudGVkXHJcbiAgICAgICAgLy8gICAgaWYgKHRlc3QgPiBtYXgxKSBtYXgxID0gdGVzdDsvL2xhcmdlc3QgbWF4IGlzIHdhbnRlZFxyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIC8vLy8gcHJvamVjdCB0aGUgY2lyY2xlXHJcbiAgICAgICAgLy9tYXgyID0gY2lyY2xlLnJhZGl1czsvL21heCBpcyByYWRpdXNcclxuICAgICAgICAvL21pbjIgLT0gY2lyY2xlLnJhZGl1czsvL21pbiBpcyBuZWdhdGl2ZSByYWRpdXNcclxuICAgICAgICAvLy8vIG9mZnNldCB0aGUgcG9seWdvbidzIG1heC9taW5cclxuICAgICAgICAvL29mZnNldCA9IG5vcm1hbEF4aXMuZG90KHZlY3Rvck9mZnNldCk7XHJcbiAgICAgICAgLy9taW4xICs9IG9mZnNldDtcclxuICAgICAgICAvL21heDEgKz0gb2Zmc2V0O1xyXG4gICAgICAgIC8vLy8gZG8gdGhlIGJpZyB0ZXN0XHJcbiAgICAgICAgLy90ZXN0MSA9IG1pbjEgLSBtYXgyO1xyXG4gICAgICAgIC8vdGVzdDIgPSBtaW4yIC0gbWF4MTtcclxuICAgICAgICAvL2lmICh0ZXN0MSA+IDAgfHwgdGVzdDIgPiAwKSB7Ly9pZiBlaXRoZXIgdGVzdCBpcyBncmVhdGVyIHRoYW4gMCwgdGhlcmUgaXMgYSBnYXAsIHdlIGNhbiBnaXZlIHVwIG5vdy5cclxuICAgICAgICAvLyAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAvL31cclxuICAgICAgICAvLy8vIGZpbmQgdGhlIG5vcm1hbCBheGlzIGZvciBlYWNoIHBvaW50IGFuZCBwcm9qZWN0XHJcbiAgICAgICAgLy9mb3IgKGkgPSAwOyBpIDwgdmVjdG9ycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vICAgIG5vcm1hbEF4aXMgPSBfZmluZE5vcm1hbEF4aXModmVjdG9ycywgaSk7XHJcbiAgICAgICAgLy8gICAgLy8gcHJvamVjdCB0aGUgcG9seWdvbihhZ2Fpbj8geWVzLCBjaXJjbGVzIHZzLiBwb2x5Z29uIHJlcXVpcmUgbW9yZSB0ZXN0aW5nLi4uKVxyXG4gICAgICAgIC8vICAgIG1pbjEgPSBub3JtYWxBeGlzLmRvdCh2ZWN0b3JzWzBdKTsvL3Byb2plY3RcclxuICAgICAgICAvLyAgICBtYXgxID0gbWluMTsvL3NldCBtYXggYW5kIG1pblxyXG4gICAgICAgIC8vICAgIC8vcHJvamVjdCBhbGwgdGhlIG90aGVyIHBvaW50cyhzZWUsIGNpcmxjZXMgdi4gcG9seWdvbnMgdXNlIGxvdHMgb2YgdGhpcy4uLilcclxuICAgICAgICAvLyAgICBmb3IgKGogPSAxOyBqIDwgdmVjdG9ycy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgIC8vICAgICAgICB0ZXN0ID0gbm9ybWFsQXhpcy5kb3QodmVjdG9yc1tqXSk7Ly9tb3JlIHByb2plY3Rpb25cclxuICAgICAgICAvLyAgICAgICAgaWYgKHRlc3QgPCBtaW4xKSBtaW4xID0gdGVzdDsvL3NtYWxsZXN0IG1pblxyXG4gICAgICAgIC8vICAgICAgICBpZiAodGVzdCA+IG1heDEpIG1heDEgPSB0ZXN0Oy8vbGFyZ2VzdCBtYXhcclxuICAgICAgICAvLyAgICB9XHJcbiAgICAgICAgLy8gICAgLy8gcHJvamVjdCB0aGUgY2lyY2xlKGFnYWluKVxyXG4gICAgICAgIC8vICAgIG1heDIgPSBjaXJjbGUucmFkaXVzOy8vbWF4IGlzIHJhZGl1c1xyXG4gICAgICAgIC8vICAgIG1pbjIgLT0gY2lyY2xlLnJhZGl1czsvL21pbiBpcyBuZWdhdGl2ZSByYWRpdXNcclxuICAgICAgICAvLyAgICAvL29mZnNldCBwb2ludHNcclxuICAgICAgICAvLyAgICBvZmZzZXQgPSBub3JtYWxBeGlzLmRvdCh2ZWN0b3JPZmZzZXQpO1xyXG4gICAgICAgIC8vICAgIG1pbjEgKz0gb2Zmc2V0O1xyXG4gICAgICAgIC8vICAgIG1heDEgKz0gb2Zmc2V0O1xyXG4gICAgICAgIC8vICAgIC8vIGRvIHRoZSB0ZXN0LCBhZ2FpblxyXG4gICAgICAgIC8vICAgIHRlc3QxID0gbWluMSAtIG1heDI7XHJcbiAgICAgICAgLy8gICAgdGVzdDIgPSBtaW4yIC0gbWF4MTtcclxuICAgICAgICAvLyAgICBpZiAodGVzdDEgPiAwIHx8IHRlc3QyID4gMCkge1xyXG4gICAgICAgIC8vICAgICAgICAvL2ZhaWxlZC4uIHF1aXQgbm93XHJcbiAgICAgICAgLy8gICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgLy8gICAgfVxyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIC8vcmV0dXJuIG5ldyBSZW5kZXJKcy5WZWN0b3Iobm9ybWFsQXhpcy54ICogKG1heDIgLSBtaW4xKSAqIC0xLCBub3JtYWxBeGlzLnkgKiAobWF4MiAtIG1pbjEpICogLTEpOy8vcmV0dXJuIHRoZSBzZXBhcmF0aW9uIGRpc3RhbmNlXHJcbiAgICB9XHJcblxyXG4gICAgdmFyIF9wb2ludEluUmVjdGFuZ2xlID0gZnVuY3Rpb24gKHAsIHIpIHtcclxuICAgICAgICByZXR1cm4gKHAueCA+PSByLnggJiZcclxuICAgICAgICBwLnggPD0gci54ICsgci53aWR0aCAmJlxyXG4gICAgICAgIHAueSA+PSByLnkgJiZcclxuICAgICAgICBwLnkgPD0gci55ICsgci5oZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5BYWJiQ29sbGlzaW9uID0gZnVuY3Rpb24gKHJlY3RBLCByZWN0Qikge1xyXG4gICAgICAgIGlmIChNYXRoLmFicyhyZWN0QS54IC0gcmVjdEIueCkgPCByZWN0QS53aWR0aCArIHJlY3RCLndpZHRoKSB7XHJcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhyZWN0QS55IC0gcmVjdEIueSkgPCByZWN0QS5oZWlnaHQgKyByZWN0Qi5oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgbW9kdWxlLnBvaW50SW5PYmplY3QgPSBmdW5jdGlvbiAocCwgb2JqKSB7XHJcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuUmVjdGFuZ2xlKVxyXG4gICAgICAgICAgICByZXR1cm4gX3BvaW50SW5SZWN0YW5nbGUocCwgb2JqKTtcclxuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5BcmMpXHJcbiAgICAgICAgICAgIHJldHVybiBfcG9pbnRJbkNpcmNsZShwLCBvYmopO1xyXG4gICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLlBvbHlnb24pXHJcbiAgICAgICAgICAgIHJldHVybiBfcG9pbnRJblBvbHlnb24ocCwgb2JqKTtcclxuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5MaW5lKVxyXG4gICAgICAgICAgICByZXR1cm4gX3BvaW50SW5MaW5lKHAsIG9iaik7XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY2hlY2tDb2xsaXNpb24gPSBmdW5jdGlvbiAob2JqMSwgb2JqMiwgdmVsb2NpdHkpIHtcclxuICAgICAgICBpZiAob2JqMSBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuUmVjdGFuZ2xlICYmIG9iajIgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLlJlY3RhbmdsZSlcclxuICAgICAgICAgICAgcmV0dXJuIF9yZWN0VnNSZWN0KG9iajEsIG9iajIpO1xyXG5cclxuICAgICAgICBpZiAob2JqMSBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuUmVjdGFuZ2xlICYmIG9iajIgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLkFyYylcclxuICAgICAgICAgICAgcmV0dXJuIF9yZWN0VnNDaXJjbGUob2JqMSwgb2JqMik7XHJcbiAgICAgICAgaWYgKG9iajEgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLkFyYyAmJiBvYmoyIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5SZWN0YW5nbGUpXHJcbiAgICAgICAgICAgIHJldHVybiBfcmVjdFZzQ2lyY2xlKG9iajIsIG9iajEpO1xyXG5cclxuICAgICAgICBpZiAob2JqMSBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuQXJjICYmIG9iajIgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLkFyYylcclxuICAgICAgICAgICAgcmV0dXJuIF9jaXJjbGVWc0NpcmNsZShvYmoxLCBvYmoyLCB2ZWxvY2l0eSk7XHJcblxyXG4gICAgICAgIGlmIChvYmoxIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5MaW5lICYmIG9iajIgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLkFyYylcclxuICAgICAgICAgICAgcmV0dXJuIF9saW5lVnNDaXJjbGUob2JqMSwgb2JqMik7XHJcbiAgICAgICAgaWYgKG9iajEgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLkFyYyAmJiBvYmoyIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5MaW5lKVxyXG4gICAgICAgICAgICByZXR1cm4gX2xpbmVWc0NpcmNsZShvYmoyLCBvYmoxKTtcclxuXHJcbiAgICAgICAgaWYgKG9iajEgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLlBvbHlnb24gJiYgb2JqMiBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuUG9seWdvbikge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iajEuc3ViUG9seXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2JqMi5zdWJQb2x5cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IG1vZHVsZS5wb2x5Z29uQ29sbGlzaW9uKG9iajEuc3ViUG9seXNbaV0sIG9iajIuc3ViUG9seXNbal0sIHZlbG9jaXR5KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuaW50ZXJzZWN0IHx8IHJlc3BvbnNlLndpbGxJbnRlcnNlY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDsvL1JlbmRlckpzLlZlY3Rvci5jbG9uZSgwLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9iajEgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLkFyYyAmJiBvYmoyIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5Qb2x5Z29uKVxyXG4gICAgICAgICAgICByZXR1cm4gX2NpcmNsZVZzUG9seWdvbihvYmoxLCBvYmoyLCB2ZWxvY2l0eSk7XHJcbiAgICAgICAgaWYgKG9iajEgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLlBvbHlnb24gJiYgb2JqMiBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuQXJjKVxyXG4gICAgICAgICAgICByZXR1cm4gX2NpcmNsZVZzUG9seWdvbihvYmoyLCBvYmoxLCB2ZWxvY2l0eSk7XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbW9kdWxlO1xyXG5cclxufShSZW5kZXJKcy5QaHlzaWNzLkNvbGxpc2lvbnMgfHwge30pKTsiLCJ2YXIgUmVuZGVySnMgPSBSZW5kZXJKcyB8fCB7fTtcclxuUmVuZGVySnMuUGh5c2ljcy5Db2xsaXNpb25zID0gKGZ1bmN0aW9uIChtb2R1bGUpIHtcclxuXHJcbiAgICAvLyBDaGVjayBpZiBwb2x5Z29uIEEgaXMgZ29pbmcgdG8gY29sbGlkZSB3aXRoIHBvbHlnb24gQiBmb3IgdGhlIGdpdmVuIHZlbG9jaXR5XHJcbiAgICBtb2R1bGUucG9seWdvbkNvbGxpc2lvbiA9IGZ1bmN0aW9uIChwb2x5Z29uQSwgcG9seWdvbkIsIHZlbG9jaXR5KSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgaW50ZXJzZWN0OiB0cnVlLFxyXG4gICAgICAgICAgICB3aWxsSW50ZXJzZWN0OiB0cnVlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZWRnZUNvdW50QSA9IHBvbHlnb25BLmVkZ2VzLmxlbmd0aDtcclxuICAgICAgICB2YXIgZWRnZUNvdW50QiA9IHBvbHlnb25CLmVkZ2VzLmxlbmd0aDtcclxuICAgICAgICB2YXIgbWluSW50ZXJ2YWxEaXN0YW5jZSA9IEluZmluaXR5O1xyXG4gICAgICAgIHZhciB0cmFuc2xhdGlvbkF4aXMgPSBuZXcgUmVuZGVySnMuVmVjdG9yKCk7XHJcbiAgICAgICAgdmFyIGVkZ2U7XHJcblxyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgdGhlIGVkZ2VzIG9mIGJvdGggcG9seWdvbnNcclxuICAgICAgICBmb3IgKHZhciBlZGdlSW5kZXggPSAwLCBsID0gZWRnZUNvdW50QSArIGVkZ2VDb3VudEI7IGVkZ2VJbmRleCA8IGw7IGVkZ2VJbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlZGdlSW5kZXggPCBlZGdlQ291bnRBKSB7XHJcbiAgICAgICAgICAgICAgICBlZGdlID0gcG9seWdvbkEuZWRnZXNbZWRnZUluZGV4XTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVkZ2UgPSBwb2x5Z29uQi5lZGdlc1tlZGdlSW5kZXggLSBlZGdlQ291bnRBXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gPT09PT0gMS4gRmluZCBpZiB0aGUgcG9seWdvbnMgYXJlIGN1cnJlbnRseSBpbnRlcnNlY3RpbmcgPT09PT1cclxuXHJcbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIGF4aXMgcGVycGVuZGljdWxhciB0byB0aGUgY3VycmVudCBlZGdlXHJcbiAgICAgICAgICAgIHZhciBheGlzID0gbmV3IFJlbmRlckpzLlZlY3RvcigtZWRnZS55LCBlZGdlLngpO1xyXG4gICAgICAgICAgICBheGlzLnNldChheGlzLm5vcm1hbGl6ZSgpKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHByb2plY3Rpb24gb2YgdGhlIHBvbHlnb24gb24gdGhlIGN1cnJlbnQgYXhpc1xyXG4gICAgICAgICAgICB2YXIgbWluQSA9IDAsIG1pbkIgPSAwLCBtYXhBID0gMCwgbWF4QiA9IDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvamVjdGVkQSA9IF9wcm9qZWN0UG9seWdvbihheGlzLCBwb2x5Z29uQSwgbWluQSwgbWF4QSk7XHJcbiAgICAgICAgICAgIG1pbkEgPSBwcm9qZWN0ZWRBLm1pbjtcclxuICAgICAgICAgICAgbWF4QSA9IHByb2plY3RlZEEubWF4O1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb2plY3RlZEIgPSBfcHJvamVjdFBvbHlnb24oYXhpcywgcG9seWdvbkIsIG1pbkIsIG1heEIpO1xyXG4gICAgICAgICAgICBtaW5CID0gcHJvamVjdGVkQi5taW47XHJcbiAgICAgICAgICAgIG1heEIgPSBwcm9qZWN0ZWRCLm1heDtcclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBwb2x5Z29uIHByb2plY3Rpb25zIGFyZSBjdXJyZW50bHR5IGludGVyc2VjdGluZ1xyXG4gICAgICAgICAgICBpZiAoX2ludGVydmFsRGlzdGFuY2UobWluQSwgbWF4QSwgbWluQiwgbWF4QikgPiAwKSByZXN1bHQuaW50ZXJzZWN0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyA9PT09PSAyLiBOb3cgZmluZCBpZiB0aGUgcG9seWdvbnMgKndpbGwqIGludGVyc2VjdCA9PT09PVxyXG5cclxuICAgICAgICAgICAgLy8gUHJvamVjdCB0aGUgdmVsb2NpdHkgb24gdGhlIGN1cnJlbnQgYXhpc1xyXG4gICAgICAgICAgICB2YXIgdmVsb2NpdHlQcm9qZWN0aW9uID0gYXhpcy5kb3QodmVsb2NpdHkpO1xyXG5cclxuICAgICAgICAgICAgLy8gR2V0IHRoZSBwcm9qZWN0aW9uIG9mIHBvbHlnb24gQSBkdXJpbmcgdGhlIG1vdmVtZW50XHJcbiAgICAgICAgICAgIGlmICh2ZWxvY2l0eVByb2plY3Rpb24gPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBtaW5BICs9IHZlbG9jaXR5UHJvamVjdGlvbjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1heEEgKz0gdmVsb2NpdHlQcm9qZWN0aW9uO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBEbyB0aGUgc2FtZSB0ZXN0IGFzIGFib3ZlIGZvciB0aGUgbmV3IHByb2plY3Rpb25cclxuICAgICAgICAgICAgdmFyIGludGVydmFsRGlzdGFuY2UgPSBfaW50ZXJ2YWxEaXN0YW5jZShtaW5BLCBtYXhBLCBtaW5CLCBtYXhCKTtcclxuICAgICAgICAgICAgaWYgKGludGVydmFsRGlzdGFuY2UgPiAwKSByZXN1bHQud2lsbEludGVyc2VjdCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlIHBvbHlnb25zIGFyZSBub3QgaW50ZXJzZWN0aW5nIGFuZCB3b24ndCBpbnRlcnNlY3QsIGV4aXQgdGhlIGxvb3BcclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQuaW50ZXJzZWN0ICYmICFyZXN1bHQud2lsbEludGVyc2VjdCkgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgY3VycmVudCBpbnRlcnZhbCBkaXN0YW5jZSBpcyB0aGUgbWluaW11bSBvbmUuIElmIHNvIHN0b3JlXHJcbiAgICAgICAgICAgIC8vIHRoZSBpbnRlcnZhbCBkaXN0YW5jZSBhbmQgdGhlIGN1cnJlbnQgZGlzdGFuY2UuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBiZSB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgbWluaW11bSB0cmFuc2xhdGlvbiB2ZWN0b3JcclxuICAgICAgICAgICAgaW50ZXJ2YWxEaXN0YW5jZSA9IE1hdGguYWJzKGludGVydmFsRGlzdGFuY2UpO1xyXG4gICAgICAgICAgICBpZiAoaW50ZXJ2YWxEaXN0YW5jZSA8IG1pbkludGVydmFsRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIG1pbkludGVydmFsRGlzdGFuY2UgPSBpbnRlcnZhbERpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRpb25BeGlzID0gYXhpcztcclxuXHJcbiAgICAgICAgICAgICAgICBkID0gcG9seWdvbkEuZ2V0Q2VudGVyKCkuc3ViKHBvbHlnb25CLmdldENlbnRlcigpKTtcclxuICAgICAgICAgICAgICAgIGlmIChkLmRvdCh0cmFuc2xhdGlvbkF4aXMpIDwgMCkgdHJhbnNsYXRpb25BeGlzID0gdHJhbnNsYXRpb25BeGlzLnNjYWxlKC0xKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVGhlIG1pbmltdW0gdHJhbnNsYXRpb24gdmVjdG9yIGNhbiBiZSB1c2VkIHRvIHB1c2ggdGhlIHBvbHlnb25zIGFwcGFydC5cclxuICAgICAgICAvLyBGaXJzdCBtb3ZlcyB0aGUgcG9seWdvbnMgYnkgdGhlaXIgdmVsb2NpdHlcclxuICAgICAgICAvLyB0aGVuIG1vdmUgcG9seWdvbkEgYnkgTWluaW11bVRyYW5zbGF0aW9uVmVjdG9yLlxyXG4gICAgICAgIGlmIChyZXN1bHQud2lsbEludGVyc2VjdCkgcmVzdWx0Lm1pbmltdW1UcmFuc2xhdGlvblZlY3RvciA9IHRyYW5zbGF0aW9uQXhpcy5zY2FsZShtaW5JbnRlcnZhbERpc3RhbmNlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdGhlIGRpc3RhbmNlIGJldHdlZW4gW21pbkEsIG1heEFdIGFuZCBbbWluQiwgbWF4Ql1cclxuICAgIC8vIFRoZSBkaXN0YW5jZSB3aWxsIGJlIG5lZ2F0aXZlIGlmIHRoZSBpbnRlcnZhbHMgb3ZlcmxhcFxyXG4gICAgdmFyIF9pbnRlcnZhbERpc3RhbmNlID0gZnVuY3Rpb24gKG1pbkEsIG1heEEsIG1pbkIsIG1heEIpIHtcclxuICAgICAgICBpZiAobWluQSA8IG1pbkIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1pbkIgLSBtYXhBO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtaW5BIC0gbWF4QjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBwcm9qZWN0aW9uIG9mIGEgcG9seWdvbiBvbiBhbiBheGlzIGFuZCByZXR1cm5zIGl0IGFzIGEgW21pbiwgbWF4XSBpbnRlcnZhbFxyXG4gICAgdmFyIF9wcm9qZWN0UG9seWdvbiA9IGZ1bmN0aW9uIChheGlzLCBwb2x5Z29uLCBtaW4sIG1heCkge1xyXG4gICAgICAgIC8vIFRvIHByb2plY3QgYSBwb2ludCBvbiBhbiBheGlzIHVzZSB0aGUgZG90IHByb2R1Y3RcclxuICAgICAgICB2YXIgZCA9IGF4aXMuZG90KHBvbHlnb24udmVydGljZXNbMF0pO1xyXG4gICAgICAgIG1pbiA9IGQ7XHJcbiAgICAgICAgbWF4ID0gZDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvbHlnb24udmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZCA9IHBvbHlnb24udmVydGljZXNbaV0uZG90KGF4aXMpO1xyXG4gICAgICAgICAgICBpZiAoZCA8IG1pbikge1xyXG4gICAgICAgICAgICAgICAgbWluID0gZDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChkID4gbWF4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtaW46IG1pbixcclxuICAgICAgICAgICAgbWF4OiBtYXhcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBtb2R1bGU7XHJcblxyXG59KFJlbmRlckpzLlBoeXNpY3MuQ29sbGlzaW9ucyB8fCB7fSkpOyIsInJlZ2lzdGVyTmFtZXNwYWNlKFwiUmVuZGVySnMuQ2FudmFzLlNoYXBlc1wiKTtcclxuXHJcbi8qXHJcbiAqUmVwcmVzZW50cyBhIGNpcmNsZSBzaGFwZSwgaW5oZXJpdHMgZnJvbSBzaGFwZVxyXG4gKi9cclxuUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5BcmMgPSBpbmplY3QoXCJVdGlsc1wiKVxyXG4gICAgLmJhc2UoUmVuZGVySnMuQ2FudmFzLk9iamVjdClcclxuICAgIC5jbGFzcyhmdW5jdGlvbiAodXRpbHMsIG9wdGlvbnMpIHtcclxuICAgICAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgICAgICB0aGlzLmJhc2Uob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIG9wdGlvbnMud2lkdGggPSBvcHRpb25zLmhlaWdodCA9IG9wdGlvbnMucmFkaXVzICogMiwgb3B0aW9ucy5yYWRpdXMgKiAyO1xyXG5cclxuICAgICAgICB0aGlzLnJhZGl1cyA9IG9wdGlvbnMucmFkaXVzO1xyXG4gICAgICAgIHRoaXMuc0FuZ2xlID0gdXRpbHMuY29udmVydFRvUmFkKG9wdGlvbnMuc0FuZ2xlIHx8IDApO1xyXG4gICAgICAgIHRoaXMuZUFuZ2xlID0gdXRpbHMuY29udmVydFRvUmFkKG9wdGlvbnMuZUFuZ2xlIHx8IDM2MCk7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IG9wdGlvbnMuY29sb3I7XHJcbiAgICAgICAgdGhpcy5maWxsQ29sb3IgPSBvcHRpb25zLmZpbGxDb2xvcjtcclxuICAgICAgICB0aGlzLmxpbmVXaWR0aCA9IG9wdGlvbnMubGluZVdpZHRoIHx8IDE7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICpPdmVycmlkZXMgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLCBiZWNhdXNlIHRoZSBjaXJjbGUgY2VudGVyIHBvaW50IGlzIG5vdCB0aGUgdG9wLGxlZnQgY29ybmVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5nZXRDZW50ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVuZGVySnMuVmVjdG9yKHRoaXMucG9zLnggKyB0aGlzLndpZHRoIC8gMiwgdGhpcy5wb3MueSArIHRoaXMuaGVpZ2h0IC8gMik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKk92ZXJyaWRlcyB0aGUgb3JpZ2luYWwgZnVuY3Rpb25cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBvaW50SW50ZXJzZWN0ID0gZnVuY3Rpb24gKHApIHtcclxuICAgICAgICAgICAgdmFyIGMgPSB0aGlzLmdldENlbnRlcigpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgucG93KHAueCAtIGMueCwgMikgKyBNYXRoLnBvdyhwLnkgLSBjLnksIDIpIDw9IE1hdGgucG93KCh0aGlzLndpZHRoIC8gMiksIDIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICpGdW5jdGlvbiBpcyBjYWxsZWQgaW4gZXZlcnkgZnJhbWUgdG8gcmVkcmF3IGl0c2VsZlxyXG4gICAgICAgICAqLWN0eCBpcyB0aGUgZHJhd2luZyBjb250ZXh0IGZyb20gYSBjYW52YXNcclxuICAgICAgICAgKi1mcHMgaXMgdGhlIGZyYW1lIHBlciBzZWNvbmRcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmRyYXcgPSBmdW5jdGlvbiAoY3R4KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFuZ2xlICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVTaGFwZShjdHgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHRoaXMubGluZVdpZHRoO1xyXG4gICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmNvbG9yO1xyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gdGhpcy5maWxsQ29sb3I7XHJcbiAgICAgICAgICAgIGN0eC5hcmModGhpcy5wb3MueCArIHRoaXMud2lkdGggLyAyLCB0aGlzLnBvcy55ICsgdGhpcy5oZWlnaHQgLyAyLCB0aGlzLndpZHRoIC8gMiwgdGhpcy5zQW5nbGUsIHRoaXMuZUFuZ2xlKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sb3IpIHtcclxuICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5maWxsQ29sb3IpIHtcclxuICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYW5nbGUgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7IiwicmVnaXN0ZXJOYW1lc3BhY2UoXCJSZW5kZXJKcy5DYW52YXMuU2hhcGVzXCIpO1xyXG5cclxuLypcclxuICpSZXByZXNlbnRzIGFuIGltYWdlLCBpbmhlcml0cyBmcm9tIG9iamVjdFxyXG4gKi9cclxuUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5JbWFnZSA9IGluamVjdChcIlV0aWxzXCIpXHJcbiAgICAuYmFzZShSZW5kZXJKcy5DYW52YXMuT2JqZWN0KVxyXG4gICAgLmNsYXNzKGZ1bmN0aW9uICh1dGlscywgb3B0aW9ucykge1xyXG5cclxuICAgICAgICB0aGlzLmJhc2Uob3B0aW9ucyk7XHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBMb2NhbHNcclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgX2ltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICBfaW1hZ2Uuc3JjID0gb3B0aW9ucy51cmw7XHJcbiAgICAgICAgX2ltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi53aWR0aCA9IF9pbWFnZS53aWR0aDtcclxuICAgICAgICAgICAgc2VsZi5oZWlnaHQgPSBfaW1hZ2UuaGVpZ2h0O1xyXG4gICAgICAgICAgICBfbG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBfbG9hZGVkID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIF9ibHVyUmFkaXVzID0gb3B0aW9ucy5ibHVyUmFkaXVzIHx8IDA7XHJcbiAgICAgICAgdmFyIF9jYWNoZSA9IG9wdGlvbnMuY2FjaGUgPT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG9wdGlvbnMuY2FjaGU7XHJcbiAgICAgICAgdmFyIF9maWx0ZXJDYWNoZSA9IG51bGw7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqRnVuY3Rpb24gaXMgY2FsbGVkIGluIGV2ZXJ5IGZyYW1lIHRvIHJlZHJhdyBpdHNlbGZcclxuICAgICAgICAgKi1jdHggaXMgdGhlIGRyYXdpbmcgY29udGV4dCBmcm9tIGEgY2FudmFzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5kcmF3ID0gZnVuY3Rpb24gKGN0eCkge1xyXG4gICAgICAgICAgICBpZiAoIV9sb2FkZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFfZmlsdGVyQ2FjaGUpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5maWx0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLmZpbHRlcnNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBSZW5kZXJKcy5DYW52YXMuRmlsdGVycy5CbHVyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2ZpbHRlckNhY2hlID0gUmVuZGVySnMuQ2FudmFzLkZpbHRlcnMuQmx1cihfaW1hZ2UsIF9ibHVyUmFkaXVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoX2ZpbHRlckNhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICBjdHgucHV0SW1hZ2VEYXRhKF9maWx0ZXJDYWNoZSwgdGhpcy5wb3MueCwgdGhpcy5wb3MueSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKF9pbWFnZSwgdGhpcy5wb3MueCwgdGhpcy5wb3MueSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFfY2FjaGUpXHJcbiAgICAgICAgICAgICAgICBfZmlsdGVyQ2FjaGUgPSBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTsiLCJyZWdpc3Rlck5hbWVzcGFjZShcIlJlbmRlckpzLkNhbnZhcy5TaGFwZXNcIik7XHJcblxyXG4vKlxyXG4gKlJlcHJlc2VudHMgYSBsaW5lIHNoYXBlLCBpbmhlcml0cyBmcm9tIHNoYXBlXHJcbiAqL1xyXG5SZW5kZXJKcy5DYW52YXMuU2hhcGVzLkxpbmUgPSBpbmplY3QoKVxyXG4gICAgLmJhc2UoUmVuZGVySnMuQ2FudmFzLk9iamVjdClcclxuICAgIC5jbGFzcyhmdW5jdGlvbiAob3B0aW9ucykge1xyXG5cclxuICAgICAgICB0aGlzLmJhc2Uoe1xyXG4gICAgICAgICAgICB4OiBvcHRpb25zLngxLFxyXG4gICAgICAgICAgICB5OiBvcHRpb25zLnkxLFxyXG4gICAgICAgICAgICB3aWR0aDogTWF0aC5hYnMob3B0aW9ucy54MiAtIG9wdGlvbnMueDEpLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IE1hdGguYWJzKG9wdGlvbnMueTIgLSBvcHRpb25zLnkxKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmNvbG9yID0gXCIjMDAwXCI7XHJcbiAgICAgICAgdGhpcy5saW5lV2lkdGggPSAxO1xyXG4gICAgICAgIHRoaXMucG9zMiA9IG5ldyBSZW5kZXJKcy5WZWN0b3Iob3B0aW9ucy54Miwgb3B0aW9ucy55Mik7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IG9wdGlvbnMuY29sb3I7XHJcbiAgICAgICAgdGhpcy5saW5lV2lkdGggPSBvcHRpb25zLmxpbmVXaWR0aCB8fCAxO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqRnVuY3Rpb24gaXMgY2FsbGVkIGluIGV2ZXJ5IGZyYW1lIHRvIHJlZHJhdyBpdHNlbGZcclxuICAgICAgICAgKi1jdHggaXMgdGhlIGRyYXdpbmcgY29udGV4dCBmcm9tIGEgY2FudmFzXHJcbiAgICAgICAgICotZnBzIGlzIHRoZSBmcmFtZSBwZXIgc2Vjb25kXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5kcmF3ID0gZnVuY3Rpb24gKGN0eCwgZnJhbWUsIHN0YWdlUG9zaXRpb24pIHtcclxuICAgICAgICAgICAgdmFyIGFic1Bvc2l0aW9uID0gdGhpcy5wb3Muc3ViKHN0YWdlUG9zaXRpb24pO1xyXG4gICAgICAgICAgICB2YXIgYWJzUG9zaXRpb24yID0gdGhpcy5wb3MyLnN1YihzdGFnZVBvc2l0aW9uKTtcclxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBjdHgubW92ZVRvKGFic1Bvc2l0aW9uLngsIGFic1Bvc2l0aW9uLnkpO1xyXG4gICAgICAgICAgICBjdHgubGluZVRvKGFic1Bvc2l0aW9uMi54LCBhYnNQb3NpdGlvbjIueSk7XHJcblxyXG4gICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSB0aGlzLmxpbmVXaWR0aDtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5jb2xvcjtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuIiwicmVnaXN0ZXJOYW1lc3BhY2UoXCJSZW5kZXJKcy5DYW52YXMuU2hhcGVzXCIpO1xyXG5cclxuLypcclxuICpSZXByZXNlbnRzIGEgbGluZSBzaGFwZSwgaW5oZXJpdHMgZnJvbSBzaGFwZVxyXG4gKi9cclxuUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5Qb2x5Z29uID0gaW5qZWN0KFwiVXRpbHNcIilcclxuICAgIC5iYXNlKFJlbmRlckpzLkNhbnZhcy5PYmplY3QpXHJcbiAgICAuY2xhc3MoZnVuY3Rpb24gKHV0aWxzLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5iYXNlKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICB0aGlzLmNvbG9yID0gb3B0aW9ucy5jb2xvciB8fCBcIiMwMDBcIjtcclxuICAgICAgICB0aGlzLmxpbmVXaWR0aCA9IG9wdGlvbnMubGluZVdpZHRoIHx8IDE7XHJcbiAgICAgICAgdGhpcy52ZXJ0aWNlcyA9IG9wdGlvbnMucG9pbnRzIHx8IFtdO1xyXG4gICAgICAgIHRoaXMuc3ViUG9seXMgPSBbXTtcclxuICAgICAgICB0aGlzLmVkZ2VzID0gW107XHJcbiAgICAgICAgdGhpcy5yRWRnZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmJ1aWxkRWRnZXMoKTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBEZWNvbXBvc2UgYSBwb2x5Z29uIGlmIGl0J3MgY29uY2F2ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZGVjb21wb3NlID0gZnVuY3Rpb24gKHJlc3VsdCwgcmVmbGV4VmVydGljZXMsIHN0ZWluZXJQb2ludHMsIGRlbHRhLCBtYXhsZXZlbCwgbGV2ZWwpIHtcclxuICAgICAgICAgICAgbWF4bGV2ZWwgPSBtYXhsZXZlbCB8fCAxMDA7XHJcbiAgICAgICAgICAgIGxldmVsID0gbGV2ZWwgfHwgMDtcclxuICAgICAgICAgICAgZGVsdGEgPSBkZWx0YSB8fCAyNTtcclxuICAgICAgICAgICAgcmVzdWx0ID0gdHlwZW9mIChyZXN1bHQpICE9PSBcInVuZGVmaW5lZFwiID8gcmVzdWx0IDogW107XHJcbiAgICAgICAgICAgIHJlZmxleFZlcnRpY2VzID0gcmVmbGV4VmVydGljZXMgfHwgW107XHJcbiAgICAgICAgICAgIHN0ZWluZXJQb2ludHMgPSBzdGVpbmVyUG9pbnRzIHx8IFtdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHVwcGVySW50ID0gbmV3IFJlbmRlckpzLlZlY3RvcigwLCAwKSwgbG93ZXJJbnQgPSBuZXcgUmVuZGVySnMuVmVjdG9yKDAsIDApLCBwID0gbmV3IFJlbmRlckpzLlZlY3RvcigwLCAwKTsgLy8gUG9pbnRzXHJcbiAgICAgICAgICAgIHZhciB1cHBlckRpc3QgPSAwLCBsb3dlckRpc3QgPSAwLCBkID0gMCwgY2xvc2VzdERpc3QgPSAwOyAvLyBzY2FsYXJzXHJcbiAgICAgICAgICAgIHZhciB1cHBlckluZGV4ID0gMCwgbG93ZXJJbmRleCA9IDAsIGNsb3Nlc3RJbmRleCA9IDA7IC8vIEludGVnZXJzXHJcbiAgICAgICAgICAgIHZhciBsb3dlclBvbHkgPSBuZXcgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5Qb2x5Z29uKCksIHVwcGVyUG9seSA9IG5ldyBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLlBvbHlnb24oKTsgLy8gcG9seWdvbnNcclxuICAgICAgICAgICAgdmFyIHBvbHkgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgdiA9IHRoaXMudmVydGljZXM7XHJcblxyXG4gICAgICAgICAgICBpZiAodi5sZW5ndGggPCAzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXZlbCsrO1xyXG4gICAgICAgICAgICBpZiAobGV2ZWwgPiBtYXhsZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwicXVpY2tEZWNvbXA6IG1heCBsZXZlbCAoXCIgKyBtYXhsZXZlbCArIFwiKSByZWFjaGVkLlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvbHkuaXNSZWZsZXgoaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWZsZXhWZXJ0aWNlcy5wdXNoKHBvbHkudmVydGljZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwcGVyRGlzdCA9IGxvd2VyRGlzdCA9IE51bWJlci5NQVhfVkFMVUU7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMudmVydGljZXMubGVuZ3RoOyArK2opIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJlbmRlckpzLlZlY3Rvci5sZWZ0KHBvbHkuYXQoaSAtIDEpLCBwb2x5LmF0KGkpLCBwb2x5LmF0KGopKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgUmVuZGVySnMuVmVjdG9yLnJpZ2h0T24ocG9seS5hdChpIC0gMSksIHBvbHkuYXQoaSksIHBvbHkuYXQoaiAtIDEpKSkgeyAvLyBpZiBsaW5lIGludGVyc2VjdHMgd2l0aCBhbiBlZGdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gdGhpcy5nZXRJbnRlcnNlY3Rpb25Qb2ludChwb2x5LmF0KGkgLSAxKSwgcG9seS5hdChpKSwgcG9seS5hdChqKSwgcG9seS5hdChqIC0gMSkpOyAvLyBmaW5kIHRoZSBwb2ludCBvZiBpbnRlcnNlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSZW5kZXJKcy5WZWN0b3IucmlnaHQocG9seS5hdChpICsgMSksIHBvbHkuYXQoaSksIHApKSB7IC8vIG1ha2Ugc3VyZSBpdCdzIGluc2lkZSB0aGUgcG9seVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBSZW5kZXJKcy5WZWN0b3Iuc3FkaXN0KHBvbHkudmVydGljZXNbaV0sIHApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkIDwgbG93ZXJEaXN0KSB7IC8vIGtlZXAgb25seSB0aGUgY2xvc2VzdCBpbnRlcnNlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJEaXN0ID0gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJJbnQgPSBwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dlckluZGV4ID0gajtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJlbmRlckpzLlZlY3Rvci5sZWZ0KHBvbHkuYXQoaSArIDEpLCBwb2x5LmF0KGkpLCBwb2x5LmF0KGogKyAxKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIFJlbmRlckpzLlZlY3Rvci5yaWdodE9uKHBvbHkuYXQoaSArIDEpLCBwb2x5LmF0KGkpLCBwb2x5LmF0KGopKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHRoaXMuZ2V0SW50ZXJzZWN0aW9uUG9pbnQocG9seS5hdChpICsgMSksIHBvbHkuYXQoaSksIHBvbHkuYXQoaiksIHBvbHkuYXQoaiArIDEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSZW5kZXJKcy5WZWN0b3IubGVmdChwb2x5LmF0KGkgLSAxKSwgcG9seS5hdChpKSwgcCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gUmVuZGVySnMuVmVjdG9yLnNxZGlzdChwb2x5LnZlcnRpY2VzW2ldLCBwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA8IHVwcGVyRGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlckRpc3QgPSBkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlckludCA9IHA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVySW5kZXggPSBqO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgYXJlIG5vIHZlcnRpY2VzIHRvIGNvbm5lY3QgdG8sIGNob29zZSBhIHBvaW50IGluIHRoZSBtaWRkbGVcclxuICAgICAgICAgICAgICAgICAgICBpZiAobG93ZXJJbmRleCA9PSAodXBwZXJJbmRleCArIDEpICUgdGhpcy52ZXJ0aWNlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkNhc2UgMTogVmVydGV4KFwiK2krXCIpLCBsb3dlckluZGV4KFwiK2xvd2VySW5kZXgrXCIpLCB1cHBlckluZGV4KFwiK3VwcGVySW5kZXgrXCIpLCBwb2x5LnNpemUoXCIrdGhpcy52ZXJ0aWNlcy5sZW5ndGgrXCIpXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwLnggPSAobG93ZXJJbnQueCArIHVwcGVySW50LngpIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcC55ID0gKGxvd2VySW50LnkgKyB1cHBlckludC55KSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZWluZXJQb2ludHMucHVzaChwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpIDwgdXBwZXJJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9sb3dlclBvbHkuaW5zZXJ0KGxvd2VyUG9seS5lbmQoKSwgcG9seS5iZWdpbigpICsgaSwgcG9seS5iZWdpbigpICsgdXBwZXJJbmRleCArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJQb2x5LmFwcGVuZChwb2x5LCBpLCB1cHBlckluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dlclBvbHkudmVydGljZXMucHVzaChwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyUG9seS52ZXJ0aWNlcy5wdXNoKHApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvd2VySW5kZXggIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXBwZXJQb2x5Lmluc2VydCh1cHBlclBvbHkuZW5kKCksIHBvbHkuYmVnaW4oKSArIGxvd2VySW5kZXgsIHBvbHkuZW5kKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyUG9seS5hcHBlbmQocG9seSwgbG93ZXJJbmRleCwgcG9seS52ZXJ0aWNlcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy91cHBlclBvbHkuaW5zZXJ0KHVwcGVyUG9seS5lbmQoKSwgcG9seS5iZWdpbigpLCBwb2x5LmJlZ2luKCkgKyBpICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlclBvbHkuYXBwZW5kKHBvbHksIDAsIGkgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2xvd2VyUG9seS5pbnNlcnQobG93ZXJQb2x5LmVuZCgpLCBwb2x5LmJlZ2luKCkgKyBpLCBwb2x5LmVuZCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dlclBvbHkuYXBwZW5kKHBvbHksIGksIHBvbHkudmVydGljZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbG93ZXJQb2x5Lmluc2VydChsb3dlclBvbHkuZW5kKCksIHBvbHkuYmVnaW4oKSwgcG9seS5iZWdpbigpICsgdXBwZXJJbmRleCArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJQb2x5LmFwcGVuZChwb2x5LCAwLCB1cHBlckluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dlclBvbHkudmVydGljZXMucHVzaChwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyUG9seS52ZXJ0aWNlcy5wdXNoKHApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy91cHBlclBvbHkuaW5zZXJ0KHVwcGVyUG9seS5lbmQoKSwgcG9seS5iZWdpbigpICsgbG93ZXJJbmRleCwgcG9seS5iZWdpbigpICsgaSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJQb2x5LmFwcGVuZChwb2x5LCBsb3dlckluZGV4LCBpICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25uZWN0IHRvIHRoZSBjbG9zZXN0IHBvaW50IHdpdGhpbiB0aGUgdHJpYW5nbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkNhc2UgMjogVmVydGV4KFwiK2krXCIpLCBjbG9zZXN0SW5kZXgoXCIrY2xvc2VzdEluZGV4K1wiKSwgcG9seS5zaXplKFwiK3RoaXMudmVydGljZXMubGVuZ3RoK1wiKVxcblwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb3dlckluZGV4ID4gdXBwZXJJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJJbmRleCArPSB0aGlzLnZlcnRpY2VzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZXN0RGlzdCA9IE51bWJlci5NQVhfVkFMVUU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBwZXJJbmRleCA8IGxvd2VySW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBsb3dlckluZGV4OyBqIDw9IHVwcGVySW5kZXg7ICsraikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJlbmRlckpzLlZlY3Rvci5sZWZ0T24ocG9seS5hdChpIC0gMSksIHBvbHkuYXQoaSksIHBvbHkuYXQoaikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgUmVuZGVySnMuVmVjdG9yLnJpZ2h0T24ocG9seS5hdChpICsgMSksIHBvbHkuYXQoaSksIHBvbHkuYXQoaikpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IFJlbmRlckpzLlZlY3Rvci5zcWRpc3QocG9seS5hdChpKSwgcG9seS5hdChqKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQgPCBjbG9zZXN0RGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZXN0RGlzdCA9IGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RJbmRleCA9IGogJSB0aGlzLnZlcnRpY2VzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpIDwgY2xvc2VzdEluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dlclBvbHkuYXBwZW5kKHBvbHksIGksIGNsb3Nlc3RJbmRleCArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3Nlc3RJbmRleCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyUG9seS5hcHBlbmQocG9seSwgY2xvc2VzdEluZGV4LCB2Lmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlclBvbHkuYXBwZW5kKHBvbHksIDAsIGkgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJQb2x5LmFwcGVuZChwb2x5LCBpLCB2Lmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dlclBvbHkuYXBwZW5kKHBvbHksIDAsIGNsb3Nlc3RJbmRleCArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJQb2x5LmFwcGVuZChwb2x5LCBjbG9zZXN0SW5kZXgsIGkgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc29sdmUgc21hbGxlc3QgcG9seSBmaXJzdFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb3dlclBvbHkudmVydGljZXMubGVuZ3RoIDwgdXBwZXJQb2x5LnZlcnRpY2VzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlclBvbHkuZGVjb21wb3NlKHJlc3VsdCwgcmVmbGV4VmVydGljZXMsIHN0ZWluZXJQb2ludHMsIGRlbHRhLCBtYXhsZXZlbCwgbGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlclBvbHkuZGVjb21wb3NlKHJlc3VsdCwgcmVmbGV4VmVydGljZXMsIHN0ZWluZXJQb2ludHMsIGRlbHRhLCBtYXhsZXZlbCwgbGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyUG9seS5kZWNvbXBvc2UocmVzdWx0LCByZWZsZXhWZXJ0aWNlcywgc3RlaW5lclBvaW50cywgZGVsdGEsIG1heGxldmVsLCBsZXZlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyUG9seS5kZWNvbXBvc2UocmVzdWx0LCByZWZsZXhWZXJ0aWNlcywgc3RlaW5lclBvaW50cywgZGVsdGEsIG1heGxldmVsLCBsZXZlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgcmVzdWx0Lmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtrXS5idWlsZEVkZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzdWx0LnB1c2godGhpcyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogQXBwZW5kIHBvaW50cyBcImZyb21cIiB0byBcInRvXCItMSBmcm9tIGFuIG90aGVyIHBvbHlnb24gXCJwb2x5XCIgb250byB0aGlzIG9uZS5cclxuICAgICAgICAgKiBAbWV0aG9kIGFwcGVuZFxyXG4gICAgICAgICAqIEBwYXJhbSB7UG9seWdvbn0gcG9seSBUaGUgcG9seWdvbiB0byBnZXQgcG9pbnRzIGZyb20uXHJcbiAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9ICBmcm9tIFRoZSB2ZXJ0ZXggaW5kZXggaW4gXCJwb2x5XCIuXHJcbiAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9ICB0byBUaGUgZW5kIHZlcnRleCBpbmRleCBpbiBcInBvbHlcIi4gTm90ZSB0aGF0IHRoaXMgdmVydGV4IGlzIE5PVCBpbmNsdWRlZCB3aGVuIGFwcGVuZGluZy5cclxuICAgICAgICAgKiBAcmV0dXJuIHtBcnJheX1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmFwcGVuZCA9IGZ1bmN0aW9uIChwb2x5LCBmcm9tLCB0bykge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIChmcm9tKSA9PT0gXCJ1bmRlZmluZWRcIikgdGhyb3cgbmV3IEVycm9yKFwiRnJvbSBpcyBub3QgZ2l2ZW4hXCIpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mICh0bykgPT09IFwidW5kZWZpbmVkXCIpIHRocm93IG5ldyBFcnJvcihcIlRvIGlzIG5vdCBnaXZlbiFcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAodG8gLSAxIDwgZnJvbSkgdGhyb3cgbmV3IEVycm9yKFwibG9sMVwiKTtcclxuICAgICAgICAgICAgaWYgKHRvID4gcG9seS52ZXJ0aWNlcy5sZW5ndGgpIHRocm93IG5ldyBFcnJvcihcImxvbDJcIik7XHJcbiAgICAgICAgICAgIGlmIChmcm9tIDwgMCkgdGhyb3cgbmV3IEVycm9yKFwibG9sM1wiKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBmcm9tOyBpIDwgdG87IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52ZXJ0aWNlcy5wdXNoKHBvbHkudmVydGljZXNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBHZXQgYSB2ZXJ0ZXggYXQgcG9zaXRpb24gaS4gSXQgZG9lcyBub3QgbWF0dGVyIGlmIGkgaXMgb3V0IG9mIGJvdW5kcywgdGhpcyBmdW5jdGlvbiB3aWxsIGp1c3QgY3ljbGUuXHJcbiAgICAgICAgICogQG1ldGhvZCBhdFxyXG4gICAgICAgICAqIEBwYXJhbSAge051bWJlcn0gaVxyXG4gICAgICAgICAqIEByZXR1cm4ge0FycmF5fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYXQgPSBmdW5jdGlvbiAoaSkge1xyXG4gICAgICAgICAgICB2YXIgdiA9IHRoaXMudmVydGljZXMsXHJcbiAgICAgICAgICAgICAgICBzID0gdi5sZW5ndGg7XHJcbiAgICAgICAgICAgIHJldHVybiB2W2kgPCAwID8gaSAlIHMgKyBzIDogaSAlIHNdO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogR2V0IGZpcnN0IHZlcnRleFxyXG4gICAgICAgICAqIEBtZXRob2QgZmlyc3RcclxuICAgICAgICAgKiBAcmV0dXJuIHtBcnJheX1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmZpcnN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy52ZXJ0aWNlc1swXTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIEdldCBsYXN0IHZlcnRleFxyXG4gICAgICAgICAqIEBtZXRob2QgbGFzdFxyXG4gICAgICAgICAqIEByZXR1cm4ge0FycmF5fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubGFzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmVydGljZXNbdGhpcy52ZXJ0aWNlcy5sZW5ndGggLSAxXTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBDaGVja3MgdGhhdCB0aGUgbGluZSBzZWdtZW50cyBvZiB0aGlzIHBvbHlnb24gZG8gbm90IGludGVyc2VjdCBlYWNoIG90aGVyLlxyXG4gICAgICAgICAqIEBtZXRob2QgaXNTaW1wbGVcclxuICAgICAgICAgKiBAcGFyYW0gIHtBcnJheX0gcGF0aCBBbiBhcnJheSBvZiB2ZXJ0aWNlcyBlLmcuIFtbMCwwXSxbMCwxXSwuLi5dXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgICAgICAgKiBAdG9kbyBTaG91bGQgaXQgY2hlY2sgYWxsIHNlZ21lbnRzIHdpdGggYWxsIG90aGVycz9cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmlzU2ltcGxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IHRoaXMudmVydGljZXM7XHJcbiAgICAgICAgICAgIC8vIENoZWNrXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aC5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaSAtIDE7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlZ21lbnRzSW50ZXJzZWN0KHBhdGhbaV0sIHBhdGhbaSArIDFdLCBwYXRoW2pdLCBwYXRoW2ogKyAxXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIHNlZ21lbnQgYmV0d2VlbiB0aGUgbGFzdCBhbmQgdGhlIGZpcnN0IHBvaW50IHRvIGFsbCBvdGhlcnNcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBwYXRoLmxlbmd0aCAtIDI7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VnbWVudHNJbnRlcnNlY3QocGF0aFswXSwgcGF0aFtwYXRoLmxlbmd0aCAtIDFdLCBwYXRoW2ldLCBwYXRoW2kgKyAxXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0SW50ZXJzZWN0aW9uUG9pbnQgPSBmdW5jdGlvbiAocDEsIHAyLCBxMSwgcTIsIGRlbHRhKSB7XHJcbiAgICAgICAgICAgIGRlbHRhID0gZGVsdGEgfHwgMDtcclxuICAgICAgICAgICAgdmFyIGExID0gcDIueSAtIHAxLnk7XHJcbiAgICAgICAgICAgIHZhciBiMSA9IHAxLnggLSBwMi54O1xyXG4gICAgICAgICAgICB2YXIgYzEgPSAoYTEgKiBwMS54KSArIChiMSAqIHAxLnkpO1xyXG4gICAgICAgICAgICB2YXIgYTIgPSBxMi55IC0gcTEueTtcclxuICAgICAgICAgICAgdmFyIGIyID0gcTEueCAtIHEyLng7XHJcbiAgICAgICAgICAgIHZhciBjMiA9IChhMiAqIHExLngpICsgKGIyICogcTEueSk7XHJcbiAgICAgICAgICAgIHZhciBkZXQgPSAoYTEgKiBiMikgLSAoYTIgKiBiMSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIVNjYWxhci5lcShkZXQsIDAsIGRlbHRhKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBSZW5kZXJKcy5WZWN0b3IuY2xvbmUoKChiMiAqIGMxKSAtIChiMSAqIGMyKSkgLyBkZXQsICgoYTEgKiBjMikgLSAoYTIgKiBjMSkpIC8gZGV0KTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlbmRlckpzLlZlY3Rvci5jbG9uZSgwLCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogQ2hlY2sgaWYgYSBwb2ludCBpbiB0aGUgcG9seWdvbiBpcyBhIHJlZmxleCBwb2ludFxyXG4gICAgICAgICAqIEBtZXRob2QgaXNSZWZsZXhcclxuICAgICAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICBpXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmlzUmVmbGV4ID0gZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJlbmRlckpzLlZlY3Rvci5yaWdodCh0aGlzLmF0KGkgLSAxKSwgdGhpcy5hdChpKSwgdGhpcy5hdChpICsgMSkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMubWFrZUNDVyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGJyID0gMCxcclxuICAgICAgICAgICAgICAgIHYgPSB0aGlzLnZlcnRpY2VzO1xyXG5cclxuICAgICAgICAgICAgLy8gZmluZCBib3R0b20gcmlnaHQgcG9pbnRcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodltpXS55IDwgdlticl0ueSB8fCAodltpXS55ID09IHZbYnJdLnkgJiYgdltpXS54ID4gdlticl0ueCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBiciA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHJldmVyc2UgcG9seSBpZiBjbG9ja3dpc2VcclxuICAgICAgICAgICAgaWYgKCFSZW5kZXJKcy5WZWN0b3IubGVmdCh0aGlzLmF0KGJyIC0gMSksIHRoaXMuYXQoYnIpLCB0aGlzLmF0KGJyICsgMSkpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJldmVyc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBSZXZlcnNlIHRoZSB2ZXJ0aWNlcyBpbiB0aGUgcG9seWdvblxyXG4gICAgICAgICAqIEBtZXRob2QgcmV2ZXJzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucmV2ZXJzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgTiA9IHRoaXMudmVydGljZXMubGVuZ3RoOyBpICE9PSBOOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRtcC5wdXNoKHRoaXMudmVydGljZXMucG9wKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudmVydGljZXMgPSB0bXA7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5zZWdtZW50c0ludGVyc2VjdCA9IGZ1bmN0aW9uIChwMSwgcDIsIHExLCBxMikge1xyXG4gICAgICAgICAgICB2YXIgZHggPSBwMi54IC0gcDEueDtcclxuICAgICAgICAgICAgdmFyIGR5ID0gcDIueSAtIHAxLnk7XHJcbiAgICAgICAgICAgIHZhciBkYSA9IHEyLnggLSBxMS54O1xyXG4gICAgICAgICAgICB2YXIgZGIgPSBxMi55IC0gcTEueTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNlZ21lbnRzIGFyZSBwYXJhbGxlbFxyXG4gICAgICAgICAgICBpZiAoZGEgKiBkeSAtIGRiICogZHggPT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzID0gKGR4ICogKHExLnkgLSBwMS55KSArIGR5ICogKHAxLnggLSBxMS54KSkgLyAoZGEgKiBkeSAtIGRiICogZHgpXHJcbiAgICAgICAgICAgIHZhciB0ID0gKGRhICogKHAxLnkgLSBxMS55KSArIGRiICogKHExLnggLSBwMS54KSkgLyAoZGIgKiBkeCAtIGRhICogZHkpXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKHMgPj0gMCAmJiBzIDw9IDEgJiYgdCA+PSAwICYmIHQgPD0gMSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5idWlsZEVkZ2VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcDE7XHJcbiAgICAgICAgICAgIHZhciBwMjtcclxuICAgICAgICAgICAgdGhpcy5lZGdlcyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLnJFZGdlcyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHAxID0gdGhpcy52ZXJ0aWNlc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmIChpICsgMSA+PSB0aGlzLnZlcnRpY2VzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHAyID0gdGhpcy52ZXJ0aWNlc1swXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcDIgPSB0aGlzLnZlcnRpY2VzW2kgKyAxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuZWRnZXMucHVzaChwMi5zdWIocDEpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuckVkZ2VzLnB1c2goe3AxOiBuZXcgUmVuZGVySnMuVmVjdG9yKHAxLngsIHAxLnkpLCBwMjogbmV3IFJlbmRlckpzLlZlY3RvcihwMi54LCBwMi55KX0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRDZW50ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbFggPSAwO1xyXG4gICAgICAgICAgICB2YXIgdG90YWxZID0gMDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbFggKz0gdGhpcy52ZXJ0aWNlc1tpXS54O1xyXG4gICAgICAgICAgICAgICAgdG90YWxZICs9IHRoaXMudmVydGljZXNbaV0ueTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZW5kZXJKcy5WZWN0b3IodG90YWxYIC8gdGhpcy52ZXJ0aWNlcy5sZW5ndGgsIHRvdGFsWSAvIHRoaXMudmVydGljZXMubGVuZ3RoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLm9mZnNldCA9IGZ1bmN0aW9uICh4LCB5KSB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMiA/IG5ldyBSZW5kZXJKcy5WZWN0b3IoYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0pIDogYXJndW1lbnRzWzBdO1xyXG4gICAgICAgICAgICB0aGlzLnBvcy5zZXQodGhpcy5wb3MuYWRkKHYpKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IHRoaXMudmVydGljZXNbaV07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZlcnRpY2VzW2ldLnNldChwLmFkZCh2KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zdWJQb2x5cyA9IHRoaXMuZGVjb21wb3NlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gXCJcIikgcmVzdWx0ICs9IFwiIFwiO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IFwie1wiICsgdGhpcy52ZXJ0aWNlc1tpXS50b1N0cmluZyh0cnVlKSArIFwifVwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICpGdW5jdGlvbiBpcyBjYWxsZWQgaW4gZXZlcnkgZnJhbWUgdG8gcmVkcmF3IGl0c2VsZlxyXG4gICAgICAgICAqLWN0eCBpcyB0aGUgZHJhd2luZyBjb250ZXh0IGZyb20gYSBjYW52YXNcclxuICAgICAgICAgKi1mcHMgaXMgdGhlIGZyYW1lIHBlciBzZWNvbmRcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmRyYXcgPSBmdW5jdGlvbiAoY3R4KSB7XHJcbiAgICAgICAgICAgIHZhciBjb2xvcnMgPSBbXCJpbmRpYW5yZWRcIiwgXCJ5ZWxsb3dcIiwgJ2dyZWVuJ107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJQb2x5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZlcnRpY2VzID0gdGhpcy5zdWJQb2x5c1tpXS52ZXJ0aWNlcztcclxuICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8odmVydGljZXNbMF0ueCwgdmVydGljZXNbMF0ueSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMTsgaiA8IHZlcnRpY2VzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyh2ZXJ0aWNlc1tqXS54LCB2ZXJ0aWNlc1tqXS55KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSB0aGlzLmxpbmVXaWR0aDtcclxuICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY29sb3I7XHJcbiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3JzW2ldO1xyXG4gICAgICAgICAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTsiLCJyZWdpc3Rlck5hbWVzcGFjZShcIlJlbmRlckpzLkNhbnZhcy5TaGFwZXNcIik7XHJcblxyXG4vKlxyXG4gKlJlcHJlc2VudHMgYSByZWN0YW5nbGUgc2hhcGUsIGluaGVyaXRzIGZyb20gc2hhcGVcclxuICovXHJcblJlbmRlckpzLkNhbnZhcy5TaGFwZXMuUmVjdGFuZ2xlID0gaW5qZWN0KFwiVXRpbHNcIilcclxuICAgIC5iYXNlKFJlbmRlckpzLkNhbnZhcy5PYmplY3QpXHJcbiAgICAuY2xhc3MoZnVuY3Rpb24gKHV0aWxzLCBvcHRpb25zKSB7XHJcblxyXG4gICAgICAgIHRoaXMuYmFzZShvcHRpb25zKTtcclxuICAgICAgICB0aGlzLmNvbG9yID0gb3B0aW9ucy5jb2xvcjtcclxuICAgICAgICB0aGlzLmZpbGxDb2xvciA9IG9wdGlvbnMuZmlsbENvbG9yO1xyXG4gICAgICAgIHRoaXMubGluZVdpZHRoID0gb3B0aW9ucy5saW5lV2lkdGggfHwgMTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKkZ1bmN0aW9uIGlzIGNhbGxlZCBpbiBldmVyeSBmcmFtZSB0byByZWRyYXcgaXRzZWxmXHJcbiAgICAgICAgICotY3R4IGlzIHRoZSBkcmF3aW5nIGNvbnRleHQgZnJvbSBhIGNhbnZhc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uIChjdHgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sb3IpIHtcclxuICAgICAgICAgICAgICAgIGN0eC5zdHJva2VSZWN0KHRoaXMucG9zLngsIHRoaXMucG9zLnksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5maWxsQ29sb3IpIHtcclxuICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh0aGlzLnBvcy54LCB0aGlzLnBvcy55LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHRoaXMubGluZVdpZHRoO1xyXG4gICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmNvbG9yO1xyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gdGhpcy5maWxsQ29sb3I7XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG4iLCJyZWdpc3Rlck5hbWVzcGFjZShcIlJlbmRlckpzLkNhbnZhcy5TaGFwZXNcIik7XHJcblxyXG4vKlxyXG4gKlJlcHJlc2VudHMgYSBzcHJpdGUgaW1hZ2UsIGluaGVyaXRzIGZyb20gc2hhcGVcclxuICovXHJcblJlbmRlckpzLkNhbnZhcy5TaGFwZXMuU3ByaXRlID0gaW5qZWN0KFwiVXRpbHNcIilcclxuICAgIC5iYXNlKFJlbmRlckpzLkNhbnZhcy5PYmplY3QpXHJcbiAgICAuY2xhc3MoZnVuY3Rpb24gKHV0aWxzLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5iYXNlKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIExvY2Fsc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi53aWR0aCA9IGltYWdlLndpZHRoO1xyXG4gICAgICAgICAgICBzZWxmLmhlaWdodCA9IGltYWdlLmhlaWdodDtcclxuICAgICAgICAgICAgbG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGltYWdlLnNyYyA9IG9wdGlvbnMudXJsO1xyXG4gICAgICAgIHZhciBsb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgZnJhbWVJbmRleCA9IDA7XHJcbiAgICAgICAgdmFyIGZyYW1lQ291bnQgPSBvcHRpb25zLmZyYW1lQ291bnQ7XHJcbiAgICAgICAgdmFyIHN0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgbG9vcCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBkZWZBbmltYXRpb24gPSBvcHRpb25zLmRlZkFuaW1hdGlvbjtcclxuICAgICAgICB2YXIgY3VycmVudDtcclxuICAgICAgICB2YXIgcHJldmlvdXM7XHJcbiAgICAgICAgdmFyIGFuaW1hdGlvbnMgPSBvcHRpb25zLmFuaW1hdGlvbnM7XHJcblxyXG4gICAgICAgIHZhciBhbmltYXRpb24gPSBmdW5jdGlvbiAobmFtZSwgaXNMb29wKSB7XHJcbiAgICAgICAgICAgIGZyYW1lSW5kZXggPSAwO1xyXG4gICAgICAgICAgICBzdGFydGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgbG9vcCA9IGlzTG9vcDtcclxuICAgICAgICAgICAgaWYgKCFhbmltYXRpb25zW25hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHJldmlvdXMgPSBjdXJyZW50O1xyXG4gICAgICAgICAgICBjdXJyZW50ID0gYW5pbWF0aW9uc1tuYW1lXTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5zdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uKGRlZkFuaW1hdGlvbiwgdHJ1ZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRBbmltYXRpb24gPSBmdW5jdGlvbiAobmFtZSwgbG9vcCkge1xyXG4gICAgICAgICAgICBhbmltYXRpb24obmFtZSwgbG9vcCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5wb2ludEludGVyc2VjdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0UmVjdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRlZkZyYW1lID0gYW5pbWF0aW9uc1tkZWZBbmltYXRpb25dWzBdO1xyXG4gICAgICAgICAgICByZXR1cm4ge3g6IHRoaXMucG9zLngsIHk6IHRoaXMucG9zLnksIHdpZHRoOiBkZWZGcmFtZVsyXSwgaGVpZ2h0OiBkZWZGcmFtZVszXX07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5yb3RhdGVTaGFwZSA9IGZ1bmN0aW9uIChjdHgsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFuZ2xlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGRlZkZyYW1lID0gYW5pbWF0aW9uc1tkZWZBbmltYXRpb25dWzBdO1xyXG4gICAgICAgICAgICB2YXIgbyA9IG5ldyBSZW5kZXJKcy5WZWN0b3IocG9zaXRpb24ueCArIChkZWZGcmFtZVsyXSAvIDIpLCBwb3NpdGlvbi55ICsgKGRlZkZyYW1lWzNdIC8gMikpO1xyXG4gICAgICAgICAgICBjdHgudHJhbnNsYXRlKG8ueCwgby55KTtcclxuICAgICAgICAgICAgY3R4LnJvdGF0ZSh1dGlscy5jb252ZXJ0VG9SYWQodGhpcy5hbmdsZSkpO1xyXG4gICAgICAgICAgICBjdHgudHJhbnNsYXRlKC1vLngsIC1vLnkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICpGdW5jdGlvbiBpcyBjYWxsZWQgaW4gZXZlcnkgZnJhbWUgdG8gcmVkcmF3IGl0c2VsZlxyXG4gICAgICAgICAqLWN0eCBpcyB0aGUgZHJhd2luZyBjb250ZXh0IGZyb20gYSBjYW52YXNcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmRyYXcgPSBmdW5jdGlvbiAoY3R4LCBmcmFtZSwgc3RhZ2VQb3NpdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoIWxvYWRlZCB8fCAhc3RhcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgYWJzUG9zaXRpb24gPSB0aGlzLnBvcy5zdWIoc3RhZ2VQb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5hbmdsZSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucm90YXRlU2hhcGUoY3R4LCBhYnNQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50RnJhbWUgPSBjdXJyZW50W2ZyYW1lSW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWFnZSwgY3VycmVudEZyYW1lWzBdLCBjdXJyZW50RnJhbWVbMV0sIGN1cnJlbnRGcmFtZVsyXSwgY3VycmVudEZyYW1lWzNdLCBhYnNQb3NpdGlvbi54LCBhYnNQb3NpdGlvbi55LCBjdXJyZW50RnJhbWVbMl0sIGN1cnJlbnRGcmFtZVszXSk7XHJcbiAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKGZyYW1lLnRpbWUpICUgZnJhbWVDb3VudCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZnJhbWVJbmRleCA9IGZyYW1lSW5kZXggPj0gY3VycmVudC5sZW5ndGggLSAxID8gMCA6IGZyYW1lSW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZyYW1lSW5kZXggPT09IDAgJiYgIWxvb3ApIHtcclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24oZGVmQW5pbWF0aW9uLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5hbmdsZSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9