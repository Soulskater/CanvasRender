function Scalar(){}var Utils=function(e){return e.getGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,s="x"===e?t:3&t|8;return s.toString(16)})},e.parseUrl=function(e){var t=document.createElement("a");return t.href=e,{protocol:t.protocol,port:t.port,pathname:t.pathname,search:t.search,hash:t.hash,host:t.host}},e.sleep=function(e){for(var t=new Date;new Date-t<1e3*e;);},e}(Utils||{}),Utils=function(e){"use strict";e.convertToRad=function(e){return e*(Math.PI/180)};var t=1*new Date-1;return e.getMousePos=function(e,t){var s=e.getBoundingClientRect();return{x:t.clientX-s.left,y:t.clientY-s.top}},e.getCanvas=function(e,t){var s=document.createElement("canvas");return s.width=e,s.height=t,s},e.getPixels=function(e){var t,s;if(e.getContext){t=e;try{s=t.getContext("2d")}catch(n){}}return s||(t=Utils.getCanvas(e.width,e.height),s=t.getContext("2d"),s.drawImage(e,0,0)),s.getImageData(0,0,t.width,t.height)},e.getFps=function(){var e=new Date,s=1e3/(e-t);return t=e,s},e}(Utils||{}),Utils=function(e){return e.isNumber=function(e){return!isNaN(e)},e}(Utils||{}),LinkedList=function(){"use strict";var e=[];this.length=function(){return e.length},this.first=function(){return e[0]},this.last=function(){return e[e.length-1]},this.buildList=function(e){for(var t=0,s=e.length;s>t;t++)0===t&&(this.first=e[t]),t===s-1&&(this.last=e[t]),e[t].prev=e[t-1],e[t].next=e[t+1],e.push(e[t])},this.append=function(t){var s=this.last();e.length>0&&(s.next=t,t.prev=s),e.push(t)},this.getEnumerator=function(){var t=-1;return{current:function(){return e[t]},next:function(){return t!==e.length-1?e[++t]:void 0},prev:function(){return 0!==t?e[t--]:void 0}}}};dependencyContainer.registerType("jQuery",$),dependencyContainer.registerType("linq",linq),dependencyContainer.registerType("Utils",Utils),dependencyContainer.registerType("EventDispatcher",EventDispatcher),dependencyContainer.registerType("LinkedList",LinkedList),registerNamespace("RenderJs.Canvas"),RenderJs.Canvas.Animation=inject().class(function(e,t){var s,n=0,r=!1,i=!1,a=!1,o=function(t){e({frameRate:t,lastTime:n,time:n+1e3/t}),n+=1e3/t};this.start=function(){r||(r=!0,i=a=!1,s=t.on("animate",o))},this.reset=function(){n=0},this.pause=function(){r&&s&&s(),r=!1,a=!0},this.stop=function(){r&&s&&(this.reset(),s()),r=!1,i=!0}}),registerNamespace("RenderJs.Canvas.Filters"),RenderJs.Canvas.Filters.Convolute=function(e,t,s){for(var n=Math.round(Math.sqrt(t.length)),r=Math.floor(n/2),i=Utils.getPixels(e),a=i.data,o=i.width,h=i.height,c=o,l=h,u=Utils.getCanvas(c,l).getContext("2d").createImageData(c,l),d=u.data,v=s?1:0,f=0;l>f;f++)for(var g=0;c>g;g++){for(var p=f,R=g,y=4*(f*c+g),J=0,x=0,C=0,m=0,w=0;n>w;w++)for(var b=0;n>b;b++){var E=p+w-r,M=R+b-r;if(E>=0&&h>E&&M>=0&&o>M){var V=4*(E*o+M),S=t[w*n+b];J+=a[V]*S,x+=a[V+1]*S,C+=a[V+2]*S,m+=a[V+3]*S}}d[y]=J,d[y+1]=x,d[y+2]=C,d[y+3]=m+v*(255-m)}return u},RenderJs.Canvas.Filters.Blur=function(e,t){return stackBlurImage(e,t)},RenderJs.Canvas.Filters.Grayscale=function(e){for(var t=Utils.getPixels(e),s=t.data,n=0;n<s.length;n+=4){var r=s[n],i=s[n+1],a=s[n+2],o=.2126*r+.7152*i+.0722*a;s[n]=s[n+1]=s[n+2]=o}return t},RenderJs.Canvas.Filters.Brightness=function(e,t){for(var s=Utils.getPixels(e),n=s.data,r=0;r<n.length;r+=4)n[r]+=t,n[r+1]+=t,n[r+2]+=t;return s},RenderJs.Canvas.Filters.Threshold=function(e,t){for(var s=Utils.getPixels(e),n=s.data,r=0;r<n.length;r+=4){var i=n[r],a=n[r+1],o=n[r+2],h=.2126*i+.7152*a+.0722*o>=t?255:0;n[r]=n[r+1]=n[r+2]=h}return s},registerNamespace("RenderJs.Canvas"),RenderJs.Canvas.Layer=inject("Utils","EventDispatcher","jQuery").class(function(e,t,s,n,r,i,a){var o=this,h=!1,c=new t,l=0;this.canvas=document.createElement("canvas"),document.getElementById(n).appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.canvas.width=r,this.canvas.height=i,this.active=a,this.prev=null,this.next=null,this.objects=[];var u=function(e,t){t=t||Utils.getMousePos(e.target,e),c.trigger(RenderJs.Canvas.Events.click,[e,t]);for(var n=this.objects.length-1;n>=0;n--)if(RenderJs.Physics.Collisions.pointInObject(t,this.objects[n]))return this.objects[n].trigger(RenderJs.Canvas.Events.click,e),!0;this.prev&&s(this.prev.canvas).trigger("click",t)},d=function(e,t){t=t||Utils.getMousePos(e.target,e),c.trigger(RenderJs.Canvas.Events.mousemove,[e,t]);for(var n=this.objects.length-1;n>=0;n--)if(RenderJs.Physics.Collisions.pointInObject(t,this.objects[n]))return this.objects[n].trigger(RenderJs.Canvas.Events.mousemove,[e,t]),!0;this.prev&&s(this.prev.canvas).trigger("mousemove",t)},v=function(e,t){t=t||Utils.getMousePos(e.target,e),c.trigger(RenderJs.Canvas.Events.mouseenter,[e,t]);for(var n=this.objects.length-1;n>=0;n--)if(RenderJs.Physics.Collisions.pointInObject(t,this.objects[n]))return this.objects[n].trigger(RenderJs.Canvas.Events.mouseenter,[e,t]),!0;this.prev&&s(this.prev.canvas).trigger("mouseenter",t)},f=function(e,t){t=t||Utils.getMousePos(e.target,e),c.trigger(RenderJs.Canvas.Events.mouseleave,[e,t]);for(var n=this.objects.length-1;n>=0;n--)if(RenderJs.Physics.Collisions.pointInObject(t,this.objects[n]))return this.objects[n].trigger(RenderJs.Canvas.Events.mouseleave,[e,t]),!0;this.prev&&s(this.prev.canvas).trigger("mouseleave",t)},g=function(e){c.trigger(RenderJs.Canvas.Events.keydown,e)},p=function(e){c.trigger(RenderJs.Canvas.Events.keyup,e)},R=function(e){c.trigger(RenderJs.Canvas.Events.keypress,e)};s(this.canvas).on("click",function(e,t){u.call(o,e,t)}),s(this.canvas).on("mousemove",function(e,t){d.call(o,e,t)}),s(this.canvas).on("mouseenter",function(e,t){v.call(o,e,t)}),s(this.canvas).on("mouseleave",function(e,t){f.call(o,e,t)}),s(document).on("keydown",function(e){g.call(o,e)}),s(document).on("keyup",function(e){p.call(o,e)}),s(document).on("keypress",function(e){R.call(o,e)}),this.on=function(e,t){return RenderJs.Canvas.Events[e]?c.subscribe(e,t):void 0},this.addObject=function(e){if(!(e instanceof RenderJs.Canvas.Object))throw new Error("An object on the canvas should be inherited from CanvasObject!");e.layer=this,this.objects.push(e)},this.hasSprites=function(){for(var e=0,t=this.objects.length;t>e;e++)if(this.objects[e]instanceof RenderJs.Canvas.Shapes.Sprite)return!0;return!1},this.drawObjects=function(e,t){if((!h||c.hasSubscribers("animate")||this.hasSprites(this)||this.active)&&0!==this.objects.length){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var s=Math.floor(1e3/e);c.trigger("animate",e);for(var n=!0,r=0,i=this.objects.length;i>r;r++)this.objects[r].loaded||(n=!1),this.objects[r].draw(this.ctx,{frameRate:e,lastTime:l,time:l+s},t);n&&(h=!0),l+=s}}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Events={animate:"animate",click:"click",keydown:"keydown",keyup:"keyup",keypress:"keypress",mousemove:"mousemove",mousehover:"mousehover",mouseleave:"mouseleave",collision:"collision",objectChanged:"objectChanged"},RenderJs.Canvas.Object=inject("EventDispatcher","jQuery","Utils").class(function(e,t,s,n){this.dispatcher=new e,n=n||{},this.id=s.getGuid(),this.pos=new RenderJs.Vector(n.x,n.y),this.width=n.width||0,this.height=n.height||0,this.angle=n.angle||0,this.scaleX=n.scaleX,this.scaleY=n.scaleY,this.blurRadius=n.blurRadius,this.collision=n.collision||!1,this.filters=[],this.layer=null,this.loaded=!0,this.getCenter=function(){return new RenderJs.Vector(this.pos.x+this.width/2,this.pos.y+this.height/2)},this.getCenteredRect=function(){var e=this.pos;return{x:e.x,y:e.y,width:this.width,height:this.height}},this.setfilters=function(e){this.filters=e},this.updatePosition=function(e,t){var s=RenderJs.Vector.clone(this.pos.x,this.pos.y),n=this.pos.add(new RenderJs.Vector(e,t));this.pos=n,(s.x!==n.x||s.y!==n.y)&&this.trigger(RenderJs.Canvas.Events.objectChanged,this)},this.rotateShape=function(e){if(0!==this.angle){var t=this.getCenter();e.translate(t.x,t.y),e.rotate(s.convertToRad(this.angle)),e.translate(-t.x,-t.y)}},this.scaleShape=function(e,t,s){var n=this.getCenter();e.translate(n.x,n.y),e.scale(t,s),e.translate(-n.x,-n.y)},this.on=function(e,t){return RenderJs.Canvas.Events[e]?this.dispatcher.subscribe(e,t):void 0},this.trigger=function(e,t){RenderJs.Canvas.Events[e]&&this.dispatcher.trigger(e,t)}});var RenderJs=RenderJs||{};RenderJs.Canvas=RenderJs.Canvas||{},RenderJs.Canvas.Space=function(e){var t=function(e){this.stage=e.stage};t(e)},registerNamespace("RenderJs.Canvas"),RenderJs.Canvas.Stage=inject("Utils","EventDispatcher","LinkedList").class(function(e,t,s,n){var r=n.container||"viewport",i=0,a=new t;this.layers=new s,this.width=n.width||1200,this.height=n.height||800,this.position=new RenderJs.Vector(-50,-50),document.getElementById(r).style.width=this.width+"px",document.getElementById(r).style.height=this.height+"px";var o=function(){var t=this;i=e.getFps();for(var s=this.layers.getEnumerator();void 0!==s.next();)s.current().drawObjects(i,this.position);requestAnimationFrame(function(){o.call(t)})};o.call(this),this.onInvalidate=function(e){return a.subscribe("onInvalidate",e)},this.createLayer=function(e){var t=new RenderJs.Canvas.Layer(r,this.width,this.height,e);return this.layers.append(t),t}});var RenderJs=RenderJs||{};RenderJs.Canvas=RenderJs.Canvas||{},RenderJs.Canvas.Easings=RenderJs.Canvas.Easings||{},RenderJs.Canvas.Easings.BounceEaseOut=function(e,t,s,n){return(e/=n)<1/2.75?7.5625*s*e*e+t:2/2.75>e?s*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?s*(7.5625*(e-=2.25/2.75)*e+.9375)+t:s*(7.5625*(e-=2.625/2.75)*e+.984375)+t},RenderJs.Canvas.Easings.BounceEaseIn=function(e,t,s,n){return s-Kinetic.Easings.BounceEaseOut(n-e,0,s,n)+t},RenderJs.Canvas.Easings.BounceEaseInOut=function(e,t,s,n){return n/2>e?.5*Kinetic.Easings.BounceEaseIn(2*e,0,s,n)+t:.5*Kinetic.Easings.BounceEaseOut(2*e-n,0,s,n)+.5*s+t},RenderJs.Canvas.Easings.EaseIn=function(e,t,s,n){return s*(e/=n)*e+t},RenderJs.Canvas.Easings.EaseOut=function(e,t,s,n){return-s*(e/=n)*(e-2)+t},RenderJs.Canvas.Easings.EaseInOut=function(e,t,s,n){return(e/=n/2)<1?s/2*e*e+t:-s/2*(--e*(e-2)-1)+t},RenderJs.Canvas.Easings.ElasticEaseIn=function(e,t,s,n,r,i){var a=0;return 0===e?t:1===(e/=n)?t+s:(i||(i=.3*n),!r||r<Math.abs(s)?(r=s,a=i/4):a=i/(2*Math.PI)*Math.asin(s/r),-(r*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/i))+t)},RenderJs.Canvas.Easings.ElasticEaseOut=function(e,t,s,n,r,i){var a=0;return 0===e?t:2===(e/=n/2)?t+s:(i||(i=.3*n*1.5),!r||r<Math.abs(s)?(r=s,a=i/4):a=i/(2*Math.PI)*Math.asin(s/r),1>e?-.5*r*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/i)+t:r*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/i)*.5+s+t)},RenderJs.Canvas.Easings.ElasticEaseInOut=function(e,t,s,n,r,i){var a=0;return 0===e?t:2===(e/=n/2)?t+s:(i||(i=.3*n*1.5),!r||r<Math.abs(s)?(r=s,a=i/4):a=i/(2*Math.PI)*Math.asin(s/r),1>e?-.5*r*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/i)+t:r*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/i)*.5+s+t)},RenderJs.Canvas.Transition=function(e){var t=this,s=!1;this.duration=1e3*e.duration||1e3,this.shape=e.shape,this.props=e.props||{},this.origProps={};for(var n in e.props)this.origProps[n]=this.shape[n];this.easing=e.easing||RenderJs.Canvas.Easings.EaseInOut;var r=new RenderJs.Canvas.Animation(function(e){e.time>=t.duration&&r.stop();for(var n in t.props)t.shape[n]=s?t.easing(e.time,t.origProps[n]+t.props[n],-1*t.props[n],t.duration):t.easing(e.time,t.origProps[n],t.props[n],t.duration)},this.shape.layer);this.play=function(){r.start()},this.pause=function(){r.pause()},this.stop=function(){r.stop()},this.reverse=function(){s=!0,r.start()}};var RenderJs=RenderJs||{};RenderJs.Vector=function(e,t){this.x=e||0,this.y=t||0,this.set=function(e){return this.x=e.x,this.y=e.y,this},this.lengthSquared=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},this.length=function(){return Math.sqrt(this.lengthSquared())},this.length2=function(){return this.dot(this)},this.perp=function(){return new RenderJs.Vector(this.y,-this.x)},this.scale=function(e){return new RenderJs.Vector(this.x*e,this.y*e)},this.sub=function(e){return e instanceof RenderJs.Vector?new RenderJs.Vector(this.x-e.x,this.y-e.y):new RenderJs.Vector(this.x-e,this.y-e)},this.add=function(e){return e instanceof RenderJs.Vector?new RenderJs.Vector(this.x+e.x,this.y+e.y):new RenderJs.Vector(this.x+e,this.y+e)},this.dot=function(e){return this.x*e.x+this.y*e.y},this.dist=function(e){return this.sub(e).length()},this.normalize=function(){return this.scale(1/this.length())},this.angle=function(e){return this.dot(e)/(this.length()*e.length())},this.truncate=function(e){var t=Math.min(e,this.length());return t},this.rotate=function(e){var t=this.x,s=this.y;this.x=t*Math.cos(Utils.convertToRad(e))-s*Math.sin(Utils.convertToRad(e)),this.y=s*Math.cos(Utils.convertToRad(e))+t*Math.sin(Utils.convertToRad(e))},this.toString=function(e){return e?"("+Math.round(this.x)+", "+Math.round(this.y)+")":"("+this.x+", "+this.y+")"}},RenderJs.Vector.clone=function(e,t){return new RenderJs.Vector(e,t)},RenderJs.Vector.area=function(e,t,s){return(t.x-e.x)*(s.y-e.y)-(s.x-e.x)*(t.y-e.y)},RenderJs.Vector.left=function(e,t,s){return RenderJs.Vector.area(e,t,s)>0},RenderJs.Vector.leftOn=function(e,t,s){return RenderJs.Vector.area(e,t,s)>=0},RenderJs.Vector.right=function(e,t,s){return RenderJs.Vector.area(e,t,s)<0},RenderJs.Vector.rightOn=function(e,t,s){return RenderJs.Vector.area(e,t,s)<=0},RenderJs.Vector.sqdist=function(e,t){var s=t.x-e.x,n=t.y-e.y;return s*s+n*n},Scalar.eq=function(e,t,s){return s=s||0,Math.abs(e-t)<s};var RenderJs=RenderJs||{};RenderJs.Physics=RenderJs.Physics||{},RenderJs.Physics.Collisions=function(e){var t=function(e,t){"takes a point p=Pt() and an edge of two endpoints a,b=Pt() of a line segment returns boolean";var s,n=1e-5,r=Number.MAX_VALUE,i=Number.MIN_VALUE,a=0,o=t.p1,h=t.p2;o.y>h.y&&(o.set(h),h.set(o)),(e.y==o.y||e.y==h.y)&&(e.y+=n);var c=!1;return e.y>h.y||e.y<o.y||e.x>Math.max(o.x,h.x)?!1:(e.x<Math.min(o.x,h.x)?c=!0:(a=Math.abs(o.x-h.x)>i?(h.y-o.y)/(h.x-o.x):r,s=Math.abs(o.x-e.x)>i?(e.y-o.y)/(e.x-o.x):r,c=s>=a),c)},s=function(e,t){var s=e.length2(),n=t.dot(e);return 0>n?-1:n>s?1:0},n=function(e,s){for(var n=!1,r=0;r<s.rEdges.length;r++)t(e,s.rEdges[r])&&(n=!n);return n},r=function(e,t){var s=(t.pos2.y-t.pos.y)/(t.pos2.x-t.pos.x);return e.y-t.pos.y==s*(e.x-t.pos.y)},i=function(e,t){return o=t.getCenter(),Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2)<=Math.pow(this.width/2,2)},a=function(e,t){var s=e.width,n=e.height,r=t.width,i=t.height;if(0>=r||0>=i||0>=s||0>=n)return!1;var a=e.x,o=e.y,h=t.x,c=t.y;return r+=h,i+=c,s+=a,n+=o,(h>r||r>a)&&(c>i||i>o)&&(a>s||s>h)&&(o>n||n>c)},h=function(e,t){return d(t.getCenter(),e)||c(e.topEdge(),t)||c(e.rightEdge(),t)||c(e.bottomEdge(),t)||c(e.leftEdge(),t)},c=function(e,t){var s=t.getCenter(),n=t.radius,r=new RenderJs.Vector(e.pos2.x-e.pos.x,e.pos2.y-e.pos.y),i=new RenderJs.Vector(e.pos.x-s.x,e.pos.y-s.y),a=r.dot(r),o=2*i.dot(r),t=i.dot(i)-n*n,h=o*o-4*a*t;if(0>h)return!1;h=Math.sqrt(h);var c=(-o-h)/(2*a),l=(-o+h)/(2*a);return c>=0&&1>=c?!0:l>=0&&1>=l?!0:!1},l=function(e,t){var s=t.v,n=e.radius+t.radius,r=(e.pos.x-t.pos.x)*(e.pos.x-t.pos.x)+(e.pos.y-t.pos.y)*(e.pos.y-t.pos.y);if(n*n>r){{var i=Math.sqrt(r),a=n-i,o=new RenderJs.Vector(e.pos.sub(t.pos).x/i,e.pos.sub(t.pos).y/i);t.pos.sub(e.pos)}return s.add(o.scale(a/2))}return null},u=function(e,t){for(var n=e.pos.sub(t.pos),r=e.radius,i=r*r,a=t.vertices.slice(),o=a.length,h=new RenderJs.Vector(0,0),c=new RenderJs.Vector(0,0),l={overlap:Number.MAX_VALUE,overlapN:new RenderJs.Vector(0,0),overlapV:new RenderJs.Vector(0,0)},u=0;o>u;u++){var d=u===o-1?0:u+1,v=0===u?o-1:u-1,f=0,g=null;h.set(t.vertices[u]),c.set(n),c.set(c.sub(a[u])),l&&c.length2()>i&&(l.aInB=!1);var p=s(h,c);if(-1===p){h.set(t.edges[v]);var R=new RenderJs.Vector(0,0).set(n).sub(a[v]);if(p=s(h,R),1===p){var y=c.length();if(y>r)return!1;l&&(l.bInA=!1,g=c.normalize(),f=r-y)}}else if(1===p){if(h.set(t.edges[d]),c.set(n),c.set(c.sub(a[d])),p=s(h,c),-1===p){var y=c.length();if(y>r)return!1;l&&(l.bInA=!1,g=c.normalize(),f=r-y)}}else{var J=h.perp().normalize(),y=c.dot(J),x=Math.abs(y);if(y>0&&x>r)return!1;l&&(g=J,f=r-y,(y>=0||2*r>f)&&(l.bInA=!1))}g&&l&&Math.abs(f)<Math.abs(l.overlap)&&(l.overlap=f,l.overlapN=new RenderJs.Vector(0,0).set(g))}return l&&(l.a=t,l.b=e,l.overlapV=new RenderJs.Vector(0,0).set(l.overlapN).scale(l.overlap)),!0},d=function(e,t){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height};return e.AabbCollision=function(e,t){return Math.abs(e.x-t.x)<e.width+t.width&&Math.abs(e.y-t.y)<e.height+t.height?!0:!1},e.pointInObject=function(e,t){return t instanceof RenderJs.Canvas.Shapes.Rectangle?d(e,t):t instanceof RenderJs.Canvas.Shapes.Arc?i(e,t):t instanceof RenderJs.Canvas.Shapes.Polygon?n(e,t):t instanceof RenderJs.Canvas.Shapes.Line?r(e,t):!1},e.checkCollision=function(t,s,n){if(t instanceof RenderJs.Canvas.Shapes.Rectangle&&s instanceof RenderJs.Canvas.Shapes.Rectangle)return a(t,s);if(t instanceof RenderJs.Canvas.Shapes.Rectangle&&s instanceof RenderJs.Canvas.Shapes.Arc)return h(t,s);if(t instanceof RenderJs.Canvas.Shapes.Arc&&s instanceof RenderJs.Canvas.Shapes.Rectangle)return h(s,t);if(t instanceof RenderJs.Canvas.Shapes.Arc&&s instanceof RenderJs.Canvas.Shapes.Arc)return l(t,s,n);if(t instanceof RenderJs.Canvas.Shapes.Line&&s instanceof RenderJs.Canvas.Shapes.Arc)return c(t,s);if(t instanceof RenderJs.Canvas.Shapes.Arc&&s instanceof RenderJs.Canvas.Shapes.Line)return c(s,t);if(t instanceof RenderJs.Canvas.Shapes.Polygon&&s instanceof RenderJs.Canvas.Shapes.Polygon){for(var r=0;r<t.subPolys.length;r++)for(var i=0;i<s.subPolys.length;i++){var o=e.polygonCollision(t.subPolys[r],s.subPolys[i],n);if(o.intersect||o.willIntersect)return o}return null}return t instanceof RenderJs.Canvas.Shapes.Arc&&s instanceof RenderJs.Canvas.Shapes.Polygon?u(t,s,n):t instanceof RenderJs.Canvas.Shapes.Polygon&&s instanceof RenderJs.Canvas.Shapes.Arc?u(s,t,n):!1},e}(RenderJs.Physics.Collisions||{});var RenderJs=RenderJs||{};RenderJs.Physics.Collisions=function(e){e.polygonCollision=function(e,n,r){for(var i,a={intersect:!0,willIntersect:!0},o=e.edges.length,h=n.edges.length,c=1/0,l=new RenderJs.Vector,u=0,v=o+h;v>u;u++){i=o>u?e.edges[u]:n.edges[u-o];var f=new RenderJs.Vector(-i.y,i.x);f.set(f.normalize());var g=0,p=0,R=0,y=0,J=s(f,e,g,R);g=J.min,R=J.max;var x=s(f,n,p,y);p=x.min,y=x.max,t(g,R,p,y)>0&&(a.intersect=!1);var C=f.dot(r);0>C?g+=C:R+=C;var m=t(g,R,p,y);if(m>0&&(a.willIntersect=!1),!a.intersect&&!a.willIntersect)break;m=Math.abs(m),c>m&&(c=m,l=f,d=e.getCenter().sub(n.getCenter()),d.dot(l)<0&&(l=l.scale(-1)))}return a.willIntersect&&(a.minimumTranslationVector=l.scale(c)),a};var t=function(e,t,s,n){return s>e?s-t:e-n},s=function(e,t,s,n){var r=e.dot(t.vertices[0]);s=r,n=r;for(var i=0;i<t.vertices.length;i++)r=t.vertices[i].dot(e),s>r?s=r:r>n&&(n=r);return{min:s,max:n}};return e}(RenderJs.Physics.Collisions||{}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Arc=inject("Utils").base(RenderJs.Canvas.Object).class(function(e,t){"use strict";this.base(t),t=t||{},t.width=t.height=2*t.radius,2*t.radius,this.radius=t.radius,this.sAngle=e.convertToRad(t.sAngle||0),this.eAngle=e.convertToRad(t.eAngle||360),this.color=t.color,this.fillColor=t.fillColor,this.lineWidth=t.lineWidth||1,this.getCenter=function(){return new RenderJs.Vector(this.pos.x+this.width/2,this.pos.y+this.height/2)},this.pointIntersect=function(e){var t=this.getCenter();return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(this.width/2,2)},this.draw=function(e){0!==this.angle&&(e.save(),this.rotateShape(e)),e.beginPath(),e.lineWidth=this.lineWidth,e.strokeStyle=this.color,e.fillStyle=this.fillColor,e.arc(this.pos.x+this.width/2,this.pos.y+this.height/2,this.width/2,this.sAngle,this.eAngle),this.color&&e.stroke(),this.fillColor&&e.fill(),e.closePath(),0!==this.angle&&e.restore()}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Image=inject("Utils").base(RenderJs.Canvas.Object).class(function(e,t){this.base(t);var s=document.createElement("img");s.src=t.url,s.onload=function(){o.width=s.width,o.height=s.height,n=!0};var n=!1,r=t.blurRadius||0,i=void 0==t.cache?!0:t.cache,a=null,o=this;this.draw=function(e){if(n){if(!a)for(var t=0;t<this.filters.length;t++)switch(this.filters[t]){case RenderJs.Canvas.Filters.Blur:a=RenderJs.Canvas.Filters.Blur(s,r)}a?e.putImageData(a,this.pos.x,this.pos.y):e.drawImage(s,this.pos.x,this.pos.y),i||(a=null)}}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Line=inject().base(RenderJs.Canvas.Object).class(function(e){this.base({x:e.x1,y:e.y1,width:Math.abs(e.x2-e.x1),height:Math.abs(e.y2-e.y1)}),this.color="#000",this.lineWidth=1,this.pos2=new RenderJs.Vector(e.x2,e.y2),this.color=e.color,this.lineWidth=e.lineWidth||1,this.draw=function(e,t,s){var n=this.pos.sub(s),r=this.pos2.sub(s);e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(r.x,r.y),e.closePath(),e.lineWidth=this.lineWidth,e.strokeStyle=this.color,e.stroke()}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Polygon=inject("Utils").base(RenderJs.Canvas.Object).class(function(e,t){this.base(t),this.color=t.color||"#000",this.lineWidth=t.lineWidth||1,this.vertices=t.points||[],this.subPolys=[],this.edges=[],this.rEdges=[],this.buildEdges(),this.decompose=function(e,t,s,n,r,i){r=r||100,i=i||0,n=n||25,e="undefined"!=typeof e?e:[],t=t||[],s=s||[];var a=new RenderJs.Vector(0,0),o=new RenderJs.Vector(0,0),h=new RenderJs.Vector(0,0),c=0,l=0,u=0,d=0,v=0,f=0,g=0,p=new RenderJs.Canvas.Shapes.Polygon,R=new RenderJs.Canvas.Shapes.Polygon,y=this,J=this.vertices;if(J.length<3)return e;if(i++,i>r)return console.warn("quickDecomp: max level ("+r+") reached."),e;for(var x=0;x<this.vertices.length;++x)if(y.isReflex(x)){t.push(y.vertices[x]),c=l=Number.MAX_VALUE;for(var C=0;C<this.vertices.length;++C)RenderJs.Vector.left(y.at(x-1),y.at(x),y.at(C))&&RenderJs.Vector.rightOn(y.at(x-1),y.at(x),y.at(C-1))&&(h=this.getIntersectionPoint(y.at(x-1),y.at(x),y.at(C),y.at(C-1)),RenderJs.Vector.right(y.at(x+1),y.at(x),h)&&(u=RenderJs.Vector.sqdist(y.vertices[x],h),l>u&&(l=u,o=h,f=C))),RenderJs.Vector.left(y.at(x+1),y.at(x),y.at(C+1))&&RenderJs.Vector.rightOn(y.at(x+1),y.at(x),y.at(C))&&(h=this.getIntersectionPoint(y.at(x+1),y.at(x),y.at(C),y.at(C+1)),RenderJs.Vector.left(y.at(x-1),y.at(x),h)&&(u=RenderJs.Vector.sqdist(y.vertices[x],h),c>u&&(c=u,a=h,v=C)));if(f==(v+1)%this.vertices.length)h.x=(o.x+a.x)/2,h.y=(o.y+a.y)/2,s.push(h),v>x?(p.append(y,x,v+1),p.vertices.push(h),R.vertices.push(h),0!=f&&R.append(y,f,y.vertices.length),R.append(y,0,x+1)):(0!=x&&p.append(y,x,y.vertices.length),p.append(y,0,v+1),p.vertices.push(h),R.vertices.push(h),R.append(y,f,x+1));else{if(f>v&&(v+=this.vertices.length),d=Number.MAX_VALUE,f>v)return e;for(var C=f;v>=C;++C)RenderJs.Vector.leftOn(y.at(x-1),y.at(x),y.at(C))&&RenderJs.Vector.rightOn(y.at(x+1),y.at(x),y.at(C))&&(u=RenderJs.Vector.sqdist(y.at(x),y.at(C)),d>u&&(d=u,g=C%this.vertices.length));g>x?(p.append(y,x,g+1),0!==g&&R.append(y,g,J.length),R.append(y,0,x+1)):(0!==x&&p.append(y,x,J.length),p.append(y,0,g+1),R.append(y,g,x+1))}p.vertices.length<R.vertices.length?(p.decompose(e,t,s,n,r,i),R.decompose(e,t,s,n,r,i)):(R.decompose(e,t,s,n,r,i),p.decompose(e,t,s,n,r,i));for(var m=0;m<e.length;m++)e[m].buildEdges();return e}return e.push(this),e},this.append=function(e,t,s){if("undefined"==typeof t)throw new Error("From is not given!");if("undefined"==typeof s)throw new Error("To is not given!");if(t>s-1)throw new Error("lol1");if(s>e.vertices.length)throw new Error("lol2");if(0>t)throw new Error("lol3");for(var n=t;s>n;n++)this.vertices.push(e.vertices[n])},this.at=function(e){var t=this.vertices,s=t.length;return t[0>e?e%s+s:e%s]},this.first=function(){return this.vertices[0]},this.last=function(){return this.vertices[this.vertices.length-1]},this.isSimple=function(){for(var e=this.vertices,t=0;t<e.length-1;t++)for(var s=0;t-1>s;s++)if(this.segmentsIntersect(e[t],e[t+1],e[s],e[s+1]))return!1;for(var t=1;t<e.length-2;t++)if(this.segmentsIntersect(e[0],e[e.length-1],e[t],e[t+1]))return!1;return!0},this.getIntersectionPoint=function(e,t,s,n,r){r=r||0;var i=t.y-e.y,a=e.x-t.x,o=i*e.x+a*e.y,h=n.y-s.y,c=s.x-n.x,l=h*s.x+c*s.y,u=i*c-h*a;return Scalar.eq(u,0,r)?RenderJs.Vector.clone(0,0):RenderJs.Vector.clone((c*o-a*l)/u,(i*l-h*o)/u)},this.isReflex=function(e){return RenderJs.Vector.right(this.at(e-1),this.at(e),this.at(e+1))},this.makeCCW=function(){for(var e=0,t=this.vertices,s=1;s<this.vertices.length;++s)(t[s].y<t[e].y||t[s].y==t[e].y&&t[s].x>t[e].x)&&(e=s);RenderJs.Vector.left(this.at(e-1),this.at(e),this.at(e+1))||this.reverse()},this.reverse=function(){for(var e=[],t=0,s=this.vertices.length;t!==s;t++)e.push(this.vertices.pop());this.vertices=e},this.segmentsIntersect=function(e,t,s,n){var r=t.x-e.x,i=t.y-e.y,a=n.x-s.x,o=n.y-s.y;if(a*i-o*r==0)return!1;var h=(r*(s.y-e.y)+i*(e.x-s.x))/(a*i-o*r),c=(a*(e.y-s.y)+o*(s.x-e.x))/(o*r-a*i);return h>=0&&1>=h&&c>=0&&1>=c},this.buildEdges=function(){var e,t;this.edges=[],this.rEdges=[];for(var s=0;s<this.vertices.length;s++)e=this.vertices[s],t=s+1>=this.vertices.length?this.vertices[0]:this.vertices[s+1],this.edges.push(t.sub(e)),this.rEdges.push({p1:new RenderJs.Vector(e.x,e.y),p2:new RenderJs.Vector(t.x,t.y)})},this.getCenter=function(){for(var e=0,t=0,s=0;s<this.vertices.length;s++)e+=this.vertices[s].x,t+=this.vertices[s].y;return new RenderJs.Vector(e/this.vertices.length,t/this.vertices.length)},this.offset=function(){var e=2===arguments.length?new RenderJs.Vector(arguments[0],arguments[1]):arguments[0];this.pos.set(this.pos.add(e));for(var t=0;t<this.vertices.length;t++){var s=this.vertices[t];this.vertices[t].set(s.add(e))}this.subPolys=this.decompose()},this.toString=function(){for(var e="",t=0;t<this.vertices.length;t++)""!=e&&(e+=" "),e+="{"+this.vertices[t].toString(!0)+"}";return e},this.draw=function(e){for(var t=["indianred","yellow","green"],s=0;s<this.subPolys.length;s++){var n=this.subPolys[s].vertices;e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.lineWidth=this.lineWidth,e.strokeStyle=this.color,e.fillStyle=t[s],e.fill(),e.stroke()}}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Rectangle=inject("Utils").base(RenderJs.Canvas.Object).class(function(e,t){this.base(t),this.color=t.color,this.fillColor=t.fillColor,this.lineWidth=t.lineWidth||1,this.draw=function(e){this.color&&e.strokeRect(this.pos.x,this.pos.y,this.width,this.height),this.fillColor&&e.fillRect(this.pos.x,this.pos.y,this.width,this.height),e.lineWidth=this.lineWidth,e.strokeStyle=this.color,e.fillStyle=this.fillColor}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Sprite=inject("Utils").base(RenderJs.Canvas.Object).class(function(e,t){this.base(t);var s=this,n=document.createElement("img");n.onload=function(){s.width=n.width,s.height=n.height,a=!0},n.src=t.url;var r,i,a=!1,o=0,h=t.frameCount,c=!1,l=!1,u=t.defAnimation,d=t.animations,v=function(e,t){o=0,c=!0,l=t,d[e]&&(i=r,r=d[e])};this.start=function(){v(u,!0)},this.setAnimation=function(e,t){v(e,t)},this.pointIntersect=function(){return!1},this.getRect=function(){var e=d[u][0];return{x:this.pos.x,y:this.pos.y,width:e[2],height:e[3]}},this.rotateShape=function(t,s){if(0!==this.angle){var n=d[u][0],r=new RenderJs.Vector(s.x+n[2]/2,s.y+n[3]/2);t.translate(r.x,r.y),t.rotate(e.convertToRad(this.angle)),t.translate(-r.x,-r.y)}},this.draw=function(e,t,s){if(a&&c){var i=this.pos.sub(s);0!==this.angle&&(e.save(),this.rotateShape(e,i));var d=r[o];e.drawImage(n,d[0],d[1],d[2],d[3],i.x,i.y,d[2],d[3]),Math.floor(t.time)%h===0&&(o=o>=r.length-1?0:o+1,0!==o||l||v(u,!0)),0!==this.angle&&e.restore()}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvdmVjdG9yLmpzIiwiZ2VuZXJhbC5qcyIsImdyYXBoaWNzLmpzIiwibnVtYmVyLmpzIiwibGlua2VkbGlzdC5qcyIsIm1haW4uanMiLCJtb2R1bGVzL2FuaW1hdGlvbi5qcyIsIm1vZHVsZXMvZmlsdGVycy5qcyIsIm1vZHVsZXMvbGF5ZXIuanMiLCJtb2R1bGVzL29iamVjdC5qcyIsIm1vZHVsZXMvc3BhY2UuanMiLCJtb2R1bGVzL3N0YWdlLmpzIiwibW9kdWxlcy90cmFuc2l0aW9uLmpzIiwibW9kdWxlcy9nYW1lL3BoeXNpY3MuanMiLCJtb2R1bGVzL2dhbWUvcG9seWdvbkNvbGxpc2lvbi5qcyIsIm1vZHVsZXMvc2hhcGVzL2FyYy5qcyIsIm1vZHVsZXMvc2hhcGVzL2ltYWdlLmpzIiwibW9kdWxlcy9zaGFwZXMvbGluZS5qcyIsIm1vZHVsZXMvc2hhcGVzL3BvbHlnb24uanMiLCJtb2R1bGVzL3NoYXBlcy9yZWN0YW5nbGUuanMiLCJtb2R1bGVzL3NoYXBlcy9zcHJpdGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBZ0lBLFFBQUEsV0NoSUEsR0FBQSxPQUFBLFNBQUEsR0E0QkEsTUExQkEsR0FBQSxRQUFBLFdBQ0EsTUFBQSx1Q0FBQSxRQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEtBQUEsU0FBQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBQ0EsT0FBQSxHQUFBLFNBQUEsT0FJQSxFQUFBLFNBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLGNBQUEsSUFFQSxPQURBLEdBQUEsS0FBQSxHQUVBLFNBQUEsRUFBQSxTQUNBLEtBQUEsRUFBQSxLQUNBLFNBQUEsRUFBQSxTQUNBLE9BQUEsRUFBQSxPQUNBLEtBQUEsRUFBQSxLQUNBLEtBQUEsRUFBQSxPQUlBLEVBQUEsTUFBQSxTQUFBLEdBRUEsSUFEQSxHQUFBLEdBQUEsR0FBQSxNQUNBLEdBQUEsTUFBQSxFQUFBLElBQUEsTUFJQSxHQUNBLFdDN0JBLE1BQUEsU0FBQSxHQUNBLFlBRUEsR0FBQSxhQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsS0FBQSxHQUFBLEtBRUEsSUFBQSxHQUFBLEVBQUEsR0FBQSxNQUFBLENBMkNBLE9BekNBLEdBQUEsWUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSx1QkFDQSxRQUNBLEVBQUEsRUFBQSxRQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsUUFBQSxFQUFBLE1BSUEsRUFBQSxVQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLGNBQUEsU0FHQSxPQUZBLEdBQUEsTUFBQSxFQUNBLEVBQUEsT0FBQSxFQUNBLEdBR0EsRUFBQSxVQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsQ0FDQSxJQUFBLEVBQUEsV0FBQSxDQUNBLEVBQUEsQ0FDQSxLQUNBLEVBQUEsRUFBQSxXQUFBLE1BQ0EsTUFBQSxLQVFBLE1BTEEsS0FDQSxFQUFBLE1BQUEsVUFBQSxFQUFBLE1BQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxXQUFBLE1BQ0EsRUFBQSxVQUFBLEVBQUEsRUFBQSxJQUVBLEVBQUEsYUFBQSxFQUFBLEVBQUEsRUFBQSxNQUFBLEVBQUEsU0FHQSxFQUFBLE9BQUEsV0FDQSxHQUFBLEdBQUEsR0FBQSxNQUNBLEVBQUEsS0FBQSxFQUFBLEVBSUEsT0FGQSxHQUFBLEVBRUEsR0FHQSxHQUNBLFdDbERBLE1BQUEsU0FBQSxHQUlBLE1BRkEsR0FBQSxTQUFBLFNBQUEsR0FBQSxPQUFBLE1BQUEsSUFFQSxHQUNBLFdDTEEsV0FBQSxXQUNBLFlBQ0EsSUFBQSxLQUVBLE1BQUEsT0FBQSxXQUNBLE1BQUEsR0FBQSxRQUVBLEtBQUEsTUFBQSxXQUNBLE1BQUEsR0FBQSxJQUVBLEtBQUEsS0FBQSxXQUNBLE1BQUEsR0FBQSxFQUFBLE9BQUEsSUFHQSxLQUFBLFVBQUEsU0FBQSxHQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsSUFBQSxJQUNBLEtBQUEsTUFBQSxFQUFBLElBRUEsSUFBQSxFQUFBLElBQ0EsS0FBQSxLQUFBLEVBQUEsSUFHQSxFQUFBLEdBQUEsS0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsS0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxLQUlBLEtBQUEsT0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsTUFFQSxHQUFBLE9BQUEsSUFDQSxFQUFBLEtBQUEsRUFDQSxFQUFBLEtBQUEsR0FFQSxFQUFBLEtBQUEsSUFHQSxLQUFBLGNBQUEsV0FDQSxHQUFBLEdBQUEsRUFDQSxRQUNBLFFBQUEsV0FDQSxNQUFBLEdBQUEsSUFFQSxLQUFBLFdBQ0EsTUFBQSxLQUFBLEVBQUEsT0FBQSxFQUNBLElBQUEsR0FEQSxRQUdBLEtBQUEsV0FDQSxNQUFBLEtBQUEsRUFHQSxFQUFBLEtBSEEsVUNoREEscUJBQUEsYUFBQSxTQUFBLEdBQ0Esb0JBQUEsYUFBQSxPQUFBLE1BQ0Esb0JBQUEsYUFBQSxRQUFBLE9BQ0Esb0JBQUEsYUFBQSxrQkFBQSxpQkFDQSxvQkFBQSxhQUFBLGFBQUEsWUNOQSxrQkFBQSxtQkFFQSxTQUFBLE9BQUEsVUFBQSxTQUNBLE1BQUEsU0FBQSxFQUFBLEdBRUEsR0FDQSxHQURBLEVBQUEsRUFFQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFFQSxFQUFBLFNBQUEsR0FDQSxHQUNBLFVBQUEsRUFDQSxTQUFBLEVBQ0EsS0FBQSxFQUFBLElBQUEsSUFFQSxHQUFBLElBQUEsRUFHQSxNQUFBLE1BQUEsV0FDQSxJQUdBLEdBQUEsRUFDQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsR0FBQSxVQUFBLEtBR0EsS0FBQSxNQUFBLFdBQ0EsRUFBQSxHQUdBLEtBQUEsTUFBQSxXQUNBLEdBQUEsR0FDQSxJQUdBLEdBQUEsRUFDQSxHQUFBLEdBR0EsS0FBQSxLQUFBLFdBQ0EsR0FBQSxJQUNBLEtBQUEsUUFDQSxLQUVBLEdBQUEsRUFDQSxHQUFBLEtDaERBLGtCQUFBLDJCQUVBLFNBQUEsT0FBQSxRQUFBLFVBQUEsU0FBQSxFQUFBLEVBQUEsR0FjQSxJQUFBLEdBYkEsR0FBQSxLQUFBLE1BQUEsS0FBQSxLQUFBLEVBQUEsU0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLFVBQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsT0FFQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsTUFBQSxVQUFBLEVBQUEsR0FBQSxXQUFBLE1BQUEsZ0JBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxLQUVBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsQ0FPQSxJQUFBLEdBTkEsR0FBQSxFQUNBLEVBQUEsRUFDQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBR0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLENBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsSUFBQSxFQUFBLEdBQUEsRUFDQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUNBLEdBQUEsRUFBQSxFQUFBLEdBQUEsR0FJQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLElBQUEsR0FHQSxNQUFBLElBR0EsU0FBQSxPQUFBLFFBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLGdCQUFBLEVBQUEsSUFHQSxTQUFBLE9BQUEsUUFBQSxVQUFBLFNBQUEsR0FHQSxJQUFBLEdBRkEsR0FBQSxNQUFBLFVBQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFFQSxNQUFBLElBR0EsU0FBQSxPQUFBLFFBQUEsV0FBQSxTQUFBLEVBQUEsR0FHQSxJQUFBLEdBRkEsR0FBQSxNQUFBLFVBQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsR0FBQSxFQUNBLEVBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxJQUFBLEVBQ0EsRUFBQSxFQUFBLElBQUEsQ0FFQSxPQUFBLElBR0EsU0FBQSxPQUFBLFFBQUEsVUFBQSxTQUFBLEVBQUEsR0FHQSxJQUFBLEdBRkEsR0FBQSxNQUFBLFVBQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsR0FBQSxFQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFFQSxNQUFBLElDdEZBLGtCQUFBLG1CQUVBLFNBQUEsT0FBQSxNQUFBLE9BQUEsUUFBQSxrQkFBQSxVQUNBLE1BQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxLQUNBLEdBQUEsRUFDQSxFQUFBLEdBQUEsR0FDQSxFQUFBLENBRUEsTUFBQSxPQUFBLFNBQUEsY0FBQSxVQUNBLFNBQUEsZUFBQSxHQUFBLFlBQUEsS0FBQSxRQUNBLEtBQUEsSUFBQSxLQUFBLE9BQUEsV0FBQSxNQUNBLEtBQUEsT0FBQSxNQUFBLEVBQ0EsS0FBQSxPQUFBLE9BQUEsRUFDQSxLQUFBLE9BQUEsRUFFQSxLQUFBLEtBQUEsS0FDQSxLQUFBLEtBQUEsS0FHQSxLQUFBLFVBR0EsSUFBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxNQUFBLFlBQUEsRUFBQSxPQUFBLEdBQ0EsRUFBQSxRQUFBLFNBQUEsT0FBQSxPQUFBLE9BQUEsRUFBQSxHQUNBLEtBQUEsR0FBQSxHQUFBLEtBQUEsUUFBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsR0FBQSxTQUFBLFFBQUEsV0FBQSxjQUFBLEVBQUEsS0FBQSxRQUFBLElBRUEsTUFEQSxNQUFBLFFBQUEsR0FBQSxRQUFBLFNBQUEsT0FBQSxPQUFBLE1BQUEsSUFDQSxDQUdBLE1BQUEsTUFDQSxFQUFBLEtBQUEsS0FBQSxRQUFBLFFBQUEsUUFBQSxJQUlBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLE1BQUEsWUFBQSxFQUFBLE9BQUEsR0FDQSxFQUFBLFFBQUEsU0FBQSxPQUFBLE9BQUEsV0FBQSxFQUFBLEdBQ0EsS0FBQSxHQUFBLEdBQUEsS0FBQSxRQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsSUFDQSxHQUFBLFNBQUEsUUFBQSxXQUFBLGNBQUEsRUFBQSxLQUFBLFFBQUEsSUFFQSxNQURBLE1BQUEsUUFBQSxHQUFBLFFBQUEsU0FBQSxPQUFBLE9BQUEsV0FBQSxFQUFBLEtBQ0EsQ0FHQSxNQUFBLE1BQ0EsRUFBQSxLQUFBLEtBQUEsUUFBQSxRQUFBLFlBQUEsSUFJQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxNQUFBLFlBQUEsRUFBQSxPQUFBLEdBQ0EsRUFBQSxRQUFBLFNBQUEsT0FBQSxPQUFBLFlBQUEsRUFBQSxHQUNBLEtBQUEsR0FBQSxHQUFBLEtBQUEsUUFBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsR0FBQSxTQUFBLFFBQUEsV0FBQSxjQUFBLEVBQUEsS0FBQSxRQUFBLElBRUEsTUFEQSxNQUFBLFFBQUEsR0FBQSxRQUFBLFNBQUEsT0FBQSxPQUFBLFlBQUEsRUFBQSxLQUNBLENBR0EsTUFBQSxNQUNBLEVBQUEsS0FBQSxLQUFBLFFBQUEsUUFBQSxhQUFBLElBSUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsTUFBQSxZQUFBLEVBQUEsT0FBQSxHQUNBLEVBQUEsUUFBQSxTQUFBLE9BQUEsT0FBQSxZQUFBLEVBQUEsR0FDQSxLQUFBLEdBQUEsR0FBQSxLQUFBLFFBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLEdBQUEsU0FBQSxRQUFBLFdBQUEsY0FBQSxFQUFBLEtBQUEsUUFBQSxJQUVBLE1BREEsTUFBQSxRQUFBLEdBQUEsUUFBQSxTQUFBLE9BQUEsT0FBQSxZQUFBLEVBQUEsS0FDQSxDQUdBLE1BQUEsTUFDQSxFQUFBLEtBQUEsS0FBQSxRQUFBLFFBQUEsYUFBQSxJQUlBLEVBQUEsU0FBQSxHQUNBLEVBQUEsUUFBQSxTQUFBLE9BQUEsT0FBQSxRQUFBLElBR0EsRUFBQSxTQUFBLEdBQ0EsRUFBQSxRQUFBLFNBQUEsT0FBQSxPQUFBLE1BQUEsSUFHQSxFQUFBLFNBQUEsR0FDQSxFQUFBLFFBQUEsU0FBQSxPQUFBLE9BQUEsU0FBQSxHQUlBLEdBQUEsS0FBQSxRQUFBLEdBQUEsUUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEtBR0EsRUFBQSxLQUFBLFFBQUEsR0FBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLEVBQUEsS0FHQSxFQUFBLEtBQUEsUUFBQSxHQUFBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxLQUdBLEVBQUEsS0FBQSxRQUFBLEdBQUEsYUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEtBR0EsRUFBQSxVQUFBLEdBQUEsVUFBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsS0FHQSxFQUFBLFVBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxLQUdBLEVBQUEsVUFBQSxHQUFBLFdBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLEtBR0EsS0FBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsVUFBQSxPQUFBLE9BQUEsR0FHQSxFQUFBLFVBQUEsRUFBQSxHQUhBLFFBT0EsS0FBQSxVQUFBLFNBQUEsR0FDQSxLQUFBLFlBQUEsVUFBQSxPQUFBLFFBQ0EsS0FBQSxJQUFBLE9BQUEsaUVBRUEsR0FBQSxNQUFBLEtBQ0EsS0FBQSxRQUFBLEtBQUEsSUFJQSxLQUFBLFdBQUEsV0FDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsS0FBQSxRQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsR0FBQSxLQUFBLFFBQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxPQUNBLE9BQUEsQ0FHQSxRQUFBLEdBSUEsS0FBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEtBQUEsR0FBQSxFQUFBLGVBQUEsWUFBQSxLQUFBLFdBQUEsT0FBQSxLQUFBLFNBQUEsSUFBQSxLQUFBLFFBQUEsT0FBQSxDQUlBLEtBQUEsSUFBQSxVQUFBLEVBQUEsRUFBQSxLQUFBLE9BQUEsTUFBQSxLQUFBLE9BQUEsT0FFQSxJQUFBLEdBQUEsS0FBQSxNQUFBLElBQUEsRUFFQSxHQUFBLFFBQUEsVUFBQSxFQUVBLEtBQUEsR0FEQSxJQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsS0FBQSxRQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxRQUFBLEdBQUEsU0FDQSxHQUFBLEdBRUEsS0FBQSxRQUFBLEdBQUEsS0FBQSxLQUFBLEtBQ0EsVUFBQSxFQUNBLFNBQUEsRUFDQSxLQUFBLEVBQUEsR0FDQSxFQUVBLEtBQ0EsR0FBQSxHQUNBLEdBQUEsTUMzS0Esa0JBQUEsMEJBRUEsU0FBQSxPQUFBLFFBQ0EsUUFBQSxVQUNBLE1BQUEsUUFDQSxRQUFBLFVBQ0EsTUFBQSxRQUNBLFNBQUEsV0FDQSxVQUFBLFlBQ0EsV0FBQSxhQUNBLFdBQUEsYUFDQSxVQUFBLFlBQ0EsY0FBQSxpQkFNQSxTQUFBLE9BQUEsT0FBQSxPQUFBLGtCQUFBLFNBQUEsU0FDQSxNQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxLQUFBLFdBQUEsR0FBQSxHQUVBLEVBQUEsTUFDQSxLQUFBLEdBQUEsRUFBQSxVQUNBLEtBQUEsSUFBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEtBQUEsTUFBQSxFQUFBLE9BQUEsRUFDQSxLQUFBLE9BQUEsRUFBQSxRQUFBLEVBQ0EsS0FBQSxNQUFBLEVBQUEsT0FBQSxFQUNBLEtBQUEsT0FBQSxFQUFBLE9BQ0EsS0FBQSxPQUFBLEVBQUEsT0FDQSxLQUFBLFdBQUEsRUFBQSxXQUNBLEtBQUEsVUFBQSxFQUFBLFlBQUEsRUFDQSxLQUFBLFdBQ0EsS0FBQSxNQUFBLEtBQ0EsS0FBQSxRQUFBLEVBS0EsS0FBQSxVQUFBLFdBQ0EsTUFBQSxJQUFBLFVBQUEsT0FBQSxLQUFBLElBQUEsRUFBQSxLQUFBLE1BQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLE9BQUEsSUFLQSxLQUFBLGdCQUFBLFdBQ0EsR0FBQSxHQUFBLEtBQUEsR0FDQSxRQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE1BQUEsS0FBQSxNQUFBLE9BQUEsS0FBQSxTQUtBLEtBQUEsV0FBQSxTQUFBLEdBQ0EsS0FBQSxRQUFBLEdBR0EsS0FBQSxlQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLE9BQUEsTUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLElBQUEsR0FDQSxFQUFBLEtBQUEsSUFBQSxJQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsR0FDQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLElBQ0EsS0FBQSxRQUFBLFNBQUEsT0FBQSxPQUFBLGNBQUEsT0FTQSxLQUFBLFlBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxLQUFBLE1BQUEsQ0FHQSxHQUFBLEdBQUEsS0FBQSxXQUNBLEdBQUEsVUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLGFBQUEsS0FBQSxRQUNBLEVBQUEsV0FBQSxFQUFBLEdBQUEsRUFBQSxLQVNBLEtBQUEsV0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLFdBQ0EsR0FBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLEVBQUEsR0FDQSxFQUFBLFdBQUEsRUFBQSxHQUFBLEVBQUEsSUFHQSxLQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxVQUFBLE9BQUEsT0FBQSxHQUdBLEtBQUEsV0FBQSxVQUFBLEVBQUEsR0FIQSxRQU1BLEtBQUEsUUFBQSxTQUFBLEVBQUEsR0FDQSxTQUFBLE9BQUEsT0FBQSxJQUdBLEtBQUEsV0FBQSxRQUFBLEVBQUEsS0N0R0EsSUFBQSxVQUFBLFlBQ0EsVUFBQSxPQUFBLFNBQUEsV0FFQSxTQUFBLE9BQUEsTUFBQSxTQUFBLEdBRUEsR0FBQSxHQUFBLFNBQUEsR0FDQSxLQUFBLE1BQUEsRUFBQSxNQUVBLEdBQUEsSUNYQSxrQkFBQSxtQkFFQSxTQUFBLE9BQUEsTUFBQSxPQUFBLFFBQUEsa0JBQUEsY0FDQSxNQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxXQUFBLFdBQ0EsRUFBQSxFQUNBLEVBQUEsR0FBQSxFQUNBLE1BQUEsT0FBQSxHQUFBLEdBQ0EsS0FBQSxNQUFBLEVBQUEsT0FBQSxLQUNBLEtBQUEsT0FBQSxFQUFBLFFBQUEsSUFDQSxLQUFBLFNBQUEsR0FBQSxVQUFBLE9BQUEsSUFBQSxLQUNBLFNBQUEsZUFBQSxHQUFBLE1BQUEsTUFBQSxLQUFBLE1BQUEsS0FDQSxTQUFBLGVBQUEsR0FBQSxNQUFBLE9BQUEsS0FBQSxPQUFBLElBRUEsSUFBQSxHQUFBLFdBQ0EsR0FBQSxHQUFBLElBQ0EsR0FBQSxFQUFBLFFBR0EsS0FEQSxHQUFBLEdBQUEsS0FBQSxPQUFBLGdCQUNBLFNBQUEsRUFBQSxRQUNBLEVBQUEsVUFBQSxZQUFBLEVBQUEsS0FBQSxTQUdBLHVCQUFBLFdBQ0EsRUFBQSxLQUFBLEtBR0EsR0FBQSxLQUFBLE1BRUEsS0FBQSxhQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsVUFBQSxlQUFBLElBR0EsS0FBQSxZQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxVQUFBLE9BQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxLQUFBLE9BQUEsRUFHQSxPQUZBLE1BQUEsT0FBQSxPQUFBLEdBRUEsSUN0Q0EsSUFBQSxVQUFBLFlBQ0EsVUFBQSxPQUFBLFNBQUEsV0FFQSxTQUFBLE9BQUEsUUFBQSxTQUFBLE9BQUEsWUFFQSxTQUFBLE9BQUEsUUFBQSxjQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxPQUFBLEdBQUEsR0FBQSxFQUFBLEtBQ0EsT0FBQSxFQUFBLEVBQUEsRUFBQSxFQUVBLEVBQUEsS0FBQSxFQUNBLEdBQUEsUUFBQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsRUFFQSxJQUFBLEtBQUEsRUFDQSxHQUFBLFFBQUEsR0FBQSxLQUFBLE1BQUEsRUFBQSxPQUFBLEVBR0EsR0FBQSxRQUFBLEdBQUEsTUFBQSxNQUFBLEVBQUEsU0FBQSxHQUlBLFNBQUEsT0FBQSxRQUFBLGFBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxRQUFBLFFBQUEsY0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsR0FHQSxTQUFBLE9BQUEsUUFBQSxnQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLFFBQUEsUUFBQSxhQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUdBLEdBQUEsUUFBQSxRQUFBLGNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBSUEsU0FBQSxPQUFBLFFBQUEsT0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEdBR0EsU0FBQSxPQUFBLFFBQUEsUUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsT0FBQSxHQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsR0FHQSxTQUFBLE9BQUEsUUFBQSxVQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxPQUFBLEdBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsS0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEdBR0EsU0FBQSxPQUFBLFFBQUEsY0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxDQUNBLE9BQUEsS0FBQSxFQUNBLEVBRUEsS0FBQSxHQUFBLEdBQ0EsRUFBQSxHQUVBLElBQ0EsRUFBQSxHQUFBLElBRUEsR0FBQSxFQUFBLEtBQUEsSUFBQSxJQUNBLEVBQUEsRUFDQSxFQUFBLEVBQUEsR0FHQSxFQUFBLEdBQUEsRUFBQSxLQUFBLElBQUEsS0FBQSxLQUFBLEVBQUEsS0FFQSxFQUFBLEtBQUEsSUFBQSxFQUFBLElBQUEsR0FBQSxJQUFBLEtBQUEsSUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEtBQUEsR0FBQSxJQUFBLElBR0EsU0FBQSxPQUFBLFFBQUEsZUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxDQUNBLE9BQUEsS0FBQSxFQUNBLEVBRUEsS0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEdBRUEsSUFDQSxFQUFBLEdBQUEsRUFBQSxNQUVBLEdBQUEsRUFBQSxLQUFBLElBQUEsSUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEdBR0EsRUFBQSxHQUFBLEVBQUEsS0FBQSxJQUFBLEtBQUEsS0FBQSxFQUFBLEdBRUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxJQUFBLEdBQUEsSUFBQSxLQUFBLElBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxLQUFBLEdBQUEsR0FBQSxFQUVBLEVBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxHQUFBLElBQUEsS0FBQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsS0FBQSxHQUFBLEdBQUEsR0FBQSxFQUFBLElBR0EsU0FBQSxPQUFBLFFBQUEsaUJBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsQ0FDQSxPQUFBLEtBQUEsRUFDQSxFQUVBLEtBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxHQUVBLElBQ0EsRUFBQSxHQUFBLEVBQUEsTUFFQSxHQUFBLEVBQUEsS0FBQSxJQUFBLElBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxHQUdBLEVBQUEsR0FBQSxFQUFBLEtBQUEsSUFBQSxLQUFBLEtBQUEsRUFBQSxHQUVBLEVBQUEsR0FDQSxHQUFBLEVBQUEsS0FBQSxJQUFBLEVBQUEsSUFBQSxHQUFBLElBQUEsS0FBQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsS0FBQSxHQUFBLEdBQUEsRUFFQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEtBQUEsR0FBQSxJQUFBLEtBQUEsSUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEtBQUEsR0FBQSxHQUFBLEdBQUEsRUFBQSxJQUtBLFNBQUEsT0FBQSxXQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FFQSxHQUFBLENBRUEsTUFBQSxTQUFBLElBQUEsRUFBQSxVQUFBLElBRUEsS0FBQSxNQUFBLEVBQUEsTUFFQSxLQUFBLE1BQUEsRUFBQSxVQUNBLEtBQUEsWUFDQSxLQUFBLEdBQUEsS0FBQSxHQUFBLE1BQ0EsS0FBQSxVQUFBLEdBQUEsS0FBQSxNQUFBLEVBR0EsTUFBQSxPQUFBLEVBQUEsUUFBQSxTQUFBLE9BQUEsUUFBQSxTQUVBLElBQUEsR0FBQSxHQUFBLFVBQUEsT0FBQSxVQUFBLFNBQUEsR0FDQSxFQUFBLE1BQUEsRUFBQSxVQUNBLEVBQUEsTUFFQSxLQUFBLEdBQUEsS0FBQSxHQUFBLE1BRUEsRUFBQSxNQUFBLEdBREEsRUFDQSxFQUFBLE9BQUEsRUFBQSxLQUFBLEVBQUEsVUFBQSxHQUFBLEVBQUEsTUFBQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEdBQUEsRUFBQSxVQUdBLEVBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxVQUFBLEdBQUEsRUFBQSxNQUFBLEdBQUEsRUFBQSxXQUlBLEtBQUEsTUFBQSxNQUVBLE1BQUEsS0FBQSxXQUNBLEVBQUEsU0FHQSxLQUFBLE1BQUEsV0FDQSxFQUFBLFNBR0EsS0FBQSxLQUFBLFdBQ0EsRUFBQSxRQUdBLEtBQUEsUUFBQSxXQUNBLEdBQUEsRUFDQSxFQUFBLFNaeEtBLElBQUEsVUFBQSxZQUVBLFVBQUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLEVBQUEsR0FBQSxFQUNBLEtBQUEsRUFBQSxHQUFBLEVBRUEsS0FBQSxJQUFBLFNBQUEsR0FHQSxNQUZBLE1BQUEsRUFBQSxFQUFBLEVBQ0EsS0FBQSxFQUFBLEVBQUEsRUFDQSxNQUdBLEtBQUEsY0FBQSxXQUNBLE1BQUEsTUFBQSxJQUFBLEtBQUEsRUFBQSxHQUFBLEtBQUEsSUFBQSxLQUFBLEVBQUEsSUFHQSxLQUFBLE9BQUEsV0FDQSxNQUFBLE1BQUEsS0FBQSxLQUFBLGtCQUdBLEtBQUEsUUFBQSxXQUNBLE1BQUEsTUFBQSxJQUFBLE9BR0EsS0FBQSxLQUFBLFdBQ0EsTUFBQSxJQUFBLFVBQUEsT0FBQSxLQUFBLEdBQUEsS0FBQSxJQUdBLEtBQUEsTUFBQSxTQUFBLEdBQ0EsTUFBQSxJQUFBLFVBQUEsT0FBQSxLQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsSUFHQSxLQUFBLElBQUEsU0FBQSxHQUNBLE1BQUEsYUFBQSxVQUFBLE9BQ0EsR0FBQSxVQUFBLE9BQUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxHQUdBLEdBQUEsVUFBQSxPQUFBLEtBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxJQUlBLEtBQUEsSUFBQSxTQUFBLEdBQ0EsTUFBQSxhQUFBLFVBQUEsT0FDQSxHQUFBLFVBQUEsT0FBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEdBR0EsR0FBQSxVQUFBLE9BQUEsS0FBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLElBSUEsS0FBQSxJQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsR0FHQSxLQUFBLEtBQUEsU0FBQSxHQUNBLE1BQUEsTUFBQSxJQUFBLEdBQUEsVUFHQSxLQUFBLFVBQUEsV0FDQSxNQUFBLE1BQUEsTUFBQSxFQUFBLEtBQUEsV0FHQSxLQUFBLE1BQUEsU0FBQSxHQUNBLE1BQUEsTUFBQSxJQUFBLElBQUEsS0FBQSxTQUFBLEVBQUEsV0FHQSxLQUFBLFNBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxLQUFBLFNBQ0EsT0FBQSxJQUdBLEtBQUEsT0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsRUFDQSxFQUFBLEtBQUEsQ0FDQSxNQUFBLEVBQUEsRUFBQSxLQUFBLElBQUEsTUFBQSxhQUFBLElBQUEsRUFBQSxLQUFBLElBQUEsTUFBQSxhQUFBLElBQ0EsS0FBQSxFQUFBLEVBQUEsS0FBQSxJQUFBLE1BQUEsYUFBQSxJQUFBLEVBQUEsS0FBQSxJQUFBLE1BQUEsYUFBQSxLQUdBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUNBLElBQUEsS0FBQSxNQUFBLEtBQUEsR0FBQSxLQUFBLEtBQUEsTUFBQSxLQUFBLEdBQUEsSUFHQSxJQUFBLEtBQUEsRUFBQSxLQUFBLEtBQUEsRUFBQSxNQU1BLFNBQUEsT0FBQSxNQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxVQUFBLE9BQUEsRUFBQSxJQVlBLFNBQUEsT0FBQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsT0FBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxJQUdBLFNBQUEsT0FBQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxVQUFBLE9BQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxHQUdBLFNBQUEsT0FBQSxPQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxVQUFBLE9BQUEsS0FBQSxFQUFBLEVBQUEsSUFBQSxHQUdBLFNBQUEsT0FBQSxNQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxVQUFBLE9BQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxHQUdBLFNBQUEsT0FBQSxRQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxVQUFBLE9BQUEsS0FBQSxFQUFBLEVBQUEsSUFBQSxHQUdBLFNBQUEsT0FBQSxPQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0FDQSxPQUFBLEdBQUEsRUFBQSxFQUFBLEdBZUEsT0FBQSxHQUFBLFNBQUEsRUFBQSxFQUFBLEdBRUEsTUFEQSxHQUFBLEdBQUEsRUFDQSxLQUFBLElBQUEsRUFBQSxHQUFBLEVhOUlBLElBQUEsVUFBQSxZQUNBLFVBQUEsUUFBQSxTQUFBLFlBRUEsU0FBQSxRQUFBLFdBQUEsU0FBQSxHQUVBLEdBQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSw4RkFDQSxJQUdBLEdBSEEsRUFBQSxLQUNBLEVBQUEsT0FBQSxVQUNBLEVBQUEsT0FBQSxVQUNBLEVBQUEsRUFDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFFQSxHQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsSUFBQSxHQUNBLEVBQUEsSUFBQSxLQUVBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsS0FDQSxFQUFBLEdBQUEsRUFFQSxJQUFBLElBQUEsQ0FFQSxPQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsS0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLElBQ0EsR0FFQSxFQUFBLEVBQUEsS0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUdBLEVBREEsS0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFHQSxFQURBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQ0EsRUFBQSxHQUFBLEdBR0EsSUFHQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFVBQ0EsRUFBQSxFQUFBLElBQUEsRUFHQSxPQUFBLEdBQUEsRUFDQSxHQUlBLEVBQUEsRUFDQSxFQUlBLEdBSUEsRUFBQSxTQUFBLEVBQUEsR0FFQSxJQUFBLEdBREEsSUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxPQUFBLElBQ0EsRUFBQSxFQUFBLEVBQUEsT0FBQSxNQUNBLEdBQUEsRUFFQSxPQUFBLElBR0EsRUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxJQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxJQUFBLEVBRUEsT0FBQSxHQUFBLEVBQUEsRUFBQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLElBR0EsRUFBQSxTQUFBLEVBQUEsR0FHQSxNQUZBLEdBQUEsRUFBQSxZQUVBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsS0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxNQUFBLEVBQUEsSUFHQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLE1BQ0EsSUFBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEVBQ0EsT0FBQSxDQUVBLElBQUEsR0FBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLENBTUEsT0FMQSxJQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFDQSxHQUFBLEdBRUEsRUFBQSxHQUFBLEVBQUEsS0FDQSxFQUFBLEdBQUEsRUFBQSxLQUNBLEVBQUEsR0FBQSxFQUFBLEtBQ0EsRUFBQSxHQUFBLEVBQUEsSUFHQSxFQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxFQUFBLFlBQUEsSUFDQSxFQUFBLEVBQUEsVUFBQSxJQUNBLEVBQUEsRUFBQSxZQUFBLElBQ0EsRUFBQSxFQUFBLGFBQUEsSUFDQSxFQUFBLEVBQUEsV0FBQSxJQUdBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsWUFDQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsSUFBQSxHQUNBLEVBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLEVBQUEsSUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLElBQUEsR0FDQSxFQUFBLEVBQUEsSUFBQSxHQUFBLEVBQUEsRUFFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0FFQSxJQUFBLEVBQUEsRUFFQSxPQUFBLENBT0EsR0FBQSxLQUFBLEtBQUEsRUFLQSxJQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsR0FDQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEVBVUEsT0FBQSxJQUFBLEdBQUEsR0FBQSxHQUlBLEVBS0EsR0FBQSxHQUFBLEdBQUEsR0FFQSxHQUlBLEdBSUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUVBLEVBQUEsRUFBQSxPQUFBLEVBQUEsT0FFQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsSUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsSUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsSUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsSUFBQSxFQUVBLElBQUEsRUFBQSxFQUFBLEVBQUEsQ0FDQSxDQUFBLEdBQUEsR0FBQSxLQUFBLEtBQUEsR0FFQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsSUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsRUFDQSxHQUFBLElBQUEsSUFBQSxFQUFBLEtBR0EsTUFBQSxHQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsSUFFQSxNQUFBLE9BR0EsRUFBQSxTQUFBLEVBQUEsR0FlQSxJQUFBLEdBYkEsR0FBQSxFQUFBLElBQUEsSUFBQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLE9BQ0EsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLFNBQUEsUUFDQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsR0FDQSxHQUNBLFFBQUEsT0FBQSxVQUNBLFNBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxHQUNBLFNBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxJQUdBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFDQSxFQUFBLElBR0EsR0FBQSxJQUFBLEVBQUEsU0FBQSxJQUVBLEVBQUEsSUFBQSxHQUNBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxLQUlBLEdBQUEsRUFBQSxVQUFBLElBQ0EsRUFBQSxNQUFBLEVBSUEsSUFBQSxHQUFBLEVBQUEsRUFBQSxFQUVBLElBQUEsS0FBQSxFQUFBLENBRUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxHQUVBLElBQUEsR0FBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEdBQUEsSUFBQSxHQUFBLElBQUEsRUFBQSxHQUVBLElBREEsRUFBQSxFQUFBLEVBQUEsR0FDQSxJQUFBLEVBQUEsQ0FFQSxHQUFBLEdBQUEsRUFBQSxRQUNBLElBQUEsRUFBQSxFQUVBLE9BQUEsQ0FDQSxLQUVBLEVBQUEsTUFBQSxFQUNBLEVBQUEsRUFBQSxZQUNBLEVBQUEsRUFBQSxRQUlBLElBQUEsSUFBQSxHQU9BLEdBTEEsRUFBQSxJQUFBLEVBQUEsTUFBQSxJQUVBLEVBQUEsSUFBQSxHQUNBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxLQUNBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsS0FBQSxFQUFBLENBRUEsR0FBQSxHQUFBLEVBQUEsUUFDQSxJQUFBLEVBQUEsRUFFQSxPQUFBLENBQ0EsS0FFQSxFQUFBLE1BQUEsRUFDQSxFQUFBLEVBQUEsWUFDQSxFQUFBLEVBQUEsUUFJQSxDQUdBLEdBQUEsR0FBQSxFQUFBLE9BQUEsWUFHQSxFQUFBLEVBQUEsSUFBQSxHQUNBLEVBQUEsS0FBQSxJQUFBLEVBRUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxFQUVBLE9BQUEsQ0FDQSxLQUVBLEVBQUEsRUFDQSxFQUFBLEVBQUEsR0FHQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEtBQ0EsRUFBQSxNQUFBLElBT0EsR0FBQSxHQUFBLEtBQUEsSUFBQSxHQUFBLEtBQUEsSUFBQSxFQUFBLFdBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxTQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsR0FBQSxJQUFBLElBVUEsTUFMQSxLQUNBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUNBLEVBQUEsU0FBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEdBQUEsSUFBQSxFQUFBLFVBQUEsTUFBQSxFQUFBLFdBRUEsR0F5RkEsRUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE9BQ0EsRUFBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsT0E0REEsT0F6REEsR0FBQSxjQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsT0FDQSxLQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQSxRQUNBLEdBR0EsR0FHQSxFQUFBLGNBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxhQUFBLFVBQUEsT0FBQSxPQUFBLFVBQ0EsRUFBQSxFQUFBLEdBQ0EsWUFBQSxVQUFBLE9BQUEsT0FBQSxJQUNBLEVBQUEsRUFBQSxHQUNBLFlBQUEsVUFBQSxPQUFBLE9BQUEsUUFDQSxFQUFBLEVBQUEsR0FDQSxZQUFBLFVBQUEsT0FBQSxPQUFBLEtBQ0EsRUFBQSxFQUFBLElBRUEsR0FHQSxFQUFBLGVBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLFlBQUEsVUFBQSxPQUFBLE9BQUEsV0FBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLFVBQ0EsTUFBQSxHQUFBLEVBQUEsRUFFQSxJQUFBLFlBQUEsVUFBQSxPQUFBLE9BQUEsV0FBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLElBQ0EsTUFBQSxHQUFBLEVBQUEsRUFDQSxJQUFBLFlBQUEsVUFBQSxPQUFBLE9BQUEsS0FBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLFVBQ0EsTUFBQSxHQUFBLEVBQUEsRUFFQSxJQUFBLFlBQUEsVUFBQSxPQUFBLE9BQUEsS0FBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLElBQ0EsTUFBQSxHQUFBLEVBQUEsRUFBQSxFQUVBLElBQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxNQUFBLFlBQUEsVUFBQSxPQUFBLE9BQUEsSUFDQSxNQUFBLEdBQUEsRUFBQSxFQUNBLElBQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxLQUFBLFlBQUEsVUFBQSxPQUFBLE9BQUEsS0FDQSxNQUFBLEdBQUEsRUFBQSxFQUVBLElBQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxTQUFBLFlBQUEsVUFBQSxPQUFBLE9BQUEsUUFBQSxDQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsaUJBQUEsRUFBQSxTQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsRUFDQSxJQUFBLEVBQUEsV0FBQSxFQUFBLGNBQ0EsTUFBQSxHQUdBLE1BQUEsTUFFQSxNQUFBLGFBQUEsVUFBQSxPQUFBLE9BQUEsS0FBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLFFBQ0EsRUFBQSxFQUFBLEVBQUEsR0FDQSxZQUFBLFVBQUEsT0FBQSxPQUFBLFNBQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxJQUNBLEVBQUEsRUFBQSxFQUFBLElBRUEsR0FHQSxHQUVBLFNBQUEsUUFBQSxlQzdjQSxJQUFBLFVBQUEsWUFDQSxVQUFBLFFBQUEsV0FBQSxTQUFBLEdBR0EsRUFBQSxpQkFBQSxTQUFBLEVBQUEsRUFBQSxHQWFBLElBQUEsR0FIQSxHQVRBLEdBQ0EsV0FBQSxFQUNBLGVBQUEsR0FHQSxFQUFBLEVBQUEsTUFBQSxPQUNBLEVBQUEsRUFBQSxNQUFBLE9BQ0EsRUFBQSxJQUNBLEVBQUEsR0FBQSxVQUFBLE9BSUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLENBRUEsRUFEQSxFQUFBLEVBQ0EsRUFBQSxNQUFBLEdBRUEsRUFBQSxNQUFBLEVBQUEsRUFNQSxJQUFBLEdBQUEsR0FBQSxVQUFBLFFBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxHQUFBLElBQUEsRUFBQSxZQUdBLElBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEdBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxHQUVBLElBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsR0FBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLElBR0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLElBQUEsRUFBQSxXQUFBLEVBS0EsSUFBQSxHQUFBLEVBQUEsSUFBQSxFQUdBLEdBQUEsRUFDQSxHQUFBLEVBRUEsR0FBQSxDQUlBLElBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBSUEsSUFIQSxFQUFBLElBQUEsRUFBQSxlQUFBLElBR0EsRUFBQSxZQUFBLEVBQUEsY0FBQSxLQUtBLEdBQUEsS0FBQSxJQUFBLEdBQ0EsRUFBQSxJQUNBLEVBQUEsRUFDQSxFQUFBLEVBRUEsRUFBQSxFQUFBLFlBQUEsSUFBQSxFQUFBLGFBQ0EsRUFBQSxJQUFBLEdBQUEsSUFBQSxFQUFBLEVBQUEsTUFBQSxNQVNBLE1BRkEsR0FBQSxnQkFBQSxFQUFBLHlCQUFBLEVBQUEsTUFBQSxJQUVBLEVBS0EsSUFBQSxHQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsRUFDQSxFQUFBLEVBRUEsRUFBQSxHQUtBLEVBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxTQUFBLEdBQ0EsR0FBQSxFQUNBLEVBQUEsQ0FDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLE9BQUEsSUFDQSxFQUFBLEVBQUEsU0FBQSxHQUFBLElBQUEsR0FDQSxFQUFBLEVBQ0EsRUFBQSxFQUVBLEVBQUEsSUFDQSxFQUFBLEVBSUEsUUFDQSxJQUFBLEVBQ0EsSUFBQSxHQUlBLE9BQUEsSUFFQSxTQUFBLFFBQUEsZ0JDdEhBLGtCQUFBLDBCQUtBLFNBQUEsT0FBQSxPQUFBLElBQUEsT0FBQSxTQUNBLEtBQUEsU0FBQSxPQUFBLFFBQ0EsTUFBQSxTQUFBLEVBQUEsR0FDQSxZQUNBLE1BQUEsS0FBQSxHQUVBLEVBQUEsTUFDQSxFQUFBLE1BQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxPQUVBLEtBQUEsT0FBQSxFQUFBLE9BQ0EsS0FBQSxPQUFBLEVBQUEsYUFBQSxFQUFBLFFBQUEsR0FDQSxLQUFBLE9BQUEsRUFBQSxhQUFBLEVBQUEsUUFBQSxLQUNBLEtBQUEsTUFBQSxFQUFBLE1BQ0EsS0FBQSxVQUFBLEVBQUEsVUFDQSxLQUFBLFVBQUEsRUFBQSxXQUFBLEVBS0EsS0FBQSxVQUFBLFdBQ0EsTUFBQSxJQUFBLFVBQUEsT0FBQSxLQUFBLElBQUEsRUFBQSxLQUFBLE1BQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLE9BQUEsSUFNQSxLQUFBLGVBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLFdBRUEsT0FBQSxNQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsTUFBQSxFQUFBLElBUUEsS0FBQSxLQUFBLFNBQUEsR0FDQSxJQUFBLEtBQUEsUUFDQSxFQUFBLE9BQ0EsS0FBQSxZQUFBLElBRUEsRUFBQSxZQUNBLEVBQUEsVUFBQSxLQUFBLFVBQ0EsRUFBQSxZQUFBLEtBQUEsTUFDQSxFQUFBLFVBQUEsS0FBQSxVQUNBLEVBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLE1BQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLE9BQUEsRUFBQSxLQUFBLE1BQUEsRUFBQSxLQUFBLE9BQUEsS0FBQSxRQUNBLEtBQUEsT0FDQSxFQUFBLFNBRUEsS0FBQSxXQUNBLEVBQUEsT0FHQSxFQUFBLFlBQ0EsSUFBQSxLQUFBLE9BQ0EsRUFBQSxhQzdEQSxrQkFBQSwwQkFLQSxTQUFBLE9BQUEsT0FBQSxNQUFBLE9BQUEsU0FDQSxLQUFBLFNBQUEsT0FBQSxRQUNBLE1BQUEsU0FBQSxFQUFBLEdBRUEsS0FBQSxLQUFBLEVBSUEsSUFBQSxHQUFBLFNBQUEsY0FBQSxNQUNBLEdBQUEsSUFBQSxFQUFBLElBQ0EsRUFBQSxPQUFBLFdBQ0EsRUFBQSxNQUFBLEVBQUEsTUFDQSxFQUFBLE9BQUEsRUFBQSxPQUNBLEdBQUEsRUFFQSxJQUFBLElBQUEsRUFDQSxFQUFBLEVBQUEsWUFBQSxFQUNBLEVBQUEsUUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLE1BQ0EsRUFBQSxLQUNBLEVBQUEsSUFNQSxNQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsRUFBQSxDQUlBLElBQUEsRUFDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsS0FBQSxRQUFBLE9BQUEsSUFDQSxPQUFBLEtBQUEsUUFBQSxJQUNBLElBQUEsVUFBQSxPQUFBLFFBQUEsS0FDQSxFQUFBLFNBQUEsT0FBQSxRQUFBLEtBQUEsRUFBQSxHQUtBLEVBQ0EsRUFBQSxhQUFBLEVBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxJQUFBLEdBR0EsRUFBQSxVQUFBLEVBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxJQUFBLEdBRUEsSUFDQSxFQUFBLFVDbkRBLGtCQUFBLDBCQUtBLFNBQUEsT0FBQSxPQUFBLEtBQUEsU0FDQSxLQUFBLFNBQUEsT0FBQSxRQUNBLE1BQUEsU0FBQSxHQUVBLEtBQUEsTUFDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEtBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLE9BQUEsS0FBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLE1BR0EsS0FBQSxNQUFBLE9BQ0EsS0FBQSxVQUFBLEVBQ0EsS0FBQSxLQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsS0FBQSxNQUFBLEVBQUEsTUFDQSxLQUFBLFVBQUEsRUFBQSxXQUFBLEVBT0EsS0FBQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsSUFBQSxJQUFBLEdBQ0EsRUFBQSxLQUFBLEtBQUEsSUFBQSxFQUNBLEdBQUEsWUFDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLFlBQ0EsRUFBQSxVQUFBLEtBQUEsVUFDQSxFQUFBLFlBQUEsS0FBQSxNQUNBLEVBQUEsWUNyQ0Esa0JBQUEsMEJBS0EsU0FBQSxPQUFBLE9BQUEsUUFBQSxPQUFBLFNBQ0EsS0FBQSxTQUFBLE9BQUEsUUFDQSxNQUFBLFNBQUEsRUFBQSxHQUNBLEtBQUEsS0FBQSxHQUVBLEtBQUEsTUFBQSxFQUFBLE9BQUEsT0FDQSxLQUFBLFVBQUEsRUFBQSxXQUFBLEVBQ0EsS0FBQSxTQUFBLEVBQUEsV0FDQSxLQUFBLFlBQ0EsS0FBQSxTQUNBLEtBQUEsVUFDQSxLQUFBLGFBS0EsS0FBQSxVQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLElBQ0EsRUFBQSxHQUFBLEVBQ0EsRUFBQSxHQUFBLEdBQ0EsRUFBQSxtQkFBQSxHQUFBLEtBQ0EsRUFBQSxNQUNBLEVBQUEsS0FFQSxJQUFBLEdBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEdBQUEsVUFBQSxPQUFBLE9BQUEsUUFBQSxFQUFBLEdBQUEsVUFBQSxPQUFBLE9BQUEsUUFDQSxFQUFBLEtBQ0EsRUFBQSxLQUFBLFFBRUEsSUFBQSxFQUFBLE9BQUEsRUFDQSxNQUFBLEVBSUEsSUFEQSxJQUNBLEVBQUEsRUFFQSxNQURBLFNBQUEsS0FBQSwyQkFBQSxFQUFBLGNBQ0EsQ0FHQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsS0FBQSxTQUFBLFNBQUEsRUFDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLENBQ0EsRUFBQSxLQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsRUFBQSxPQUFBLFNBR0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEtBQUEsU0FBQSxTQUFBLEVBQ0EsU0FBQSxPQUFBLEtBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsS0FDQSxTQUFBLE9BQUEsUUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLE1BQ0EsRUFBQSxLQUFBLHFCQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsSUFDQSxTQUFBLE9BQUEsTUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEtBQ0EsRUFBQSxTQUFBLE9BQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxHQUNBLEVBQUEsSUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsS0FJQSxTQUFBLE9BQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEtBQ0EsU0FBQSxPQUFBLFFBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsTUFDQSxFQUFBLEtBQUEscUJBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLFNBQUEsT0FBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsS0FDQSxFQUFBLFNBQUEsT0FBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLEdBQ0EsRUFBQSxJQUNBLEVBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxJQU9BLElBQUEsSUFBQSxFQUFBLEdBQUEsS0FBQSxTQUFBLE9BRUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsS0FBQSxHQUVBLEVBQUEsR0FFQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsS0FBQSxHQUNBLEVBQUEsU0FBQSxLQUFBLEdBQ0EsR0FBQSxHQUVBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLFFBR0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEtBRUEsR0FBQSxHQUVBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLFFBR0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEtBQUEsR0FDQSxFQUFBLFNBQUEsS0FBQSxHQUVBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxRQUVBLENBU0EsR0FMQSxFQUFBLElBQ0EsR0FBQSxLQUFBLFNBQUEsUUFFQSxFQUFBLE9BQUEsVUFFQSxFQUFBLEVBQ0EsTUFBQSxFQUdBLEtBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxJQUFBLEVBQ0EsU0FBQSxPQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsS0FDQSxTQUFBLE9BQUEsUUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxNQUNBLEVBQUEsU0FBQSxPQUFBLE9BQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLElBQ0EsRUFBQSxJQUNBLEVBQUEsRUFDQSxFQUFBLEVBQUEsS0FBQSxTQUFBLFFBS0EsR0FBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLElBQUEsR0FDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsUUFFQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsS0FFQSxJQUFBLEdBQ0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLFFBRUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLElBS0EsRUFBQSxTQUFBLE9BQUEsRUFBQSxTQUFBLFFBQ0EsRUFBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsVUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsS0FFQSxFQUFBLFVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFDQSxFQUFBLEdBQUEsWUFFQSxPQUFBLEdBS0EsTUFGQSxHQUFBLEtBQUEsTUFFQSxHQVdBLEtBQUEsT0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsbUJBQUEsR0FBQSxLQUFBLElBQUEsT0FBQSxxQkFDQSxJQUFBLG1CQUFBLEdBQUEsS0FBQSxJQUFBLE9BQUEsbUJBRUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLElBQUEsT0FBQSxPQUNBLElBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxLQUFBLElBQUEsT0FBQSxPQUNBLElBQUEsRUFBQSxFQUFBLEtBQUEsSUFBQSxPQUFBLE9BRUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLFNBQUEsS0FBQSxFQUFBLFNBQUEsS0FVQSxLQUFBLEdBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLFNBQ0EsRUFBQSxFQUFBLE1BQ0EsT0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBUUEsS0FBQSxNQUFBLFdBQ0EsTUFBQSxNQUFBLFNBQUEsSUFRQSxLQUFBLEtBQUEsV0FDQSxNQUFBLE1BQUEsU0FBQSxLQUFBLFNBQUEsT0FBQSxJQVdBLEtBQUEsU0FBQSxXQUdBLElBQUEsR0FGQSxHQUFBLEtBQUEsU0FFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxJQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFDQSxHQUFBLEtBQUEsa0JBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsSUFDQSxPQUFBLENBTUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLElBQ0EsR0FBQSxLQUFBLGtCQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsT0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsSUFDQSxPQUFBLENBSUEsUUFBQSxHQUdBLEtBQUEscUJBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLENBQ0EsSUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0FFQSxPQUFBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FHQSxTQUFBLE9BQUEsTUFBQSxFQUFBLEdBRkEsU0FBQSxPQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsSUFXQSxLQUFBLFNBQUEsU0FBQSxHQUNBLE1BQUEsVUFBQSxPQUFBLE1BQUEsS0FBQSxHQUFBLEVBQUEsR0FBQSxLQUFBLEdBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxLQUdBLEtBQUEsUUFBQSxXQUtBLElBQUEsR0FKQSxHQUFBLEVBQ0EsRUFBQSxLQUFBLFNBR0EsRUFBQSxFQUFBLEVBQUEsS0FBQSxTQUFBLFNBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsS0FDQSxFQUFBLEVBS0EsVUFBQSxPQUFBLEtBQUEsS0FBQSxHQUFBLEVBQUEsR0FBQSxLQUFBLEdBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxLQUNBLEtBQUEsV0FPQSxLQUFBLFFBQUEsV0FFQSxJQUFBLEdBREEsTUFDQSxFQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsT0FBQSxJQUFBLEVBQUEsSUFDQSxFQUFBLEtBQUEsS0FBQSxTQUFBLE1BRUEsTUFBQSxTQUFBLEdBR0EsS0FBQSxrQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBR0EsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsT0FBQSxDQUVBLElBQUEsSUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEVBRUEsT0FBQSxJQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBR0EsS0FBQSxXQUFBLFdBQ0EsR0FBQSxHQUNBLENBQ0EsTUFBQSxTQUNBLEtBQUEsU0FDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsS0FBQSxTQUFBLE9BQUEsSUFDQSxFQUFBLEtBQUEsU0FBQSxHQUVBLEVBREEsRUFBQSxHQUFBLEtBQUEsU0FBQSxPQUNBLEtBQUEsU0FBQSxHQUVBLEtBQUEsU0FBQSxFQUFBLEdBRUEsS0FBQSxNQUFBLEtBQUEsRUFBQSxJQUFBLElBQ0EsS0FBQSxPQUFBLE1BQUEsR0FBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsTUFJQSxLQUFBLFVBQUEsV0FHQSxJQUFBLEdBRkEsR0FBQSxFQUNBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsT0FBQSxJQUNBLEdBQUEsS0FBQSxTQUFBLEdBQUEsRUFDQSxHQUFBLEtBQUEsU0FBQSxHQUFBLENBR0EsT0FBQSxJQUFBLFVBQUEsT0FBQSxFQUFBLEtBQUEsU0FBQSxPQUFBLEVBQUEsS0FBQSxTQUFBLFNBR0EsS0FBQSxPQUFBLFdBQ0EsR0FBQSxHQUFBLElBQUEsVUFBQSxPQUFBLEdBQUEsVUFBQSxPQUFBLFVBQUEsR0FBQSxVQUFBLElBQUEsVUFBQSxFQUNBLE1BQUEsSUFBQSxJQUFBLEtBQUEsSUFBQSxJQUFBLEdBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEtBQUEsU0FBQSxPQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsS0FBQSxTQUFBLEVBQ0EsTUFBQSxTQUFBLEdBQUEsSUFBQSxFQUFBLElBQUEsSUFFQSxLQUFBLFNBQUEsS0FBQSxhQUdBLEtBQUEsU0FBQSxXQUdBLElBQUEsR0FGQSxHQUFBLEdBRUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxTQUFBLE9BQUEsSUFDQSxJQUFBLElBQUEsR0FBQSxLQUNBLEdBQUEsSUFBQSxLQUFBLFNBQUEsR0FBQSxVQUFBLEdBQUEsR0FHQSxPQUFBLElBUUEsS0FBQSxLQUFBLFNBQUEsR0FFQSxJQUFBLEdBREEsSUFBQSxZQUFBLFNBQUEsU0FDQSxFQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsT0FBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLEtBQUEsU0FBQSxHQUFBLFFBQ0EsR0FBQSxZQUNBLEVBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUVBLEdBQUEsWUFDQSxFQUFBLFVBQUEsS0FBQSxVQUNBLEVBQUEsWUFBQSxLQUFBLE1BQ0EsRUFBQSxVQUFBLEVBQUEsR0FDQSxFQUFBLE9BQ0EsRUFBQSxhQ2pZQSxrQkFBQSwwQkFLQSxTQUFBLE9BQUEsT0FBQSxVQUFBLE9BQUEsU0FDQSxLQUFBLFNBQUEsT0FBQSxRQUNBLE1BQUEsU0FBQSxFQUFBLEdBRUEsS0FBQSxLQUFBLEdBQ0EsS0FBQSxNQUFBLEVBQUEsTUFDQSxLQUFBLFVBQUEsRUFBQSxVQUNBLEtBQUEsVUFBQSxFQUFBLFdBQUEsRUFNQSxLQUFBLEtBQUEsU0FBQSxHQUNBLEtBQUEsT0FDQSxFQUFBLFdBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxNQUFBLEtBQUEsUUFFQSxLQUFBLFdBQ0EsRUFBQSxTQUFBLEtBQUEsSUFBQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEtBQUEsTUFBQSxLQUFBLFFBRUEsRUFBQSxVQUFBLEtBQUEsVUFDQSxFQUFBLFlBQUEsS0FBQSxNQUNBLEVBQUEsVUFBQSxLQUFBLGFDM0JBLGtCQUFBLDBCQUtBLFNBQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxTQUNBLEtBQUEsU0FBQSxPQUFBLFFBQ0EsTUFBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLEtBQUEsRUFLQSxJQUFBLEdBQUEsS0FDQSxFQUFBLFNBQUEsY0FBQSxNQUNBLEdBQUEsT0FBQSxXQUNBLEVBQUEsTUFBQSxFQUFBLE1BQ0EsRUFBQSxPQUFBLEVBQUEsT0FDQSxHQUFBLEdBRUEsRUFBQSxJQUFBLEVBQUEsR0FDQSxJQU1BLEdBQ0EsRUFQQSxHQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxXQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLGFBR0EsRUFBQSxFQUFBLFdBRUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQ0EsR0FBQSxFQUNBLEVBQUEsRUFDQSxFQUFBLEtBR0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxJQUlBLE1BQUEsTUFBQSxXQUNBLEVBQUEsR0FBQSxJQUdBLEtBQUEsYUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsSUFHQSxLQUFBLGVBQUEsV0FDQSxPQUFBLEdBR0EsS0FBQSxRQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxFQUNBLFFBQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxFQUFBLEtBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLE9BQUEsRUFBQSxLQUdBLEtBQUEsWUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLElBQUEsS0FBQSxNQUFBLENBR0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUNBLEVBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFDQSxHQUFBLFVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLE9BQUEsRUFBQSxhQUFBLEtBQUEsUUFDQSxFQUFBLFdBQUEsRUFBQSxHQUFBLEVBQUEsS0FPQSxLQUFBLEtBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxDQUlBLEdBQUEsR0FBQSxLQUFBLElBQUEsSUFBQSxFQUVBLEtBQUEsS0FBQSxRQUNBLEVBQUEsT0FDQSxLQUFBLFlBQUEsRUFBQSxHQUdBLElBQUEsR0FBQSxFQUFBLEVBRUEsR0FBQSxVQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsSUFDQSxLQUFBLE1BQUEsRUFBQSxNQUFBLElBQUEsSUFDQSxFQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsSUFBQSxHQUFBLEdBQ0EsRUFBQSxHQUFBLElBR0EsSUFBQSxLQUFBLE9BQ0EsRUFBQSIsImZpbGUiOiJjYW52YXNSZW5kZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFJlbmRlckpzID0gUmVuZGVySnMgfHwge307XHJcblxyXG5SZW5kZXJKcy5WZWN0b3IgPSBmdW5jdGlvbiAoeCwgeSkge1xyXG4gICAgdGhpcy54ID0geCB8fCAwO1xyXG4gICAgdGhpcy55ID0geSB8fCAwO1xyXG5cclxuICAgIHRoaXMuc2V0ID0gZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICB0aGlzLnggPSB2Lng7XHJcbiAgICAgICAgdGhpcy55ID0gdi55O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmxlbmd0aFNxdWFyZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KHRoaXMueCwgMikgKyBNYXRoLnBvdyh0aGlzLnksIDIpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmxlbmd0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMubGVuZ3RoU3F1YXJlZCgpKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5sZW5ndGgyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5wZXJwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVuZGVySnMuVmVjdG9yKHRoaXMueSwgLXRoaXMueCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2NhbGUgPSBmdW5jdGlvbiAocykge1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVuZGVySnMuVmVjdG9yKHRoaXMueCAqIHMsIHRoaXMueSAqIHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnN1YiA9IGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgaWYgKHYgaW5zdGFuY2VvZiBSZW5kZXJKcy5WZWN0b3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZW5kZXJKcy5WZWN0b3IodGhpcy54IC0gdi54LCB0aGlzLnkgLSB2LnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZW5kZXJKcy5WZWN0b3IodGhpcy54IC0gdiwgdGhpcy55IC0gdik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmFkZCA9IGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgaWYgKHYgaW5zdGFuY2VvZiBSZW5kZXJKcy5WZWN0b3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZW5kZXJKcy5WZWN0b3IodGhpcy54ICsgdi54LCB0aGlzLnkgKyB2LnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZW5kZXJKcy5WZWN0b3IodGhpcy54ICsgdiwgdGhpcy55ICsgdik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmRvdCA9IGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMueCAqIHYueCArIHRoaXMueSAqIHYueTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kaXN0ID0gZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdWIodikubGVuZ3RoKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMubm9ybWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNjYWxlKDEgLyB0aGlzLmxlbmd0aCgpKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hbmdsZSA9IGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG90KHYpIC8gKHRoaXMubGVuZ3RoKCkgKiB2Lmxlbmd0aCgpKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50cnVuY2F0ZSA9IGZ1bmN0aW9uIChtYXgpIHtcclxuICAgICAgICB2YXIgbGVuZ3RoID0gTWF0aC5taW4obWF4LCB0aGlzLmxlbmd0aCgpKTtcclxuICAgICAgICByZXR1cm4gbGVuZ3RoO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJvdGF0ZSA9IGZ1bmN0aW9uIChhbmdsZSkge1xyXG4gICAgICAgIHZhciB4ID0gdGhpcy54O1xyXG4gICAgICAgIHZhciB5ID0gdGhpcy55O1xyXG4gICAgICAgIHRoaXMueCA9IHggKiAgTWF0aC5jb3MoVXRpbHMuY29udmVydFRvUmFkKGFuZ2xlKSkgLSB5ICogTWF0aC5zaW4oVXRpbHMuY29udmVydFRvUmFkKGFuZ2xlKSk7XHJcbiAgICAgICAgdGhpcy55ID0geSAqICBNYXRoLmNvcyhVdGlscy5jb252ZXJ0VG9SYWQoYW5nbGUpKSArIHggKiBNYXRoLnNpbihVdGlscy5jb252ZXJ0VG9SYWQoYW5nbGUpKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50b1N0cmluZyA9IGZ1bmN0aW9uIChyb3VuZGVkKSB7XHJcbiAgICAgICAgaWYgKHJvdW5kZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiKFwiICsgTWF0aC5yb3VuZCh0aGlzLngpICsgXCIsIFwiICsgTWF0aC5yb3VuZCh0aGlzLnkpICsgXCIpXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCIoXCIgKyB0aGlzLnggKyBcIiwgXCIgKyB0aGlzLnkgKyBcIilcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxufTtcclxuXHJcblJlbmRlckpzLlZlY3Rvci5jbG9uZSA9IGZ1bmN0aW9uICh4LCB5KSB7XHJcbiAgICByZXR1cm4gbmV3IFJlbmRlckpzLlZlY3Rvcih4LCB5KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGFyZWEgb2YgYSB0cmlhbmdsZSBzcGFubmVkIGJ5IHRoZSB0aHJlZSBnaXZlbiBwb2ludHMuIE5vdGUgdGhhdCB0aGUgYXJlYSB3aWxsIGJlIG5lZ2F0aXZlIGlmIHRoZSBwb2ludHMgYXJlIG5vdCBnaXZlbiBpbiBjb3VudGVyLWNsb2Nrd2lzZSBvcmRlci5cclxuICogQHN0YXRpY1xyXG4gKiBAbWV0aG9kIGFyZWFcclxuICogQHBhcmFtICB7QXJyYXl9IGFcclxuICogQHBhcmFtICB7QXJyYXl9IGJcclxuICogQHBhcmFtICB7QXJyYXl9IGNcclxuICogQHJldHVybiB7TnVtYmVyfVxyXG4gKi9cclxuUmVuZGVySnMuVmVjdG9yLmFyZWEgPSBmdW5jdGlvbiAoYSwgYiwgYykge1xyXG4gICAgcmV0dXJuICgoKGIueCAtIGEueCkgKiAoYy55IC0gYS55KSkgLSAoKGMueCAtIGEueCkgKiAoYi55IC0gYS55KSkpO1xyXG59O1xyXG5cclxuUmVuZGVySnMuVmVjdG9yLmxlZnQgPSBmdW5jdGlvbiAoYSwgYiwgYykge1xyXG4gICAgcmV0dXJuIFJlbmRlckpzLlZlY3Rvci5hcmVhKGEsIGIsIGMpID4gMDtcclxufTtcclxuXHJcblJlbmRlckpzLlZlY3Rvci5sZWZ0T24gPSBmdW5jdGlvbiAoYSwgYiwgYykge1xyXG4gICAgcmV0dXJuIFJlbmRlckpzLlZlY3Rvci5hcmVhKGEsIGIsIGMpID49IDA7XHJcbn07XHJcblxyXG5SZW5kZXJKcy5WZWN0b3IucmlnaHQgPSBmdW5jdGlvbiAoYSwgYiwgYykge1xyXG4gICAgcmV0dXJuIFJlbmRlckpzLlZlY3Rvci5hcmVhKGEsIGIsIGMpIDwgMDtcclxufTtcclxuXHJcblJlbmRlckpzLlZlY3Rvci5yaWdodE9uID0gZnVuY3Rpb24gKGEsIGIsIGMpIHtcclxuICAgIHJldHVybiBSZW5kZXJKcy5WZWN0b3IuYXJlYShhLCBiLCBjKSA8PSAwO1xyXG59O1xyXG5cclxuUmVuZGVySnMuVmVjdG9yLnNxZGlzdCA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICB2YXIgZHggPSBiLnggLSBhLng7XHJcbiAgICB2YXIgZHkgPSBiLnkgLSBhLnk7XHJcbiAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBTY2FsYXIoKSB7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiB0d28gc2NhbGFycyBhcmUgZXF1YWxcclxuICogQHN0YXRpY1xyXG4gKiBAbWV0aG9kIGVxXHJcbiAqIEBwYXJhbSAge051bWJlcn0gYVxyXG4gKiBAcGFyYW0gIHtOdW1iZXJ9IGJcclxuICogQHBhcmFtICB7TnVtYmVyfSBbcHJlY2lzaW9uXVxyXG4gKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gKi9cclxuU2NhbGFyLmVxID0gZnVuY3Rpb24gKGEsIGIsIHByZWNpc2lvbikge1xyXG4gICAgcHJlY2lzaW9uID0gcHJlY2lzaW9uIHx8IDA7XHJcbiAgICByZXR1cm4gTWF0aC5hYnMoYSAtIGIpIDwgcHJlY2lzaW9uO1xyXG59OyIsInZhciBVdGlscyA9IChmdW5jdGlvbiAobW9kdWxlKSB7XHJcblxyXG4gICAgbW9kdWxlLmdldEd1aWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgdmFyIHIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwLCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzIHwgMHg4KTtcclxuICAgICAgICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBtb2R1bGUucGFyc2VVcmwgPSBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgdmFyIHBhcnNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICBwYXJzZXIuaHJlZiA9IHVybDtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwcm90b2NvbDogcGFyc2VyLnByb3RvY29sLFxyXG4gICAgICAgICAgICBwb3J0OiBwYXJzZXIucG9ydCxcclxuICAgICAgICAgICAgcGF0aG5hbWU6IHBhcnNlci5wYXRobmFtZSxcclxuICAgICAgICAgICAgc2VhcmNoOiBwYXJzZXIuc2VhcmNoLFxyXG4gICAgICAgICAgICBoYXNoOiBwYXJzZXIuaGFzaCxcclxuICAgICAgICAgICAgaG9zdDogcGFyc2VyLmhvc3RcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICBtb2R1bGUuc2xlZXAgPSBmdW5jdGlvbiAoc2Vjb25kcykge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICB3aGlsZSAobmV3IERhdGUoKSAtIGRhdGUgPCBzZWNvbmRzICogMTAwMClcclxuICAgICAgICB7IH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG1vZHVsZTtcclxufShVdGlscyB8fCB7fSkpOyIsInZhciBVdGlscyA9IChmdW5jdGlvbiAobW9kdWxlKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBtb2R1bGUuY29udmVydFRvUmFkID0gZnVuY3Rpb24gKGRlZykge1xyXG4gICAgICAgIHJldHVybiBkZWcgKiAoTWF0aC5QSSAvIDE4MCk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGxhc3RVcGRhdGUgPSAobmV3IERhdGUpICogMSAtIDE7XHJcblxyXG4gICAgbW9kdWxlLmdldE1vdXNlUG9zID0gZnVuY3Rpb24gKGNhbnZhcywgZXZ0KSB7XHJcbiAgICAgICAgdmFyIHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgeDogZXZ0LmNsaWVudFggLSByZWN0LmxlZnQsXHJcbiAgICAgICAgICAgIHk6IGV2dC5jbGllbnRZIC0gcmVjdC50b3BcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5nZXRDYW52YXMgPSBmdW5jdGlvbiAodywgaCkge1xyXG4gICAgICAgIHZhciBjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgYy53aWR0aCA9IHc7XHJcbiAgICAgICAgYy5oZWlnaHQgPSBoO1xyXG4gICAgICAgIHJldHVybiBjO1xyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5nZXRQaXhlbHMgPSBmdW5jdGlvbiAoaW1nKSB7XHJcbiAgICAgICAgdmFyIGMsIGN0eDtcclxuICAgICAgICBpZiAoaW1nLmdldENvbnRleHQpIHtcclxuICAgICAgICAgICAgYyA9IGltZztcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGN0eCA9IGMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghY3R4KSB7XHJcbiAgICAgICAgICAgIGMgPSBVdGlscy5nZXRDYW52YXMoaW1nLndpZHRoLCBpbWcuaGVpZ2h0KTtcclxuICAgICAgICAgICAgY3R4ID0gYy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGMud2lkdGgsIGMuaGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuZ2V0RnBzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZTtcclxuICAgICAgICB2YXIgZnBzID0gMTAwMCAvIChub3cgLSBsYXN0VXBkYXRlKTtcclxuICAgICAgICAvL2ZwcyArPSAodGhpc0ZyYW1lRlBTIC0gZnBzKSAvIHJlZkZwcztcclxuICAgICAgICBsYXN0VXBkYXRlID0gbm93O1xyXG5cclxuICAgICAgICByZXR1cm4gZnBzO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBtb2R1bGU7XHJcbn0oVXRpbHMgfHwge30pKTsiLCJ2YXIgVXRpbHMgPSAoZnVuY3Rpb24gKG1vZHVsZSkge1xyXG5cclxuICAgIG1vZHVsZS5pc051bWJlciA9IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gIWlzTmFOKHZhbHVlKTsgfVxyXG5cclxuICAgIHJldHVybiBtb2R1bGU7XHJcbn0oVXRpbHMgfHwge30pKTtcclxuIiwidmFyIExpbmtlZExpc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHZhciBub2RlcyA9IFtdO1xyXG5cclxuICAgIHRoaXMubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBub2Rlcy5sZW5ndGg7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5maXJzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbm9kZXNbMF07XHJcbiAgICB9O1xyXG4gICAgdGhpcy5sYXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBub2Rlc1tub2Rlcy5sZW5ndGggLSAxXTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5idWlsZExpc3QgPSBmdW5jdGlvbiAobm9kZXMpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gbm9kZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlyc3QgPSBub2Rlc1tpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaSA9PT0gbGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0ID0gbm9kZXNbaV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5vZGVzW2ldLnByZXYgPSBub2Rlc1tpIC0gMV07XHJcbiAgICAgICAgICAgIG5vZGVzW2ldLm5leHQgPSBub2Rlc1tpICsgMV07XHJcbiAgICAgICAgICAgIG5vZGVzLnB1c2gobm9kZXNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmFwcGVuZCA9IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgdmFyIGxhc3QgPSB0aGlzLmxhc3QoKTtcclxuXHJcbiAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGFzdC5uZXh0ID0gbm9kZTtcclxuICAgICAgICAgICAgbm9kZS5wcmV2ID0gbGFzdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbm9kZXMucHVzaChub2RlKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nZXRFbnVtZXJhdG9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2Rlc1tpbmRleF07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gbm9kZXMubGVuZ3RoIC0gMSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVzWysraW5kZXhdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwcmV2OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZXNbaW5kZXgtLV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfTtcclxufSIsIi8vXHJcbi8vUmVnaXN0ZXIgdHlwZXNcclxuZGVwZW5kZW5jeUNvbnRhaW5lci5yZWdpc3RlclR5cGUoXCJqUXVlcnlcIiwgJCk7XHJcbmRlcGVuZGVuY3lDb250YWluZXIucmVnaXN0ZXJUeXBlKFwibGlucVwiLCBsaW5xKTtcclxuZGVwZW5kZW5jeUNvbnRhaW5lci5yZWdpc3RlclR5cGUoXCJVdGlsc1wiLCBVdGlscyk7XHJcbmRlcGVuZGVuY3lDb250YWluZXIucmVnaXN0ZXJUeXBlKFwiRXZlbnREaXNwYXRjaGVyXCIsIEV2ZW50RGlzcGF0Y2hlcik7XHJcbmRlcGVuZGVuY3lDb250YWluZXIucmVnaXN0ZXJUeXBlKFwiTGlua2VkTGlzdFwiLCBMaW5rZWRMaXN0KTsiLCJyZWdpc3Rlck5hbWVzcGFjZShcIlJlbmRlckpzLkNhbnZhc1wiKTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5BbmltYXRpb24gPSBpbmplY3QoKVxyXG4gICAgLmNsYXNzKGZ1bmN0aW9uIChoYW5kbGVyLCBsYXllcikge1xyXG5cclxuICAgICAgICB2YXIgdGltZSA9IDA7XHJcbiAgICAgICAgdmFyIHN1YnNjcmliZXI7XHJcbiAgICAgICAgdmFyIHN0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgc3RvcHBlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBwYXVzZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIGFuaW1hdGlvbiA9IGZ1bmN0aW9uIChmcmFtZVJhdGUpIHtcclxuICAgICAgICAgICAgaGFuZGxlcih7XHJcbiAgICAgICAgICAgICAgICBmcmFtZVJhdGU6IGZyYW1lUmF0ZSxcclxuICAgICAgICAgICAgICAgIGxhc3RUaW1lOiB0aW1lLFxyXG4gICAgICAgICAgICAgICAgdGltZTogdGltZSArIDEwMDAgLyBmcmFtZVJhdGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRpbWUgKz0gMTAwMCAvIGZyYW1lUmF0ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoc3RhcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBzdG9wcGVkID0gcGF1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHN1YnNjcmliZXIgPSBsYXllci5vbihcImFuaW1hdGVcIiwgYW5pbWF0aW9uKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aW1lID0gMDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnBhdXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoc3RhcnRlZCAmJiBzdWJzY3JpYmVyKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcGF1c2VkID0gdHJ1ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnN0b3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChzdGFydGVkICYmIHN1YnNjcmliZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHN0b3BwZWQgPSB0cnVlO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTsiLCJyZWdpc3Rlck5hbWVzcGFjZShcIlJlbmRlckpzLkNhbnZhcy5GaWx0ZXJzXCIpO1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLkZpbHRlcnMuQ29udm9sdXRlID0gZnVuY3Rpb24gKGltYWdlLCB3ZWlnaHRzLCBvcGFxdWUpIHtcclxuICAgIHZhciBzaWRlID0gTWF0aC5yb3VuZChNYXRoLnNxcnQod2VpZ2h0cy5sZW5ndGgpKTtcclxuICAgIHZhciBoYWxmU2lkZSA9IE1hdGguZmxvb3Ioc2lkZSAvIDIpO1xyXG4gICAgdmFyIHBpeGVscyA9IFV0aWxzLmdldFBpeGVscyhpbWFnZSk7XHJcbiAgICB2YXIgc3JjID0gcGl4ZWxzLmRhdGE7XHJcbiAgICB2YXIgc3cgPSBwaXhlbHMud2lkdGg7XHJcbiAgICB2YXIgc2ggPSBwaXhlbHMuaGVpZ2h0O1xyXG4gICAgLy8gcGFkIG91dHB1dCBieSB0aGUgY29udm9sdXRpb24gbWF0cml4XHJcbiAgICB2YXIgdyA9IHN3O1xyXG4gICAgdmFyIGggPSBzaDtcclxuICAgIHZhciBvdXRwdXQgPSBVdGlscy5nZXRDYW52YXModywgaCkuZ2V0Q29udGV4dChcIjJkXCIpLmNyZWF0ZUltYWdlRGF0YSh3LCBoKTtcclxuICAgIHZhciBkc3QgPSBvdXRwdXQuZGF0YTtcclxuICAgIC8vIGdvIHRocm91Z2ggdGhlIGRlc3RpbmF0aW9uIGltYWdlIHBpeGVsc1xyXG4gICAgdmFyIGFscGhhRmFjID0gb3BhcXVlID8gMSA6IDA7XHJcbiAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7IHkrKykge1xyXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrKSB7XHJcbiAgICAgICAgICAgIHZhciBzeSA9IHk7XHJcbiAgICAgICAgICAgIHZhciBzeCA9IHg7XHJcbiAgICAgICAgICAgIHZhciBkc3RPZmYgPSAoeSAqIHcgKyB4KSAqIDQ7XHJcbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgd2VpZ2hlZCBzdW0gb2YgdGhlIHNvdXJjZSBpbWFnZSBwaXhlbHMgdGhhdFxyXG4gICAgICAgICAgICAvLyBmYWxsIHVuZGVyIHRoZSBjb252b2x1dGlvbiBtYXRyaXhcclxuICAgICAgICAgICAgdmFyIHIgPSAwLCBnID0gMCwgYiA9IDAsIGEgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBjeSA9IDA7IGN5IDwgc2lkZTsgY3krKykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY3ggPSAwOyBjeCA8IHNpZGU7IGN4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2N5ID0gc3kgKyBjeSAtIGhhbGZTaWRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzY3ggPSBzeCArIGN4IC0gaGFsZlNpZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjeSA+PSAwICYmIHNjeSA8IHNoICYmIHNjeCA+PSAwICYmIHNjeCA8IHN3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcmNPZmYgPSAoc2N5ICogc3cgKyBzY3gpICogNDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHd0ID0gd2VpZ2h0c1tjeSAqIHNpZGUgKyBjeF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gc3JjW3NyY09mZl0gKiB3dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZyArPSBzcmNbc3JjT2ZmICsgMV0gKiB3dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYiArPSBzcmNbc3JjT2ZmICsgMl0gKiB3dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYSArPSBzcmNbc3JjT2ZmICsgM10gKiB3dDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZHN0W2RzdE9mZl0gPSByO1xyXG4gICAgICAgICAgICBkc3RbZHN0T2ZmICsgMV0gPSBnO1xyXG4gICAgICAgICAgICBkc3RbZHN0T2ZmICsgMl0gPSBiO1xyXG4gICAgICAgICAgICBkc3RbZHN0T2ZmICsgM10gPSBhICsgYWxwaGFGYWMgKiAoMjU1IC0gYSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dHB1dDtcclxufVxyXG5cclxuUmVuZGVySnMuQ2FudmFzLkZpbHRlcnMuQmx1ciA9IGZ1bmN0aW9uIChpbWFnZSwgYmx1clJhZGl1cykge1xyXG4gICAgcmV0dXJuIHN0YWNrQmx1ckltYWdlKGltYWdlLCBibHVyUmFkaXVzKTtcclxufVxyXG5cclxuUmVuZGVySnMuQ2FudmFzLkZpbHRlcnMuR3JheXNjYWxlID0gZnVuY3Rpb24gKGltYWdlLCBhcmdzKSB7XHJcbiAgICB2YXIgcGl4ZWxzID0gVXRpbHMuZ2V0UGl4ZWxzKGltYWdlKTtcclxuICAgIHZhciBkID0gcGl4ZWxzLmRhdGE7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGQubGVuZ3RoOyBpICs9IDQpIHtcclxuICAgICAgICB2YXIgciA9IGRbaV07XHJcbiAgICAgICAgdmFyIGcgPSBkW2kgKyAxXTtcclxuICAgICAgICB2YXIgYiA9IGRbaSArIDJdO1xyXG4gICAgICAgIC8vIENJRSBsdW1pbmFuY2UgZm9yIHRoZSBSR0JcclxuICAgICAgICB2YXIgdiA9IDAuMjEyNiAqIHIgKyAwLjcxNTIgKiBnICsgMC4wNzIyICogYjtcclxuICAgICAgICBkW2ldID0gZFtpICsgMV0gPSBkW2kgKyAyXSA9IHZcclxuICAgIH1cclxuICAgIHJldHVybiBwaXhlbHM7XHJcbn07XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRmlsdGVycy5CcmlnaHRuZXNzID0gZnVuY3Rpb24gKGltYWdlLCBhZGp1c3RtZW50KSB7XHJcbiAgICB2YXIgcGl4ZWxzID0gVXRpbHMuZ2V0UGl4ZWxzKGltYWdlKTtcclxuICAgIHZhciBkID0gcGl4ZWxzLmRhdGE7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGQubGVuZ3RoOyBpICs9IDQpIHtcclxuICAgICAgICBkW2ldICs9IGFkanVzdG1lbnQ7XHJcbiAgICAgICAgZFtpICsgMV0gKz0gYWRqdXN0bWVudDtcclxuICAgICAgICBkW2kgKyAyXSArPSBhZGp1c3RtZW50O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBpeGVscztcclxufTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5GaWx0ZXJzLlRocmVzaG9sZCA9IGZ1bmN0aW9uIChpbWFnZSwgdGhyZXNob2xkKSB7XHJcbiAgICB2YXIgcGl4ZWxzID0gVXRpbHMuZ2V0UGl4ZWxzKGltYWdlKTtcclxuICAgIHZhciBkID0gcGl4ZWxzLmRhdGE7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGQubGVuZ3RoOyBpICs9IDQpIHtcclxuICAgICAgICB2YXIgciA9IGRbaV07XHJcbiAgICAgICAgdmFyIGcgPSBkW2kgKyAxXTtcclxuICAgICAgICB2YXIgYiA9IGRbaSArIDJdO1xyXG4gICAgICAgIHZhciB2ID0gKDAuMjEyNiAqIHIgKyAwLjcxNTIgKiBnICsgMC4wNzIyICogYiA+PSB0aHJlc2hvbGQpID8gMjU1IDogMDtcclxuICAgICAgICBkW2ldID0gZFtpICsgMV0gPSBkW2kgKyAyXSA9IHZcclxuICAgIH1cclxuICAgIHJldHVybiBwaXhlbHM7XHJcbn07XHJcbiIsInJlZ2lzdGVyTmFtZXNwYWNlKFwiUmVuZGVySnMuQ2FudmFzXCIpO1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLkxheWVyID0gaW5qZWN0KFwiVXRpbHNcIiwgXCJFdmVudERpc3BhdGNoZXJcIiwgXCJqUXVlcnlcIilcclxuICAgIC5jbGFzcyhmdW5jdGlvbiAodXRpbHMsIGRpc3BhdGNoZXIsICQsIGNvbnRhaW5lciwgd2lkdGgsIGhlaWdodCwgYWN0aXZlKSB7XHJcblxyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdmFyIF9pbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBfZGlzcGF0Y2hlciA9IG5ldyBkaXNwYXRjaGVyKCk7XHJcbiAgICAgICAgdmFyIF90aW1lID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcikuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xyXG4gICAgICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuYWN0aXZlID0gYWN0aXZlO1xyXG4gICAgICAgIC8vRm9yIHRoZSBsaW5rZWQgbGlzdFxyXG4gICAgICAgIHRoaXMucHJldiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5uZXh0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy9BcnJheSBvZiBvYmplY3RzIG9uIHRoZSBsYXllclxyXG4gICAgICAgIHRoaXMub2JqZWN0cyA9IFtdO1xyXG5cclxuXHJcbiAgICAgICAgdmFyIF9jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24gfHwgVXRpbHMuZ2V0TW91c2VQb3MoZXZlbnQudGFyZ2V0LCBldmVudCk7XHJcbiAgICAgICAgICAgIF9kaXNwYXRjaGVyLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5jbGljaywgW2V2ZW50LCBwb3NpdGlvbl0pO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5vYmplY3RzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoUmVuZGVySnMuUGh5c2ljcy5Db2xsaXNpb25zLnBvaW50SW5PYmplY3QocG9zaXRpb24sIHRoaXMub2JqZWN0c1tpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9iamVjdHNbaV0udHJpZ2dlcihSZW5kZXJKcy5DYW52YXMuRXZlbnRzLmNsaWNrLCBldmVudClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2KSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMucHJldi5jYW52YXMpLnRyaWdnZXIoXCJjbGlja1wiLCBwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgX21vdXNlbW92ZUhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24gfHwgVXRpbHMuZ2V0TW91c2VQb3MoZXZlbnQudGFyZ2V0LCBldmVudCk7XHJcbiAgICAgICAgICAgIF9kaXNwYXRjaGVyLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5tb3VzZW1vdmUsIFtldmVudCwgcG9zaXRpb25dKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMub2JqZWN0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKFJlbmRlckpzLlBoeXNpY3MuQ29sbGlzaW9ucy5wb2ludEluT2JqZWN0KHBvc2l0aW9uLCB0aGlzLm9iamVjdHNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmplY3RzW2ldLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5tb3VzZW1vdmUsIFtldmVudCwgcG9zaXRpb25dKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcy5wcmV2LmNhbnZhcykudHJpZ2dlcihcIm1vdXNlbW92ZVwiLCBwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgX21vdXNlZW50ZXJIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uIHx8IFV0aWxzLmdldE1vdXNlUG9zKGV2ZW50LnRhcmdldCwgZXZlbnQpO1xyXG4gICAgICAgICAgICBfZGlzcGF0Y2hlci50cmlnZ2VyKFJlbmRlckpzLkNhbnZhcy5FdmVudHMubW91c2VlbnRlciwgW2V2ZW50LCBwb3NpdGlvbl0pO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5vYmplY3RzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoUmVuZGVySnMuUGh5c2ljcy5Db2xsaXNpb25zLnBvaW50SW5PYmplY3QocG9zaXRpb24sIHRoaXMub2JqZWN0c1tpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9iamVjdHNbaV0udHJpZ2dlcihSZW5kZXJKcy5DYW52YXMuRXZlbnRzLm1vdXNlZW50ZXIsIFtldmVudCwgcG9zaXRpb25dKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcy5wcmV2LmNhbnZhcykudHJpZ2dlcihcIm1vdXNlZW50ZXJcIiwgcG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIF9tb3VzZWxlYXZlSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgcG9zaXRpb24gPSBwb3NpdGlvbiB8fCBVdGlscy5nZXRNb3VzZVBvcyhldmVudC50YXJnZXQsIGV2ZW50KTtcclxuICAgICAgICAgICAgX2Rpc3BhdGNoZXIudHJpZ2dlcihSZW5kZXJKcy5DYW52YXMuRXZlbnRzLm1vdXNlbGVhdmUsIFtldmVudCwgcG9zaXRpb25dKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMub2JqZWN0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKFJlbmRlckpzLlBoeXNpY3MuQ29sbGlzaW9ucy5wb2ludEluT2JqZWN0KHBvc2l0aW9uLCB0aGlzLm9iamVjdHNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmplY3RzW2ldLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5tb3VzZWxlYXZlLCBbZXZlbnQsIHBvc2l0aW9uXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMucHJldikge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzLnByZXYuY2FudmFzKS50cmlnZ2VyKFwibW91c2VsZWF2ZVwiLCBwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgX2tleWRvd25IYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF9kaXNwYXRjaGVyLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5rZXlkb3duLCBldmVudCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIF9rZXl1cEhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX2Rpc3BhdGNoZXIudHJpZ2dlcihSZW5kZXJKcy5DYW52YXMuRXZlbnRzLmtleXVwLCBldmVudCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIF9rZXlwcmVzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX2Rpc3BhdGNoZXIudHJpZ2dlcihSZW5kZXJKcy5DYW52YXMuRXZlbnRzLmtleXByZXNzLCBldmVudCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vRXZlbnQgd2lyZXVwc1xyXG4gICAgICAgICQodGhpcy5jYW52YXMpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICBfY2xpY2tIYW5kbGVyLmNhbGwoX3NlbGYsIGV2ZW50LCBwb3NpdGlvbik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQodGhpcy5jYW52YXMpLm9uKFwibW91c2Vtb3ZlXCIsIGZ1bmN0aW9uIChldmVudCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgX21vdXNlbW92ZUhhbmRsZXIuY2FsbChfc2VsZiwgZXZlbnQsIHBvc2l0aW9uKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCh0aGlzLmNhbnZhcykub24oXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uIChldmVudCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgX21vdXNlZW50ZXJIYW5kbGVyLmNhbGwoX3NlbGYsIGV2ZW50LCBwb3NpdGlvbik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQodGhpcy5jYW52YXMpLm9uKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoZXZlbnQsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIF9tb3VzZWxlYXZlSGFuZGxlci5jYWxsKF9zZWxmLCBldmVudCwgcG9zaXRpb24pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS5vbihcImtleWRvd25cIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF9rZXlkb3duSGFuZGxlci5jYWxsKF9zZWxmLCBldmVudCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKFwia2V5dXBcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF9rZXl1cEhhbmRsZXIuY2FsbChfc2VsZiwgZXZlbnQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS5vbihcImtleXByZXNzXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfa2V5cHJlc3NIYW5kbGVyLmNhbGwoX3NlbGYsIGV2ZW50KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbiA9IGZ1bmN0aW9uICh0eXBlLCBoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIGlmICghUmVuZGVySnMuQ2FudmFzLkV2ZW50c1t0eXBlXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBfZGlzcGF0Y2hlci5zdWJzY3JpYmUodHlwZSwgaGFuZGxlcik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9BZGQgYW4gb2JqZWN0IHRvIHRoZSBsYXllciwgaXQgd2lsbCBiZSByZW5kZXJlZCBvbiB0aGlzIGxheWVyXHJcbiAgICAgICAgdGhpcy5hZGRPYmplY3QgPSBmdW5jdGlvbiAob2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICghKG9iamVjdCBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5PYmplY3QpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbiBvYmplY3Qgb24gdGhlIGNhbnZhcyBzaG91bGQgYmUgaW5oZXJpdGVkIGZyb20gQ2FudmFzT2JqZWN0IVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvYmplY3QubGF5ZXIgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLm9iamVjdHMucHVzaChvYmplY3QpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vUmV0dXJucyB0cnVlIGlmIHRoZSBsYXllciBoYXMgc3ByaXRlIG9iamVjdHMgb3RoZXJ3aXNlIGZhbHNlXHJcbiAgICAgICAgdGhpcy5oYXNTcHJpdGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gdGhpcy5vYmplY3RzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vYmplY3RzW2ldIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5TcHJpdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9SZWRyYXcgb2JqZWN0cyBvbiBsYXllcnMgaWYgaXQncyBhY3RpdmVcclxuICAgICAgICB0aGlzLmRyYXdPYmplY3RzID0gZnVuY3Rpb24gKGZyYW1lLCBhYnNQb3NpdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoKF9pbml0aWFsaXplZCAmJiAhX2Rpc3BhdGNoZXIuaGFzU3Vic2NyaWJlcnMoJ2FuaW1hdGUnKSAmJiAhdGhpcy5oYXNTcHJpdGVzKHRoaXMpICYmICF0aGlzLmFjdGl2ZSkgfHwgdGhpcy5vYmplY3RzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYWt0RnJhbWVSYXRlID0gTWF0aC5mbG9vcigxMDAwIC8gZnJhbWUpO1xyXG5cclxuICAgICAgICAgICAgX2Rpc3BhdGNoZXIudHJpZ2dlcihcImFuaW1hdGVcIiwgZnJhbWUpO1xyXG4gICAgICAgICAgICB2YXIgb2JqZWN0c0xvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSB0aGlzLm9iamVjdHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5vYmplY3RzW2ldLmxvYWRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdHNMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0c1tpXS5kcmF3KHRoaXMuY3R4LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJhbWVSYXRlOiBmcmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0VGltZTogX3RpbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogX3RpbWUgKyBha3RGcmFtZVJhdGVcclxuICAgICAgICAgICAgICAgIH0sIGFic1Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob2JqZWN0c0xvYWRlZClcclxuICAgICAgICAgICAgICAgIF9pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgICAgIF90aW1lICs9IGFrdEZyYW1lUmF0ZTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4iLCJyZWdpc3Rlck5hbWVzcGFjZShcIlJlbmRlckpzLkNhbnZhcy5TaGFwZXNcIik7XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRXZlbnRzID0ge1xyXG4gICAgYW5pbWF0ZTogXCJhbmltYXRlXCIsXHJcbiAgICBjbGljazogXCJjbGlja1wiLFxyXG4gICAga2V5ZG93bjogXCJrZXlkb3duXCIsXHJcbiAgICBrZXl1cDogXCJrZXl1cFwiLFxyXG4gICAga2V5cHJlc3M6IFwia2V5cHJlc3NcIixcclxuICAgIG1vdXNlbW92ZTogXCJtb3VzZW1vdmVcIixcclxuICAgIG1vdXNlaG92ZXI6IFwibW91c2Vob3ZlclwiLFxyXG4gICAgbW91c2VsZWF2ZTogXCJtb3VzZWxlYXZlXCIsXHJcbiAgICBjb2xsaXNpb246IFwiY29sbGlzaW9uXCIsXHJcbiAgICBvYmplY3RDaGFuZ2VkOiBcIm9iamVjdENoYW5nZWRcIlxyXG59O1xyXG5cclxuLypcclxuICpSZXByZXNlbnRzIGEgYmFzZSBjbGFzcyBmb3IgZGlmZmVyZW50IHR5cGUgb2Ygc2hhcGVzXHJcbiAqL1xyXG5SZW5kZXJKcy5DYW52YXMuT2JqZWN0ID0gaW5qZWN0KFwiRXZlbnREaXNwYXRjaGVyXCIsIFwialF1ZXJ5XCIsIFwiVXRpbHNcIilcclxuICAgIC5jbGFzcyhmdW5jdGlvbiAoZGlzcGF0Y2hlciwgJCwgdXRpbHMsIG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaGVyID0gbmV3IGRpc3BhdGNoZXIoKTtcclxuXHJcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgdGhpcy5pZCA9IHV0aWxzLmdldEd1aWQoKTtcclxuICAgICAgICB0aGlzLnBvcyA9IG5ldyBSZW5kZXJKcy5WZWN0b3Iob3B0aW9ucy54LCBvcHRpb25zLnkpO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSBvcHRpb25zLndpZHRoIHx8IDA7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBvcHRpb25zLmhlaWdodCB8fCAwO1xyXG4gICAgICAgIHRoaXMuYW5nbGUgPSBvcHRpb25zLmFuZ2xlIHx8IDA7XHJcbiAgICAgICAgdGhpcy5zY2FsZVggPSBvcHRpb25zLnNjYWxlWDtcclxuICAgICAgICB0aGlzLnNjYWxlWSA9IG9wdGlvbnMuc2NhbGVZO1xyXG4gICAgICAgIHRoaXMuYmx1clJhZGl1cyA9IG9wdGlvbnMuYmx1clJhZGl1cztcclxuICAgICAgICB0aGlzLmNvbGxpc2lvbiA9IG9wdGlvbnMuY29sbGlzaW9uIHx8IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZmlsdGVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMubGF5ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubG9hZGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKlJldHVybnMgd2l0aCB0aGUgY2VudGVyIHBvaW50IG9mIHRoZSBzaGFwZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZ2V0Q2VudGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlbmRlckpzLlZlY3Rvcih0aGlzLnBvcy54ICsgKHRoaXMud2lkdGgpIC8gMiwgdGhpcy5wb3MueSArICh0aGlzLmhlaWdodCkgLyAyKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICpSZXR1cm5zIHdpdGggdGhlIHJlY3QgYXJvdW5kIHRoZSBzaGFwZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZ2V0Q2VudGVyZWRSZWN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbyA9IHRoaXMucG9zO1xyXG4gICAgICAgICAgICByZXR1cm4ge3g6IG8ueCwgeTogby55LCB3aWR0aDogdGhpcy53aWR0aCwgaGVpZ2h0OiB0aGlzLmhlaWdodH07XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIEZpbHRlcnMgd2hpY2ggd2lsbCBiZSBhcHBsaWVkIG9uIHRoZSBvYmplY3QoYmx1ciwgZ3JleXNjYWxlIGV0Yy4uLilcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnNldGZpbHRlcnMgPSBmdW5jdGlvbiAoZmlsdGVycykge1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlcnMgPSBmaWx0ZXJzO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlUG9zaXRpb24gPSBmdW5jdGlvbiAoZFgsIGRZKSB7XHJcbiAgICAgICAgICAgIHZhciBwcmV2UG9zID0gUmVuZGVySnMuVmVjdG9yLmNsb25lKHRoaXMucG9zLngsIHRoaXMucG9zLnkpO1xyXG4gICAgICAgICAgICB2YXIgbmV3UG9zID0gdGhpcy5wb3MuYWRkKG5ldyBSZW5kZXJKcy5WZWN0b3IoZFgsIGRZKSk7XHJcbiAgICAgICAgICAgIHRoaXMucG9zID0gbmV3UG9zO1xyXG4gICAgICAgICAgICBpZiAocHJldlBvcy54ICE9PSBuZXdQb3MueCB8fCBwcmV2UG9zLnkgIT09IG5ld1Bvcy55KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5vYmplY3RDaGFuZ2VkLCB0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICpSb3RhdGUgdGhlIHNoYXBlIHRvIHRoZSBnaXZlbiBkZWdyZWUsIGR1cmluZyB0aGUgdGltZVxyXG4gICAgICAgICAqLWRlZyByb3RhdGlvbiBhbmdsZVxyXG4gICAgICAgICAqLXQgYW5pbWF0aW9uIHRpbWVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnJvdGF0ZVNoYXBlID0gZnVuY3Rpb24gKGN0eCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hbmdsZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBvID0gdGhpcy5nZXRDZW50ZXIoKTtcclxuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShvLngsIG8ueSk7XHJcbiAgICAgICAgICAgIGN0eC5yb3RhdGUodXRpbHMuY29udmVydFRvUmFkKHRoaXMuYW5nbGUpKTtcclxuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSgtby54LCAtby55KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqU2NhbGUgdGhlIHNoYXBlIHdpdGggdGhlIGdpdmVuIHdpZHRoIGFuZCBoZWlnaHQsIGR1cmluZyB0aGUgdGltZVxyXG4gICAgICAgICAqLXdpZHRoIHNjYWxlIGhvcml6b250YWxseSByYXRpbyBpbnRlZ2VyIDEgaXMgMTAwJVxyXG4gICAgICAgICAqLWhlaWdodCBzY2FsZSB2ZXJ0aWNhbGx5IHJhdGlvIGludGVnZXIgMSBpcyAxMDAlXHJcbiAgICAgICAgICotdCBhbmltYXRpb24gdGltZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc2NhbGVTaGFwZSA9IGZ1bmN0aW9uIChjdHgsIHNjYWxlWCwgc2NhbGVZKSB7XHJcbiAgICAgICAgICAgIHZhciBvID0gdGhpcy5nZXRDZW50ZXIoKTtcclxuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShvLngsIG8ueSk7XHJcbiAgICAgICAgICAgIGN0eC5zY2FsZShzY2FsZVgsIHNjYWxlWSk7XHJcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoLW8ueCwgLW8ueSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5vbiA9IGZ1bmN0aW9uICh0eXBlLCBoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIGlmICghUmVuZGVySnMuQ2FudmFzLkV2ZW50c1t0eXBlXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc3BhdGNoZXIuc3Vic2NyaWJlKHR5cGUsIGhhbmRsZXIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMudHJpZ2dlciA9IGZ1bmN0aW9uIChldmVudCwgYXJncykge1xyXG4gICAgICAgICAgICBpZiAoIVJlbmRlckpzLkNhbnZhcy5FdmVudHNbZXZlbnRdKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaGVyLnRyaWdnZXIoZXZlbnQsIGFyZ3MpO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBNQ0cgb24gMjAxNS4wMS4yNS4uXHJcbiAqL1xyXG52YXIgUmVuZGVySnMgPSBSZW5kZXJKcyB8fCB7fTtcclxuUmVuZGVySnMuQ2FudmFzID0gUmVuZGVySnMuQ2FudmFzIHx8IHt9O1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLlNwYWNlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuXHJcbiAgICB2YXIgX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuc3RhZ2UgPSBvcHRpb25zLnN0YWdlO1xyXG4gICAgfTtcclxuICAgIF9pbml0KG9wdGlvbnMpO1xyXG59IiwicmVnaXN0ZXJOYW1lc3BhY2UoXCJSZW5kZXJKcy5DYW52YXNcIik7XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuU3RhZ2UgPSBpbmplY3QoXCJVdGlsc1wiLCBcIkV2ZW50RGlzcGF0Y2hlclwiLCBcIkxpbmtlZExpc3RcIilcclxuICAgIC5jbGFzcyhmdW5jdGlvbiAodXRpbHMsIGRpc3BhdGNoZXIsIGxpbmtlZExpc3QsIG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgdmFyIF9jb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lciB8fCBcInZpZXdwb3J0XCI7XHJcbiAgICAgICAgdmFyIF9jdXJyZW50RnBzID0gMDtcclxuICAgICAgICB2YXIgX2Rpc3BhdGNoZXIgPSBuZXcgZGlzcGF0Y2hlcigpO1xyXG4gICAgICAgIHRoaXMubGF5ZXJzID0gbmV3IGxpbmtlZExpc3QoKTtcclxuICAgICAgICB0aGlzLndpZHRoID0gb3B0aW9ucy53aWR0aCB8fCAxMjAwO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQgfHwgODAwO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgUmVuZGVySnMuVmVjdG9yKC01MCwgLTUwKTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChfY29udGFpbmVyKS5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoX2NvbnRhaW5lcikuc3R5bGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQgKyBcInB4XCI7XHJcblxyXG4gICAgICAgIHZhciBfaW52YWxpZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICBfY3VycmVudEZwcyA9IHV0aWxzLmdldEZwcygpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzLmxheWVycy5nZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgICAgIHdoaWxlIChlbnVtZXJhdG9yLm5leHQoKSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBlbnVtZXJhdG9yLmN1cnJlbnQoKS5kcmF3T2JqZWN0cyhfY3VycmVudEZwcywgdGhpcy5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfaW52YWxpZGF0ZS5jYWxsKHNlbGYpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIF9pbnZhbGlkYXRlLmNhbGwodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMub25JbnZhbGlkYXRlID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9kaXNwYXRjaGVyLnN1YnNjcmliZShcIm9uSW52YWxpZGF0ZVwiLCBoYW5kbGVyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZUxheWVyID0gZnVuY3Rpb24gKGFjdGl2ZSkge1xyXG4gICAgICAgICAgICB2YXIgbGF5ZXIgPSBuZXcgUmVuZGVySnMuQ2FudmFzLkxheWVyKF9jb250YWluZXIsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCBhY3RpdmUpO1xyXG4gICAgICAgICAgICB0aGlzLmxheWVycy5hcHBlbmQobGF5ZXIpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGxheWVyO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTsiLCJ2YXIgUmVuZGVySnMgPSBSZW5kZXJKcyB8fCB7fTtcclxuUmVuZGVySnMuQ2FudmFzID0gUmVuZGVySnMuQ2FudmFzIHx8IHt9O1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLkVhc2luZ3MgPSBSZW5kZXJKcy5DYW52YXMuRWFzaW5ncyB8fCB7fTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5FYXNpbmdzLkJvdW5jZUVhc2VPdXQgPSBmdW5jdGlvbiAodCwgYiwgYywgZCkge1xyXG4gICAgaWYgKCh0IC89IGQpIDwgKDEgLyAyLjc1KSkge1xyXG4gICAgICAgIHJldHVybiBjICogKDcuNTYyNSAqIHQgKiB0KSArIGI7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0IDwgKDIgLyAyLjc1KSkge1xyXG4gICAgICAgIHJldHVybiBjICogKDcuNTYyNSAqICh0IC09ICgxLjUgLyAyLjc1KSkgKiB0ICsgMC43NSkgKyBiO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodCA8ICgyLjUgLyAyLjc1KSkge1xyXG4gICAgICAgIHJldHVybiBjICogKDcuNTYyNSAqICh0IC09ICgyLjI1IC8gMi43NSkpICogdCArIDAuOTM3NSkgKyBiO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGMgKiAoNy41NjI1ICogKHQgLT0gKDIuNjI1IC8gMi43NSkpICogdCArIDAuOTg0Mzc1KSArIGI7XHJcbiAgICB9XHJcbn07XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRWFzaW5ncy5Cb3VuY2VFYXNlSW4gPSBmdW5jdGlvbiAodCwgYiwgYywgZCkge1xyXG4gICAgcmV0dXJuIGMgLSBLaW5ldGljLkVhc2luZ3MuQm91bmNlRWFzZU91dChkIC0gdCwgMCwgYywgZCkgKyBiO1xyXG59O1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLkVhc2luZ3MuQm91bmNlRWFzZUluT3V0ID0gZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcclxuICAgIGlmICh0IDwgZCAvIDIpIHtcclxuICAgICAgICByZXR1cm4gS2luZXRpYy5FYXNpbmdzLkJvdW5jZUVhc2VJbih0ICogMiwgMCwgYywgZCkgKiAwLjUgKyBiO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIEtpbmV0aWMuRWFzaW5ncy5Cb3VuY2VFYXNlT3V0KHQgKiAyIC0gZCwgMCwgYywgZCkgKiAwLjUgKyBjICogMC41ICsgYjtcclxuICAgIH1cclxufTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5FYXNpbmdzLkVhc2VJbiA9IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XHJcbiAgICByZXR1cm4gYyAqICh0IC89IGQpICogdCArIGI7XHJcbn07XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRWFzaW5ncy5FYXNlT3V0ID0gZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcclxuICAgIHJldHVybiAtYyAqICh0IC89IGQpICogKHQgLSAyKSArIGI7XHJcbn07XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRWFzaW5ncy5FYXNlSW5PdXQgPSBmdW5jdGlvbiAodCwgYiwgYywgZCkge1xyXG4gICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHtcclxuICAgICAgICByZXR1cm4gYyAvIDIgKiB0ICogdCArIGI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gLWMgLyAyICogKCgtLXQpICogKHQgLSAyKSAtIDEpICsgYjtcclxufTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5FYXNpbmdzLkVsYXN0aWNFYXNlSW4gPSBmdW5jdGlvbiAodCwgYiwgYywgZCwgYSwgcCkge1xyXG4gICAgLy8gYWRkZWQgcyA9IDBcclxuICAgIHZhciBzID0gMDtcclxuICAgIGlmICh0ID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGI7XHJcbiAgICB9XHJcbiAgICBpZiAoKHQgLz0gZCkgPT09IDEpIHtcclxuICAgICAgICByZXR1cm4gYiArIGM7XHJcbiAgICB9XHJcbiAgICBpZiAoIXApIHtcclxuICAgICAgICBwID0gZCAqIDAuMztcclxuICAgIH1cclxuICAgIGlmICghYSB8fCBhIDwgTWF0aC5hYnMoYykpIHtcclxuICAgICAgICBhID0gYztcclxuICAgICAgICBzID0gcCAvIDQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBzID0gcCAvICgyICogTWF0aC5QSSkgKiBNYXRoLmFzaW4oYyAvIGEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIC0oYSAqIE1hdGgucG93KDIsIDEwICogKHQgLT0gMSkpICogTWF0aC5zaW4oKHQgKiBkIC0gcykgKiAoMiAqIE1hdGguUEkpIC8gcCkpICsgYjtcclxufTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5FYXNpbmdzLkVsYXN0aWNFYXNlT3V0ID0gZnVuY3Rpb24gKHQsIGIsIGMsIGQsIGEsIHApIHtcclxuICAgIC8vIGFkZGVkIHMgPSAwXHJcbiAgICB2YXIgcyA9IDA7XHJcbiAgICBpZiAodCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBiO1xyXG4gICAgfVxyXG4gICAgaWYgKCh0IC89IGQgLyAyKSA9PT0gMikge1xyXG4gICAgICAgIHJldHVybiBiICsgYztcclxuICAgIH1cclxuICAgIGlmICghcCkge1xyXG4gICAgICAgIHAgPSBkICogKDAuMyAqIDEuNSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWEgfHwgYSA8IE1hdGguYWJzKGMpKSB7XHJcbiAgICAgICAgYSA9IGM7XHJcbiAgICAgICAgcyA9IHAgLyA0O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcyA9IHAgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKGMgLyBhKTtcclxuICAgIH1cclxuICAgIGlmICh0IDwgMSkge1xyXG4gICAgICAgIHJldHVybiAtMC41ICogKGEgKiBNYXRoLnBvdygyLCAxMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApKSArIGI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYSAqIE1hdGgucG93KDIsIC0xMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApICogMC41ICsgYyArIGI7XHJcbn07XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRWFzaW5ncy5FbGFzdGljRWFzZUluT3V0ID0gZnVuY3Rpb24gKHQsIGIsIGMsIGQsIGEsIHApIHtcclxuICAgIC8vIGFkZGVkIHMgPSAwXHJcbiAgICB2YXIgcyA9IDA7XHJcbiAgICBpZiAodCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBiO1xyXG4gICAgfVxyXG4gICAgaWYgKCh0IC89IGQgLyAyKSA9PT0gMikge1xyXG4gICAgICAgIHJldHVybiBiICsgYztcclxuICAgIH1cclxuICAgIGlmICghcCkge1xyXG4gICAgICAgIHAgPSBkICogKDAuMyAqIDEuNSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWEgfHwgYSA8IE1hdGguYWJzKGMpKSB7XHJcbiAgICAgICAgYSA9IGM7XHJcbiAgICAgICAgcyA9IHAgLyA0O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcyA9IHAgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKGMgLyBhKTtcclxuICAgIH1cclxuICAgIGlmICh0IDwgMSkge1xyXG4gICAgICAgIHJldHVybiAtMC41ICogKGEgKiBNYXRoLnBvdygyLCAxMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApKSArIGI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYSAqIE1hdGgucG93KDIsIC0xMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApICogMC41ICsgYyArIGI7XHJcbn07XHJcblxyXG5cclxuXHJcblJlbmRlckpzLkNhbnZhcy5UcmFuc2l0aW9uID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICB2YXIgcmV2ZXJzZSA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuZHVyYXRpb24gPSBvcHRpb25zLmR1cmF0aW9uICogMTAwMCB8fCAxMDAwO1xyXG5cclxuICAgIHRoaXMuc2hhcGUgPSBvcHRpb25zLnNoYXBlO1xyXG5cclxuICAgIHRoaXMucHJvcHMgPSBvcHRpb25zLnByb3BzIHx8IHt9O1xyXG4gICAgdGhpcy5vcmlnUHJvcHMgPSB7fTtcclxuICAgIGZvciAodmFyIHByb3AgaW4gb3B0aW9ucy5wcm9wcykge1xyXG4gICAgICAgIHRoaXMub3JpZ1Byb3BzW3Byb3BdID0gdGhpcy5zaGFwZVtwcm9wXTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmVhc2luZyA9IG9wdGlvbnMuZWFzaW5nIHx8IFJlbmRlckpzLkNhbnZhcy5FYXNpbmdzLkVhc2VJbk91dDtcclxuXHJcbiAgICB2YXIgYW5pbWF0aW9uID0gbmV3IFJlbmRlckpzLkNhbnZhcy5BbmltYXRpb24oZnVuY3Rpb24gKGZyYW1lKSB7XHJcbiAgICAgICAgaWYgKGZyYW1lLnRpbWUgPj0gc2VsZi5kdXJhdGlvbikge1xyXG4gICAgICAgICAgICBhbmltYXRpb24uc3RvcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBwcm9wIGluIHNlbGYucHJvcHMpIHtcclxuICAgICAgICAgICAgaWYgKHJldmVyc2UpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2hhcGVbcHJvcF0gPSBzZWxmLmVhc2luZyhmcmFtZS50aW1lLCBzZWxmLm9yaWdQcm9wc1twcm9wXSArIHNlbGYucHJvcHNbcHJvcF0sIHNlbGYucHJvcHNbcHJvcF0gKiAtMSwgc2VsZi5kdXJhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNoYXBlW3Byb3BdID0gc2VsZi5lYXNpbmcoZnJhbWUudGltZSwgc2VsZi5vcmlnUHJvcHNbcHJvcF0sIHNlbGYucHJvcHNbcHJvcF0sIHNlbGYuZHVyYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sIHRoaXMuc2hhcGUubGF5ZXIpO1xyXG5cclxuICAgIHRoaXMucGxheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhbmltYXRpb24uc3RhcnQoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5wYXVzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhbmltYXRpb24ucGF1c2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zdG9wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFuaW1hdGlvbi5zdG9wKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucmV2ZXJzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXZlcnNlID0gdHJ1ZTtcclxuICAgICAgICBhbmltYXRpb24uc3RhcnQoKTtcclxuICAgIH07XHJcbn0iLCJ2YXIgUmVuZGVySnMgPSBSZW5kZXJKcyB8fCB7fTtcclxuUmVuZGVySnMuUGh5c2ljcyA9IFJlbmRlckpzLlBoeXNpY3MgfHwge307XHJcblxyXG5SZW5kZXJKcy5QaHlzaWNzLkNvbGxpc2lvbnMgPSAoZnVuY3Rpb24gKG1vZHVsZSkge1xyXG5cclxuICAgIHZhciBfcmF5Q2FzdGluZ0FsZyA9IGZ1bmN0aW9uIChwLCBlZGdlKSB7XHJcbiAgICAgICAgJ3Rha2VzIGEgcG9pbnQgcD1QdCgpIGFuZCBhbiBlZGdlIG9mIHR3byBlbmRwb2ludHMgYSxiPVB0KCkgb2YgYSBsaW5lIHNlZ21lbnQgcmV0dXJucyBib29sZWFuJztcclxuICAgICAgICB2YXIgX2VwcyA9IDAuMDAwMDE7XHJcbiAgICAgICAgdmFyIF9odWdlID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgICAgICB2YXIgX3RpbnkgPSBOdW1iZXIuTUlOX1ZBTFVFO1xyXG4gICAgICAgIHZhciBtX2JsdWUsIG1fcmVkID0gMDtcclxuICAgICAgICB2YXIgYSA9IGVkZ2UucDE7XHJcbiAgICAgICAgdmFyIGIgPSBlZGdlLnAyO1xyXG5cclxuICAgICAgICBpZiAoYS55ID4gYi55KSB7XHJcbiAgICAgICAgICAgIGEuc2V0KGIpO1xyXG4gICAgICAgICAgICBiLnNldChhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHAueSA9PSBhLnkgfHwgcC55ID09IGIueSlcclxuICAgICAgICAgICAgcC55ICs9IF9lcHM7XHJcblxyXG4gICAgICAgIHZhciBpbnRlcnNlY3QgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKChwLnkgPiBiLnkgfHwgcC55IDwgYS55KSB8fCAocC54ID4gTWF0aC5tYXgoYS54LCBiLngpKSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAocC54IDwgTWF0aC5taW4oYS54LCBiLngpKVxyXG4gICAgICAgICAgICBpbnRlcnNlY3QgPSB0cnVlO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoYS54IC0gYi54KSA+IF90aW55KVxyXG4gICAgICAgICAgICAgICAgbV9yZWQgPSAoYi55IC0gYS55KSAvIChiLnggLSBhLngpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBtX3JlZCA9IF9odWdlO1xyXG5cclxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGEueCAtIHAueCkgPiBfdGlueSlcclxuICAgICAgICAgICAgICAgIG1fYmx1ZSA9IChwLnkgLSBhLnkpIC8gKHAueCAtIGEueCk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIG1fYmx1ZSA9IF9odWdlXHJcbiAgICAgICAgICAgIGludGVyc2VjdCA9IG1fYmx1ZSA+PSBtX3JlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpbnRlcnNlY3Q7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIF92b3Jub2lSZWdpb24gPSBmdW5jdGlvbiAobGluZSwgcG9pbnQpIHtcclxuICAgICAgICB2YXIgbGVuMiA9IGxpbmUubGVuZ3RoMigpO1xyXG4gICAgICAgIHZhciBkcCA9IHBvaW50LmRvdChsaW5lKTtcclxuICAgICAgICAvLyBJZiB0aGUgcG9pbnQgaXMgYmV5b25kIHRoZSBzdGFydCBvZiB0aGUgbGluZSwgaXQgaXMgaW4gdGhlXHJcbiAgICAgICAgLy8gbGVmdCB2b3Jub2kgcmVnaW9uLlxyXG4gICAgICAgIGlmIChkcCA8IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiB0aGUgcG9pbnQgaXMgYmV5b25kIHRoZSBlbmQgb2YgdGhlIGxpbmUsIGl0IGlzIGluIHRoZVxyXG4gICAgICAgIC8vIHJpZ2h0IHZvcm5vaSByZWdpb24uXHJcbiAgICAgICAgZWxzZSBpZiAoZHAgPiBsZW4yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBPdGhlcndpc2UsIGl0J3MgaW4gdGhlIG1pZGRsZSBvbmUuXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgX3BvaW50SW5Qb2x5Z29uID0gZnVuY3Rpb24gKHAsIHBvbHlnb24pIHtcclxuICAgICAgICB2YXIgcmVzID0gZmFsc2U7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2x5Z29uLnJFZGdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoX3JheUNhc3RpbmdBbGcocCwgcG9seWdvbi5yRWRnZXNbaV0pKVxyXG4gICAgICAgICAgICAgICAgcmVzID0gIXJlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuXHJcbiAgICB2YXIgX3BvaW50SW5MaW5lID0gZnVuY3Rpb24gKHAsIGxpbmUpIHtcclxuICAgICAgICB2YXIgbSA9IChsaW5lLnBvczIueSAtIGxpbmUucG9zLnkpIC8gKGxpbmUucG9zMi54IC0gbGluZS5wb3MueCk7XHJcblxyXG4gICAgICAgIHJldHVybiBwLnkgLSBsaW5lLnBvcy55ID09IG0gKiAocC54IC0gbGluZS5wb3MueSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIF9wb2ludEluQ2lyY2xlID0gZnVuY3Rpb24gKHAsIGMpIHtcclxuICAgICAgICBvID0gYy5nZXRDZW50ZXIoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KHAueCAtIG8ueCwgMikgKyBNYXRoLnBvdyhwLnkgLSBvLnksIDIpIDw9IE1hdGgucG93KCh0aGlzLndpZHRoIC8gMiksIDIpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBfcmVjdFZzUmVjdCA9IGZ1bmN0aW9uIChyMSwgcjIpIHtcclxuICAgICAgICB2YXIgdHcgPSByMS53aWR0aDtcclxuICAgICAgICB2YXIgdGggPSByMS5oZWlnaHQ7XHJcbiAgICAgICAgdmFyIHJ3ID0gcjIud2lkdGg7XHJcbiAgICAgICAgdmFyIHJoID0gcjIuaGVpZ2h0O1xyXG4gICAgICAgIGlmIChydyA8PSAwIHx8IHJoIDw9IDAgfHwgdHcgPD0gMCB8fCB0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHR4ID0gcjEueDtcclxuICAgICAgICB2YXIgdHkgPSByMS55O1xyXG4gICAgICAgIHZhciByeCA9IHIyLng7XHJcbiAgICAgICAgdmFyIHJ5ID0gcjIueTtcclxuICAgICAgICBydyArPSByeDtcclxuICAgICAgICByaCArPSByeTtcclxuICAgICAgICB0dyArPSB0eDtcclxuICAgICAgICB0aCArPSB0eTtcclxuICAgICAgICAvL292ZXJmbG93IHx8IGludGVyc2VjdFxyXG4gICAgICAgIHJldHVybiAoKHJ3IDwgcnggfHwgcncgPiB0eCkgJiZcclxuICAgICAgICAocmggPCByeSB8fCByaCA+IHR5KSAmJlxyXG4gICAgICAgICh0dyA8IHR4IHx8IHR3ID4gcngpICYmXHJcbiAgICAgICAgKHRoIDwgdHkgfHwgdGggPiByeSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBfcmVjdFZzQ2lyY2xlID0gZnVuY3Rpb24gKHIsIGMpIHtcclxuICAgICAgICByZXR1cm4gX3BvaW50SW5SZWN0YW5nbGUoYy5nZXRDZW50ZXIoKSwgcikgfHxcclxuICAgICAgICAgICAgX2xpbmVWc0NpcmNsZShyLnRvcEVkZ2UoKSwgYykgfHxcclxuICAgICAgICAgICAgX2xpbmVWc0NpcmNsZShyLnJpZ2h0RWRnZSgpLCBjKSB8fFxyXG4gICAgICAgICAgICBfbGluZVZzQ2lyY2xlKHIuYm90dG9tRWRnZSgpLCBjKSB8fFxyXG4gICAgICAgICAgICBfbGluZVZzQ2lyY2xlKHIubGVmdEVkZ2UoKSwgYyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIF9saW5lVnNDaXJjbGUgPSBmdW5jdGlvbiAobCwgYykge1xyXG4gICAgICAgIHZhciBjbyA9IGMuZ2V0Q2VudGVyKCk7XHJcbiAgICAgICAgdmFyIHIgPSBjLnJhZGl1cztcclxuICAgICAgICB2YXIgZCA9IG5ldyBSZW5kZXJKcy5WZWN0b3IobC5wb3MyLnggLSBsLnBvcy54LCBsLnBvczIueSAtIGwucG9zLnkpO1xyXG4gICAgICAgIHZhciBmID0gbmV3IFJlbmRlckpzLlZlY3RvcihsLnBvcy54IC0gY28ueCwgbC5wb3MueSAtIGNvLnkpO1xyXG5cclxuICAgICAgICB2YXIgYSA9IGQuZG90KGQpO1xyXG4gICAgICAgIHZhciBiID0gMiAqIGYuZG90KGQpO1xyXG4gICAgICAgIHZhciBjID0gZi5kb3QoZikgLSByICogcjtcclxuXHJcbiAgICAgICAgdmFyIGRpc2NyaW1pbmFudCA9IGIgKiBiIC0gNCAqIGEgKiBjO1xyXG5cclxuICAgICAgICBpZiAoZGlzY3JpbWluYW50IDwgMCkge1xyXG4gICAgICAgICAgICAvLyBubyBpbnRlcnNlY3Rpb25cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gcmF5IGRpZG4ndCB0b3RhbGx5IG1pc3Mgc3BoZXJlLFxyXG4gICAgICAgICAgICAvLyBzbyB0aGVyZSBpcyBhIHNvbHV0aW9uIHRvXHJcbiAgICAgICAgICAgIC8vIHRoZSBlcXVhdGlvbi5cclxuXHJcbiAgICAgICAgICAgIGRpc2NyaW1pbmFudCA9IE1hdGguc3FydChkaXNjcmltaW5hbnQpO1xyXG5cclxuICAgICAgICAgICAgLy8gZWl0aGVyIHNvbHV0aW9uIG1heSBiZSBvbiBvciBvZmYgdGhlIHJheSBzbyBuZWVkIHRvIHRlc3QgYm90aFxyXG4gICAgICAgICAgICAvLyB0MSBpcyBhbHdheXMgdGhlIHNtYWxsZXIgdmFsdWUsIGJlY2F1c2UgQk9USCBkaXNjcmltaW5hbnQgYW5kXHJcbiAgICAgICAgICAgIC8vIGEgYXJlIG5vbm5lZ2F0aXZlLlxyXG4gICAgICAgICAgICB2YXIgdDEgPSAoLWIgLSBkaXNjcmltaW5hbnQpIC8gKDIgKiBhKTtcclxuICAgICAgICAgICAgdmFyIHQyID0gKC1iICsgZGlzY3JpbWluYW50KSAvICgyICogYSk7XHJcblxyXG4gICAgICAgICAgICAvLyAzeCBISVQgY2FzZXM6XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgIC1vLT4gICAgICAgICAgICAgLS18LS0+ICB8ICAgICAgICAgICAgfCAgLS18LT5cclxuICAgICAgICAgICAgLy8gSW1wYWxlKHQxIGhpdCx0MiBoaXQpLCBQb2tlKHQxIGhpdCx0Mj4xKSwgRXhpdFdvdW5kKHQxPDAsIHQyIGhpdCksIFxyXG5cclxuICAgICAgICAgICAgLy8gM3ggTUlTUyBjYXNlczpcclxuICAgICAgICAgICAgLy8gICAgICAgLT4gIG8gICAgICAgICAgICAgICAgICAgICBvIC0+ICAgICAgICAgICAgICB8IC0+IHxcclxuICAgICAgICAgICAgLy8gRmFsbFNob3J0ICh0MT4xLHQyPjEpLCBQYXN0ICh0MTwwLHQyPDApLCBDb21wbGV0ZWx5SW5zaWRlKHQxPDAsIHQyPjEpXHJcblxyXG4gICAgICAgICAgICBpZiAodDEgPj0gMCAmJiB0MSA8PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0MSBpcyB0aGUgaW50ZXJzZWN0aW9uLCBhbmQgaXQncyBjbG9zZXIgdGhhbiB0MlxyXG4gICAgICAgICAgICAgICAgLy8gKHNpbmNlIHQxIHVzZXMgLWIgLSBkaXNjcmltaW5hbnQpXHJcbiAgICAgICAgICAgICAgICAvLyBJbXBhbGUsIFBva2VcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBoZXJlIHQxIGRpZG4ndCBpbnRlcnNlY3Qgc28gd2UgYXJlIGVpdGhlciBzdGFydGVkXHJcbiAgICAgICAgICAgIC8vIGluc2lkZSB0aGUgc3BoZXJlIG9yIGNvbXBsZXRlbHkgcGFzdCBpdFxyXG4gICAgICAgICAgICBpZiAodDIgPj0gMCAmJiB0MiA8PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBFeGl0V291bmRcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBubyBpbnRuOiBGYWxsU2hvcnQsIFBhc3QsIENvbXBsZXRlbHlJbnNpZGVcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgX2NpcmNsZVZzQ2lyY2xlID0gZnVuY3Rpb24gKGMxLCBjMikge1xyXG4gICAgICAgIHZhciB2ZWxvY2l0eSA9IGMyLnY7XHJcbiAgICAgICAgLy9hZGQgYm90aCByYWRpaSB0b2dldGhlciB0byBnZXQgdGhlIGNvbGxpZGluZyBkaXN0YW5jZVxyXG4gICAgICAgIHZhciB0b3RhbFJhZGl1cyA9IGMxLnJhZGl1cyArIGMyLnJhZGl1cztcclxuICAgICAgICAvL2ZpbmQgdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHR3byBjaXJjbGVzIHVzaW5nIFB5dGhhZ29yZWFuIHRoZW9yZW0uIE5vIHNxdWFyZSByb290cyBmb3Igb3B0aW1pemF0aW9uXHJcbiAgICAgICAgdmFyIGRpc3RhbmNlU3F1YXJlZCA9IChjMS5wb3MueCAtIGMyLnBvcy54KSAqIChjMS5wb3MueCAtIGMyLnBvcy54KSArIChjMS5wb3MueSAtIGMyLnBvcy55KSAqIChjMS5wb3MueSAtIGMyLnBvcy55KTtcclxuICAgICAgICAvL2lmIHlvdXIgZGlzdGFuY2UgaXMgbGVzcyB0aGFuIHRoZSB0b3RhbFJhZGl1cyBzcXVhcmUoYmVjYXVzZSBkaXN0YW5jZSBpcyBzcXVhcmVkKVxyXG4gICAgICAgIGlmIChkaXN0YW5jZVNxdWFyZWQgPCB0b3RhbFJhZGl1cyAqIHRvdGFsUmFkaXVzKSB7XHJcbiAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydChkaXN0YW5jZVNxdWFyZWQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNlcGFyYXRpb24gPSB0b3RhbFJhZGl1cyAtIGRpc3RhbmNlO1xyXG4gICAgICAgICAgICB2YXIgdW5pdFZlY3RvciA9IG5ldyBSZW5kZXJKcy5WZWN0b3IoYzEucG9zLnN1YihjMi5wb3MpLnggLyBkaXN0YW5jZSwgYzEucG9zLnN1YihjMi5wb3MpLnkgLyBkaXN0YW5jZSk7XHJcbiAgICAgICAgICAgIHZhciBkaWZmViA9IGMyLnBvcy5zdWIoYzEucG9zKTtcclxuXHJcbiAgICAgICAgICAgIC8vZmluZCB0aGUgbW92ZW1lbnQgbmVlZGVkIHRvIHNlcGFyYXRlIHRoZSBjaXJjbGVzXHJcbiAgICAgICAgICAgIHJldHVybiB2ZWxvY2l0eS5hZGQodW5pdFZlY3Rvci5zY2FsZShzZXBhcmF0aW9uIC8gMikpOy8vbmV3IFJlbmRlckpzLlZlY3RvcigoYzIucG9zLnggLSBjMS5wb3MueCkgKiBkaWZmZXJlbmNlLCAoYzIucG9zLnkgLSBjMS5wb3MueSkgKiBkaWZmZXJlbmNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7IC8vbm8gY29sbGlzaW9uLCByZXR1cm4gbnVsbFxyXG4gICAgfVxyXG5cclxuICAgIHZhciBfY2lyY2xlVnNQb2x5Z29uID0gZnVuY3Rpb24gKGNpcmNsZSwgcG9seWdvbikge1xyXG4gICAgICAgIC8vIEdldCB0aGUgcG9zaXRpb24gb2YgdGhlIGNpcmNsZSByZWxhdGl2ZSB0byB0aGUgcG9seWdvbi5cclxuICAgICAgICB2YXIgY2lyY2xlUG9zID0gY2lyY2xlLnBvcy5zdWIocG9seWdvbi5wb3MpO1xyXG4gICAgICAgIHZhciByYWRpdXMgPSBjaXJjbGUucmFkaXVzO1xyXG4gICAgICAgIHZhciByYWRpdXMyID0gcmFkaXVzICogcmFkaXVzO1xyXG4gICAgICAgIHZhciBwb2ludHMgPSBwb2x5Z29uLnZlcnRpY2VzLnNsaWNlKCk7XHJcbiAgICAgICAgdmFyIGxlbiA9IHBvaW50cy5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGVkZ2UgPSBuZXcgUmVuZGVySnMuVmVjdG9yKDAsIDApO1xyXG4gICAgICAgIHZhciBwb2ludCA9IG5ldyBSZW5kZXJKcy5WZWN0b3IoMCwgMCk7XHJcbiAgICAgICAgdmFyIHJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgICBvdmVybGFwOiBOdW1iZXIuTUFYX1ZBTFVFLFxyXG4gICAgICAgICAgICBvdmVybGFwTjogbmV3IFJlbmRlckpzLlZlY3RvcigwLCAwKSxcclxuICAgICAgICAgICAgb3ZlcmxhcFY6IG5ldyBSZW5kZXJKcy5WZWN0b3IoMCwgMClcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIEZvciBlYWNoIGVkZ2UgaW4gdGhlIHBvbHlnb246XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgbmV4dCA9IGkgPT09IGxlbiAtIDEgPyAwIDogaSArIDE7XHJcbiAgICAgICAgICAgIHZhciBwcmV2ID0gaSA9PT0gMCA/IGxlbiAtIDEgOiBpIC0gMTtcclxuICAgICAgICAgICAgdmFyIG92ZXJsYXAgPSAwO1xyXG4gICAgICAgICAgICB2YXIgb3ZlcmxhcE4gPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLy8gR2V0IHRoZSBlZGdlLlxyXG4gICAgICAgICAgICBlZGdlLnNldChwb2x5Z29uLnZlcnRpY2VzW2ldKTtcclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBjZW50ZXIgb2YgdGhlIGNpcmNsZSByZWxhdGl2ZSB0byB0aGUgc3RhcnRpbmcgcG9pbnQgb2YgdGhlIGVkZ2UuXHJcbiAgICAgICAgICAgIHBvaW50LnNldChjaXJjbGVQb3MpO1xyXG4gICAgICAgICAgICBwb2ludC5zZXQocG9pbnQuc3ViKHBvaW50c1tpXSkpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGUgYW5kIHRoZSBwb2ludFxyXG4gICAgICAgICAgICAvLyBpcyBiaWdnZXIgdGhhbiB0aGUgcmFkaXVzLCB0aGUgcG9seWdvbiBpcyBkZWZpbml0ZWx5IG5vdCBmdWxseSBpblxyXG4gICAgICAgICAgICAvLyB0aGUgY2lyY2xlLlxyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcG9pbnQubGVuZ3RoMigpID4gcmFkaXVzMikge1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VbJ2FJbkInXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgd2hpY2ggVm9ybm9pIHJlZ2lvbiB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGUgaXMgaW4uXHJcbiAgICAgICAgICAgIHZhciByZWdpb24gPSBfdm9ybm9pUmVnaW9uKGVkZ2UsIHBvaW50KTtcclxuICAgICAgICAgICAgLy8gSWYgaXQncyB0aGUgbGVmdCByZWdpb246XHJcbiAgICAgICAgICAgIGlmIChyZWdpb24gPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIG1ha2Ugc3VyZSB3ZSdyZSBpbiB0aGUgUklHSFRfVk9STk9JX1JFR0lPTiBvZiB0aGUgcHJldmlvdXMgZWRnZS5cclxuICAgICAgICAgICAgICAgIGVkZ2Uuc2V0KHBvbHlnb24uZWRnZXNbcHJldl0pO1xyXG4gICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBjZW50ZXIgb2YgdGhlIGNpcmNsZSByZWxhdGl2ZSB0aGUgc3RhcnRpbmcgcG9pbnQgb2YgdGhlIHByZXZpb3VzIGVkZ2VcclxuICAgICAgICAgICAgICAgIHZhciBwb2ludDIgPSBuZXcgUmVuZGVySnMuVmVjdG9yKDAsIDApLnNldChjaXJjbGVQb3MpLnN1Yihwb2ludHNbcHJldl0pO1xyXG4gICAgICAgICAgICAgICAgcmVnaW9uID0gX3Zvcm5vaVJlZ2lvbihlZGdlLCBwb2ludDIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlZ2lvbiA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEl0J3MgaW4gdGhlIHJlZ2lvbiB3ZSB3YW50LiAgQ2hlY2sgaWYgdGhlIGNpcmNsZSBpbnRlcnNlY3RzIHRoZSBwb2ludC5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdCA9IHBvaW50Lmxlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXN0ID4gcmFkaXVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGludGVyc2VjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJdCBpbnRlcnNlY3RzLCBjYWxjdWxhdGUgdGhlIG92ZXJsYXAuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlWydiSW5BJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxhcE4gPSBwb2ludC5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxhcCA9IHJhZGl1cyAtIGRpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gSWYgaXQncyB0aGUgcmlnaHQgcmVnaW9uOlxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlZ2lvbiA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBtYWtlIHN1cmUgd2UncmUgaW4gdGhlIGxlZnQgcmVnaW9uIG9uIHRoZSBuZXh0IGVkZ2VcclxuICAgICAgICAgICAgICAgIGVkZ2Uuc2V0KHBvbHlnb24uZWRnZXNbbmV4dF0pO1xyXG4gICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBjZW50ZXIgb2YgdGhlIGNpcmNsZSByZWxhdGl2ZSB0byB0aGUgc3RhcnRpbmcgcG9pbnQgb2YgdGhlIG5leHQgZWRnZS5cclxuICAgICAgICAgICAgICAgIHBvaW50LnNldChjaXJjbGVQb3MpO1xyXG4gICAgICAgICAgICAgICAgcG9pbnQuc2V0KHBvaW50LnN1Yihwb2ludHNbbmV4dF0pKTtcclxuICAgICAgICAgICAgICAgIHJlZ2lvbiA9IF92b3Jub2lSZWdpb24oZWRnZSwgcG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlZ2lvbiA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJdCdzIGluIHRoZSByZWdpb24gd2Ugd2FudC4gIENoZWNrIGlmIHRoZSBjaXJjbGUgaW50ZXJzZWN0cyB0aGUgcG9pbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpc3QgPSBwb2ludC5sZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdCA+IHJhZGl1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBpbnRlcnNlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXQgaW50ZXJzZWN0cywgY2FsY3VsYXRlIHRoZSBvdmVybGFwLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZVsnYkluQSddID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXBOID0gcG9pbnQubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXAgPSByYWRpdXMgLSBkaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgaXQncyB0aGUgbWlkZGxlIHJlZ2lvbjpcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIE5lZWQgdG8gY2hlY2sgaWYgdGhlIGNpcmNsZSBpcyBpbnRlcnNlY3RpbmcgdGhlIGVkZ2UsXHJcbiAgICAgICAgICAgICAgICAvLyBDaGFuZ2UgdGhlIGVkZ2UgaW50byBpdHMgXCJlZGdlIG5vcm1hbFwiLlxyXG4gICAgICAgICAgICAgICAgdmFyIG5vcm1hbCA9IGVkZ2UucGVycCgpLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgcGVycGVuZGljdWxhciBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBjZW50ZXIgb2YgdGhlIFxyXG4gICAgICAgICAgICAgICAgLy8gY2lyY2xlIGFuZCB0aGUgZWRnZS5cclxuICAgICAgICAgICAgICAgIHZhciBkaXN0ID0gcG9pbnQuZG90KG5vcm1hbCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGlzdEFicyA9IE1hdGguYWJzKGRpc3QpO1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGNpcmNsZSBpcyBvbiB0aGUgb3V0c2lkZSBvZiB0aGUgZWRnZSwgdGhlcmUgaXMgbm8gaW50ZXJzZWN0aW9uLlxyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3QgPiAwICYmIGRpc3RBYnMgPiByYWRpdXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBObyBpbnRlcnNlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSXQgaW50ZXJzZWN0cywgY2FsY3VsYXRlIHRoZSBvdmVybGFwLlxyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXBOID0gbm9ybWFsO1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXAgPSByYWRpdXMgLSBkaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjZW50ZXIgb2YgdGhlIGNpcmNsZSBpcyBvbiB0aGUgb3V0c2lkZSBvZiB0aGUgZWRnZSwgb3IgcGFydCBvZiB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBjaXJjbGUgaXMgb24gdGhlIG91dHNpZGUsIHRoZSBjaXJjbGUgaXMgbm90IGZ1bGx5IGluc2lkZSB0aGUgcG9seWdvbi5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdCA+PSAwIHx8IG92ZXJsYXAgPCAyICogcmFkaXVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlWydiSW5BJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgdGhlIHNtYWxsZXN0IG92ZXJsYXAgd2UndmUgc2Vlbiwga2VlcCBpdC4gXHJcbiAgICAgICAgICAgIC8vIChvdmVybGFwTiBtYXkgYmUgbnVsbCBpZiB0aGUgY2lyY2xlIHdhcyBpbiB0aGUgd3JvbmcgVm9ybm9pIHJlZ2lvbikuXHJcbiAgICAgICAgICAgIGlmIChvdmVybGFwTiAmJiByZXNwb25zZSAmJiBNYXRoLmFicyhvdmVybGFwKSA8IE1hdGguYWJzKHJlc3BvbnNlWydvdmVybGFwJ10pKSB7XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZVsnb3ZlcmxhcCddID0gb3ZlcmxhcDtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlWydvdmVybGFwTiddID0gbmV3IFJlbmRlckpzLlZlY3RvcigwLCAwKS5zZXQob3ZlcmxhcE4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGZpbmFsIG92ZXJsYXAgdmVjdG9yIC0gYmFzZWQgb24gdGhlIHNtYWxsZXN0IG92ZXJsYXAuXHJcbiAgICAgICAgaWYgKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJlc3BvbnNlWydhJ10gPSBwb2x5Z29uO1xyXG4gICAgICAgICAgICByZXNwb25zZVsnYiddID0gY2lyY2xlO1xyXG4gICAgICAgICAgICByZXNwb25zZVsnb3ZlcmxhcFYnXSA9IG5ldyBSZW5kZXJKcy5WZWN0b3IoMCwgMCkuc2V0KHJlc3BvbnNlWydvdmVybGFwTiddKS5zY2FsZShyZXNwb25zZVsnb3ZlcmxhcCddKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgIC8vdmFyIHRlc3QxOy8vbnVtYmVycyBmb3IgdGVzdGluZyBtYXgvbWluc1xyXG4gICAgICAgIC8vdmFyIHRlc3QyO1xyXG4gICAgICAgIC8vdmFyIHRlc3Q7XHJcbiAgICAgICAgLy92YXIgbWluMTsvL3NhbWUgYXMgYWJvdmVcclxuICAgICAgICAvL3ZhciBtYXgxO1xyXG4gICAgICAgIC8vdmFyIG1pbjI7XHJcbiAgICAgICAgLy92YXIgbWF4MjtcclxuICAgICAgICAvL3ZhciBub3JtYWxBeGlzO1xyXG4gICAgICAgIC8vdmFyIG9mZnNldDtcclxuICAgICAgICAvL3ZhciB2ZWN0b3JPZmZzZXQ7XHJcbiAgICAgICAgLy92YXIgdmVjdG9ycztcclxuICAgICAgICAvL3ZhciBwMjtcclxuICAgICAgICAvL3ZhciBkaXN0YW5jZTtcclxuICAgICAgICAvL3ZhciB0ZXN0RGlzdGFuY2UgPSBOdW1iZXIuTUFYX1ZBTFVFO1xyXG4gICAgICAgIC8vdmFyIGNsb3Nlc3RWZWN0b3IgPSBuZXcgUmVuZGVySnMuVmVjdG9yKDAsIDApOy8vdGhlIHZlY3RvciB0byB1c2UgdG8gZmluZCB0aGUgbm9ybWFsXHJcbiAgICAgICAgLy8vLyBmaW5kIG9mZnNldFxyXG4gICAgICAgIC8vdmVjdG9yT2Zmc2V0ID0gbmV3IFJlbmRlckpzLlZlY3Rvcihwb2x5Z29uLnBvcy54IC0gY2lyY2xlLnBvcy54LCBwb2x5Z29uLnBvcy55IC0gY2lyY2xlLnBvcy55KTtcclxuICAgICAgICAvL3ZlY3RvcnMgPSBwb2x5Z29uLnZlcnRpY2VzLnNsaWNlKCk7Ly9hZ2FpbiwgdGhpcyBpcyBqdXN0IGEgZnVuY3Rpb24gaW4gbXkgcG9seWdvbiBjbGFzcyB0aGF0IHJldHVybnMgdGhlIHZlcnRpY2VzIG9mIHRoZSBwb2xnb25cclxuICAgICAgICAvLy8vYWRkcyBzb21lIHBhZGRpbmcgdG8gbWFrZSBpdCBtb3JlIGFjY3VyYXRlXHJcbiAgICAgICAgLy9pZiAodmVjdG9ycy5sZW5ndGggPT0gMikge1xyXG4gICAgICAgIC8vICAgIHZhciB0ZW1wID0gbmV3IFJlbmRlckpzLlZlY3RvcigtKHZlY3RvcnNbMV0ueSAtIHZlY3RvcnNbMF0ueSksIHZlY3RvcnNbMV0ueCAtIHZlY3RvcnNbMF0ueCk7XHJcbiAgICAgICAgLy8gICAgdGVtcC50cnVuY2F0ZSgwLjAwMDAwMDAwMDEpO1xyXG4gICAgICAgIC8vICAgIHZlY3RvcnMucHVzaCh2ZWN0b3JzWzFdLmFkZCh0ZW1wKSk7XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgLy8vLyBmaW5kIHRoZSBjbG9zZXN0IHZlcnRleCB0byB1c2UgdG8gZmluZCBub3JtYWxcclxuICAgICAgICAvL2ZvciAodmFyIGkgPSAwOyBpIDwgdmVjdG9ycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vICAgIGRpc3RhbmNlID0gKGNpcmNsZS5wb3MueCAtIChwb2x5Z29uLnBvcy54ICsgdmVjdG9yc1tpXS54KSkgKiAoY2lyY2xlLnBvcy54IC0gKHBvbHlnb24ucG9zLnggKyB2ZWN0b3JzW2ldLngpKSArIChjaXJjbGUucG9zLnkgLSAocG9seWdvbi5wb3MueSArIHZlY3RvcnNbaV0ueSkpICogKGNpcmNsZS5wb3MueSAtIChwb2x5Z29uLnBvcy55ICsgdmVjdG9yc1tpXS55KSk7XHJcbiAgICAgICAgLy8gICAgaWYgKGRpc3RhbmNlIDwgdGVzdERpc3RhbmNlKSB7Ly9jbG9zZXN0IGhhcyB0aGUgbG93ZXN0IGRpc3RhbmNlXHJcbiAgICAgICAgLy8gICAgICAgIHRlc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xyXG4gICAgICAgIC8vICAgICAgICBjbG9zZXN0VmVjdG9yLnggPSBwb2x5Z29uLnBvcy54ICsgdmVjdG9yc1tpXS54O1xyXG4gICAgICAgIC8vICAgICAgICBjbG9zZXN0VmVjdG9yLnkgPSBwb2x5Z29uLnBvcy55ICsgdmVjdG9yc1tpXS55O1xyXG4gICAgICAgIC8vICAgIH1cclxuICAgICAgICAvL31cclxuICAgICAgICAvLy8vZ2V0IHRoZSBub3JtYWwgdmVjdG9yXHJcbiAgICAgICAgLy9ub3JtYWxBeGlzID0gbmV3IFJlbmRlckpzLlZlY3RvcihjbG9zZXN0VmVjdG9yLnggLSBjaXJjbGUucG9zLngsIGNsb3Nlc3RWZWN0b3IueSAtIGNpcmNsZS5wb3MueSk7XHJcbiAgICAgICAgLy9ub3JtYWxBeGlzLnNldChub3JtYWxBeGlzLm5vcm1hbGl6ZSgpKTsvL25vcm1hbGl6ZSBpcyhzZXQgaXRzIGxlbmd0aCB0byAxKVxyXG4gICAgICAgIC8vLy8gcHJvamVjdCB0aGUgcG9seWdvbidzIHBvaW50c1xyXG4gICAgICAgIC8vbWluMSA9IG5vcm1hbEF4aXMuZG90KHZlY3RvcnNbMF0pO1xyXG4gICAgICAgIC8vbWF4MSA9IG1pbjE7Ly9zZXQgbWF4IGFuZCBtaW5cclxuICAgICAgICAvL2ZvciAoaiA9IDE7IGogPCB2ZWN0b3JzLmxlbmd0aDsgaisrKSB7Ly9wcm9qZWN0IGFsbCBpdHMgcG9pbnRzLCBzdGFydGluZyB3aXRoIHRoZSBmaXJzdCh0aGUgMHRoIHdhcyBkb25lIHVwIHRoZXJlXilcclxuICAgICAgICAvLyAgICB0ZXN0ID0gbm9ybWFsQXhpcy5kb3QodmVjdG9yc1tqXSk7Ly9kb3RQcm9kdWN0IHRvIHByb2plY3RcclxuICAgICAgICAvLyAgICBpZiAodGVzdCA8IG1pbjEpIG1pbjEgPSB0ZXN0Oy8vc21hbGxlc3QgbWluIGlzIHdhbnRlZFxyXG4gICAgICAgIC8vICAgIGlmICh0ZXN0ID4gbWF4MSkgbWF4MSA9IHRlc3Q7Ly9sYXJnZXN0IG1heCBpcyB3YW50ZWRcclxuICAgICAgICAvL31cclxuICAgICAgICAvLy8vIHByb2plY3QgdGhlIGNpcmNsZVxyXG4gICAgICAgIC8vbWF4MiA9IGNpcmNsZS5yYWRpdXM7Ly9tYXggaXMgcmFkaXVzXHJcbiAgICAgICAgLy9taW4yIC09IGNpcmNsZS5yYWRpdXM7Ly9taW4gaXMgbmVnYXRpdmUgcmFkaXVzXHJcbiAgICAgICAgLy8vLyBvZmZzZXQgdGhlIHBvbHlnb24ncyBtYXgvbWluXHJcbiAgICAgICAgLy9vZmZzZXQgPSBub3JtYWxBeGlzLmRvdCh2ZWN0b3JPZmZzZXQpO1xyXG4gICAgICAgIC8vbWluMSArPSBvZmZzZXQ7XHJcbiAgICAgICAgLy9tYXgxICs9IG9mZnNldDtcclxuICAgICAgICAvLy8vIGRvIHRoZSBiaWcgdGVzdFxyXG4gICAgICAgIC8vdGVzdDEgPSBtaW4xIC0gbWF4MjtcclxuICAgICAgICAvL3Rlc3QyID0gbWluMiAtIG1heDE7XHJcbiAgICAgICAgLy9pZiAodGVzdDEgPiAwIHx8IHRlc3QyID4gMCkgey8vaWYgZWl0aGVyIHRlc3QgaXMgZ3JlYXRlciB0aGFuIDAsIHRoZXJlIGlzIGEgZ2FwLCB3ZSBjYW4gZ2l2ZSB1cCBub3cuXHJcbiAgICAgICAgLy8gICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgLy8vLyBmaW5kIHRoZSBub3JtYWwgYXhpcyBmb3IgZWFjaCBwb2ludCBhbmQgcHJvamVjdFxyXG4gICAgICAgIC8vZm9yIChpID0gMDsgaSA8IHZlY3RvcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyAgICBub3JtYWxBeGlzID0gX2ZpbmROb3JtYWxBeGlzKHZlY3RvcnMsIGkpO1xyXG4gICAgICAgIC8vICAgIC8vIHByb2plY3QgdGhlIHBvbHlnb24oYWdhaW4/IHllcywgY2lyY2xlcyB2cy4gcG9seWdvbiByZXF1aXJlIG1vcmUgdGVzdGluZy4uLilcclxuICAgICAgICAvLyAgICBtaW4xID0gbm9ybWFsQXhpcy5kb3QodmVjdG9yc1swXSk7Ly9wcm9qZWN0XHJcbiAgICAgICAgLy8gICAgbWF4MSA9IG1pbjE7Ly9zZXQgbWF4IGFuZCBtaW5cclxuICAgICAgICAvLyAgICAvL3Byb2plY3QgYWxsIHRoZSBvdGhlciBwb2ludHMoc2VlLCBjaXJsY2VzIHYuIHBvbHlnb25zIHVzZSBsb3RzIG9mIHRoaXMuLi4pXHJcbiAgICAgICAgLy8gICAgZm9yIChqID0gMTsgaiA8IHZlY3RvcnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAvLyAgICAgICAgdGVzdCA9IG5vcm1hbEF4aXMuZG90KHZlY3RvcnNbal0pOy8vbW9yZSBwcm9qZWN0aW9uXHJcbiAgICAgICAgLy8gICAgICAgIGlmICh0ZXN0IDwgbWluMSkgbWluMSA9IHRlc3Q7Ly9zbWFsbGVzdCBtaW5cclxuICAgICAgICAvLyAgICAgICAgaWYgKHRlc3QgPiBtYXgxKSBtYXgxID0gdGVzdDsvL2xhcmdlc3QgbWF4XHJcbiAgICAgICAgLy8gICAgfVxyXG4gICAgICAgIC8vICAgIC8vIHByb2plY3QgdGhlIGNpcmNsZShhZ2FpbilcclxuICAgICAgICAvLyAgICBtYXgyID0gY2lyY2xlLnJhZGl1czsvL21heCBpcyByYWRpdXNcclxuICAgICAgICAvLyAgICBtaW4yIC09IGNpcmNsZS5yYWRpdXM7Ly9taW4gaXMgbmVnYXRpdmUgcmFkaXVzXHJcbiAgICAgICAgLy8gICAgLy9vZmZzZXQgcG9pbnRzXHJcbiAgICAgICAgLy8gICAgb2Zmc2V0ID0gbm9ybWFsQXhpcy5kb3QodmVjdG9yT2Zmc2V0KTtcclxuICAgICAgICAvLyAgICBtaW4xICs9IG9mZnNldDtcclxuICAgICAgICAvLyAgICBtYXgxICs9IG9mZnNldDtcclxuICAgICAgICAvLyAgICAvLyBkbyB0aGUgdGVzdCwgYWdhaW5cclxuICAgICAgICAvLyAgICB0ZXN0MSA9IG1pbjEgLSBtYXgyO1xyXG4gICAgICAgIC8vICAgIHRlc3QyID0gbWluMiAtIG1heDE7XHJcbiAgICAgICAgLy8gICAgaWYgKHRlc3QxID4gMCB8fCB0ZXN0MiA+IDApIHtcclxuICAgICAgICAvLyAgICAgICAgLy9mYWlsZWQuLiBxdWl0IG5vd1xyXG4gICAgICAgIC8vICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgICAgIC8vICAgIH1cclxuICAgICAgICAvL31cclxuICAgICAgICAvL3JldHVybiBuZXcgUmVuZGVySnMuVmVjdG9yKG5vcm1hbEF4aXMueCAqIChtYXgyIC0gbWluMSkgKiAtMSwgbm9ybWFsQXhpcy55ICogKG1heDIgLSBtaW4xKSAqIC0xKTsvL3JldHVybiB0aGUgc2VwYXJhdGlvbiBkaXN0YW5jZVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBfcG9pbnRJblJlY3RhbmdsZSA9IGZ1bmN0aW9uIChwLCByKSB7XHJcbiAgICAgICAgcmV0dXJuIChwLnggPj0gci54ICYmXHJcbiAgICAgICAgcC54IDw9IHIueCArIHIud2lkdGggJiZcclxuICAgICAgICBwLnkgPj0gci55ICYmXHJcbiAgICAgICAgcC55IDw9IHIueSArIHIuaGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuQWFiYkNvbGxpc2lvbiA9IGZ1bmN0aW9uIChyZWN0QSwgcmVjdEIpIHtcclxuICAgICAgICBpZiAoTWF0aC5hYnMocmVjdEEueCAtIHJlY3RCLngpIDwgcmVjdEEud2lkdGggKyByZWN0Qi53aWR0aCkge1xyXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMocmVjdEEueSAtIHJlY3RCLnkpIDwgcmVjdEEuaGVpZ2h0ICsgcmVjdEIuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIG1vZHVsZS5wb2ludEluT2JqZWN0ID0gZnVuY3Rpb24gKHAsIG9iaikge1xyXG4gICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLlJlY3RhbmdsZSlcclxuICAgICAgICAgICAgcmV0dXJuIF9wb2ludEluUmVjdGFuZ2xlKHAsIG9iaik7XHJcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuQXJjKVxyXG4gICAgICAgICAgICByZXR1cm4gX3BvaW50SW5DaXJjbGUocCwgb2JqKTtcclxuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5Qb2x5Z29uKVxyXG4gICAgICAgICAgICByZXR1cm4gX3BvaW50SW5Qb2x5Z29uKHAsIG9iaik7XHJcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuTGluZSlcclxuICAgICAgICAgICAgcmV0dXJuIF9wb2ludEluTGluZShwLCBvYmopO1xyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNoZWNrQ29sbGlzaW9uID0gZnVuY3Rpb24gKG9iajEsIG9iajIsIHZlbG9jaXR5KSB7XHJcbiAgICAgICAgaWYgKG9iajEgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLlJlY3RhbmdsZSAmJiBvYmoyIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5SZWN0YW5nbGUpXHJcbiAgICAgICAgICAgIHJldHVybiBfcmVjdFZzUmVjdChvYmoxLCBvYmoyKTtcclxuXHJcbiAgICAgICAgaWYgKG9iajEgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLlJlY3RhbmdsZSAmJiBvYmoyIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5BcmMpXHJcbiAgICAgICAgICAgIHJldHVybiBfcmVjdFZzQ2lyY2xlKG9iajEsIG9iajIpO1xyXG4gICAgICAgIGlmIChvYmoxIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5BcmMgJiYgb2JqMiBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuUmVjdGFuZ2xlKVxyXG4gICAgICAgICAgICByZXR1cm4gX3JlY3RWc0NpcmNsZShvYmoyLCBvYmoxKTtcclxuXHJcbiAgICAgICAgaWYgKG9iajEgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLkFyYyAmJiBvYmoyIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5BcmMpXHJcbiAgICAgICAgICAgIHJldHVybiBfY2lyY2xlVnNDaXJjbGUob2JqMSwgb2JqMiwgdmVsb2NpdHkpO1xyXG5cclxuICAgICAgICBpZiAob2JqMSBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuTGluZSAmJiBvYmoyIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5BcmMpXHJcbiAgICAgICAgICAgIHJldHVybiBfbGluZVZzQ2lyY2xlKG9iajEsIG9iajIpO1xyXG4gICAgICAgIGlmIChvYmoxIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5BcmMgJiYgb2JqMiBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuTGluZSlcclxuICAgICAgICAgICAgcmV0dXJuIF9saW5lVnNDaXJjbGUob2JqMiwgb2JqMSk7XHJcblxyXG4gICAgICAgIGlmIChvYmoxIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5Qb2x5Z29uICYmIG9iajIgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLlBvbHlnb24pIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmoxLnN1YlBvbHlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iajIuc3ViUG9seXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBtb2R1bGUucG9seWdvbkNvbGxpc2lvbihvYmoxLnN1YlBvbHlzW2ldLCBvYmoyLnN1YlBvbHlzW2pdLCB2ZWxvY2l0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmludGVyc2VjdCB8fCByZXNwb25zZS53aWxsSW50ZXJzZWN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7Ly9SZW5kZXJKcy5WZWN0b3IuY2xvbmUoMCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYmoxIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5BcmMgJiYgb2JqMiBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuUG9seWdvbilcclxuICAgICAgICAgICAgcmV0dXJuIF9jaXJjbGVWc1BvbHlnb24ob2JqMSwgb2JqMiwgdmVsb2NpdHkpO1xyXG4gICAgICAgIGlmIChvYmoxIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5Qb2x5Z29uICYmIG9iajIgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLkFyYylcclxuICAgICAgICAgICAgcmV0dXJuIF9jaXJjbGVWc1BvbHlnb24ob2JqMiwgb2JqMSwgdmVsb2NpdHkpO1xyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG1vZHVsZTtcclxuXHJcbn0oUmVuZGVySnMuUGh5c2ljcy5Db2xsaXNpb25zIHx8IHt9KSk7IiwidmFyIFJlbmRlckpzID0gUmVuZGVySnMgfHwge307XHJcblJlbmRlckpzLlBoeXNpY3MuQ29sbGlzaW9ucyA9IChmdW5jdGlvbiAobW9kdWxlKSB7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgcG9seWdvbiBBIGlzIGdvaW5nIHRvIGNvbGxpZGUgd2l0aCBwb2x5Z29uIEIgZm9yIHRoZSBnaXZlbiB2ZWxvY2l0eVxyXG4gICAgbW9kdWxlLnBvbHlnb25Db2xsaXNpb24gPSBmdW5jdGlvbiAocG9seWdvbkEsIHBvbHlnb25CLCB2ZWxvY2l0eSkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgIGludGVyc2VjdDogdHJ1ZSxcclxuICAgICAgICAgICAgd2lsbEludGVyc2VjdDogdHJ1ZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGVkZ2VDb3VudEEgPSBwb2x5Z29uQS5lZGdlcy5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGVkZ2VDb3VudEIgPSBwb2x5Z29uQi5lZGdlcy5sZW5ndGg7XHJcbiAgICAgICAgdmFyIG1pbkludGVydmFsRGlzdGFuY2UgPSBJbmZpbml0eTtcclxuICAgICAgICB2YXIgdHJhbnNsYXRpb25BeGlzID0gbmV3IFJlbmRlckpzLlZlY3RvcigpO1xyXG4gICAgICAgIHZhciBlZGdlO1xyXG5cclxuICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBlZGdlcyBvZiBib3RoIHBvbHlnb25zXHJcbiAgICAgICAgZm9yICh2YXIgZWRnZUluZGV4ID0gMCwgbCA9IGVkZ2VDb3VudEEgKyBlZGdlQ291bnRCOyBlZGdlSW5kZXggPCBsOyBlZGdlSW5kZXgrKykge1xyXG4gICAgICAgICAgICBpZiAoZWRnZUluZGV4IDwgZWRnZUNvdW50QSkge1xyXG4gICAgICAgICAgICAgICAgZWRnZSA9IHBvbHlnb25BLmVkZ2VzW2VkZ2VJbmRleF07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlZGdlID0gcG9seWdvbkIuZWRnZXNbZWRnZUluZGV4IC0gZWRnZUNvdW50QV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vID09PT09IDEuIEZpbmQgaWYgdGhlIHBvbHlnb25zIGFyZSBjdXJyZW50bHkgaW50ZXJzZWN0aW5nID09PT09XHJcblxyXG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBheGlzIHBlcnBlbmRpY3VsYXIgdG8gdGhlIGN1cnJlbnQgZWRnZVxyXG4gICAgICAgICAgICB2YXIgYXhpcyA9IG5ldyBSZW5kZXJKcy5WZWN0b3IoLWVkZ2UueSwgZWRnZS54KTtcclxuICAgICAgICAgICAgYXhpcy5zZXQoYXhpcy5ub3JtYWxpemUoKSk7XHJcblxyXG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBwcm9qZWN0aW9uIG9mIHRoZSBwb2x5Z29uIG9uIHRoZSBjdXJyZW50IGF4aXNcclxuICAgICAgICAgICAgdmFyIG1pbkEgPSAwLCBtaW5CID0gMCwgbWF4QSA9IDAsIG1heEIgPSAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb2plY3RlZEEgPSBfcHJvamVjdFBvbHlnb24oYXhpcywgcG9seWdvbkEsIG1pbkEsIG1heEEpO1xyXG4gICAgICAgICAgICBtaW5BID0gcHJvamVjdGVkQS5taW47XHJcbiAgICAgICAgICAgIG1heEEgPSBwcm9qZWN0ZWRBLm1heDtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9qZWN0ZWRCID0gX3Byb2plY3RQb2x5Z29uKGF4aXMsIHBvbHlnb25CLCBtaW5CLCBtYXhCKTtcclxuICAgICAgICAgICAgbWluQiA9IHByb2plY3RlZEIubWluO1xyXG4gICAgICAgICAgICBtYXhCID0gcHJvamVjdGVkQi5tYXg7XHJcblxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcG9seWdvbiBwcm9qZWN0aW9ucyBhcmUgY3VycmVudGx0eSBpbnRlcnNlY3RpbmdcclxuICAgICAgICAgICAgaWYgKF9pbnRlcnZhbERpc3RhbmNlKG1pbkEsIG1heEEsIG1pbkIsIG1heEIpID4gMCkgcmVzdWx0LmludGVyc2VjdCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy8gPT09PT0gMi4gTm93IGZpbmQgaWYgdGhlIHBvbHlnb25zICp3aWxsKiBpbnRlcnNlY3QgPT09PT1cclxuXHJcbiAgICAgICAgICAgIC8vIFByb2plY3QgdGhlIHZlbG9jaXR5IG9uIHRoZSBjdXJyZW50IGF4aXNcclxuICAgICAgICAgICAgdmFyIHZlbG9jaXR5UHJvamVjdGlvbiA9IGF4aXMuZG90KHZlbG9jaXR5KTtcclxuXHJcbiAgICAgICAgICAgIC8vIEdldCB0aGUgcHJvamVjdGlvbiBvZiBwb2x5Z29uIEEgZHVyaW5nIHRoZSBtb3ZlbWVudFxyXG4gICAgICAgICAgICBpZiAodmVsb2NpdHlQcm9qZWN0aW9uIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgbWluQSArPSB2ZWxvY2l0eVByb2plY3Rpb247XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtYXhBICs9IHZlbG9jaXR5UHJvamVjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRG8gdGhlIHNhbWUgdGVzdCBhcyBhYm92ZSBmb3IgdGhlIG5ldyBwcm9qZWN0aW9uXHJcbiAgICAgICAgICAgIHZhciBpbnRlcnZhbERpc3RhbmNlID0gX2ludGVydmFsRGlzdGFuY2UobWluQSwgbWF4QSwgbWluQiwgbWF4Qik7XHJcbiAgICAgICAgICAgIGlmIChpbnRlcnZhbERpc3RhbmNlID4gMCkgcmVzdWx0LndpbGxJbnRlcnNlY3QgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBwb2x5Z29ucyBhcmUgbm90IGludGVyc2VjdGluZyBhbmQgd29uJ3QgaW50ZXJzZWN0LCBleGl0IHRoZSBsb29wXHJcbiAgICAgICAgICAgIGlmICghcmVzdWx0LmludGVyc2VjdCAmJiAhcmVzdWx0LndpbGxJbnRlcnNlY3QpIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgaW50ZXJ2YWwgZGlzdGFuY2UgaXMgdGhlIG1pbmltdW0gb25lLiBJZiBzbyBzdG9yZVxyXG4gICAgICAgICAgICAvLyB0aGUgaW50ZXJ2YWwgZGlzdGFuY2UgYW5kIHRoZSBjdXJyZW50IGRpc3RhbmNlLlxyXG4gICAgICAgICAgICAvLyBUaGlzIHdpbGwgYmUgdXNlZCB0byBjYWxjdWxhdGUgdGhlIG1pbmltdW0gdHJhbnNsYXRpb24gdmVjdG9yXHJcbiAgICAgICAgICAgIGludGVydmFsRGlzdGFuY2UgPSBNYXRoLmFicyhpbnRlcnZhbERpc3RhbmNlKTtcclxuICAgICAgICAgICAgaWYgKGludGVydmFsRGlzdGFuY2UgPCBtaW5JbnRlcnZhbERpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBtaW5JbnRlcnZhbERpc3RhbmNlID0gaW50ZXJ2YWxEaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9uQXhpcyA9IGF4aXM7XHJcblxyXG4gICAgICAgICAgICAgICAgZCA9IHBvbHlnb25BLmdldENlbnRlcigpLnN1Yihwb2x5Z29uQi5nZXRDZW50ZXIoKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZC5kb3QodHJhbnNsYXRpb25BeGlzKSA8IDApIHRyYW5zbGF0aW9uQXhpcyA9IHRyYW5zbGF0aW9uQXhpcy5zY2FsZSgtMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRoZSBtaW5pbXVtIHRyYW5zbGF0aW9uIHZlY3RvciBjYW4gYmUgdXNlZCB0byBwdXNoIHRoZSBwb2x5Z29ucyBhcHBhcnQuXHJcbiAgICAgICAgLy8gRmlyc3QgbW92ZXMgdGhlIHBvbHlnb25zIGJ5IHRoZWlyIHZlbG9jaXR5XHJcbiAgICAgICAgLy8gdGhlbiBtb3ZlIHBvbHlnb25BIGJ5IE1pbmltdW1UcmFuc2xhdGlvblZlY3Rvci5cclxuICAgICAgICBpZiAocmVzdWx0LndpbGxJbnRlcnNlY3QpIHJlc3VsdC5taW5pbXVtVHJhbnNsYXRpb25WZWN0b3IgPSB0cmFuc2xhdGlvbkF4aXMuc2NhbGUobWluSW50ZXJ2YWxEaXN0YW5jZSk7XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIFttaW5BLCBtYXhBXSBhbmQgW21pbkIsIG1heEJdXHJcbiAgICAvLyBUaGUgZGlzdGFuY2Ugd2lsbCBiZSBuZWdhdGl2ZSBpZiB0aGUgaW50ZXJ2YWxzIG92ZXJsYXBcclxuICAgIHZhciBfaW50ZXJ2YWxEaXN0YW5jZSA9IGZ1bmN0aW9uIChtaW5BLCBtYXhBLCBtaW5CLCBtYXhCKSB7XHJcbiAgICAgICAgaWYgKG1pbkEgPCBtaW5CKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtaW5CIC0gbWF4QTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbWluQSAtIG1heEI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENhbGN1bGF0ZSB0aGUgcHJvamVjdGlvbiBvZiBhIHBvbHlnb24gb24gYW4gYXhpcyBhbmQgcmV0dXJucyBpdCBhcyBhIFttaW4sIG1heF0gaW50ZXJ2YWxcclxuICAgIHZhciBfcHJvamVjdFBvbHlnb24gPSBmdW5jdGlvbiAoYXhpcywgcG9seWdvbiwgbWluLCBtYXgpIHtcclxuICAgICAgICAvLyBUbyBwcm9qZWN0IGEgcG9pbnQgb24gYW4gYXhpcyB1c2UgdGhlIGRvdCBwcm9kdWN0XHJcbiAgICAgICAgdmFyIGQgPSBheGlzLmRvdChwb2x5Z29uLnZlcnRpY2VzWzBdKTtcclxuICAgICAgICBtaW4gPSBkO1xyXG4gICAgICAgIG1heCA9IGQ7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2x5Z29uLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGQgPSBwb2x5Z29uLnZlcnRpY2VzW2ldLmRvdChheGlzKTtcclxuICAgICAgICAgICAgaWYgKGQgPCBtaW4pIHtcclxuICAgICAgICAgICAgICAgIG1pbiA9IGQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZCA+IG1heCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbWluOiBtaW4sXHJcbiAgICAgICAgICAgIG1heDogbWF4XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbW9kdWxlO1xyXG5cclxufShSZW5kZXJKcy5QaHlzaWNzLkNvbGxpc2lvbnMgfHwge30pKTsiLCJyZWdpc3Rlck5hbWVzcGFjZShcIlJlbmRlckpzLkNhbnZhcy5TaGFwZXNcIik7XHJcblxyXG4vKlxyXG4gKlJlcHJlc2VudHMgYSBjaXJjbGUgc2hhcGUsIGluaGVyaXRzIGZyb20gc2hhcGVcclxuICovXHJcblJlbmRlckpzLkNhbnZhcy5TaGFwZXMuQXJjID0gaW5qZWN0KFwiVXRpbHNcIilcclxuICAgIC5iYXNlKFJlbmRlckpzLkNhbnZhcy5PYmplY3QpXHJcbiAgICAuY2xhc3MoZnVuY3Rpb24gKHV0aWxzLCBvcHRpb25zKSB7XHJcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICAgICAgdGhpcy5iYXNlKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBvcHRpb25zLndpZHRoID0gb3B0aW9ucy5oZWlnaHQgPSBvcHRpb25zLnJhZGl1cyAqIDIsIG9wdGlvbnMucmFkaXVzICogMjtcclxuXHJcbiAgICAgICAgdGhpcy5yYWRpdXMgPSBvcHRpb25zLnJhZGl1cztcclxuICAgICAgICB0aGlzLnNBbmdsZSA9IHV0aWxzLmNvbnZlcnRUb1JhZChvcHRpb25zLnNBbmdsZSB8fCAwKTtcclxuICAgICAgICB0aGlzLmVBbmdsZSA9IHV0aWxzLmNvbnZlcnRUb1JhZChvcHRpb25zLmVBbmdsZSB8fCAzNjApO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBvcHRpb25zLmNvbG9yO1xyXG4gICAgICAgIHRoaXMuZmlsbENvbG9yID0gb3B0aW9ucy5maWxsQ29sb3I7XHJcbiAgICAgICAgdGhpcy5saW5lV2lkdGggPSBvcHRpb25zLmxpbmVXaWR0aCB8fCAxO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqT3ZlcnJpZGVzIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiwgYmVjYXVzZSB0aGUgY2lyY2xlIGNlbnRlciBwb2ludCBpcyBub3QgdGhlIHRvcCxsZWZ0IGNvcm5lclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZ2V0Q2VudGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlbmRlckpzLlZlY3Rvcih0aGlzLnBvcy54ICsgdGhpcy53aWR0aCAvIDIsIHRoaXMucG9zLnkgKyB0aGlzLmhlaWdodCAvIDIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICpPdmVycmlkZXMgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wb2ludEludGVyc2VjdCA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy5nZXRDZW50ZXIoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdyhwLnggLSBjLngsIDIpICsgTWF0aC5wb3cocC55IC0gYy55LCAyKSA8PSBNYXRoLnBvdygodGhpcy53aWR0aCAvIDIpLCAyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqRnVuY3Rpb24gaXMgY2FsbGVkIGluIGV2ZXJ5IGZyYW1lIHRvIHJlZHJhdyBpdHNlbGZcclxuICAgICAgICAgKi1jdHggaXMgdGhlIGRyYXdpbmcgY29udGV4dCBmcm9tIGEgY2FudmFzXHJcbiAgICAgICAgICotZnBzIGlzIHRoZSBmcmFtZSBwZXIgc2Vjb25kXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5kcmF3ID0gZnVuY3Rpb24gKGN0eCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hbmdsZSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucm90YXRlU2hhcGUoY3R4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSB0aGlzLmxpbmVXaWR0aDtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5jb2xvcjtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMuZmlsbENvbG9yO1xyXG4gICAgICAgICAgICBjdHguYXJjKHRoaXMucG9zLnggKyB0aGlzLndpZHRoIC8gMiwgdGhpcy5wb3MueSArIHRoaXMuaGVpZ2h0IC8gMiwgdGhpcy53aWR0aCAvIDIsIHRoaXMuc0FuZ2xlLCB0aGlzLmVBbmdsZSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZmlsbENvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFuZ2xlICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pOyIsInJlZ2lzdGVyTmFtZXNwYWNlKFwiUmVuZGVySnMuQ2FudmFzLlNoYXBlc1wiKTtcclxuXHJcbi8qXHJcbiAqUmVwcmVzZW50cyBhbiBpbWFnZSwgaW5oZXJpdHMgZnJvbSBvYmplY3RcclxuICovXHJcblJlbmRlckpzLkNhbnZhcy5TaGFwZXMuSW1hZ2UgPSBpbmplY3QoXCJVdGlsc1wiKVxyXG4gICAgLmJhc2UoUmVuZGVySnMuQ2FudmFzLk9iamVjdClcclxuICAgIC5jbGFzcyhmdW5jdGlvbiAodXRpbHMsIG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgdGhpcy5iYXNlKG9wdGlvbnMpO1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogTG9jYWxzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIF9pbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgX2ltYWdlLnNyYyA9IG9wdGlvbnMudXJsO1xyXG4gICAgICAgIF9pbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYud2lkdGggPSBfaW1hZ2Uud2lkdGg7XHJcbiAgICAgICAgICAgIHNlbGYuaGVpZ2h0ID0gX2ltYWdlLmhlaWdodDtcclxuICAgICAgICAgICAgX2xvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgX2xvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBfYmx1clJhZGl1cyA9IG9wdGlvbnMuYmx1clJhZGl1cyB8fCAwO1xyXG4gICAgICAgIHZhciBfY2FjaGUgPSBvcHRpb25zLmNhY2hlID09IHVuZGVmaW5lZCA/IHRydWUgOiBvcHRpb25zLmNhY2hlO1xyXG4gICAgICAgIHZhciBfZmlsdGVyQ2FjaGUgPSBudWxsO1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKkZ1bmN0aW9uIGlzIGNhbGxlZCBpbiBldmVyeSBmcmFtZSB0byByZWRyYXcgaXRzZWxmXHJcbiAgICAgICAgICotY3R4IGlzIHRoZSBkcmF3aW5nIGNvbnRleHQgZnJvbSBhIGNhbnZhc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uIChjdHgpIHtcclxuICAgICAgICAgICAgaWYgKCFfbG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghX2ZpbHRlckNhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZmlsdGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5maWx0ZXJzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUmVuZGVySnMuQ2FudmFzLkZpbHRlcnMuQmx1cjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9maWx0ZXJDYWNoZSA9IFJlbmRlckpzLkNhbnZhcy5GaWx0ZXJzLkJsdXIoX2ltYWdlLCBfYmx1clJhZGl1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKF9maWx0ZXJDYWNoZSkge1xyXG4gICAgICAgICAgICAgICAgY3R4LnB1dEltYWdlRGF0YShfZmlsdGVyQ2FjaGUsIHRoaXMucG9zLngsIHRoaXMucG9zLnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShfaW1hZ2UsIHRoaXMucG9zLngsIHRoaXMucG9zLnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghX2NhY2hlKVxyXG4gICAgICAgICAgICAgICAgX2ZpbHRlckNhY2hlID0gbnVsbDtcclxuICAgICAgICB9O1xyXG4gICAgfSk7IiwicmVnaXN0ZXJOYW1lc3BhY2UoXCJSZW5kZXJKcy5DYW52YXMuU2hhcGVzXCIpO1xyXG5cclxuLypcclxuICpSZXByZXNlbnRzIGEgbGluZSBzaGFwZSwgaW5oZXJpdHMgZnJvbSBzaGFwZVxyXG4gKi9cclxuUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5MaW5lID0gaW5qZWN0KClcclxuICAgIC5iYXNlKFJlbmRlckpzLkNhbnZhcy5PYmplY3QpXHJcbiAgICAuY2xhc3MoZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgdGhpcy5iYXNlKHtcclxuICAgICAgICAgICAgeDogb3B0aW9ucy54MSxcclxuICAgICAgICAgICAgeTogb3B0aW9ucy55MSxcclxuICAgICAgICAgICAgd2lkdGg6IE1hdGguYWJzKG9wdGlvbnMueDIgLSBvcHRpb25zLngxKSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLmFicyhvcHRpb25zLnkyIC0gb3B0aW9ucy55MSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jb2xvciA9IFwiIzAwMFwiO1xyXG4gICAgICAgIHRoaXMubGluZVdpZHRoID0gMTtcclxuICAgICAgICB0aGlzLnBvczIgPSBuZXcgUmVuZGVySnMuVmVjdG9yKG9wdGlvbnMueDIsIG9wdGlvbnMueTIpO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBvcHRpb25zLmNvbG9yO1xyXG4gICAgICAgIHRoaXMubGluZVdpZHRoID0gb3B0aW9ucy5saW5lV2lkdGggfHwgMTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKkZ1bmN0aW9uIGlzIGNhbGxlZCBpbiBldmVyeSBmcmFtZSB0byByZWRyYXcgaXRzZWxmXHJcbiAgICAgICAgICotY3R4IGlzIHRoZSBkcmF3aW5nIGNvbnRleHQgZnJvbSBhIGNhbnZhc1xyXG4gICAgICAgICAqLWZwcyBpcyB0aGUgZnJhbWUgcGVyIHNlY29uZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uIChjdHgsIGZyYW1lLCBzdGFnZVBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBhYnNQb3NpdGlvbiA9IHRoaXMucG9zLnN1YihzdGFnZVBvc2l0aW9uKTtcclxuICAgICAgICAgICAgdmFyIGFic1Bvc2l0aW9uMiA9IHRoaXMucG9zMi5zdWIoc3RhZ2VQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY3R4Lm1vdmVUbyhhYnNQb3NpdGlvbi54LCBhYnNQb3NpdGlvbi55KTtcclxuICAgICAgICAgICAgY3R4LmxpbmVUbyhhYnNQb3NpdGlvbjIueCwgYWJzUG9zaXRpb24yLnkpO1xyXG5cclxuICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgICAgICBjdHgubGluZVdpZHRoID0gdGhpcy5saW5lV2lkdGg7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY29sb3I7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbiIsInJlZ2lzdGVyTmFtZXNwYWNlKFwiUmVuZGVySnMuQ2FudmFzLlNoYXBlc1wiKTtcclxuXHJcbi8qXHJcbiAqUmVwcmVzZW50cyBhIGxpbmUgc2hhcGUsIGluaGVyaXRzIGZyb20gc2hhcGVcclxuICovXHJcblJlbmRlckpzLkNhbnZhcy5TaGFwZXMuUG9seWdvbiA9IGluamVjdChcIlV0aWxzXCIpXHJcbiAgICAuYmFzZShSZW5kZXJKcy5DYW52YXMuT2JqZWN0KVxyXG4gICAgLmNsYXNzKGZ1bmN0aW9uICh1dGlscywgb3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuYmFzZShvcHRpb25zKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb2xvciA9IG9wdGlvbnMuY29sb3IgfHwgXCIjMDAwXCI7XHJcbiAgICAgICAgdGhpcy5saW5lV2lkdGggPSBvcHRpb25zLmxpbmVXaWR0aCB8fCAxO1xyXG4gICAgICAgIHRoaXMudmVydGljZXMgPSBvcHRpb25zLnBvaW50cyB8fCBbXTtcclxuICAgICAgICB0aGlzLnN1YlBvbHlzID0gW107XHJcbiAgICAgICAgdGhpcy5lZGdlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuckVkZ2VzID0gW107XHJcbiAgICAgICAgdGhpcy5idWlsZEVkZ2VzKCk7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogRGVjb21wb3NlIGEgcG9seWdvbiBpZiBpdCdzIGNvbmNhdmVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmRlY29tcG9zZSA9IGZ1bmN0aW9uIChyZXN1bHQsIHJlZmxleFZlcnRpY2VzLCBzdGVpbmVyUG9pbnRzLCBkZWx0YSwgbWF4bGV2ZWwsIGxldmVsKSB7XHJcbiAgICAgICAgICAgIG1heGxldmVsID0gbWF4bGV2ZWwgfHwgMTAwO1xyXG4gICAgICAgICAgICBsZXZlbCA9IGxldmVsIHx8IDA7XHJcbiAgICAgICAgICAgIGRlbHRhID0gZGVsdGEgfHwgMjU7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHR5cGVvZiAocmVzdWx0KSAhPT0gXCJ1bmRlZmluZWRcIiA/IHJlc3VsdCA6IFtdO1xyXG4gICAgICAgICAgICByZWZsZXhWZXJ0aWNlcyA9IHJlZmxleFZlcnRpY2VzIHx8IFtdO1xyXG4gICAgICAgICAgICBzdGVpbmVyUG9pbnRzID0gc3RlaW5lclBvaW50cyB8fCBbXTtcclxuXHJcbiAgICAgICAgICAgIHZhciB1cHBlckludCA9IG5ldyBSZW5kZXJKcy5WZWN0b3IoMCwgMCksIGxvd2VySW50ID0gbmV3IFJlbmRlckpzLlZlY3RvcigwLCAwKSwgcCA9IG5ldyBSZW5kZXJKcy5WZWN0b3IoMCwgMCk7IC8vIFBvaW50c1xyXG4gICAgICAgICAgICB2YXIgdXBwZXJEaXN0ID0gMCwgbG93ZXJEaXN0ID0gMCwgZCA9IDAsIGNsb3Nlc3REaXN0ID0gMDsgLy8gc2NhbGFyc1xyXG4gICAgICAgICAgICB2YXIgdXBwZXJJbmRleCA9IDAsIGxvd2VySW5kZXggPSAwLCBjbG9zZXN0SW5kZXggPSAwOyAvLyBJbnRlZ2Vyc1xyXG4gICAgICAgICAgICB2YXIgbG93ZXJQb2x5ID0gbmV3IFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuUG9seWdvbigpLCB1cHBlclBvbHkgPSBuZXcgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5Qb2x5Z29uKCk7IC8vIHBvbHlnb25zXHJcbiAgICAgICAgICAgIHZhciBwb2x5ID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIHYgPSB0aGlzLnZlcnRpY2VzO1xyXG5cclxuICAgICAgICAgICAgaWYgKHYubGVuZ3RoIDwgMykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV2ZWwrKztcclxuICAgICAgICAgICAgaWYgKGxldmVsID4gbWF4bGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcInF1aWNrRGVjb21wOiBtYXggbGV2ZWwgKFwiICsgbWF4bGV2ZWwgKyBcIikgcmVhY2hlZC5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwb2x5LmlzUmVmbGV4KGkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVmbGV4VmVydGljZXMucHVzaChwb2x5LnZlcnRpY2VzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB1cHBlckRpc3QgPSBsb3dlckRpc3QgPSBOdW1iZXIuTUFYX1ZBTFVFO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgKytqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSZW5kZXJKcy5WZWN0b3IubGVmdChwb2x5LmF0KGkgLSAxKSwgcG9seS5hdChpKSwgcG9seS5hdChqKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIFJlbmRlckpzLlZlY3Rvci5yaWdodE9uKHBvbHkuYXQoaSAtIDEpLCBwb2x5LmF0KGkpLCBwb2x5LmF0KGogLSAxKSkpIHsgLy8gaWYgbGluZSBpbnRlcnNlY3RzIHdpdGggYW4gZWRnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHRoaXMuZ2V0SW50ZXJzZWN0aW9uUG9pbnQocG9seS5hdChpIC0gMSksIHBvbHkuYXQoaSksIHBvbHkuYXQoaiksIHBvbHkuYXQoaiAtIDEpKTsgLy8gZmluZCB0aGUgcG9pbnQgb2YgaW50ZXJzZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoUmVuZGVySnMuVmVjdG9yLnJpZ2h0KHBvbHkuYXQoaSArIDEpLCBwb2x5LmF0KGkpLCBwKSkgeyAvLyBtYWtlIHN1cmUgaXQncyBpbnNpZGUgdGhlIHBvbHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gUmVuZGVySnMuVmVjdG9yLnNxZGlzdChwb2x5LnZlcnRpY2VzW2ldLCBwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA8IGxvd2VyRGlzdCkgeyAvLyBrZWVwIG9ubHkgdGhlIGNsb3Nlc3QgaW50ZXJzZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyRGlzdCA9IGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VySW50ID0gcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJJbmRleCA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSZW5kZXJKcy5WZWN0b3IubGVmdChwb2x5LmF0KGkgKyAxKSwgcG9seS5hdChpKSwgcG9seS5hdChqICsgMSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBSZW5kZXJKcy5WZWN0b3IucmlnaHRPbihwb2x5LmF0KGkgKyAxKSwgcG9seS5hdChpKSwgcG9seS5hdChqKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSB0aGlzLmdldEludGVyc2VjdGlvblBvaW50KHBvbHkuYXQoaSArIDEpLCBwb2x5LmF0KGkpLCBwb2x5LmF0KGopLCBwb2x5LmF0KGogKyAxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoUmVuZGVySnMuVmVjdG9yLmxlZnQocG9seS5hdChpIC0gMSksIHBvbHkuYXQoaSksIHApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IFJlbmRlckpzLlZlY3Rvci5zcWRpc3QocG9seS52ZXJ0aWNlc1tpXSwgcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQgPCB1cHBlckRpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJEaXN0ID0gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJJbnQgPSBwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlckluZGV4ID0gajtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZSBubyB2ZXJ0aWNlcyB0byBjb25uZWN0IHRvLCBjaG9vc2UgYSBwb2ludCBpbiB0aGUgbWlkZGxlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvd2VySW5kZXggPT0gKHVwcGVySW5kZXggKyAxKSAlIHRoaXMudmVydGljZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJDYXNlIDE6IFZlcnRleChcIitpK1wiKSwgbG93ZXJJbmRleChcIitsb3dlckluZGV4K1wiKSwgdXBwZXJJbmRleChcIit1cHBlckluZGV4K1wiKSwgcG9seS5zaXplKFwiK3RoaXMudmVydGljZXMubGVuZ3RoK1wiKVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcC54ID0gKGxvd2VySW50LnggKyB1cHBlckludC54KSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHAueSA9IChsb3dlckludC55ICsgdXBwZXJJbnQueSkgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGVpbmVyUG9pbnRzLnB1c2gocCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHVwcGVySW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbG93ZXJQb2x5Lmluc2VydChsb3dlclBvbHkuZW5kKCksIHBvbHkuYmVnaW4oKSArIGksIHBvbHkuYmVnaW4oKSArIHVwcGVySW5kZXggKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyUG9seS5hcHBlbmQocG9seSwgaSwgdXBwZXJJbmRleCArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJQb2x5LnZlcnRpY2VzLnB1c2gocCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlclBvbHkudmVydGljZXMucHVzaChwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb3dlckluZGV4ICE9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3VwcGVyUG9seS5pbnNlcnQodXBwZXJQb2x5LmVuZCgpLCBwb2x5LmJlZ2luKCkgKyBsb3dlckluZGV4LCBwb2x5LmVuZCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlclBvbHkuYXBwZW5kKHBvbHksIGxvd2VySW5kZXgsIHBvbHkudmVydGljZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXBwZXJQb2x5Lmluc2VydCh1cHBlclBvbHkuZW5kKCksIHBvbHkuYmVnaW4oKSwgcG9seS5iZWdpbigpICsgaSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJQb2x5LmFwcGVuZChwb2x5LCAwLCBpICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9sb3dlclBvbHkuaW5zZXJ0KGxvd2VyUG9seS5lbmQoKSwgcG9seS5iZWdpbigpICsgaSwgcG9seS5lbmQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJQb2x5LmFwcGVuZChwb2x5LCBpLCBwb2x5LnZlcnRpY2VzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2xvd2VyUG9seS5pbnNlcnQobG93ZXJQb2x5LmVuZCgpLCBwb2x5LmJlZ2luKCksIHBvbHkuYmVnaW4oKSArIHVwcGVySW5kZXggKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyUG9seS5hcHBlbmQocG9seSwgMCwgdXBwZXJJbmRleCArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJQb2x5LnZlcnRpY2VzLnB1c2gocCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlclBvbHkudmVydGljZXMucHVzaChwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXBwZXJQb2x5Lmluc2VydCh1cHBlclBvbHkuZW5kKCksIHBvbHkuYmVnaW4oKSArIGxvd2VySW5kZXgsIHBvbHkuYmVnaW4oKSArIGkgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyUG9seS5hcHBlbmQocG9seSwgbG93ZXJJbmRleCwgaSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29ubmVjdCB0byB0aGUgY2xvc2VzdCBwb2ludCB3aXRoaW4gdGhlIHRyaWFuZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJDYXNlIDI6IFZlcnRleChcIitpK1wiKSwgY2xvc2VzdEluZGV4KFwiK2Nsb3Nlc3RJbmRleCtcIiksIHBvbHkuc2l6ZShcIit0aGlzLnZlcnRpY2VzLmxlbmd0aCtcIilcXG5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobG93ZXJJbmRleCA+IHVwcGVySW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVySW5kZXggKz0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VzdERpc3QgPSBOdW1iZXIuTUFYX1ZBTFVFO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVwcGVySW5kZXggPCBsb3dlckluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gbG93ZXJJbmRleDsgaiA8PSB1cHBlckluZGV4OyArK2opIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSZW5kZXJKcy5WZWN0b3IubGVmdE9uKHBvbHkuYXQoaSAtIDEpLCBwb2x5LmF0KGkpLCBwb2x5LmF0KGopKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIFJlbmRlckpzLlZlY3Rvci5yaWdodE9uKHBvbHkuYXQoaSArIDEpLCBwb2x5LmF0KGkpLCBwb2x5LmF0KGopKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBSZW5kZXJKcy5WZWN0b3Iuc3FkaXN0KHBvbHkuYXQoaSksIHBvbHkuYXQoaikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkIDwgY2xvc2VzdERpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VzdERpc3QgPSBkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZXN0SW5kZXggPSBqICUgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IGNsb3Nlc3RJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJQb2x5LmFwcGVuZChwb2x5LCBpLCBjbG9zZXN0SW5kZXggKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbG9zZXN0SW5kZXggIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlclBvbHkuYXBwZW5kKHBvbHksIGNsb3Nlc3RJbmRleCwgdi5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJQb2x5LmFwcGVuZChwb2x5LCAwLCBpICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyUG9seS5hcHBlbmQocG9seSwgaSwgdi5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJQb2x5LmFwcGVuZChwb2x5LCAwLCBjbG9zZXN0SW5kZXggKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyUG9seS5hcHBlbmQocG9seSwgY2xvc2VzdEluZGV4LCBpICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNvbHZlIHNtYWxsZXN0IHBvbHkgZmlyc3RcclxuICAgICAgICAgICAgICAgICAgICBpZiAobG93ZXJQb2x5LnZlcnRpY2VzLmxlbmd0aCA8IHVwcGVyUG9seS52ZXJ0aWNlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJQb2x5LmRlY29tcG9zZShyZXN1bHQsIHJlZmxleFZlcnRpY2VzLCBzdGVpbmVyUG9pbnRzLCBkZWx0YSwgbWF4bGV2ZWwsIGxldmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJQb2x5LmRlY29tcG9zZShyZXN1bHQsIHJlZmxleFZlcnRpY2VzLCBzdGVpbmVyUG9pbnRzLCBkZWx0YSwgbWF4bGV2ZWwsIGxldmVsKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlclBvbHkuZGVjb21wb3NlKHJlc3VsdCwgcmVmbGV4VmVydGljZXMsIHN0ZWluZXJQb2ludHMsIGRlbHRhLCBtYXhsZXZlbCwgbGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlclBvbHkuZGVjb21wb3NlKHJlc3VsdCwgcmVmbGV4VmVydGljZXMsIHN0ZWluZXJQb2ludHMsIGRlbHRhLCBtYXhsZXZlbCwgbGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHJlc3VsdC5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRba10uYnVpbGRFZGdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIEFwcGVuZCBwb2ludHMgXCJmcm9tXCIgdG8gXCJ0b1wiLTEgZnJvbSBhbiBvdGhlciBwb2x5Z29uIFwicG9seVwiIG9udG8gdGhpcyBvbmUuXHJcbiAgICAgICAgICogQG1ldGhvZCBhcHBlbmRcclxuICAgICAgICAgKiBAcGFyYW0ge1BvbHlnb259IHBvbHkgVGhlIHBvbHlnb24gdG8gZ2V0IHBvaW50cyBmcm9tLlxyXG4gICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSAgZnJvbSBUaGUgdmVydGV4IGluZGV4IGluIFwicG9seVwiLlxyXG4gICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSAgdG8gVGhlIGVuZCB2ZXJ0ZXggaW5kZXggaW4gXCJwb2x5XCIuIE5vdGUgdGhhdCB0aGlzIHZlcnRleCBpcyBOT1QgaW5jbHVkZWQgd2hlbiBhcHBlbmRpbmcuXHJcbiAgICAgICAgICogQHJldHVybiB7QXJyYXl9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5hcHBlbmQgPSBmdW5jdGlvbiAocG9seSwgZnJvbSwgdG8pIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAoZnJvbSkgPT09IFwidW5kZWZpbmVkXCIpIHRocm93IG5ldyBFcnJvcihcIkZyb20gaXMgbm90IGdpdmVuIVwiKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAodG8pID09PSBcInVuZGVmaW5lZFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUbyBpcyBub3QgZ2l2ZW4hXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRvIC0gMSA8IGZyb20pIHRocm93IG5ldyBFcnJvcihcImxvbDFcIik7XHJcbiAgICAgICAgICAgIGlmICh0byA+IHBvbHkudmVydGljZXMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoXCJsb2wyXCIpO1xyXG4gICAgICAgICAgICBpZiAoZnJvbSA8IDApIHRocm93IG5ldyBFcnJvcihcImxvbDNcIik7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gZnJvbTsgaSA8IHRvOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmVydGljZXMucHVzaChwb2x5LnZlcnRpY2VzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogR2V0IGEgdmVydGV4IGF0IHBvc2l0aW9uIGkuIEl0IGRvZXMgbm90IG1hdHRlciBpZiBpIGlzIG91dCBvZiBib3VuZHMsIHRoaXMgZnVuY3Rpb24gd2lsbCBqdXN0IGN5Y2xlLlxyXG4gICAgICAgICAqIEBtZXRob2QgYXRcclxuICAgICAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlcclxuICAgICAgICAgKiBAcmV0dXJuIHtBcnJheX1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmF0ID0gZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICAgICAgdmFyIHYgPSB0aGlzLnZlcnRpY2VzLFxyXG4gICAgICAgICAgICAgICAgcyA9IHYubGVuZ3RoO1xyXG4gICAgICAgICAgICByZXR1cm4gdltpIDwgMCA/IGkgJSBzICsgcyA6IGkgJSBzXTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIEdldCBmaXJzdCB2ZXJ0ZXhcclxuICAgICAgICAgKiBAbWV0aG9kIGZpcnN0XHJcbiAgICAgICAgICogQHJldHVybiB7QXJyYXl9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5maXJzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmVydGljZXNbMF07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBHZXQgbGFzdCB2ZXJ0ZXhcclxuICAgICAgICAgKiBAbWV0aG9kIGxhc3RcclxuICAgICAgICAgKiBAcmV0dXJuIHtBcnJheX1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmxhc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZlcnRpY2VzW3RoaXMudmVydGljZXMubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogQ2hlY2tzIHRoYXQgdGhlIGxpbmUgc2VnbWVudHMgb2YgdGhpcyBwb2x5Z29uIGRvIG5vdCBpbnRlcnNlY3QgZWFjaCBvdGhlci5cclxuICAgICAgICAgKiBAbWV0aG9kIGlzU2ltcGxlXHJcbiAgICAgICAgICogQHBhcmFtICB7QXJyYXl9IHBhdGggQW4gYXJyYXkgb2YgdmVydGljZXMgZS5nLiBbWzAsMF0sWzAsMV0sLi4uXVxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICAgICAgICogQHRvZG8gU2hvdWxkIGl0IGNoZWNrIGFsbCBzZWdtZW50cyB3aXRoIGFsbCBvdGhlcnM/XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5pc1NpbXBsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSB0aGlzLnZlcnRpY2VzO1xyXG4gICAgICAgICAgICAvLyBDaGVja1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGgubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGkgLSAxOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWdtZW50c0ludGVyc2VjdChwYXRoW2ldLCBwYXRoW2kgKyAxXSwgcGF0aFtqXSwgcGF0aFtqICsgMV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIHRoZSBzZWdtZW50IGJldHdlZW4gdGhlIGxhc3QgYW5kIHRoZSBmaXJzdCBwb2ludCB0byBhbGwgb3RoZXJzXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgcGF0aC5sZW5ndGggLSAyOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlZ21lbnRzSW50ZXJzZWN0KHBhdGhbMF0sIHBhdGhbcGF0aC5sZW5ndGggLSAxXSwgcGF0aFtpXSwgcGF0aFtpICsgMV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmdldEludGVyc2VjdGlvblBvaW50ID0gZnVuY3Rpb24gKHAxLCBwMiwgcTEsIHEyLCBkZWx0YSkge1xyXG4gICAgICAgICAgICBkZWx0YSA9IGRlbHRhIHx8IDA7XHJcbiAgICAgICAgICAgIHZhciBhMSA9IHAyLnkgLSBwMS55O1xyXG4gICAgICAgICAgICB2YXIgYjEgPSBwMS54IC0gcDIueDtcclxuICAgICAgICAgICAgdmFyIGMxID0gKGExICogcDEueCkgKyAoYjEgKiBwMS55KTtcclxuICAgICAgICAgICAgdmFyIGEyID0gcTIueSAtIHExLnk7XHJcbiAgICAgICAgICAgIHZhciBiMiA9IHExLnggLSBxMi54O1xyXG4gICAgICAgICAgICB2YXIgYzIgPSAoYTIgKiBxMS54KSArIChiMiAqIHExLnkpO1xyXG4gICAgICAgICAgICB2YXIgZGV0ID0gKGExICogYjIpIC0gKGEyICogYjEpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFTY2FsYXIuZXEoZGV0LCAwLCBkZWx0YSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVuZGVySnMuVmVjdG9yLmNsb25lKCgoYjIgKiBjMSkgLSAoYjEgKiBjMikpIC8gZGV0LCAoKGExICogYzIpIC0gKGEyICogYzEpKSAvIGRldCk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHJldHVybiBSZW5kZXJKcy5WZWN0b3IuY2xvbmUoMCwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIENoZWNrIGlmIGEgcG9pbnQgaW4gdGhlIHBvbHlnb24gaXMgYSByZWZsZXggcG9pbnRcclxuICAgICAgICAgKiBAbWV0aG9kIGlzUmVmbGV4XHJcbiAgICAgICAgICogQHBhcmFtICB7TnVtYmVyfSAgaVxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5pc1JlZmxleCA9IGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBSZW5kZXJKcy5WZWN0b3IucmlnaHQodGhpcy5hdChpIC0gMSksIHRoaXMuYXQoaSksIHRoaXMuYXQoaSArIDEpKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLm1ha2VDQ1cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBiciA9IDAsXHJcbiAgICAgICAgICAgICAgICB2ID0gdGhpcy52ZXJ0aWNlcztcclxuXHJcbiAgICAgICAgICAgIC8vIGZpbmQgYm90dG9tIHJpZ2h0IHBvaW50XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZbaV0ueSA8IHZbYnJdLnkgfHwgKHZbaV0ueSA9PSB2W2JyXS55ICYmIHZbaV0ueCA+IHZbYnJdLngpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnIgPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyByZXZlcnNlIHBvbHkgaWYgY2xvY2t3aXNlXHJcbiAgICAgICAgICAgIGlmICghUmVuZGVySnMuVmVjdG9yLmxlZnQodGhpcy5hdChiciAtIDEpLCB0aGlzLmF0KGJyKSwgdGhpcy5hdChiciArIDEpKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXZlcnNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogUmV2ZXJzZSB0aGUgdmVydGljZXMgaW4gdGhlIHBvbHlnb25cclxuICAgICAgICAgKiBAbWV0aG9kIHJldmVyc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnJldmVyc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0bXAgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIE4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSAhPT0gTjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0bXAucHVzaCh0aGlzLnZlcnRpY2VzLnBvcCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnZlcnRpY2VzID0gdG1wO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc2VnbWVudHNJbnRlcnNlY3QgPSBmdW5jdGlvbiAocDEsIHAyLCBxMSwgcTIpIHtcclxuICAgICAgICAgICAgdmFyIGR4ID0gcDIueCAtIHAxLng7XHJcbiAgICAgICAgICAgIHZhciBkeSA9IHAyLnkgLSBwMS55O1xyXG4gICAgICAgICAgICB2YXIgZGEgPSBxMi54IC0gcTEueDtcclxuICAgICAgICAgICAgdmFyIGRiID0gcTIueSAtIHExLnk7XHJcblxyXG4gICAgICAgICAgICAvLyBzZWdtZW50cyBhcmUgcGFyYWxsZWxcclxuICAgICAgICAgICAgaWYgKGRhICogZHkgLSBkYiAqIGR4ID09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgcyA9IChkeCAqIChxMS55IC0gcDEueSkgKyBkeSAqIChwMS54IC0gcTEueCkpIC8gKGRhICogZHkgLSBkYiAqIGR4KVxyXG4gICAgICAgICAgICB2YXIgdCA9IChkYSAqIChwMS55IC0gcTEueSkgKyBkYiAqIChxMS54IC0gcDEueCkpIC8gKGRiICogZHggLSBkYSAqIGR5KVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChzID49IDAgJiYgcyA8PSAxICYmIHQgPj0gMCAmJiB0IDw9IDEpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuYnVpbGRFZGdlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHAxO1xyXG4gICAgICAgICAgICB2YXIgcDI7XHJcbiAgICAgICAgICAgIHRoaXMuZWRnZXMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5yRWRnZXMgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBwMSA9IHRoaXMudmVydGljZXNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoaSArIDEgPj0gdGhpcy52ZXJ0aWNlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBwMiA9IHRoaXMudmVydGljZXNbMF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHAyID0gdGhpcy52ZXJ0aWNlc1tpICsgMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVkZ2VzLnB1c2gocDIuc3ViKHAxKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJFZGdlcy5wdXNoKHtwMTogbmV3IFJlbmRlckpzLlZlY3RvcihwMS54LCBwMS55KSwgcDI6IG5ldyBSZW5kZXJKcy5WZWN0b3IocDIueCwgcDIueSl9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0Q2VudGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdG90YWxYID0gMDtcclxuICAgICAgICAgICAgdmFyIHRvdGFsWSA9IDA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdG90YWxYICs9IHRoaXMudmVydGljZXNbaV0ueDtcclxuICAgICAgICAgICAgICAgIHRvdGFsWSArPSB0aGlzLnZlcnRpY2VzW2ldLnk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVuZGVySnMuVmVjdG9yKHRvdGFsWCAvIHRoaXMudmVydGljZXMubGVuZ3RoLCB0b3RhbFkgLyB0aGlzLnZlcnRpY2VzLmxlbmd0aCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBmdW5jdGlvbiAoeCwgeSkge1xyXG4gICAgICAgICAgICB2YXIgdiA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDIgPyBuZXcgUmVuZGVySnMuVmVjdG9yKGFyZ3VtZW50c1swXSwgYXJndW1lbnRzWzFdKSA6IGFyZ3VtZW50c1swXTtcclxuICAgICAgICAgICAgdGhpcy5wb3Muc2V0KHRoaXMucG9zLmFkZCh2KSk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSB0aGlzLnZlcnRpY2VzW2ldO1xyXG4gICAgICAgICAgICAgICAgdGhpcy52ZXJ0aWNlc1tpXS5zZXQocC5hZGQodikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc3ViUG9seXMgPSB0aGlzLmRlY29tcG9zZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9IFwiXCIpIHJlc3VsdCArPSBcIiBcIjtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBcIntcIiArIHRoaXMudmVydGljZXNbaV0udG9TdHJpbmcodHJ1ZSkgKyBcIn1cIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqRnVuY3Rpb24gaXMgY2FsbGVkIGluIGV2ZXJ5IGZyYW1lIHRvIHJlZHJhdyBpdHNlbGZcclxuICAgICAgICAgKi1jdHggaXMgdGhlIGRyYXdpbmcgY29udGV4dCBmcm9tIGEgY2FudmFzXHJcbiAgICAgICAgICotZnBzIGlzIHRoZSBmcmFtZSBwZXIgc2Vjb25kXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5kcmF3ID0gZnVuY3Rpb24gKGN0eCkge1xyXG4gICAgICAgICAgICB2YXIgY29sb3JzID0gW1wiaW5kaWFucmVkXCIsIFwieWVsbG93XCIsICdncmVlbiddO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3ViUG9seXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB2ZXJ0aWNlcyA9IHRoaXMuc3ViUG9seXNbaV0udmVydGljZXM7XHJcbiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgICBjdHgubW92ZVRvKHZlcnRpY2VzWzBdLngsIHZlcnRpY2VzWzBdLnkpO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCB2ZXJ0aWNlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8odmVydGljZXNbal0ueCwgdmVydGljZXNbal0ueSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gdGhpcy5saW5lV2lkdGg7XHJcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmNvbG9yO1xyXG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yc1tpXTtcclxuICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7IiwicmVnaXN0ZXJOYW1lc3BhY2UoXCJSZW5kZXJKcy5DYW52YXMuU2hhcGVzXCIpO1xyXG5cclxuLypcclxuICpSZXByZXNlbnRzIGEgcmVjdGFuZ2xlIHNoYXBlLCBpbmhlcml0cyBmcm9tIHNoYXBlXHJcbiAqL1xyXG5SZW5kZXJKcy5DYW52YXMuU2hhcGVzLlJlY3RhbmdsZSA9IGluamVjdChcIlV0aWxzXCIpXHJcbiAgICAuYmFzZShSZW5kZXJKcy5DYW52YXMuT2JqZWN0KVxyXG4gICAgLmNsYXNzKGZ1bmN0aW9uICh1dGlscywgb3B0aW9ucykge1xyXG5cclxuICAgICAgICB0aGlzLmJhc2Uob3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IG9wdGlvbnMuY29sb3I7XHJcbiAgICAgICAgdGhpcy5maWxsQ29sb3IgPSBvcHRpb25zLmZpbGxDb2xvcjtcclxuICAgICAgICB0aGlzLmxpbmVXaWR0aCA9IG9wdGlvbnMubGluZVdpZHRoIHx8IDE7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICpGdW5jdGlvbiBpcyBjYWxsZWQgaW4gZXZlcnkgZnJhbWUgdG8gcmVkcmF3IGl0c2VsZlxyXG4gICAgICAgICAqLWN0eCBpcyB0aGUgZHJhd2luZyBjb250ZXh0IGZyb20gYSBjYW52YXNcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmRyYXcgPSBmdW5jdGlvbiAoY3R4KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlUmVjdCh0aGlzLnBvcy54LCB0aGlzLnBvcy55LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZmlsbENvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QodGhpcy5wb3MueCwgdGhpcy5wb3MueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSB0aGlzLmxpbmVXaWR0aDtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5jb2xvcjtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMuZmlsbENvbG9yO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuIiwicmVnaXN0ZXJOYW1lc3BhY2UoXCJSZW5kZXJKcy5DYW52YXMuU2hhcGVzXCIpO1xyXG5cclxuLypcclxuICpSZXByZXNlbnRzIGEgc3ByaXRlIGltYWdlLCBpbmhlcml0cyBmcm9tIHNoYXBlXHJcbiAqL1xyXG5SZW5kZXJKcy5DYW52YXMuU2hhcGVzLlNwcml0ZSA9IGluamVjdChcIlV0aWxzXCIpXHJcbiAgICAuYmFzZShSZW5kZXJKcy5DYW52YXMuT2JqZWN0KVxyXG4gICAgLmNsYXNzKGZ1bmN0aW9uICh1dGlscywgb3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuYmFzZShvcHRpb25zKTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBMb2NhbHNcclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYud2lkdGggPSBpbWFnZS53aWR0aDtcclxuICAgICAgICAgICAgc2VsZi5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIGxvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpbWFnZS5zcmMgPSBvcHRpb25zLnVybDtcclxuICAgICAgICB2YXIgbG9hZGVkID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGZyYW1lSW5kZXggPSAwO1xyXG4gICAgICAgIHZhciBmcmFtZUNvdW50ID0gb3B0aW9ucy5mcmFtZUNvdW50O1xyXG4gICAgICAgIHZhciBzdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGxvb3AgPSBmYWxzZTtcclxuICAgICAgICB2YXIgZGVmQW5pbWF0aW9uID0gb3B0aW9ucy5kZWZBbmltYXRpb247XHJcbiAgICAgICAgdmFyIGN1cnJlbnQ7XHJcbiAgICAgICAgdmFyIHByZXZpb3VzO1xyXG4gICAgICAgIHZhciBhbmltYXRpb25zID0gb3B0aW9ucy5hbmltYXRpb25zO1xyXG5cclxuICAgICAgICB2YXIgYW5pbWF0aW9uID0gZnVuY3Rpb24gKG5hbWUsIGlzTG9vcCkge1xyXG4gICAgICAgICAgICBmcmFtZUluZGV4ID0gMDtcclxuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGxvb3AgPSBpc0xvb3A7XHJcbiAgICAgICAgICAgIGlmICghYW5pbWF0aW9uc1tuYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByZXZpb3VzID0gY3VycmVudDtcclxuICAgICAgICAgICAgY3VycmVudCA9IGFuaW1hdGlvbnNbbmFtZV07XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGlvbihkZWZBbmltYXRpb24sIHRydWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc2V0QW5pbWF0aW9uID0gZnVuY3Rpb24gKG5hbWUsIGxvb3ApIHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uKG5hbWUsIGxvb3ApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMucG9pbnRJbnRlcnNlY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmdldFJlY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWZGcmFtZSA9IGFuaW1hdGlvbnNbZGVmQW5pbWF0aW9uXVswXTtcclxuICAgICAgICAgICAgcmV0dXJuIHt4OiB0aGlzLnBvcy54LCB5OiB0aGlzLnBvcy55LCB3aWR0aDogZGVmRnJhbWVbMl0sIGhlaWdodDogZGVmRnJhbWVbM119O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMucm90YXRlU2hhcGUgPSBmdW5jdGlvbiAoY3R4LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hbmdsZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBkZWZGcmFtZSA9IGFuaW1hdGlvbnNbZGVmQW5pbWF0aW9uXVswXTtcclxuICAgICAgICAgICAgdmFyIG8gPSBuZXcgUmVuZGVySnMuVmVjdG9yKHBvc2l0aW9uLnggKyAoZGVmRnJhbWVbMl0gLyAyKSwgcG9zaXRpb24ueSArIChkZWZGcmFtZVszXSAvIDIpKTtcclxuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShvLngsIG8ueSk7XHJcbiAgICAgICAgICAgIGN0eC5yb3RhdGUodXRpbHMuY29udmVydFRvUmFkKHRoaXMuYW5nbGUpKTtcclxuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSgtby54LCAtby55KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqRnVuY3Rpb24gaXMgY2FsbGVkIGluIGV2ZXJ5IGZyYW1lIHRvIHJlZHJhdyBpdHNlbGZcclxuICAgICAgICAgKi1jdHggaXMgdGhlIGRyYXdpbmcgY29udGV4dCBmcm9tIGEgY2FudmFzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5kcmF3ID0gZnVuY3Rpb24gKGN0eCwgZnJhbWUsIHN0YWdlUG9zaXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKCFsb2FkZWQgfHwgIXN0YXJ0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGFic1Bvc2l0aW9uID0gdGhpcy5wb3Muc3ViKHN0YWdlUG9zaXRpb24pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuYW5nbGUgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZVNoYXBlKGN0eCwgYWJzUG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgY3VycmVudEZyYW1lID0gY3VycmVudFtmcmFtZUluZGV4XTtcclxuXHJcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIGN1cnJlbnRGcmFtZVswXSwgY3VycmVudEZyYW1lWzFdLCBjdXJyZW50RnJhbWVbMl0sIGN1cnJlbnRGcmFtZVszXSwgYWJzUG9zaXRpb24ueCwgYWJzUG9zaXRpb24ueSwgY3VycmVudEZyYW1lWzJdLCBjdXJyZW50RnJhbWVbM10pO1xyXG4gICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihmcmFtZS50aW1lKSAlIGZyYW1lQ291bnQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGZyYW1lSW5kZXggPSBmcmFtZUluZGV4ID49IGN1cnJlbnQubGVuZ3RoIC0gMSA/IDAgOiBmcmFtZUluZGV4ICsgMTtcclxuICAgICAgICAgICAgICAgIGlmIChmcmFtZUluZGV4ID09PSAwICYmICFsb29wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uKGRlZkFuaW1hdGlvbiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuYW5nbGUgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==