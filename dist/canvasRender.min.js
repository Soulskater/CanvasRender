function Scalar(){}var Utils=function(e){return e.getGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,s="x"===e?t:3&t|8;return s.toString(16)})},e.parseUrl=function(e){var t=document.createElement("a");return t.href=e,{protocol:t.protocol,port:t.port,pathname:t.pathname,search:t.search,hash:t.hash,host:t.host}},e.sleep=function(e){for(var t=new Date;new Date-t<1e3*e;);},e}(Utils||{}),Utils=function(e){"use strict";e.convertToRad=function(e){return e*(Math.PI/180)};var t=1*new Date-1;return e.getMousePos=function(e,t){var s=e.getBoundingClientRect();return{x:t.clientX-s.left,y:t.clientY-s.top}},e.getCanvas=function(e,t){var s=document.createElement("canvas");return s.width=e,s.height=t,s},e.getPixels=function(e){var t,s;if(e.getContext){t=e;try{s=t.getContext("2d")}catch(n){}}return s||(t=Utils.getCanvas(e.width,e.height),s=t.getContext("2d"),s.drawImage(e,0,0)),s.getImageData(0,0,t.width,t.height)},e.getFps=function(){var e=new Date,s=1e3/(e-t);return t=e,s},e}(Utils||{}),Utils=function(e){return e.isNumber=function(e){return!isNaN(e)},e}(Utils||{}),LinkedList=function(){"use strict";var e=[];this.length=function(){return e.length},this.first=function(){return e[0]},this.last=function(){return e[e.length-1]},this.buildList=function(e){for(var t=0,s=e.length;s>t;t++)0===t&&(this.first=e[t]),t===s-1&&(this.last=e[t]),e[t].prev=e[t-1],e[t].next=e[t+1],e.push(e[t])},this.append=function(t){var s=this.last();e.length>0&&(s.next=t,t.prev=s),e.push(t)},this.getEnumerator=function(){var t=-1;return{current:function(){return e[t]},next:function(){return t!==e.length-1?e[++t]:void 0},prev:function(){return 0!==t?e[t--]:void 0}}}};dependencyContainer.registerType("jQuery",$),dependencyContainer.registerType("linq",linq),dependencyContainer.registerType("Utils",Utils),dependencyContainer.registerType("EventDispatcher",EventDispatcher),dependencyContainer.registerType("LinkedList",LinkedList),registerNamespace("RenderJs.Canvas"),RenderJs.Canvas.Animation=inject().class(function(e,t){var s,n=0,i=!1,r=!1,a=!1,o=function(t){e({frameRate:t,lastTime:n,time:n+1e3/t}),n+=1e3/t};this.start=function(){i||(i=!0,r=a=!1,s=t.on("animate",o))},this.reset=function(){n=0},this.pause=function(){i&&s&&s(),i=!1,a=!0},this.stop=function(){i&&s&&(this.reset(),s()),i=!1,r=!0}}),registerNamespace("RenderJs.Canvas.Filters"),RenderJs.Canvas.Filters.Convolute=function(e,t,s){for(var n=Math.round(Math.sqrt(t.length)),i=Math.floor(n/2),r=Utils.getPixels(e),a=r.data,o=r.width,h=r.height,c=o,l=h,u=Utils.getCanvas(c,l).getContext("2d").createImageData(c,l),d=u.data,v=s?1:0,f=0;l>f;f++)for(var g=0;c>g;g++){for(var p=f,y=g,R=4*(f*c+g),J=0,x=0,C=0,m=0,w=0;n>w;w++)for(var b=0;n>b;b++){var E=p+w-i,M=y+b-i;if(E>=0&&h>E&&M>=0&&o>M){var V=4*(E*o+M),S=t[w*n+b];J+=a[V]*S,x+=a[V+1]*S,C+=a[V+2]*S,m+=a[V+3]*S}}d[R]=J,d[R+1]=x,d[R+2]=C,d[R+3]=m+v*(255-m)}return u},RenderJs.Canvas.Filters.Blur=function(e,t){return stackBlurImage(e,t)},RenderJs.Canvas.Filters.Grayscale=function(e){for(var t=Utils.getPixels(e),s=t.data,n=0;n<s.length;n+=4){var i=s[n],r=s[n+1],a=s[n+2],o=.2126*i+.7152*r+.0722*a;s[n]=s[n+1]=s[n+2]=o}return t},RenderJs.Canvas.Filters.Brightness=function(e,t){for(var s=Utils.getPixels(e),n=s.data,i=0;i<n.length;i+=4)n[i]+=t,n[i+1]+=t,n[i+2]+=t;return s},RenderJs.Canvas.Filters.Threshold=function(e,t){for(var s=Utils.getPixels(e),n=s.data,i=0;i<n.length;i+=4){var r=n[i],a=n[i+1],o=n[i+2],h=.2126*r+.7152*a+.0722*o>=t?255:0;n[i]=n[i+1]=n[i+2]=h}return s},registerNamespace("RenderJs.Canvas"),RenderJs.Canvas.Layer=inject("Utils","EventDispatcher","jQuery").class(function(e,t,s,n,i,r,a){var o=this,h=!1,c=!1,l=new t,u=0;this.canvas=document.createElement("canvas"),document.getElementById(n).appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.canvas.width=i,this.canvas.height=r,this.active=a,this.prev=null,this.next=null,this.objects=[];var d=function(e,t){t=t||Utils.getMousePos(e.target,e),l.trigger(RenderJs.Canvas.Events.click,[e,t]);for(var n=this.objects.length-1;n>=0;n--)if(RenderJs.Physics.Collisions.pointInObject(t,this.objects[n]))return this.objects[n].trigger(RenderJs.Canvas.Events.click,e),!0;this.prev&&s(this.prev.canvas).trigger("click",t)},v=function(e,t){t=t||Utils.getMousePos(e.target,e),l.trigger(RenderJs.Canvas.Events.mousemove,[e,t]);for(var n=this.objects.length-1;n>=0;n--)if(RenderJs.Physics.Collisions.pointInObject(t,this.objects[n]))return this.objects[n].trigger(RenderJs.Canvas.Events.mousemove,[e,t]),!0;this.prev&&s(this.prev.canvas).trigger("mousemove",t)},f=function(e,t){t=t||Utils.getMousePos(e.target,e),l.trigger(RenderJs.Canvas.Events.mouseenter,[e,t]);for(var n=this.objects.length-1;n>=0;n--)if(RenderJs.Physics.Collisions.pointInObject(t,this.objects[n]))return this.objects[n].trigger(RenderJs.Canvas.Events.mouseenter,[e,t]),!0;this.prev&&s(this.prev.canvas).trigger("mouseenter",t)},g=function(e,t){t=t||Utils.getMousePos(e.target,e),l.trigger(RenderJs.Canvas.Events.mouseleave,[e,t]);for(var n=this.objects.length-1;n>=0;n--)if(RenderJs.Physics.Collisions.pointInObject(t,this.objects[n]))return this.objects[n].trigger(RenderJs.Canvas.Events.mouseleave,[e,t]),!0;this.prev&&s(this.prev.canvas).trigger("mouseleave",t)},p=function(e){l.trigger(RenderJs.Canvas.Events.keydown,e)},y=function(e){l.trigger(RenderJs.Canvas.Events.keyup,e)},R=function(e){l.trigger(RenderJs.Canvas.Events.keypress,e)};s(this.canvas).on("click",function(e,t){d.call(o,e,t)}),s(this.canvas).on("mousemove",function(e,t){v.call(o,e,t)}),s(this.canvas).on("mouseenter",function(e,t){f.call(o,e,t)}),s(this.canvas).on("mouseleave",function(e,t){g.call(o,e,t)}),s(document).on("keydown",function(e){p.call(o,e)}),s(document).on("keyup",function(e){y.call(o,e)}),s(document).on("keypress",function(e){R.call(o,e)}),this.on=function(e,t){return RenderJs.Canvas.Events[e]?l.subscribe(e,t):void 0},this.addObject=function(e){if(!(e instanceof RenderJs.Canvas.Object))throw new Error("An object on the canvas should be inherited from CanvasObject!");e.layer=this,this.objects.push(e)},this.removeObject=function(e){linq(this.objects).remove(function(t){return t===e}),e.dispose(),c=!0},this.resize=function(e,t){this.canvas.width=e,this.canvas.height=t,c=!0},this.hasSprites=function(){for(var e=0,t=this.objects.length;t>e;e++)if(this.objects[e]instanceof RenderJs.Canvas.Shapes.Sprite)return!0;return!1},this.drawObjects=function(e,t){if(c||(!h||l.hasSubscribers("animate")||this.hasSprites(this)||this.active)&&0!==this.objects.length){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var s=Math.floor(1e3/e);l.trigger("animate",e);for(var n=!0,i=0,r=this.objects.length;r>i;i++)this.objects[i].loaded||(n=!1),this.objects[i].draw(this.ctx,{frameRate:e,lastTime:u,time:u+s},t);n&&(h=!0),c&&(c=!1),u+=s}}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Events={animate:"animate",click:"click",keydown:"keydown",keyup:"keyup",keypress:"keypress",mousemove:"mousemove",mousehover:"mousehover",mouseleave:"mouseleave",collision:"collision",objectChanged:"objectChanged"},RenderJs.Canvas.Object=inject("EventDispatcher","jQuery","Utils").class(function(e,t,s,n){this.dispatcher=new e,n=n||{},this.id=s.getGuid(),this.pos=new RenderJs.Vector(n.x,n.y),this.width=n.width||0,this.height=n.height||0,this.angle=n.angle||0,this.scaleX=n.scaleX,this.scaleY=n.scaleY,this.blurRadius=n.blurRadius,this.collision=n.collision||!1,this.filters=[],this.layer=null,this.loaded=!0,this.getCenter=function(){return new RenderJs.Vector(this.pos.x+this.width/2,this.pos.y+this.height/2)},this.getCenteredRect=function(){var e=this.pos;return{x:e.x,y:e.y,width:this.width,height:this.height}},this.setfilters=function(e){this.filters=e},this.updatePosition=function(e,t){var s=RenderJs.Vector.clone(this.pos.x,this.pos.y),n=this.pos.add(new RenderJs.Vector(Math.floor(e),Math.floor(t)));this.pos=n,(s.x!==n.x||s.y!==n.y)&&this.trigger(RenderJs.Canvas.Events.objectChanged,this)},this.rotateShape=function(e){if(0!==this.angle){var t=this.getCenter();e.translate(t.x,t.y),e.rotate(s.convertToRad(this.angle)),e.translate(-t.x,-t.y)}},this.scaleShape=function(e,t,s){var n=this.getCenter();e.translate(n.x,n.y),e.scale(t,s),e.translate(-n.x,-n.y)},this.on=function(e,t){return RenderJs.Canvas.Events[e]?this.dispatcher.subscribe(e,t):void 0},this.trigger=function(e,t){RenderJs.Canvas.Events[e]&&this.dispatcher.trigger(e,t)},this.dispose=function(){this.dispatcher.dispose()}});var RenderJs=RenderJs||{};RenderJs.Canvas=RenderJs.Canvas||{},RenderJs.Canvas.Space=function(e){var t=function(e){this.stage=e.stage};t(e)},registerNamespace("RenderJs.Canvas"),RenderJs.Canvas.Stage=inject("Utils","EventDispatcher","LinkedList").class(function(e,t,s,n){var i=n.container||"viewport",r=0,a=new t;this.layers=new s,this.position=new RenderJs.Vector(-50,-50);var o=function(){var t=this;r=e.getFps();for(var s=this.layers.getEnumerator();void 0!==s.next();)s.current().drawObjects(r,this.position);requestAnimationFrame(function(){o.call(t)})};o.call(this),this.resize=function(e,t){this.width=e,this.height=t,document.getElementById(i).style.width=this.width+"px",document.getElementById(i).style.height=this.height+"px";for(var s=this.layers.getEnumerator();void 0!==s.next();)s.current().resize(e,t)},this.onInvalidate=function(e){return a.subscribe("onInvalidate",e)},this.createLayer=function(e){var t=new RenderJs.Canvas.Layer(i,this.width,this.height,e);return this.layers.append(t),t},this.resize(n.width||1200,n.height||800)});var RenderJs=RenderJs||{};RenderJs.Canvas=RenderJs.Canvas||{},RenderJs.Canvas.Easings=RenderJs.Canvas.Easings||{},RenderJs.Canvas.Easings.BounceEaseOut=function(e,t,s,n){return(e/=n)<1/2.75?7.5625*s*e*e+t:2/2.75>e?s*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?s*(7.5625*(e-=2.25/2.75)*e+.9375)+t:s*(7.5625*(e-=2.625/2.75)*e+.984375)+t},RenderJs.Canvas.Easings.BounceEaseIn=function(e,t,s,n){return s-Kinetic.Easings.BounceEaseOut(n-e,0,s,n)+t},RenderJs.Canvas.Easings.BounceEaseInOut=function(e,t,s,n){return n/2>e?.5*Kinetic.Easings.BounceEaseIn(2*e,0,s,n)+t:.5*Kinetic.Easings.BounceEaseOut(2*e-n,0,s,n)+.5*s+t},RenderJs.Canvas.Easings.EaseIn=function(e,t,s,n){return s*(e/=n)*e+t},RenderJs.Canvas.Easings.EaseOut=function(e,t,s,n){return-s*(e/=n)*(e-2)+t},RenderJs.Canvas.Easings.EaseInOut=function(e,t,s,n){return(e/=n/2)<1?s/2*e*e+t:-s/2*(--e*(e-2)-1)+t},RenderJs.Canvas.Easings.ElasticEaseIn=function(e,t,s,n,i,r){var a=0;return 0===e?t:1===(e/=n)?t+s:(r||(r=.3*n),!i||i<Math.abs(s)?(i=s,a=r/4):a=r/(2*Math.PI)*Math.asin(s/i),-(i*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/r))+t)},RenderJs.Canvas.Easings.ElasticEaseOut=function(e,t,s,n,i,r){var a=0;return 0===e?t:2===(e/=n/2)?t+s:(r||(r=.3*n*1.5),!i||i<Math.abs(s)?(i=s,a=r/4):a=r/(2*Math.PI)*Math.asin(s/i),1>e?-.5*i*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/r)+t:i*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/r)*.5+s+t)},RenderJs.Canvas.Easings.ElasticEaseInOut=function(e,t,s,n,i,r){var a=0;return 0===e?t:2===(e/=n/2)?t+s:(r||(r=.3*n*1.5),!i||i<Math.abs(s)?(i=s,a=r/4):a=r/(2*Math.PI)*Math.asin(s/i),1>e?-.5*i*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/r)+t:i*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*n-a)*Math.PI/r)*.5+s+t)},RenderJs.Canvas.Transition=function(e){var t=this,s=!1;this.duration=1e3*e.duration||1e3,this.shape=e.shape,this.props=e.props||{},this.origProps={};for(var n in e.props)this.origProps[n]=this.shape[n];this.easing=e.easing||RenderJs.Canvas.Easings.EaseInOut;var i=new RenderJs.Canvas.Animation(function(e){e.time>=t.duration&&i.stop();for(var n in t.props)t.shape[n]=s?t.easing(e.time,t.origProps[n]+t.props[n],-1*t.props[n],t.duration):t.easing(e.time,t.origProps[n],t.props[n],t.duration)},this.shape.layer);this.play=function(){i.start()},this.pause=function(){i.pause()},this.stop=function(){i.stop()},this.reverse=function(){s=!0,i.start()}};var RenderJs=RenderJs||{};RenderJs.Vector=function(e,t){this.x=e||0,this.y=t||0,this.set=function(e){return this.x=e.x,this.y=e.y,this},this.lengthSquared=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},this.length=function(){return Math.sqrt(this.lengthSquared())},this.length2=function(){return this.dot(this)},this.perp=function(){return new RenderJs.Vector(this.y,-this.x)},this.scale=function(e){return new RenderJs.Vector(this.x*e,this.y*e)},this.sub=function(e){return e instanceof RenderJs.Vector?new RenderJs.Vector(this.x-e.x,this.y-e.y):new RenderJs.Vector(this.x-e,this.y-e)},this.add=function(e){return e instanceof RenderJs.Vector?new RenderJs.Vector(this.x+e.x,this.y+e.y):new RenderJs.Vector(this.x+e,this.y+e)},this.dot=function(e){return this.x*e.x+this.y*e.y},this.dist=function(e){return this.sub(e).length()},this.normalize=function(){return this.scale(1/this.length())},this.angle=function(e){return this.dot(e)/(this.length()*e.length())},this.truncate=function(e){var t=Math.min(e,this.length());return t},this.rotate=function(e){var t=this.x,s=this.y;this.x=t*Math.cos(Utils.convertToRad(e))-s*Math.sin(Utils.convertToRad(e)),this.y=s*Math.cos(Utils.convertToRad(e))+t*Math.sin(Utils.convertToRad(e))},this.toString=function(e){return e?"("+Math.round(this.x)+", "+Math.round(this.y)+")":"("+this.x+", "+this.y+")"}},RenderJs.Vector.clone=function(e,t){return new RenderJs.Vector(e,t)},RenderJs.Vector.area=function(e,t,s){return(t.x-e.x)*(s.y-e.y)-(s.x-e.x)*(t.y-e.y)},RenderJs.Vector.left=function(e,t,s){return RenderJs.Vector.area(e,t,s)>0},RenderJs.Vector.leftOn=function(e,t,s){return RenderJs.Vector.area(e,t,s)>=0},RenderJs.Vector.right=function(e,t,s){return RenderJs.Vector.area(e,t,s)<0},RenderJs.Vector.rightOn=function(e,t,s){return RenderJs.Vector.area(e,t,s)<=0},RenderJs.Vector.sqdist=function(e,t){var s=t.x-e.x,n=t.y-e.y;return s*s+n*n},Scalar.eq=function(e,t,s){return s=s||0,Math.abs(e-t)<s};var RenderJs=RenderJs||{};RenderJs.Physics=RenderJs.Physics||{},RenderJs.Physics.Collisions=function(e){var t=function(e,t){"takes a point p=Pt() and an edge of two endpoints a,b=Pt() of a line segment returns boolean";var s,n=1e-5,i=Number.MAX_VALUE,r=Number.MIN_VALUE,a=0,o=t.p1,h=t.p2;o.y>h.y&&(o.set(h),h.set(o)),(e.y==o.y||e.y==h.y)&&(e.y+=n);var c=!1;return e.y>h.y||e.y<o.y||e.x>Math.max(o.x,h.x)?!1:(e.x<Math.min(o.x,h.x)?c=!0:(a=Math.abs(o.x-h.x)>r?(h.y-o.y)/(h.x-o.x):i,s=Math.abs(o.x-e.x)>r?(e.y-o.y)/(e.x-o.x):i,c=s>=a),c)},s=function(e,t){var s=e.length2(),n=t.dot(e);return 0>n?-1:n>s?1:0},n=function(e,s){for(var n=!1,i=0;i<s.rEdges.length;i++)t(e,s.rEdges[i])&&(n=!n);return n},i=function(e,t){var s=(t.pos2.y-t.pos.y)/(t.pos2.x-t.pos.x);return e.y-t.pos.y==s*(e.x-t.pos.y)},r=function(e,t){return o=t.getCenter(),Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2)<=Math.pow(this.width/2,2)},a=function(e,t){var s=e.width,n=e.height,i=t.width,r=t.height;if(0>=i||0>=r||0>=s||0>=n)return!1;var a=e.x,o=e.y,h=t.x,c=t.y;return i+=h,r+=c,s+=a,n+=o,(h>i||i>a)&&(c>r||r>o)&&(a>s||s>h)&&(o>n||n>c)},h=function(e,t){return d(t.getCenter(),e)||c(e.topEdge(),t)||c(e.rightEdge(),t)||c(e.bottomEdge(),t)||c(e.leftEdge(),t)},c=function(e,t){var s=t.getCenter(),n=t.radius,i=new RenderJs.Vector(e.pos2.x-e.pos.x,e.pos2.y-e.pos.y),r=new RenderJs.Vector(e.pos.x-s.x,e.pos.y-s.y),a=i.dot(i),o=2*r.dot(i),t=r.dot(r)-n*n,h=o*o-4*a*t;if(0>h)return!1;h=Math.sqrt(h);var c=(-o-h)/(2*a),l=(-o+h)/(2*a);return c>=0&&1>=c?!0:l>=0&&1>=l?!0:!1},l=function(e,t){var s=t.v,n=e.radius+t.radius,i=(e.pos.x-t.pos.x)*(e.pos.x-t.pos.x)+(e.pos.y-t.pos.y)*(e.pos.y-t.pos.y);if(n*n>i){{var r=Math.sqrt(i),a=n-r,o=new RenderJs.Vector(e.pos.sub(t.pos).x/r,e.pos.sub(t.pos).y/r);t.pos.sub(e.pos)}return s.add(o.scale(a/2))}return null},u=function(e,t){for(var n=e.pos.sub(t.pos),i=e.radius,r=i*i,a=t.vertices.slice(),o=a.length,h=new RenderJs.Vector(0,0),c=new RenderJs.Vector(0,0),l={overlap:Number.MAX_VALUE,overlapN:new RenderJs.Vector(0,0),overlapV:new RenderJs.Vector(0,0)},u=0;o>u;u++){var d=u===o-1?0:u+1,v=0===u?o-1:u-1,f=0,g=null;h.set(t.vertices[u]),c.set(n),c.set(c.sub(a[u])),l&&c.length2()>r&&(l.aInB=!1);var p=s(h,c);if(-1===p){h.set(t.edges[v]);var y=new RenderJs.Vector(0,0).set(n).sub(a[v]);if(p=s(h,y),1===p){var R=c.length();if(R>i)return!1;l&&(l.bInA=!1,g=c.normalize(),f=i-R)}}else if(1===p){if(h.set(t.edges[d]),c.set(n),c.set(c.sub(a[d])),p=s(h,c),-1===p){var R=c.length();if(R>i)return!1;l&&(l.bInA=!1,g=c.normalize(),f=i-R)}}else{var J=h.perp().normalize(),R=c.dot(J),x=Math.abs(R);if(R>0&&x>i)return!1;l&&(g=J,f=i-R,(R>=0||2*i>f)&&(l.bInA=!1))}g&&l&&Math.abs(f)<Math.abs(l.overlap)&&(l.overlap=f,l.overlapN=new RenderJs.Vector(0,0).set(g))}return l&&(l.a=t,l.b=e,l.overlapV=new RenderJs.Vector(0,0).set(l.overlapN).scale(l.overlap)),!0},d=function(e,t){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height};return e.AabbCollision=function(e,t){return Math.abs(e.x-t.x)<e.width+t.width&&Math.abs(e.y-t.y)<e.height+t.height?!0:!1},e.pointInObject=function(e,t){return t instanceof RenderJs.Canvas.Shapes.Rectangle?d(e,t):t instanceof RenderJs.Canvas.Shapes.Arc?r(e,t):t instanceof RenderJs.Canvas.Shapes.Polygon?n(e,t):t instanceof RenderJs.Canvas.Shapes.Line?i(e,t):!1},e.checkCollision=function(t,s,n){if(t instanceof RenderJs.Canvas.Shapes.Rectangle&&s instanceof RenderJs.Canvas.Shapes.Rectangle)return a(t,s);if(t instanceof RenderJs.Canvas.Shapes.Rectangle&&s instanceof RenderJs.Canvas.Shapes.Arc)return h(t,s);if(t instanceof RenderJs.Canvas.Shapes.Arc&&s instanceof RenderJs.Canvas.Shapes.Rectangle)return h(s,t);if(t instanceof RenderJs.Canvas.Shapes.Arc&&s instanceof RenderJs.Canvas.Shapes.Arc)return l(t,s,n);if(t instanceof RenderJs.Canvas.Shapes.Line&&s instanceof RenderJs.Canvas.Shapes.Arc)return c(t,s);if(t instanceof RenderJs.Canvas.Shapes.Arc&&s instanceof RenderJs.Canvas.Shapes.Line)return c(s,t);if(t instanceof RenderJs.Canvas.Shapes.Polygon&&s instanceof RenderJs.Canvas.Shapes.Polygon){for(var i=0;i<t.subPolys.length;i++)for(var r=0;r<s.subPolys.length;r++){var o=e.polygonCollision(t.subPolys[i],s.subPolys[r],n);if(o.intersect||o.willIntersect)return o}return null}return t instanceof RenderJs.Canvas.Shapes.Arc&&s instanceof RenderJs.Canvas.Shapes.Polygon?u(t,s,n):t instanceof RenderJs.Canvas.Shapes.Polygon&&s instanceof RenderJs.Canvas.Shapes.Arc?u(s,t,n):!1},e}(RenderJs.Physics.Collisions||{});var RenderJs=RenderJs||{};RenderJs.Physics.Collisions=function(e){e.polygonCollision=function(e,n,i){for(var r,a={intersect:!0,willIntersect:!0},o=e.edges.length,h=n.edges.length,c=1/0,l=new RenderJs.Vector,u=0,v=o+h;v>u;u++){r=o>u?e.edges[u]:n.edges[u-o];var f=new RenderJs.Vector(-r.y,r.x);f.set(f.normalize());var g=0,p=0,y=0,R=0,J=s(f,e,g,y);g=J.min,y=J.max;var x=s(f,n,p,R);p=x.min,R=x.max,t(g,y,p,R)>0&&(a.intersect=!1);var C=f.dot(i);0>C?g+=C:y+=C;var m=t(g,y,p,R);if(m>0&&(a.willIntersect=!1),!a.intersect&&!a.willIntersect)break;m=Math.abs(m),c>m&&(c=m,l=f,d=e.getCenter().sub(n.getCenter()),d.dot(l)<0&&(l=l.scale(-1)))}return a.willIntersect&&(a.minimumTranslationVector=l.scale(c)),a};var t=function(e,t,s,n){return s>e?s-t:e-n},s=function(e,t,s,n){var i=e.dot(t.vertices[0]);s=i,n=i;for(var r=0;r<t.vertices.length;r++)i=t.vertices[r].dot(e),s>i?s=i:i>n&&(n=i);return{min:s,max:n}};return e}(RenderJs.Physics.Collisions||{}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Arc=inject("Utils").base(RenderJs.Canvas.Object).class(function(e,t){"use strict";this.base(t),t=t||{},t.width=t.height=2*t.radius,2*t.radius,this.radius=t.radius,this.sAngle=e.convertToRad(t.sAngle||0),this.eAngle=e.convertToRad(t.eAngle||360),this.color=t.color,this.fillColor=t.fillColor,this.lineWidth=t.lineWidth||1,this.getCenter=function(){return new RenderJs.Vector(this.pos.x+this.width/2,this.pos.y+this.height/2)},this.pointIntersect=function(e){var t=this.getCenter();return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(this.width/2,2)},this.draw=function(e){0!==this.angle&&(e.save(),this.rotateShape(e)),e.beginPath(),e.lineWidth=this.lineWidth,e.strokeStyle=this.color,e.fillStyle=this.fillColor,e.arc(this.pos.x+this.width/2,this.pos.y+this.height/2,this.width/2,this.sAngle,this.eAngle),this.color&&e.stroke(),this.fillColor&&e.fill(),e.closePath(),0!==this.angle&&e.restore()}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Image=inject("Utils").base(RenderJs.Canvas.Object).class(function(e,t){this.base(t);var s=document.createElement("img");s.src=t.url,s.onload=function(){o.width=s.width,o.height=s.height,n=!0};var n=!1,i=t.blurRadius||0,r=void 0==t.cache?!0:t.cache,a=null,o=this;this.draw=function(e){if(n){if(!a)for(var t=0;t<this.filters.length;t++)switch(this.filters[t]){case RenderJs.Canvas.Filters.Blur:a=RenderJs.Canvas.Filters.Blur(s,i)}a?e.putImageData(a,this.pos.x,this.pos.y):e.drawImage(s,this.pos.x,this.pos.y),r||(a=null)}}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Line=inject().base(RenderJs.Canvas.Object).class(function(e){this.base({x:e.x1,y:e.y1,width:Math.abs(e.x2-e.x1),height:Math.abs(e.y2-e.y1)}),this.color="#000",this.lineWidth=1,this.pos2=new RenderJs.Vector(e.x2,e.y2),this.color=e.color,this.lineWidth=e.lineWidth||1,this.draw=function(e,t,s){var n=this.pos.sub(s),i=this.pos2.sub(s);e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(i.x,i.y),e.closePath(),e.lineWidth=this.lineWidth,e.strokeStyle=this.color,e.stroke()}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Polygon=inject("Utils").base(RenderJs.Canvas.Object).class(function(e,t){this.base(t),this.color=t.color||"#000",this.lineWidth=t.lineWidth||1,this.vertices=t.points||[],this.subPolys=[],this.edges=[],this.rEdges=[],this.buildEdges(),this.decompose=function(e,t,s,n,i,r){i=i||100,r=r||0,n=n||25,e="undefined"!=typeof e?e:[],t=t||[],s=s||[];var a=new RenderJs.Vector(0,0),o=new RenderJs.Vector(0,0),h=new RenderJs.Vector(0,0),c=0,l=0,u=0,d=0,v=0,f=0,g=0,p=new RenderJs.Canvas.Shapes.Polygon,y=new RenderJs.Canvas.Shapes.Polygon,R=this,J=this.vertices;if(J.length<3)return e;if(r++,r>i)return console.warn("quickDecomp: max level ("+i+") reached."),e;for(var x=0;x<this.vertices.length;++x)if(R.isReflex(x)){t.push(R.vertices[x]),c=l=Number.MAX_VALUE;for(var C=0;C<this.vertices.length;++C)RenderJs.Vector.left(R.at(x-1),R.at(x),R.at(C))&&RenderJs.Vector.rightOn(R.at(x-1),R.at(x),R.at(C-1))&&(h=this.getIntersectionPoint(R.at(x-1),R.at(x),R.at(C),R.at(C-1)),RenderJs.Vector.right(R.at(x+1),R.at(x),h)&&(u=RenderJs.Vector.sqdist(R.vertices[x],h),l>u&&(l=u,o=h,f=C))),RenderJs.Vector.left(R.at(x+1),R.at(x),R.at(C+1))&&RenderJs.Vector.rightOn(R.at(x+1),R.at(x),R.at(C))&&(h=this.getIntersectionPoint(R.at(x+1),R.at(x),R.at(C),R.at(C+1)),RenderJs.Vector.left(R.at(x-1),R.at(x),h)&&(u=RenderJs.Vector.sqdist(R.vertices[x],h),c>u&&(c=u,a=h,v=C)));if(f==(v+1)%this.vertices.length)h.x=(o.x+a.x)/2,h.y=(o.y+a.y)/2,s.push(h),v>x?(p.append(R,x,v+1),p.vertices.push(h),y.vertices.push(h),0!=f&&y.append(R,f,R.vertices.length),y.append(R,0,x+1)):(0!=x&&p.append(R,x,R.vertices.length),p.append(R,0,v+1),p.vertices.push(h),y.vertices.push(h),y.append(R,f,x+1));else{if(f>v&&(v+=this.vertices.length),d=Number.MAX_VALUE,f>v)return e;for(var C=f;v>=C;++C)RenderJs.Vector.leftOn(R.at(x-1),R.at(x),R.at(C))&&RenderJs.Vector.rightOn(R.at(x+1),R.at(x),R.at(C))&&(u=RenderJs.Vector.sqdist(R.at(x),R.at(C)),d>u&&(d=u,g=C%this.vertices.length));g>x?(p.append(R,x,g+1),0!==g&&y.append(R,g,J.length),y.append(R,0,x+1)):(0!==x&&p.append(R,x,J.length),p.append(R,0,g+1),y.append(R,g,x+1))}p.vertices.length<y.vertices.length?(p.decompose(e,t,s,n,i,r),y.decompose(e,t,s,n,i,r)):(y.decompose(e,t,s,n,i,r),p.decompose(e,t,s,n,i,r));for(var m=0;m<e.length;m++)e[m].buildEdges();return e}return e.push(this),e},this.append=function(e,t,s){if("undefined"==typeof t)throw new Error("From is not given!");if("undefined"==typeof s)throw new Error("To is not given!");if(t>s-1)throw new Error("lol1");if(s>e.vertices.length)throw new Error("lol2");if(0>t)throw new Error("lol3");for(var n=t;s>n;n++)this.vertices.push(e.vertices[n])},this.at=function(e){var t=this.vertices,s=t.length;return t[0>e?e%s+s:e%s]},this.first=function(){return this.vertices[0]},this.last=function(){return this.vertices[this.vertices.length-1]},this.isSimple=function(){for(var e=this.vertices,t=0;t<e.length-1;t++)for(var s=0;t-1>s;s++)if(this.segmentsIntersect(e[t],e[t+1],e[s],e[s+1]))return!1;for(var t=1;t<e.length-2;t++)if(this.segmentsIntersect(e[0],e[e.length-1],e[t],e[t+1]))return!1;return!0},this.getIntersectionPoint=function(e,t,s,n,i){i=i||0;var r=t.y-e.y,a=e.x-t.x,o=r*e.x+a*e.y,h=n.y-s.y,c=s.x-n.x,l=h*s.x+c*s.y,u=r*c-h*a;return Scalar.eq(u,0,i)?RenderJs.Vector.clone(0,0):RenderJs.Vector.clone((c*o-a*l)/u,(r*l-h*o)/u)},this.isReflex=function(e){return RenderJs.Vector.right(this.at(e-1),this.at(e),this.at(e+1))},this.makeCCW=function(){for(var e=0,t=this.vertices,s=1;s<this.vertices.length;++s)(t[s].y<t[e].y||t[s].y==t[e].y&&t[s].x>t[e].x)&&(e=s);RenderJs.Vector.left(this.at(e-1),this.at(e),this.at(e+1))||this.reverse()},this.reverse=function(){for(var e=[],t=0,s=this.vertices.length;t!==s;t++)e.push(this.vertices.pop());this.vertices=e},this.segmentsIntersect=function(e,t,s,n){var i=t.x-e.x,r=t.y-e.y,a=n.x-s.x,o=n.y-s.y;if(a*r-o*i==0)return!1;var h=(i*(s.y-e.y)+r*(e.x-s.x))/(a*r-o*i),c=(a*(e.y-s.y)+o*(s.x-e.x))/(o*i-a*r);return h>=0&&1>=h&&c>=0&&1>=c},this.buildEdges=function(){var e,t;this.edges=[],this.rEdges=[];for(var s=0;s<this.vertices.length;s++)e=this.vertices[s],t=s+1>=this.vertices.length?this.vertices[0]:this.vertices[s+1],this.edges.push(t.sub(e)),this.rEdges.push({p1:new RenderJs.Vector(e.x,e.y),p2:new RenderJs.Vector(t.x,t.y)})},this.getCenter=function(){for(var e=0,t=0,s=0;s<this.vertices.length;s++)e+=this.vertices[s].x,t+=this.vertices[s].y;return new RenderJs.Vector(e/this.vertices.length,t/this.vertices.length)},this.offset=function(){var e=2===arguments.length?new RenderJs.Vector(arguments[0],arguments[1]):arguments[0];this.pos.set(this.pos.add(e));for(var t=0;t<this.vertices.length;t++){var s=this.vertices[t];this.vertices[t].set(s.add(e))}this.subPolys=this.decompose()},this.toString=function(){for(var e="",t=0;t<this.vertices.length;t++)""!=e&&(e+=" "),e+="{"+this.vertices[t].toString(!0)+"}";return e},this.draw=function(e){for(var t=["indianred","yellow","green"],s=0;s<this.subPolys.length;s++){var n=this.subPolys[s].vertices;e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;i++)e.lineTo(n[i].x,n[i].y);e.closePath(),e.lineWidth=this.lineWidth,e.strokeStyle=this.color,e.fillStyle=t[s],e.fill(),e.stroke()}}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Rectangle=inject("Utils").base(RenderJs.Canvas.Object).class(function(e,t){this.base(t),this.color=t.color,this.fillColor=t.fillColor,this.lineWidth=t.lineWidth||1,this.draw=function(e){this.color&&e.strokeRect(this.pos.x,this.pos.y,this.width,this.height),this.fillColor&&e.fillRect(this.pos.x,this.pos.y,this.width,this.height),e.lineWidth=this.lineWidth,e.strokeStyle=this.color,e.fillStyle=this.fillColor}}),registerNamespace("RenderJs.Canvas.Shapes"),RenderJs.Canvas.Shapes.Sprite=inject("Utils").base(RenderJs.Canvas.Object).class(function(e,t){this.base(t);var s=this,n=document.createElement("img");n.onload=function(){s.width=n.width,s.height=n.height,a=!0},n.src=t.url;var i,r,a=!1,o=0,h=t.frameCount,c=!1,l=!1,u=t.defAnimation,d=t.animations,v=function(e,t){o=0,c=!0,l=t,d[e]&&(r=i,i=d[e])};this.start=function(){v(u,!0)},this.setAnimation=function(e,t){v(e,t)},this.pointIntersect=function(){return!1},this.getRect=function(){var e=d[u][0];return{x:this.pos.x,y:this.pos.y,width:e[2],height:e[3]}},this.rotateShape=function(t,s){if(0!==this.angle){var n=d[u][0],i=new RenderJs.Vector(s.x+n[2]/2,s.y+n[3]/2);t.translate(i.x,i.y),t.rotate(e.convertToRad(this.angle)),t.translate(-i.x,-i.y)}},this.draw=function(e,t,s){if(a&&c){var r=this.pos.sub(s);0!==this.angle&&(e.save(),this.rotateShape(e,r));var d=i[o];e.drawImage(n,d[0],d[1],d[2],d[3],r.x,r.y,d[2],d[3]),Math.floor(t.time)%h===0&&(o=o>=i.length-1?0:o+1,0!==o||l||v(u,!0)),0!==this.angle&&e.restore()}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXNcXHZlY3Rvci5qcyIsImdlbmVyYWwuanMiLCJncmFwaGljcy5qcyIsIm51bWJlci5qcyIsImxpbmtlZGxpc3QuanMiLCJtYWluLmpzIiwibW9kdWxlc1xcYW5pbWF0aW9uLmpzIiwibW9kdWxlc1xcZmlsdGVycy5qcyIsIm1vZHVsZXNcXGxheWVyLmpzIiwibW9kdWxlc1xcb2JqZWN0LmpzIiwibW9kdWxlc1xcc3BhY2UuanMiLCJtb2R1bGVzXFxzdGFnZS5qcyIsIm1vZHVsZXNcXHRyYW5zaXRpb24uanMiLCJtb2R1bGVzXFxnYW1lXFxwaHlzaWNzLmpzIiwibW9kdWxlc1xcZ2FtZVxccG9seWdvbkNvbGxpc2lvbi5qcyIsIm1vZHVsZXNcXHNoYXBlc1xcYXJjLmpzIiwibW9kdWxlc1xcc2hhcGVzXFxpbWFnZS5qcyIsIm1vZHVsZXNcXHNoYXBlc1xcbGluZS5qcyIsIm1vZHVsZXNcXHNoYXBlc1xccG9seWdvbi5qcyIsIm1vZHVsZXNcXHNoYXBlc1xccmVjdGFuZ2xlLmpzIiwibW9kdWxlc1xcc2hhcGVzXFxzcHJpdGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBZ0lBLFFBQUEsV0NoSUEsR0FBQSxPQUFBLFNBQUEsR0E0QkEsTUExQkEsR0FBQSxRQUFBLFdBQ0EsTUFBQSx1Q0FBQSxRQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEtBQUEsU0FBQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBQ0EsT0FBQSxHQUFBLFNBQUEsT0FJQSxFQUFBLFNBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLGNBQUEsSUFFQSxPQURBLEdBQUEsS0FBQSxHQUVBLFNBQUEsRUFBQSxTQUNBLEtBQUEsRUFBQSxLQUNBLFNBQUEsRUFBQSxTQUNBLE9BQUEsRUFBQSxPQUNBLEtBQUEsRUFBQSxLQUNBLEtBQUEsRUFBQSxPQUlBLEVBQUEsTUFBQSxTQUFBLEdBRUEsSUFEQSxHQUFBLEdBQUEsR0FBQSxNQUNBLEdBQUEsTUFBQSxFQUFBLElBQUEsTUFJQSxHQUNBLFdDN0JBLE1BQUEsU0FBQSxHQUNBLFlBRUEsR0FBQSxhQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsS0FBQSxHQUFBLEtBRUEsSUFBQSxHQUFBLEVBQUEsR0FBQSxNQUFBLENBMkNBLE9BekNBLEdBQUEsWUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSx1QkFDQSxRQUNBLEVBQUEsRUFBQSxRQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsUUFBQSxFQUFBLE1BSUEsRUFBQSxVQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLGNBQUEsU0FHQSxPQUZBLEdBQUEsTUFBQSxFQUNBLEVBQUEsT0FBQSxFQUNBLEdBR0EsRUFBQSxVQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsQ0FDQSxJQUFBLEVBQUEsV0FBQSxDQUNBLEVBQUEsQ0FDQSxLQUNBLEVBQUEsRUFBQSxXQUFBLE1BQ0EsTUFBQSxLQVFBLE1BTEEsS0FDQSxFQUFBLE1BQUEsVUFBQSxFQUFBLE1BQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxXQUFBLE1BQ0EsRUFBQSxVQUFBLEVBQUEsRUFBQSxJQUVBLEVBQUEsYUFBQSxFQUFBLEVBQUEsRUFBQSxNQUFBLEVBQUEsU0FHQSxFQUFBLE9BQUEsV0FDQSxHQUFBLEdBQUEsR0FBQSxNQUNBLEVBQUEsS0FBQSxFQUFBLEVBSUEsT0FGQSxHQUFBLEVBRUEsR0FHQSxHQUNBLFdDbERBLE1BQUEsU0FBQSxHQUlBLE1BRkEsR0FBQSxTQUFBLFNBQUEsR0FBQSxPQUFBLE1BQUEsSUFFQSxHQUNBLFdDTEEsV0FBQSxXQUNBLFlBQ0EsSUFBQSxLQUVBLE1BQUEsT0FBQSxXQUNBLE1BQUEsR0FBQSxRQUVBLEtBQUEsTUFBQSxXQUNBLE1BQUEsR0FBQSxJQUVBLEtBQUEsS0FBQSxXQUNBLE1BQUEsR0FBQSxFQUFBLE9BQUEsSUFHQSxLQUFBLFVBQUEsU0FBQSxHQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsSUFBQSxJQUNBLEtBQUEsTUFBQSxFQUFBLElBRUEsSUFBQSxFQUFBLElBQ0EsS0FBQSxLQUFBLEVBQUEsSUFHQSxFQUFBLEdBQUEsS0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsS0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxLQUlBLEtBQUEsT0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsTUFFQSxHQUFBLE9BQUEsSUFDQSxFQUFBLEtBQUEsRUFDQSxFQUFBLEtBQUEsR0FFQSxFQUFBLEtBQUEsSUFHQSxLQUFBLGNBQUEsV0FDQSxHQUFBLEdBQUEsRUFDQSxRQUNBLFFBQUEsV0FDQSxNQUFBLEdBQUEsSUFFQSxLQUFBLFdBQ0EsTUFBQSxLQUFBLEVBQUEsT0FBQSxFQUNBLElBQUEsR0FEQSxRQUdBLEtBQUEsV0FDQSxNQUFBLEtBQUEsRUFHQSxFQUFBLEtBSEEsVUNoREEscUJBQUEsYUFBQSxTQUFBLEdBQ0Esb0JBQUEsYUFBQSxPQUFBLE1BQ0Esb0JBQUEsYUFBQSxRQUFBLE9BQ0Esb0JBQUEsYUFBQSxrQkFBQSxpQkFDQSxvQkFBQSxhQUFBLGFBQUEsWUNOQSxrQkFBQSxtQkFFQSxTQUFBLE9BQUEsVUFBQSxTQUNBLE1BQUEsU0FBQSxFQUFBLEdBRUEsR0FDQSxHQURBLEVBQUEsRUFFQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFFQSxFQUFBLFNBQUEsR0FDQSxHQUNBLFVBQUEsRUFDQSxTQUFBLEVBQ0EsS0FBQSxFQUFBLElBQUEsSUFFQSxHQUFBLElBQUEsRUFHQSxNQUFBLE1BQUEsV0FDQSxJQUdBLEdBQUEsRUFDQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsR0FBQSxVQUFBLEtBR0EsS0FBQSxNQUFBLFdBQ0EsRUFBQSxHQUdBLEtBQUEsTUFBQSxXQUNBLEdBQUEsR0FDQSxJQUdBLEdBQUEsRUFDQSxHQUFBLEdBR0EsS0FBQSxLQUFBLFdBQ0EsR0FBQSxJQUNBLEtBQUEsUUFDQSxLQUVBLEdBQUEsRUFDQSxHQUFBLEtDaERBLGtCQUFBLDJCQUVBLFNBQUEsT0FBQSxRQUFBLFVBQUEsU0FBQSxFQUFBLEVBQUEsR0FjQSxJQUFBLEdBYkEsR0FBQSxLQUFBLE1BQUEsS0FBQSxLQUFBLEVBQUEsU0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLFVBQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsT0FFQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsTUFBQSxVQUFBLEVBQUEsR0FBQSxXQUFBLE1BQUEsZ0JBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxLQUVBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsQ0FPQSxJQUFBLEdBTkEsR0FBQSxFQUNBLEVBQUEsRUFDQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBR0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLENBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsSUFBQSxFQUFBLEdBQUEsRUFDQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUNBLEdBQUEsRUFBQSxFQUFBLEdBQUEsR0FJQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLElBQUEsR0FHQSxNQUFBLElBR0EsU0FBQSxPQUFBLFFBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLGdCQUFBLEVBQUEsSUFHQSxTQUFBLE9BQUEsUUFBQSxVQUFBLFNBQUEsR0FHQSxJQUFBLEdBRkEsR0FBQSxNQUFBLFVBQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFFQSxNQUFBLElBR0EsU0FBQSxPQUFBLFFBQUEsV0FBQSxTQUFBLEVBQUEsR0FHQSxJQUFBLEdBRkEsR0FBQSxNQUFBLFVBQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsR0FBQSxFQUNBLEVBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxJQUFBLEVBQ0EsRUFBQSxFQUFBLElBQUEsQ0FFQSxPQUFBLElBR0EsU0FBQSxPQUFBLFFBQUEsVUFBQSxTQUFBLEVBQUEsR0FHQSxJQUFBLEdBRkEsR0FBQSxNQUFBLFVBQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsR0FBQSxFQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFFQSxNQUFBLElDdEZBLGtCQUFBLG1CQUVBLFNBQUEsT0FBQSxNQUFBLE9BQUEsUUFBQSxrQkFBQSxVQUNBLE1BQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxLQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsRUFBQSxHQUFBLEdBQ0EsRUFBQSxDQUVBLE1BQUEsT0FBQSxTQUFBLGNBQUEsVUFDQSxTQUFBLGVBQUEsR0FBQSxZQUFBLEtBQUEsUUFDQSxLQUFBLElBQUEsS0FBQSxPQUFBLFdBQUEsTUFDQSxLQUFBLE9BQUEsTUFBQSxFQUNBLEtBQUEsT0FBQSxPQUFBLEVBQ0EsS0FBQSxPQUFBLEVBRUEsS0FBQSxLQUFBLEtBQ0EsS0FBQSxLQUFBLEtBR0EsS0FBQSxVQUdBLElBQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsTUFBQSxZQUFBLEVBQUEsT0FBQSxHQUNBLEVBQUEsUUFBQSxTQUFBLE9BQUEsT0FBQSxPQUFBLEVBQUEsR0FDQSxLQUFBLEdBQUEsR0FBQSxLQUFBLFFBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLEdBQUEsU0FBQSxRQUFBLFdBQUEsY0FBQSxFQUFBLEtBQUEsUUFBQSxJQUVBLE1BREEsTUFBQSxRQUFBLEdBQUEsUUFBQSxTQUFBLE9BQUEsT0FBQSxNQUFBLElBQ0EsQ0FHQSxNQUFBLE1BQ0EsRUFBQSxLQUFBLEtBQUEsUUFBQSxRQUFBLFFBQUEsSUFJQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxNQUFBLFlBQUEsRUFBQSxPQUFBLEdBQ0EsRUFBQSxRQUFBLFNBQUEsT0FBQSxPQUFBLFdBQUEsRUFBQSxHQUNBLEtBQUEsR0FBQSxHQUFBLEtBQUEsUUFBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsR0FBQSxTQUFBLFFBQUEsV0FBQSxjQUFBLEVBQUEsS0FBQSxRQUFBLElBRUEsTUFEQSxNQUFBLFFBQUEsR0FBQSxRQUFBLFNBQUEsT0FBQSxPQUFBLFdBQUEsRUFBQSxLQUNBLENBR0EsTUFBQSxNQUNBLEVBQUEsS0FBQSxLQUFBLFFBQUEsUUFBQSxZQUFBLElBSUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsTUFBQSxZQUFBLEVBQUEsT0FBQSxHQUNBLEVBQUEsUUFBQSxTQUFBLE9BQUEsT0FBQSxZQUFBLEVBQUEsR0FDQSxLQUFBLEdBQUEsR0FBQSxLQUFBLFFBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLEdBQUEsU0FBQSxRQUFBLFdBQUEsY0FBQSxFQUFBLEtBQUEsUUFBQSxJQUVBLE1BREEsTUFBQSxRQUFBLEdBQUEsUUFBQSxTQUFBLE9BQUEsT0FBQSxZQUFBLEVBQUEsS0FDQSxDQUdBLE1BQUEsTUFDQSxFQUFBLEtBQUEsS0FBQSxRQUFBLFFBQUEsYUFBQSxJQUlBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLE1BQUEsWUFBQSxFQUFBLE9BQUEsR0FDQSxFQUFBLFFBQUEsU0FBQSxPQUFBLE9BQUEsWUFBQSxFQUFBLEdBQ0EsS0FBQSxHQUFBLEdBQUEsS0FBQSxRQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsSUFDQSxHQUFBLFNBQUEsUUFBQSxXQUFBLGNBQUEsRUFBQSxLQUFBLFFBQUEsSUFFQSxNQURBLE1BQUEsUUFBQSxHQUFBLFFBQUEsU0FBQSxPQUFBLE9BQUEsWUFBQSxFQUFBLEtBQ0EsQ0FHQSxNQUFBLE1BQ0EsRUFBQSxLQUFBLEtBQUEsUUFBQSxRQUFBLGFBQUEsSUFJQSxFQUFBLFNBQUEsR0FDQSxFQUFBLFFBQUEsU0FBQSxPQUFBLE9BQUEsUUFBQSxJQUdBLEVBQUEsU0FBQSxHQUNBLEVBQUEsUUFBQSxTQUFBLE9BQUEsT0FBQSxNQUFBLElBR0EsRUFBQSxTQUFBLEdBQ0EsRUFBQSxRQUFBLFNBQUEsT0FBQSxPQUFBLFNBQUEsR0FJQSxHQUFBLEtBQUEsUUFBQSxHQUFBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxLQUdBLEVBQUEsS0FBQSxRQUFBLEdBQUEsWUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEtBR0EsRUFBQSxLQUFBLFFBQUEsR0FBQSxhQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLEVBQUEsS0FHQSxFQUFBLEtBQUEsUUFBQSxHQUFBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxLQUdBLEVBQUEsVUFBQSxHQUFBLFVBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLEtBR0EsRUFBQSxVQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsS0FHQSxFQUFBLFVBQUEsR0FBQSxXQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxLQUdBLEtBQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLFVBQUEsT0FBQSxPQUFBLEdBR0EsRUFBQSxVQUFBLEVBQUEsR0FIQSxRQU9BLEtBQUEsVUFBQSxTQUFBLEdBQ0EsS0FBQSxZQUFBLFVBQUEsT0FBQSxRQUNBLEtBQUEsSUFBQSxPQUFBLGlFQUVBLEdBQUEsTUFBQSxLQUNBLEtBQUEsUUFBQSxLQUFBLElBR0EsS0FBQSxhQUFBLFNBQUEsR0FDQSxLQUFBLEtBQUEsU0FBQSxPQUFBLFNBQUEsR0FDQSxNQUFBLEtBQUEsSUFFQSxFQUFBLFVBQ0EsR0FBQSxHQUdBLEtBQUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLE9BQUEsTUFBQSxFQUNBLEtBQUEsT0FBQSxPQUFBLEVBQ0EsR0FBQSxHQUlBLEtBQUEsV0FBQSxXQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxLQUFBLFFBQUEsT0FBQSxFQUFBLEVBQUEsSUFDQSxHQUFBLEtBQUEsUUFBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLE9BQ0EsT0FBQSxDQUdBLFFBQUEsR0FJQSxLQUFBLFlBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxLQUFBLEdBQUEsRUFBQSxlQUFBLFlBQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxTQUFBLElBQUEsS0FBQSxRQUFBLE9BQUEsQ0FJQSxLQUFBLElBQUEsVUFBQSxFQUFBLEVBQUEsS0FBQSxPQUFBLE1BQUEsS0FBQSxPQUFBLE9BRUEsSUFBQSxHQUFBLEtBQUEsTUFBQSxJQUFBLEVBRUEsR0FBQSxRQUFBLFVBQUEsRUFFQSxLQUFBLEdBREEsSUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEtBQUEsUUFBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsUUFBQSxHQUFBLFNBQ0EsR0FBQSxHQUVBLEtBQUEsUUFBQSxHQUFBLEtBQUEsS0FBQSxLQUNBLFVBQUEsRUFDQSxTQUFBLEVBQ0EsS0FBQSxFQUFBLEdBQ0EsRUFFQSxLQUNBLEdBQUEsR0FDQSxJQUNBLEdBQUEsR0FFQSxHQUFBLE1DN0xBLGtCQUFBLDBCQUVBLFNBQUEsT0FBQSxRQUNBLFFBQUEsVUFDQSxNQUFBLFFBQ0EsUUFBQSxVQUNBLE1BQUEsUUFDQSxTQUFBLFdBQ0EsVUFBQSxZQUNBLFdBQUEsYUFDQSxXQUFBLGFBQ0EsVUFBQSxZQUNBLGNBQUEsaUJBTUEsU0FBQSxPQUFBLE9BQUEsT0FBQSxrQkFBQSxTQUFBLFNBQ0EsTUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsS0FBQSxXQUFBLEdBQUEsR0FFQSxFQUFBLE1BQ0EsS0FBQSxHQUFBLEVBQUEsVUFDQSxLQUFBLElBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxLQUFBLE1BQUEsRUFBQSxPQUFBLEVBQ0EsS0FBQSxPQUFBLEVBQUEsUUFBQSxFQUNBLEtBQUEsTUFBQSxFQUFBLE9BQUEsRUFDQSxLQUFBLE9BQUEsRUFBQSxPQUNBLEtBQUEsT0FBQSxFQUFBLE9BQ0EsS0FBQSxXQUFBLEVBQUEsV0FDQSxLQUFBLFVBQUEsRUFBQSxZQUFBLEVBQ0EsS0FBQSxXQUNBLEtBQUEsTUFBQSxLQUNBLEtBQUEsUUFBQSxFQUtBLEtBQUEsVUFBQSxXQUNBLE1BQUEsSUFBQSxVQUFBLE9BQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxNQUFBLEVBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxPQUFBLElBS0EsS0FBQSxnQkFBQSxXQUNBLEdBQUEsR0FBQSxLQUFBLEdBQ0EsUUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxNQUFBLEtBQUEsTUFBQSxPQUFBLEtBQUEsU0FLQSxLQUFBLFdBQUEsU0FBQSxHQUNBLEtBQUEsUUFBQSxHQUdBLEtBQUEsZUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsU0FBQSxPQUFBLE1BQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxJQUFBLEdBQ0EsRUFBQSxLQUFBLElBQUEsSUFBQSxHQUFBLFVBQUEsT0FBQSxLQUFBLE1BQUEsR0FBQSxLQUFBLE1BQUEsSUFDQSxNQUFBLElBQUEsR0FDQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLElBQ0EsS0FBQSxRQUFBLFNBQUEsT0FBQSxPQUFBLGNBQUEsT0FTQSxLQUFBLFlBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxLQUFBLE1BQUEsQ0FHQSxHQUFBLEdBQUEsS0FBQSxXQUNBLEdBQUEsVUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLGFBQUEsS0FBQSxRQUNBLEVBQUEsV0FBQSxFQUFBLEdBQUEsRUFBQSxLQVNBLEtBQUEsV0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLFdBQ0EsR0FBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLEVBQUEsR0FDQSxFQUFBLFdBQUEsRUFBQSxHQUFBLEVBQUEsSUFHQSxLQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxVQUFBLE9BQUEsT0FBQSxHQUdBLEtBQUEsV0FBQSxVQUFBLEVBQUEsR0FIQSxRQU1BLEtBQUEsUUFBQSxTQUFBLEVBQUEsR0FDQSxTQUFBLE9BQUEsT0FBQSxJQUdBLEtBQUEsV0FBQSxRQUFBLEVBQUEsSUFHQSxLQUFBLFFBQUEsV0FDQSxLQUFBLFdBQUEsWUMxR0EsSUFBQSxVQUFBLFlBQ0EsVUFBQSxPQUFBLFNBQUEsV0FFQSxTQUFBLE9BQUEsTUFBQSxTQUFBLEdBRUEsR0FBQSxHQUFBLFNBQUEsR0FDQSxLQUFBLE1BQUEsRUFBQSxNQUVBLEdBQUEsSUNYQSxrQkFBQSxtQkFFQSxTQUFBLE9BQUEsTUFBQSxPQUFBLFFBQUEsa0JBQUEsY0FDQSxNQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxXQUFBLFdBQ0EsRUFBQSxFQUNBLEVBQUEsR0FBQSxFQUNBLE1BQUEsT0FBQSxHQUFBLEdBRUEsS0FBQSxTQUFBLEdBQUEsVUFBQSxPQUFBLElBQUEsSUFFQSxJQUFBLEdBQUEsV0FDQSxHQUFBLEdBQUEsSUFDQSxHQUFBLEVBQUEsUUFHQSxLQURBLEdBQUEsR0FBQSxLQUFBLE9BQUEsZ0JBQ0EsU0FBQSxFQUFBLFFBQ0EsRUFBQSxVQUFBLFlBQUEsRUFBQSxLQUFBLFNBR0EsdUJBQUEsV0FDQSxFQUFBLEtBQUEsS0FHQSxHQUFBLEtBQUEsTUFFQSxLQUFBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsS0FBQSxNQUFBLEVBQ0EsS0FBQSxPQUFBLEVBQ0EsU0FBQSxlQUFBLEdBQUEsTUFBQSxNQUFBLEtBQUEsTUFBQSxLQUNBLFNBQUEsZUFBQSxHQUFBLE1BQUEsT0FBQSxLQUFBLE9BQUEsSUFFQSxLQURBLEdBQUEsR0FBQSxLQUFBLE9BQUEsZ0JBQ0EsU0FBQSxFQUFBLFFBQ0EsRUFBQSxVQUFBLE9BQUEsRUFBQSxJQUlBLEtBQUEsYUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFVBQUEsZUFBQSxJQUdBLEtBQUEsWUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsVUFBQSxPQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsS0FBQSxPQUFBLEVBR0EsT0FGQSxNQUFBLE9BQUEsT0FBQSxHQUVBLEdBR0EsS0FBQSxPQUFBLEVBQUEsT0FBQSxLQUFBLEVBQUEsUUFBQSxNQ2pEQSxJQUFBLFVBQUEsWUFDQSxVQUFBLE9BQUEsU0FBQSxXQUVBLFNBQUEsT0FBQSxRQUFBLFNBQUEsT0FBQSxZQUVBLFNBQUEsT0FBQSxRQUFBLGNBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE9BQUEsR0FBQSxHQUFBLEVBQUEsS0FDQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEVBRUEsRUFBQSxLQUFBLEVBQ0EsR0FBQSxRQUFBLEdBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxFQUVBLElBQUEsS0FBQSxFQUNBLEdBQUEsUUFBQSxHQUFBLEtBQUEsTUFBQSxFQUFBLE9BQUEsRUFHQSxHQUFBLFFBQUEsR0FBQSxNQUFBLE1BQUEsRUFBQSxTQUFBLEdBSUEsU0FBQSxPQUFBLFFBQUEsYUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLFFBQUEsUUFBQSxjQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUdBLFNBQUEsT0FBQSxRQUFBLGdCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsUUFBQSxRQUFBLGFBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBR0EsR0FBQSxRQUFBLFFBQUEsY0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FJQSxTQUFBLE9BQUEsUUFBQSxPQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsR0FBQSxHQUFBLEVBQUEsR0FHQSxTQUFBLE9BQUEsUUFBQSxRQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxPQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxHQUdBLFNBQUEsT0FBQSxRQUFBLFVBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE9BQUEsR0FBQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxLQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsR0FHQSxTQUFBLE9BQUEsUUFBQSxjQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLENBQ0EsT0FBQSxLQUFBLEVBQ0EsRUFFQSxLQUFBLEdBQUEsR0FDQSxFQUFBLEdBRUEsSUFDQSxFQUFBLEdBQUEsSUFFQSxHQUFBLEVBQUEsS0FBQSxJQUFBLElBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxHQUdBLEVBQUEsR0FBQSxFQUFBLEtBQUEsSUFBQSxLQUFBLEtBQUEsRUFBQSxLQUVBLEVBQUEsS0FBQSxJQUFBLEVBQUEsSUFBQSxHQUFBLElBQUEsS0FBQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsS0FBQSxHQUFBLElBQUEsSUFHQSxTQUFBLE9BQUEsUUFBQSxlQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLENBQ0EsT0FBQSxLQUFBLEVBQ0EsRUFFQSxLQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsR0FFQSxJQUNBLEVBQUEsR0FBQSxFQUFBLE1BRUEsR0FBQSxFQUFBLEtBQUEsSUFBQSxJQUNBLEVBQUEsRUFDQSxFQUFBLEVBQUEsR0FHQSxFQUFBLEdBQUEsRUFBQSxLQUFBLElBQUEsS0FBQSxLQUFBLEVBQUEsR0FFQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEtBQUEsSUFBQSxFQUFBLElBQUEsR0FBQSxJQUFBLEtBQUEsSUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEtBQUEsR0FBQSxHQUFBLEVBRUEsRUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLEdBQUEsSUFBQSxLQUFBLElBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxLQUFBLEdBQUEsR0FBQSxHQUFBLEVBQUEsSUFHQSxTQUFBLE9BQUEsUUFBQSxpQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxDQUNBLE9BQUEsS0FBQSxFQUNBLEVBRUEsS0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEdBRUEsSUFDQSxFQUFBLEdBQUEsRUFBQSxNQUVBLEdBQUEsRUFBQSxLQUFBLElBQUEsSUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEdBR0EsRUFBQSxHQUFBLEVBQUEsS0FBQSxJQUFBLEtBQUEsS0FBQSxFQUFBLEdBRUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxJQUFBLEdBQUEsSUFBQSxLQUFBLElBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxLQUFBLEdBQUEsR0FBQSxFQUVBLEVBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxHQUFBLElBQUEsS0FBQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsS0FBQSxHQUFBLEdBQUEsR0FBQSxFQUFBLElBS0EsU0FBQSxPQUFBLFdBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUVBLEdBQUEsQ0FFQSxNQUFBLFNBQUEsSUFBQSxFQUFBLFVBQUEsSUFFQSxLQUFBLE1BQUEsRUFBQSxNQUVBLEtBQUEsTUFBQSxFQUFBLFVBQ0EsS0FBQSxZQUNBLEtBQUEsR0FBQSxLQUFBLEdBQUEsTUFDQSxLQUFBLFVBQUEsR0FBQSxLQUFBLE1BQUEsRUFHQSxNQUFBLE9BQUEsRUFBQSxRQUFBLFNBQUEsT0FBQSxRQUFBLFNBRUEsSUFBQSxHQUFBLEdBQUEsVUFBQSxPQUFBLFVBQUEsU0FBQSxHQUNBLEVBQUEsTUFBQSxFQUFBLFVBQ0EsRUFBQSxNQUVBLEtBQUEsR0FBQSxLQUFBLEdBQUEsTUFFQSxFQUFBLE1BQUEsR0FEQSxFQUNBLEVBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxVQUFBLEdBQUEsRUFBQSxNQUFBLEdBQUEsR0FBQSxFQUFBLE1BQUEsR0FBQSxFQUFBLFVBR0EsRUFBQSxPQUFBLEVBQUEsS0FBQSxFQUFBLFVBQUEsR0FBQSxFQUFBLE1BQUEsR0FBQSxFQUFBLFdBSUEsS0FBQSxNQUFBLE1BRUEsTUFBQSxLQUFBLFdBQ0EsRUFBQSxTQUdBLEtBQUEsTUFBQSxXQUNBLEVBQUEsU0FHQSxLQUFBLEtBQUEsV0FDQSxFQUFBLFFBR0EsS0FBQSxRQUFBLFdBQ0EsR0FBQSxFQUNBLEVBQUEsU1p4S0EsSUFBQSxVQUFBLFlBRUEsVUFBQSxPQUFBLFNBQUEsRUFBQSxHQUNBLEtBQUEsRUFBQSxHQUFBLEVBQ0EsS0FBQSxFQUFBLEdBQUEsRUFFQSxLQUFBLElBQUEsU0FBQSxHQUdBLE1BRkEsTUFBQSxFQUFBLEVBQUEsRUFDQSxLQUFBLEVBQUEsRUFBQSxFQUNBLE1BR0EsS0FBQSxjQUFBLFdBQ0EsTUFBQSxNQUFBLElBQUEsS0FBQSxFQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsRUFBQSxJQUdBLEtBQUEsT0FBQSxXQUNBLE1BQUEsTUFBQSxLQUFBLEtBQUEsa0JBR0EsS0FBQSxRQUFBLFdBQ0EsTUFBQSxNQUFBLElBQUEsT0FHQSxLQUFBLEtBQUEsV0FDQSxNQUFBLElBQUEsVUFBQSxPQUFBLEtBQUEsR0FBQSxLQUFBLElBR0EsS0FBQSxNQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsVUFBQSxPQUFBLEtBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxJQUdBLEtBQUEsSUFBQSxTQUFBLEdBQ0EsTUFBQSxhQUFBLFVBQUEsT0FDQSxHQUFBLFVBQUEsT0FBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEdBR0EsR0FBQSxVQUFBLE9BQUEsS0FBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLElBSUEsS0FBQSxJQUFBLFNBQUEsR0FDQSxNQUFBLGFBQUEsVUFBQSxPQUNBLEdBQUEsVUFBQSxPQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsR0FHQSxHQUFBLFVBQUEsT0FBQSxLQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsSUFJQSxLQUFBLElBQUEsU0FBQSxHQUNBLE1BQUEsTUFBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxHQUdBLEtBQUEsS0FBQSxTQUFBLEdBQ0EsTUFBQSxNQUFBLElBQUEsR0FBQSxVQUdBLEtBQUEsVUFBQSxXQUNBLE1BQUEsTUFBQSxNQUFBLEVBQUEsS0FBQSxXQUdBLEtBQUEsTUFBQSxTQUFBLEdBQ0EsTUFBQSxNQUFBLElBQUEsSUFBQSxLQUFBLFNBQUEsRUFBQSxXQUdBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsSUFBQSxFQUFBLEtBQUEsU0FDQSxPQUFBLElBR0EsS0FBQSxPQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxFQUNBLEVBQUEsS0FBQSxDQUNBLE1BQUEsRUFBQSxFQUFBLEtBQUEsSUFBQSxNQUFBLGFBQUEsSUFBQSxFQUFBLEtBQUEsSUFBQSxNQUFBLGFBQUEsSUFDQSxLQUFBLEVBQUEsRUFBQSxLQUFBLElBQUEsTUFBQSxhQUFBLElBQUEsRUFBQSxLQUFBLElBQUEsTUFBQSxhQUFBLEtBR0EsS0FBQSxTQUFBLFNBQUEsR0FDQSxNQUFBLEdBQ0EsSUFBQSxLQUFBLE1BQUEsS0FBQSxHQUFBLEtBQUEsS0FBQSxNQUFBLEtBQUEsR0FBQSxJQUdBLElBQUEsS0FBQSxFQUFBLEtBQUEsS0FBQSxFQUFBLE1BTUEsU0FBQSxPQUFBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxJQUFBLFVBQUEsT0FBQSxFQUFBLElBWUEsU0FBQSxPQUFBLEtBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxPQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLElBR0EsU0FBQSxPQUFBLEtBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLFVBQUEsT0FBQSxLQUFBLEVBQUEsRUFBQSxHQUFBLEdBR0EsU0FBQSxPQUFBLE9BQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLFVBQUEsT0FBQSxLQUFBLEVBQUEsRUFBQSxJQUFBLEdBR0EsU0FBQSxPQUFBLE1BQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLFVBQUEsT0FBQSxLQUFBLEVBQUEsRUFBQSxHQUFBLEdBR0EsU0FBQSxPQUFBLFFBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLFVBQUEsT0FBQSxLQUFBLEVBQUEsRUFBQSxJQUFBLEdBR0EsU0FBQSxPQUFBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxDQUNBLE9BQUEsR0FBQSxFQUFBLEVBQUEsR0FlQSxPQUFBLEdBQUEsU0FBQSxFQUFBLEVBQUEsR0FFQSxNQURBLEdBQUEsR0FBQSxFQUNBLEtBQUEsSUFBQSxFQUFBLEdBQUEsRWE5SUEsSUFBQSxVQUFBLFlBQ0EsVUFBQSxRQUFBLFNBQUEsWUFFQSxTQUFBLFFBQUEsV0FBQSxTQUFBLEdBRUEsR0FBQSxHQUFBLFNBQUEsRUFBQSxHQUNBLDhGQUNBLElBR0EsR0FIQSxFQUFBLEtBQ0EsRUFBQSxPQUFBLFVBQ0EsRUFBQSxPQUFBLFVBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUVBLEdBQUEsRUFBQSxFQUFBLElBQ0EsRUFBQSxJQUFBLEdBQ0EsRUFBQSxJQUFBLEtBRUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxLQUNBLEVBQUEsR0FBQSxFQUVBLElBQUEsSUFBQSxDQUVBLE9BQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsSUFDQSxHQUVBLEVBQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBR0EsRUFEQSxLQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUdBLEVBREEsS0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFDQSxFQUFBLEdBQUEsR0FHQSxJQUdBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsVUFDQSxFQUFBLEVBQUEsSUFBQSxFQUdBLE9BQUEsR0FBQSxFQUNBLEdBSUEsRUFBQSxFQUNBLEVBSUEsR0FJQSxFQUFBLFNBQUEsRUFBQSxHQUVBLElBQUEsR0FEQSxJQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLE9BQUEsSUFDQSxFQUFBLEVBQUEsRUFBQSxPQUFBLE1BQ0EsR0FBQSxFQUVBLE9BQUEsSUFHQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLElBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLElBQUEsRUFFQSxPQUFBLEdBQUEsRUFBQSxFQUFBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsSUFHQSxFQUFBLFNBQUEsRUFBQSxHQUdBLE1BRkEsR0FBQSxFQUFBLFlBRUEsS0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLE1BQUEsRUFBQSxJQUdBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsTUFDQSxJQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsRUFDQSxPQUFBLENBRUEsSUFBQSxHQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsQ0FNQSxPQUxBLElBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsR0FFQSxFQUFBLEdBQUEsRUFBQSxLQUNBLEVBQUEsR0FBQSxFQUFBLEtBQ0EsRUFBQSxHQUFBLEVBQUEsS0FDQSxFQUFBLEdBQUEsRUFBQSxJQUdBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQUEsWUFBQSxJQUNBLEVBQUEsRUFBQSxVQUFBLElBQ0EsRUFBQSxFQUFBLFlBQUEsSUFDQSxFQUFBLEVBQUEsYUFBQSxJQUNBLEVBQUEsRUFBQSxXQUFBLElBR0EsRUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxZQUNBLEVBQUEsRUFBQSxPQUNBLEVBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxJQUFBLEdBQ0EsRUFBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsRUFBQSxJQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsSUFBQSxHQUNBLEVBQUEsRUFBQSxJQUFBLEdBQUEsRUFBQSxFQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxDQUVBLElBQUEsRUFBQSxFQUVBLE9BQUEsQ0FPQSxHQUFBLEtBQUEsS0FBQSxFQUtBLElBQUEsS0FBQSxFQUFBLElBQUEsRUFBQSxHQUNBLElBQUEsRUFBQSxJQUFBLEVBQUEsRUFVQSxPQUFBLElBQUEsR0FBQSxHQUFBLEdBSUEsRUFLQSxHQUFBLEdBQUEsR0FBQSxHQUVBLEdBSUEsR0FJQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBRUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxPQUVBLEdBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxJQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxJQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxJQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxJQUFBLEVBRUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxDQUNBLENBQUEsR0FBQSxHQUFBLEtBQUEsS0FBQSxHQUVBLEVBQUEsRUFBQSxFQUNBLEVBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxJQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxFQUNBLEdBQUEsSUFBQSxJQUFBLEVBQUEsS0FHQSxNQUFBLEdBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxJQUVBLE1BQUEsT0FHQSxFQUFBLFNBQUEsRUFBQSxHQWVBLElBQUEsR0FiQSxHQUFBLEVBQUEsSUFBQSxJQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsU0FBQSxRQUNBLEVBQUEsRUFBQSxPQUNBLEVBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxHQUNBLEdBQ0EsUUFBQSxPQUFBLFVBQ0EsU0FBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEdBQ0EsU0FBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLElBR0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsSUFHQSxHQUFBLElBQUEsRUFBQSxTQUFBLElBRUEsRUFBQSxJQUFBLEdBQ0EsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEtBSUEsR0FBQSxFQUFBLFVBQUEsSUFDQSxFQUFBLE1BQUEsRUFJQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEVBRUEsSUFBQSxLQUFBLEVBQUEsQ0FFQSxFQUFBLElBQUEsRUFBQSxNQUFBLEdBRUEsSUFBQSxHQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsR0FBQSxJQUFBLEdBQUEsSUFBQSxFQUFBLEdBRUEsSUFEQSxFQUFBLEVBQUEsRUFBQSxHQUNBLElBQUEsRUFBQSxDQUVBLEdBQUEsR0FBQSxFQUFBLFFBQ0EsSUFBQSxFQUFBLEVBRUEsT0FBQSxDQUNBLEtBRUEsRUFBQSxNQUFBLEVBQ0EsRUFBQSxFQUFBLFlBQ0EsRUFBQSxFQUFBLFFBSUEsSUFBQSxJQUFBLEdBT0EsR0FMQSxFQUFBLElBQUEsRUFBQSxNQUFBLElBRUEsRUFBQSxJQUFBLEdBQ0EsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLEVBQUEsR0FDQSxLQUFBLEVBQUEsQ0FFQSxHQUFBLEdBQUEsRUFBQSxRQUNBLElBQUEsRUFBQSxFQUVBLE9BQUEsQ0FDQSxLQUVBLEVBQUEsTUFBQSxFQUNBLEVBQUEsRUFBQSxZQUNBLEVBQUEsRUFBQSxRQUlBLENBR0EsR0FBQSxHQUFBLEVBQUEsT0FBQSxZQUdBLEVBQUEsRUFBQSxJQUFBLEdBQ0EsRUFBQSxLQUFBLElBQUEsRUFFQSxJQUFBLEVBQUEsR0FBQSxFQUFBLEVBRUEsT0FBQSxDQUNBLEtBRUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxHQUdBLEdBQUEsR0FBQSxFQUFBLEVBQUEsS0FDQSxFQUFBLE1BQUEsSUFPQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEdBQUEsS0FBQSxJQUFBLEVBQUEsV0FDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLFNBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxHQUFBLElBQUEsSUFVQSxNQUxBLEtBQ0EsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQ0EsRUFBQSxTQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUEsVUFBQSxNQUFBLEVBQUEsV0FFQSxHQXlGQSxFQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQTREQSxPQXpEQSxHQUFBLGNBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxPQUNBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLFFBQ0EsR0FHQSxHQUdBLEVBQUEsY0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLGFBQUEsVUFBQSxPQUFBLE9BQUEsVUFDQSxFQUFBLEVBQUEsR0FDQSxZQUFBLFVBQUEsT0FBQSxPQUFBLElBQ0EsRUFBQSxFQUFBLEdBQ0EsWUFBQSxVQUFBLE9BQUEsT0FBQSxRQUNBLEVBQUEsRUFBQSxHQUNBLFlBQUEsVUFBQSxPQUFBLE9BQUEsS0FDQSxFQUFBLEVBQUEsSUFFQSxHQUdBLEVBQUEsZUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxXQUFBLFlBQUEsVUFBQSxPQUFBLE9BQUEsVUFDQSxNQUFBLEdBQUEsRUFBQSxFQUVBLElBQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxXQUFBLFlBQUEsVUFBQSxPQUFBLE9BQUEsSUFDQSxNQUFBLEdBQUEsRUFBQSxFQUNBLElBQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxLQUFBLFlBQUEsVUFBQSxPQUFBLE9BQUEsVUFDQSxNQUFBLEdBQUEsRUFBQSxFQUVBLElBQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxLQUFBLFlBQUEsVUFBQSxPQUFBLE9BQUEsSUFDQSxNQUFBLEdBQUEsRUFBQSxFQUFBLEVBRUEsSUFBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLE1BQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxJQUNBLE1BQUEsR0FBQSxFQUFBLEVBQ0EsSUFBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLEtBQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxLQUNBLE1BQUEsR0FBQSxFQUFBLEVBRUEsSUFBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLFNBQUEsWUFBQSxVQUFBLE9BQUEsT0FBQSxRQUFBLENBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxpQkFBQSxFQUFBLFNBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxFQUNBLElBQUEsRUFBQSxXQUFBLEVBQUEsY0FDQSxNQUFBLEdBR0EsTUFBQSxNQUVBLE1BQUEsYUFBQSxVQUFBLE9BQUEsT0FBQSxLQUFBLFlBQUEsVUFBQSxPQUFBLE9BQUEsUUFDQSxFQUFBLEVBQUEsRUFBQSxHQUNBLFlBQUEsVUFBQSxPQUFBLE9BQUEsU0FBQSxZQUFBLFVBQUEsT0FBQSxPQUFBLElBQ0EsRUFBQSxFQUFBLEVBQUEsSUFFQSxHQUdBLEdBRUEsU0FBQSxRQUFBLGVDN2NBLElBQUEsVUFBQSxZQUNBLFVBQUEsUUFBQSxXQUFBLFNBQUEsR0FHQSxFQUFBLGlCQUFBLFNBQUEsRUFBQSxFQUFBLEdBYUEsSUFBQSxHQUhBLEdBVEEsR0FDQSxXQUFBLEVBQ0EsZUFBQSxHQUdBLEVBQUEsRUFBQSxNQUFBLE9BQ0EsRUFBQSxFQUFBLE1BQUEsT0FDQSxFQUFBLElBQ0EsRUFBQSxHQUFBLFVBQUEsT0FJQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsQ0FFQSxFQURBLEVBQUEsRUFDQSxFQUFBLE1BQUEsR0FFQSxFQUFBLE1BQUEsRUFBQSxFQU1BLElBQUEsR0FBQSxHQUFBLFVBQUEsUUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEdBQUEsSUFBQSxFQUFBLFlBR0EsSUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsR0FBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLEdBRUEsSUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxHQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsSUFHQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsSUFBQSxFQUFBLFdBQUEsRUFLQSxJQUFBLEdBQUEsRUFBQSxJQUFBLEVBR0EsR0FBQSxFQUNBLEdBQUEsRUFFQSxHQUFBLENBSUEsSUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFJQSxJQUhBLEVBQUEsSUFBQSxFQUFBLGVBQUEsSUFHQSxFQUFBLFlBQUEsRUFBQSxjQUFBLEtBS0EsR0FBQSxLQUFBLElBQUEsR0FDQSxFQUFBLElBQ0EsRUFBQSxFQUNBLEVBQUEsRUFFQSxFQUFBLEVBQUEsWUFBQSxJQUFBLEVBQUEsYUFDQSxFQUFBLElBQUEsR0FBQSxJQUFBLEVBQUEsRUFBQSxNQUFBLE1BU0EsTUFGQSxHQUFBLGdCQUFBLEVBQUEseUJBQUEsRUFBQSxNQUFBLElBRUEsRUFLQSxJQUFBLEdBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxFQUNBLEVBQUEsRUFFQSxFQUFBLEdBS0EsRUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLEVBQ0EsRUFBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLEVBQUEsRUFBQSxTQUFBLEdBQUEsSUFBQSxHQUNBLEVBQUEsRUFDQSxFQUFBLEVBRUEsRUFBQSxJQUNBLEVBQUEsRUFJQSxRQUNBLElBQUEsRUFDQSxJQUFBLEdBSUEsT0FBQSxJQUVBLFNBQUEsUUFBQSxnQkN0SEEsa0JBQUEsMEJBS0EsU0FBQSxPQUFBLE9BQUEsSUFBQSxPQUFBLFNBQ0EsS0FBQSxTQUFBLE9BQUEsUUFDQSxNQUFBLFNBQUEsRUFBQSxHQUNBLFlBQ0EsTUFBQSxLQUFBLEdBRUEsRUFBQSxNQUNBLEVBQUEsTUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLE9BRUEsS0FBQSxPQUFBLEVBQUEsT0FDQSxLQUFBLE9BQUEsRUFBQSxhQUFBLEVBQUEsUUFBQSxHQUNBLEtBQUEsT0FBQSxFQUFBLGFBQUEsRUFBQSxRQUFBLEtBQ0EsS0FBQSxNQUFBLEVBQUEsTUFDQSxLQUFBLFVBQUEsRUFBQSxVQUNBLEtBQUEsVUFBQSxFQUFBLFdBQUEsRUFLQSxLQUFBLFVBQUEsV0FDQSxNQUFBLElBQUEsVUFBQSxPQUFBLEtBQUEsSUFBQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEtBQUEsT0FBQSxJQU1BLEtBQUEsZUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsV0FFQSxPQUFBLE1BQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsS0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxNQUFBLEVBQUEsSUFRQSxLQUFBLEtBQUEsU0FBQSxHQUNBLElBQUEsS0FBQSxRQUNBLEVBQUEsT0FDQSxLQUFBLFlBQUEsSUFFQSxFQUFBLFlBQ0EsRUFBQSxVQUFBLEtBQUEsVUFDQSxFQUFBLFlBQUEsS0FBQSxNQUNBLEVBQUEsVUFBQSxLQUFBLFVBQ0EsRUFBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEtBQUEsT0FBQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEtBQUEsT0FBQSxLQUFBLFFBQ0EsS0FBQSxPQUNBLEVBQUEsU0FFQSxLQUFBLFdBQ0EsRUFBQSxPQUdBLEVBQUEsWUFDQSxJQUFBLEtBQUEsT0FDQSxFQUFBLGFDN0RBLGtCQUFBLDBCQUtBLFNBQUEsT0FBQSxPQUFBLE1BQUEsT0FBQSxTQUNBLEtBQUEsU0FBQSxPQUFBLFFBQ0EsTUFBQSxTQUFBLEVBQUEsR0FFQSxLQUFBLEtBQUEsRUFJQSxJQUFBLEdBQUEsU0FBQSxjQUFBLE1BQ0EsR0FBQSxJQUFBLEVBQUEsSUFDQSxFQUFBLE9BQUEsV0FDQSxFQUFBLE1BQUEsRUFBQSxNQUNBLEVBQUEsT0FBQSxFQUFBLE9BQ0EsR0FBQSxFQUVBLElBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxZQUFBLEVBQ0EsRUFBQSxRQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsTUFDQSxFQUFBLEtBQ0EsRUFBQSxJQU1BLE1BQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxFQUFBLENBSUEsSUFBQSxFQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxLQUFBLFFBQUEsT0FBQSxJQUNBLE9BQUEsS0FBQSxRQUFBLElBQ0EsSUFBQSxVQUFBLE9BQUEsUUFBQSxLQUNBLEVBQUEsU0FBQSxPQUFBLFFBQUEsS0FBQSxFQUFBLEdBS0EsRUFDQSxFQUFBLGFBQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLElBQUEsR0FHQSxFQUFBLFVBQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLElBQUEsR0FFQSxJQUNBLEVBQUEsVUNuREEsa0JBQUEsMEJBS0EsU0FBQSxPQUFBLE9BQUEsS0FBQSxTQUNBLEtBQUEsU0FBQSxPQUFBLFFBQ0EsTUFBQSxTQUFBLEdBRUEsS0FBQSxNQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLE1BQUEsS0FBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsT0FBQSxLQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsTUFHQSxLQUFBLE1BQUEsT0FDQSxLQUFBLFVBQUEsRUFDQSxLQUFBLEtBQUEsR0FBQSxVQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsSUFDQSxLQUFBLE1BQUEsRUFBQSxNQUNBLEtBQUEsVUFBQSxFQUFBLFdBQUEsRUFPQSxLQUFBLEtBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxJQUFBLElBQUEsR0FDQSxFQUFBLEtBQUEsS0FBQSxJQUFBLEVBQ0EsR0FBQSxZQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsWUFDQSxFQUFBLFVBQUEsS0FBQSxVQUNBLEVBQUEsWUFBQSxLQUFBLE1BQ0EsRUFBQSxZQ3JDQSxrQkFBQSwwQkFLQSxTQUFBLE9BQUEsT0FBQSxRQUFBLE9BQUEsU0FDQSxLQUFBLFNBQUEsT0FBQSxRQUNBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsS0FBQSxLQUFBLEdBRUEsS0FBQSxNQUFBLEVBQUEsT0FBQSxPQUNBLEtBQUEsVUFBQSxFQUFBLFdBQUEsRUFDQSxLQUFBLFNBQUEsRUFBQSxXQUNBLEtBQUEsWUFDQSxLQUFBLFNBQ0EsS0FBQSxVQUNBLEtBQUEsYUFLQSxLQUFBLFVBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsSUFDQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEdBQUEsR0FDQSxFQUFBLG1CQUFBLEdBQUEsS0FDQSxFQUFBLE1BQ0EsRUFBQSxLQUVBLElBQUEsR0FBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsR0FBQSxVQUFBLE9BQUEsT0FBQSxRQUFBLEVBQUEsR0FBQSxVQUFBLE9BQUEsT0FBQSxRQUNBLEVBQUEsS0FDQSxFQUFBLEtBQUEsUUFFQSxJQUFBLEVBQUEsT0FBQSxFQUNBLE1BQUEsRUFJQSxJQURBLElBQ0EsRUFBQSxFQUVBLE1BREEsU0FBQSxLQUFBLDJCQUFBLEVBQUEsY0FDQSxDQUdBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsU0FBQSxFQUNBLEdBQUEsRUFBQSxTQUFBLEdBQUEsQ0FDQSxFQUFBLEtBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxFQUFBLE9BQUEsU0FHQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsS0FBQSxTQUFBLFNBQUEsRUFDQSxTQUFBLE9BQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxLQUNBLFNBQUEsT0FBQSxRQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsTUFDQSxFQUFBLEtBQUEscUJBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLFNBQUEsT0FBQSxNQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsS0FDQSxFQUFBLFNBQUEsT0FBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLEdBQ0EsRUFBQSxJQUNBLEVBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxLQUlBLFNBQUEsT0FBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsS0FDQSxTQUFBLE9BQUEsUUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxNQUNBLEVBQUEsS0FBQSxxQkFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsU0FBQSxPQUFBLEtBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxLQUNBLEVBQUEsU0FBQSxPQUFBLE9BQUEsRUFBQSxTQUFBLEdBQUEsR0FDQSxFQUFBLElBQ0EsRUFBQSxFQUNBLEVBQUEsRUFDQSxFQUFBLElBT0EsSUFBQSxJQUFBLEVBQUEsR0FBQSxLQUFBLFNBQUEsT0FFQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxLQUFBLEdBRUEsRUFBQSxHQUVBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsU0FBQSxLQUFBLEdBQ0EsRUFBQSxTQUFBLEtBQUEsR0FDQSxHQUFBLEdBRUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsUUFHQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsS0FFQSxHQUFBLEdBRUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsUUFHQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsS0FBQSxHQUNBLEVBQUEsU0FBQSxLQUFBLEdBRUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLFFBRUEsQ0FTQSxHQUxBLEVBQUEsSUFDQSxHQUFBLEtBQUEsU0FBQSxRQUVBLEVBQUEsT0FBQSxVQUVBLEVBQUEsRUFDQSxNQUFBLEVBR0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLElBQUEsRUFDQSxTQUFBLE9BQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxLQUNBLFNBQUEsT0FBQSxRQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLE1BQ0EsRUFBQSxTQUFBLE9BQUEsT0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsSUFDQSxFQUFBLElBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxLQUFBLFNBQUEsUUFLQSxHQUFBLEdBQ0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsSUFBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxRQUVBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxLQUVBLElBQUEsR0FDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsUUFFQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsSUFLQSxFQUFBLFNBQUEsT0FBQSxFQUFBLFNBQUEsUUFDQSxFQUFBLFVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxLQUVBLEVBQUEsVUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLFVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsR0FBQSxZQUVBLE9BQUEsR0FLQSxNQUZBLEdBQUEsS0FBQSxNQUVBLEdBV0EsS0FBQSxPQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxtQkFBQSxHQUFBLEtBQUEsSUFBQSxPQUFBLHFCQUNBLElBQUEsbUJBQUEsR0FBQSxLQUFBLElBQUEsT0FBQSxtQkFFQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsSUFBQSxPQUFBLE9BQ0EsSUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLEtBQUEsSUFBQSxPQUFBLE9BQ0EsSUFBQSxFQUFBLEVBQUEsS0FBQSxJQUFBLE9BQUEsT0FFQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsU0FBQSxLQUFBLEVBQUEsU0FBQSxLQVVBLEtBQUEsR0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsU0FDQSxFQUFBLEVBQUEsTUFDQSxPQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFRQSxLQUFBLE1BQUEsV0FDQSxNQUFBLE1BQUEsU0FBQSxJQVFBLEtBQUEsS0FBQSxXQUNBLE1BQUEsTUFBQSxTQUFBLEtBQUEsU0FBQSxPQUFBLElBV0EsS0FBQSxTQUFBLFdBR0EsSUFBQSxHQUZBLEdBQUEsS0FBQSxTQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLElBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUNBLEdBQUEsS0FBQSxrQkFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxJQUNBLE9BQUEsQ0FNQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsSUFDQSxHQUFBLEtBQUEsa0JBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxPQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxJQUNBLE9BQUEsQ0FJQSxRQUFBLEdBR0EsS0FBQSxxQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsQ0FDQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxDQUVBLE9BQUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUdBLFNBQUEsT0FBQSxNQUFBLEVBQUEsR0FGQSxTQUFBLE9BQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxJQVdBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxVQUFBLE9BQUEsTUFBQSxLQUFBLEdBQUEsRUFBQSxHQUFBLEtBQUEsR0FBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEtBR0EsS0FBQSxRQUFBLFdBS0EsSUFBQSxHQUpBLEdBQUEsRUFDQSxFQUFBLEtBQUEsU0FHQSxFQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsU0FBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxLQUNBLEVBQUEsRUFLQSxVQUFBLE9BQUEsS0FBQSxLQUFBLEdBQUEsRUFBQSxHQUFBLEtBQUEsR0FBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEtBQ0EsS0FBQSxXQU9BLEtBQUEsUUFBQSxXQUVBLElBQUEsR0FEQSxNQUNBLEVBQUEsRUFBQSxFQUFBLEtBQUEsU0FBQSxPQUFBLElBQUEsRUFBQSxJQUNBLEVBQUEsS0FBQSxLQUFBLFNBQUEsTUFFQSxNQUFBLFNBQUEsR0FHQSxLQUFBLGtCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0FHQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFDQSxPQUFBLENBRUEsSUFBQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsRUFFQSxPQUFBLElBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FHQSxLQUFBLFdBQUEsV0FDQSxHQUFBLEdBQ0EsQ0FDQSxNQUFBLFNBQ0EsS0FBQSxTQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsT0FBQSxJQUNBLEVBQUEsS0FBQSxTQUFBLEdBRUEsRUFEQSxFQUFBLEdBQUEsS0FBQSxTQUFBLE9BQ0EsS0FBQSxTQUFBLEdBRUEsS0FBQSxTQUFBLEVBQUEsR0FFQSxLQUFBLE1BQUEsS0FBQSxFQUFBLElBQUEsSUFDQSxLQUFBLE9BQUEsTUFBQSxHQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxNQUlBLEtBQUEsVUFBQSxXQUdBLElBQUEsR0FGQSxHQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEtBQUEsU0FBQSxPQUFBLElBQ0EsR0FBQSxLQUFBLFNBQUEsR0FBQSxFQUNBLEdBQUEsS0FBQSxTQUFBLEdBQUEsQ0FHQSxPQUFBLElBQUEsVUFBQSxPQUFBLEVBQUEsS0FBQSxTQUFBLE9BQUEsRUFBQSxLQUFBLFNBQUEsU0FHQSxLQUFBLE9BQUEsV0FDQSxHQUFBLEdBQUEsSUFBQSxVQUFBLE9BQUEsR0FBQSxVQUFBLE9BQUEsVUFBQSxHQUFBLFVBQUEsSUFBQSxVQUFBLEVBQ0EsTUFBQSxJQUFBLElBQUEsS0FBQSxJQUFBLElBQUEsR0FDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsS0FBQSxTQUFBLE9BQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxLQUFBLFNBQUEsRUFDQSxNQUFBLFNBQUEsR0FBQSxJQUFBLEVBQUEsSUFBQSxJQUVBLEtBQUEsU0FBQSxLQUFBLGFBR0EsS0FBQSxTQUFBLFdBR0EsSUFBQSxHQUZBLEdBQUEsR0FFQSxFQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsT0FBQSxJQUNBLElBQUEsSUFBQSxHQUFBLEtBQ0EsR0FBQSxJQUFBLEtBQUEsU0FBQSxHQUFBLFVBQUEsR0FBQSxHQUdBLE9BQUEsSUFRQSxLQUFBLEtBQUEsU0FBQSxHQUVBLElBQUEsR0FEQSxJQUFBLFlBQUEsU0FBQSxTQUNBLEVBQUEsRUFBQSxFQUFBLEtBQUEsU0FBQSxPQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsS0FBQSxTQUFBLEdBQUEsUUFDQSxHQUFBLFlBQ0EsRUFBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFDQSxFQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEVBRUEsR0FBQSxZQUNBLEVBQUEsVUFBQSxLQUFBLFVBQ0EsRUFBQSxZQUFBLEtBQUEsTUFDQSxFQUFBLFVBQUEsRUFBQSxHQUNBLEVBQUEsT0FDQSxFQUFBLGFDallBLGtCQUFBLDBCQUtBLFNBQUEsT0FBQSxPQUFBLFVBQUEsT0FBQSxTQUNBLEtBQUEsU0FBQSxPQUFBLFFBQ0EsTUFBQSxTQUFBLEVBQUEsR0FFQSxLQUFBLEtBQUEsR0FDQSxLQUFBLE1BQUEsRUFBQSxNQUNBLEtBQUEsVUFBQSxFQUFBLFVBQ0EsS0FBQSxVQUFBLEVBQUEsV0FBQSxFQU1BLEtBQUEsS0FBQSxTQUFBLEdBQ0EsS0FBQSxPQUNBLEVBQUEsV0FBQSxLQUFBLElBQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLE1BQUEsS0FBQSxRQUVBLEtBQUEsV0FDQSxFQUFBLFNBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxNQUFBLEtBQUEsUUFFQSxFQUFBLFVBQUEsS0FBQSxVQUNBLEVBQUEsWUFBQSxLQUFBLE1BQ0EsRUFBQSxVQUFBLEtBQUEsYUMzQkEsa0JBQUEsMEJBS0EsU0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLFNBQ0EsS0FBQSxTQUFBLE9BQUEsUUFDQSxNQUFBLFNBQUEsRUFBQSxHQUNBLEtBQUEsS0FBQSxFQUtBLElBQUEsR0FBQSxLQUNBLEVBQUEsU0FBQSxjQUFBLE1BQ0EsR0FBQSxPQUFBLFdBQ0EsRUFBQSxNQUFBLEVBQUEsTUFDQSxFQUFBLE9BQUEsRUFBQSxPQUNBLEdBQUEsR0FFQSxFQUFBLElBQUEsRUFBQSxHQUNBLElBTUEsR0FDQSxFQVBBLEdBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLFdBQ0EsR0FBQSxFQUNBLEdBQUEsRUFDQSxFQUFBLEVBQUEsYUFHQSxFQUFBLEVBQUEsV0FFQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFDQSxHQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsS0FHQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLElBSUEsTUFBQSxNQUFBLFdBQ0EsRUFBQSxHQUFBLElBR0EsS0FBQSxhQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxJQUdBLEtBQUEsZUFBQSxXQUNBLE9BQUEsR0FHQSxLQUFBLFFBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEVBQ0EsUUFBQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsS0FBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLEdBQUEsT0FBQSxFQUFBLEtBR0EsS0FBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxLQUFBLE1BQUEsQ0FHQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQ0EsRUFBQSxHQUFBLFVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUNBLEdBQUEsVUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLGFBQUEsS0FBQSxRQUNBLEVBQUEsV0FBQSxFQUFBLEdBQUEsRUFBQSxLQU9BLEtBQUEsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLENBSUEsR0FBQSxHQUFBLEtBQUEsSUFBQSxJQUFBLEVBRUEsS0FBQSxLQUFBLFFBQ0EsRUFBQSxPQUNBLEtBQUEsWUFBQSxFQUFBLEdBR0EsSUFBQSxHQUFBLEVBQUEsRUFFQSxHQUFBLFVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLEtBQUEsTUFBQSxFQUFBLE1BQUEsSUFBQSxJQUNBLEVBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxJQUFBLEdBQUEsR0FDQSxFQUFBLEdBQUEsSUFHQSxJQUFBLEtBQUEsT0FDQSxFQUFBIiwiZmlsZSI6ImNhbnZhc1JlbmRlci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUmVuZGVySnMgPSBSZW5kZXJKcyB8fCB7fTtcclxuXHJcblJlbmRlckpzLlZlY3RvciA9IGZ1bmN0aW9uICh4LCB5KSB7XHJcbiAgICB0aGlzLnggPSB4IHx8IDA7XHJcbiAgICB0aGlzLnkgPSB5IHx8IDA7XHJcblxyXG4gICAgdGhpcy5zZXQgPSBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIHRoaXMueCA9IHYueDtcclxuICAgICAgICB0aGlzLnkgPSB2Lnk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMubGVuZ3RoU3F1YXJlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5wb3codGhpcy54LCAyKSArIE1hdGgucG93KHRoaXMueSwgMik7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5sZW5ndGhTcXVhcmVkKCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmxlbmd0aDIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG90KHRoaXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnBlcnAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZW5kZXJKcy5WZWN0b3IodGhpcy55LCAtdGhpcy54KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zY2FsZSA9IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZW5kZXJKcy5WZWN0b3IodGhpcy54ICogcywgdGhpcy55ICogcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc3ViID0gZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICBpZiAodiBpbnN0YW5jZW9mIFJlbmRlckpzLlZlY3Rvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlbmRlckpzLlZlY3Rvcih0aGlzLnggLSB2LngsIHRoaXMueSAtIHYueSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlbmRlckpzLlZlY3Rvcih0aGlzLnggLSB2LCB0aGlzLnkgLSB2KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYWRkID0gZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICBpZiAodiBpbnN0YW5jZW9mIFJlbmRlckpzLlZlY3Rvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlbmRlckpzLlZlY3Rvcih0aGlzLnggKyB2LngsIHRoaXMueSArIHYueSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlbmRlckpzLlZlY3Rvcih0aGlzLnggKyB2LCB0aGlzLnkgKyB2KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZG90ID0gZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy54ICogdi54ICsgdGhpcy55ICogdi55O1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmRpc3QgPSBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN1Yih2KS5sZW5ndGgoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5ub3JtYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NhbGUoMSAvIHRoaXMubGVuZ3RoKCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmFuZ2xlID0gZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kb3QodikgLyAodGhpcy5sZW5ndGgoKSAqIHYubGVuZ3RoKCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRydW5jYXRlID0gZnVuY3Rpb24gKG1heCkge1xyXG4gICAgICAgIHZhciBsZW5ndGggPSBNYXRoLm1pbihtYXgsIHRoaXMubGVuZ3RoKCkpO1xyXG4gICAgICAgIHJldHVybiBsZW5ndGg7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucm90YXRlID0gZnVuY3Rpb24gKGFuZ2xlKSB7XHJcbiAgICAgICAgdmFyIHggPSB0aGlzLng7XHJcbiAgICAgICAgdmFyIHkgPSB0aGlzLnk7XHJcbiAgICAgICAgdGhpcy54ID0geCAqICBNYXRoLmNvcyhVdGlscy5jb252ZXJ0VG9SYWQoYW5nbGUpKSAtIHkgKiBNYXRoLnNpbihVdGlscy5jb252ZXJ0VG9SYWQoYW5nbGUpKTtcclxuICAgICAgICB0aGlzLnkgPSB5ICogIE1hdGguY29zKFV0aWxzLmNvbnZlcnRUb1JhZChhbmdsZSkpICsgeCAqIE1hdGguc2luKFV0aWxzLmNvbnZlcnRUb1JhZChhbmdsZSkpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24gKHJvdW5kZWQpIHtcclxuICAgICAgICBpZiAocm91bmRlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCIoXCIgKyBNYXRoLnJvdW5kKHRoaXMueCkgKyBcIiwgXCIgKyBNYXRoLnJvdW5kKHRoaXMueSkgKyBcIilcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIihcIiArIHRoaXMueCArIFwiLCBcIiArIHRoaXMueSArIFwiKVwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG59O1xyXG5cclxuUmVuZGVySnMuVmVjdG9yLmNsb25lID0gZnVuY3Rpb24gKHgsIHkpIHtcclxuICAgIHJldHVybiBuZXcgUmVuZGVySnMuVmVjdG9yKHgsIHkpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgYXJlYSBvZiBhIHRyaWFuZ2xlIHNwYW5uZWQgYnkgdGhlIHRocmVlIGdpdmVuIHBvaW50cy4gTm90ZSB0aGF0IHRoZSBhcmVhIHdpbGwgYmUgbmVnYXRpdmUgaWYgdGhlIHBvaW50cyBhcmUgbm90IGdpdmVuIGluIGNvdW50ZXItY2xvY2t3aXNlIG9yZGVyLlxyXG4gKiBAc3RhdGljXHJcbiAqIEBtZXRob2QgYXJlYVxyXG4gKiBAcGFyYW0gIHtBcnJheX0gYVxyXG4gKiBAcGFyYW0gIHtBcnJheX0gYlxyXG4gKiBAcGFyYW0gIHtBcnJheX0gY1xyXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XHJcbiAqL1xyXG5SZW5kZXJKcy5WZWN0b3IuYXJlYSA9IGZ1bmN0aW9uIChhLCBiLCBjKSB7XHJcbiAgICByZXR1cm4gKCgoYi54IC0gYS54KSAqIChjLnkgLSBhLnkpKSAtICgoYy54IC0gYS54KSAqIChiLnkgLSBhLnkpKSk7XHJcbn07XHJcblxyXG5SZW5kZXJKcy5WZWN0b3IubGVmdCA9IGZ1bmN0aW9uIChhLCBiLCBjKSB7XHJcbiAgICByZXR1cm4gUmVuZGVySnMuVmVjdG9yLmFyZWEoYSwgYiwgYykgPiAwO1xyXG59O1xyXG5cclxuUmVuZGVySnMuVmVjdG9yLmxlZnRPbiA9IGZ1bmN0aW9uIChhLCBiLCBjKSB7XHJcbiAgICByZXR1cm4gUmVuZGVySnMuVmVjdG9yLmFyZWEoYSwgYiwgYykgPj0gMDtcclxufTtcclxuXHJcblJlbmRlckpzLlZlY3Rvci5yaWdodCA9IGZ1bmN0aW9uIChhLCBiLCBjKSB7XHJcbiAgICByZXR1cm4gUmVuZGVySnMuVmVjdG9yLmFyZWEoYSwgYiwgYykgPCAwO1xyXG59O1xyXG5cclxuUmVuZGVySnMuVmVjdG9yLnJpZ2h0T24gPSBmdW5jdGlvbiAoYSwgYiwgYykge1xyXG4gICAgcmV0dXJuIFJlbmRlckpzLlZlY3Rvci5hcmVhKGEsIGIsIGMpIDw9IDA7XHJcbn07XHJcblxyXG5SZW5kZXJKcy5WZWN0b3Iuc3FkaXN0ID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgIHZhciBkeCA9IGIueCAtIGEueDtcclxuICAgIHZhciBkeSA9IGIueSAtIGEueTtcclxuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIFNjYWxhcigpIHtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIHR3byBzY2FsYXJzIGFyZSBlcXVhbFxyXG4gKiBAc3RhdGljXHJcbiAqIEBtZXRob2QgZXFcclxuICogQHBhcmFtICB7TnVtYmVyfSBhXHJcbiAqIEBwYXJhbSAge051bWJlcn0gYlxyXG4gKiBAcGFyYW0gIHtOdW1iZXJ9IFtwcmVjaXNpb25dXHJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAqL1xyXG5TY2FsYXIuZXEgPSBmdW5jdGlvbiAoYSwgYiwgcHJlY2lzaW9uKSB7XHJcbiAgICBwcmVjaXNpb24gPSBwcmVjaXNpb24gfHwgMDtcclxuICAgIHJldHVybiBNYXRoLmFicyhhIC0gYikgPCBwcmVjaXNpb247XHJcbn07IiwidmFyIFV0aWxzID0gKGZ1bmN0aW9uIChtb2R1bGUpIHtcclxuXHJcbiAgICBtb2R1bGUuZ2V0R3VpZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICB2YXIgciA9IE1hdGgucmFuZG9tKCkgKiAxNiB8IDAsIHYgPSBjID09PSAneCcgPyByIDogKHIgJiAweDMgfCAweDgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIG1vZHVsZS5wYXJzZVVybCA9IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICB2YXIgcGFyc2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgIHBhcnNlci5ocmVmID0gdXJsO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHByb3RvY29sOiBwYXJzZXIucHJvdG9jb2wsXHJcbiAgICAgICAgICAgIHBvcnQ6IHBhcnNlci5wb3J0LFxyXG4gICAgICAgICAgICBwYXRobmFtZTogcGFyc2VyLnBhdGhuYW1lLFxyXG4gICAgICAgICAgICBzZWFyY2g6IHBhcnNlci5zZWFyY2gsXHJcbiAgICAgICAgICAgIGhhc2g6IHBhcnNlci5oYXNoLFxyXG4gICAgICAgICAgICBob3N0OiBwYXJzZXIuaG9zdFxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIG1vZHVsZS5zbGVlcCA9IGZ1bmN0aW9uIChzZWNvbmRzKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHdoaWxlIChuZXcgRGF0ZSgpIC0gZGF0ZSA8IHNlY29uZHMgKiAxMDAwKVxyXG4gICAgICAgIHsgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbW9kdWxlO1xyXG59KFV0aWxzIHx8IHt9KSk7IiwidmFyIFV0aWxzID0gKGZ1bmN0aW9uIChtb2R1bGUpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIG1vZHVsZS5jb252ZXJ0VG9SYWQgPSBmdW5jdGlvbiAoZGVnKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlZyAqIChNYXRoLlBJIC8gMTgwKTtcclxuICAgIH07XHJcbiAgICB2YXIgbGFzdFVwZGF0ZSA9IChuZXcgRGF0ZSkgKiAxIC0gMTtcclxuXHJcbiAgICBtb2R1bGUuZ2V0TW91c2VQb3MgPSBmdW5jdGlvbiAoY2FudmFzLCBldnQpIHtcclxuICAgICAgICB2YXIgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB4OiBldnQuY2xpZW50WCAtIHJlY3QubGVmdCxcclxuICAgICAgICAgICAgeTogZXZ0LmNsaWVudFkgLSByZWN0LnRvcFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmdldENhbnZhcyA9IGZ1bmN0aW9uICh3LCBoKSB7XHJcbiAgICAgICAgdmFyIGMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICBjLndpZHRoID0gdztcclxuICAgICAgICBjLmhlaWdodCA9IGg7XHJcbiAgICAgICAgcmV0dXJuIGM7XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmdldFBpeGVscyA9IGZ1bmN0aW9uIChpbWcpIHtcclxuICAgICAgICB2YXIgYywgY3R4O1xyXG4gICAgICAgIGlmIChpbWcuZ2V0Q29udGV4dCkge1xyXG4gICAgICAgICAgICBjID0gaW1nO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY3R4ID0gYy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFjdHgpIHtcclxuICAgICAgICAgICAgYyA9IFV0aWxzLmdldENhbnZhcyhpbWcud2lkdGgsIGltZy5oZWlnaHQpO1xyXG4gICAgICAgICAgICBjdHggPSBjLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgYy53aWR0aCwgYy5oZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5nZXRGcHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlO1xyXG4gICAgICAgIHZhciBmcHMgPSAxMDAwIC8gKG5vdyAtIGxhc3RVcGRhdGUpO1xyXG4gICAgICAgIC8vZnBzICs9ICh0aGlzRnJhbWVGUFMgLSBmcHMpIC8gcmVmRnBzO1xyXG4gICAgICAgIGxhc3RVcGRhdGUgPSBub3c7XHJcblxyXG4gICAgICAgIHJldHVybiBmcHM7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG1vZHVsZTtcclxufShVdGlscyB8fCB7fSkpOyIsInZhciBVdGlscyA9IChmdW5jdGlvbiAobW9kdWxlKSB7XHJcblxyXG4gICAgbW9kdWxlLmlzTnVtYmVyID0gZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiAhaXNOYU4odmFsdWUpOyB9XHJcblxyXG4gICAgcmV0dXJuIG1vZHVsZTtcclxufShVdGlscyB8fCB7fSkpO1xyXG4iLCJ2YXIgTGlua2VkTGlzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIG5vZGVzID0gW107XHJcblxyXG4gICAgdGhpcy5sZW5ndGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5vZGVzLmxlbmd0aDtcclxuICAgIH07XHJcbiAgICB0aGlzLmZpcnN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBub2Rlc1swXTtcclxuICAgIH07XHJcbiAgICB0aGlzLmxhc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5vZGVzW25vZGVzLmxlbmd0aCAtIDFdO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmJ1aWxkTGlzdCA9IGZ1bmN0aW9uIChub2Rlcykge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBub2Rlcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maXJzdCA9IG5vZGVzW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpID09PSBsZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3QgPSBub2Rlc1tpXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbm9kZXNbaV0ucHJldiA9IG5vZGVzW2kgLSAxXTtcclxuICAgICAgICAgICAgbm9kZXNbaV0ubmV4dCA9IG5vZGVzW2kgKyAxXTtcclxuICAgICAgICAgICAgbm9kZXMucHVzaChub2Rlc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYXBwZW5kID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICB2YXIgbGFzdCA9IHRoaXMubGFzdCgpO1xyXG5cclxuICAgICAgICBpZiAobm9kZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBsYXN0Lm5leHQgPSBub2RlO1xyXG4gICAgICAgICAgICBub2RlLnByZXYgPSBsYXN0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldEVudW1lcmF0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gLTE7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY3VycmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVzW2luZGV4XTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSBub2Rlcy5sZW5ndGggLSAxKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZXNbKytpbmRleF07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHByZXY6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBub2Rlc1tpbmRleC0tXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG59IiwiLy9cclxuLy9SZWdpc3RlciB0eXBlc1xyXG5kZXBlbmRlbmN5Q29udGFpbmVyLnJlZ2lzdGVyVHlwZShcImpRdWVyeVwiLCAkKTtcclxuZGVwZW5kZW5jeUNvbnRhaW5lci5yZWdpc3RlclR5cGUoXCJsaW5xXCIsIGxpbnEpO1xyXG5kZXBlbmRlbmN5Q29udGFpbmVyLnJlZ2lzdGVyVHlwZShcIlV0aWxzXCIsIFV0aWxzKTtcclxuZGVwZW5kZW5jeUNvbnRhaW5lci5yZWdpc3RlclR5cGUoXCJFdmVudERpc3BhdGNoZXJcIiwgRXZlbnREaXNwYXRjaGVyKTtcclxuZGVwZW5kZW5jeUNvbnRhaW5lci5yZWdpc3RlclR5cGUoXCJMaW5rZWRMaXN0XCIsIExpbmtlZExpc3QpOyIsInJlZ2lzdGVyTmFtZXNwYWNlKFwiUmVuZGVySnMuQ2FudmFzXCIpO1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLkFuaW1hdGlvbiA9IGluamVjdCgpXHJcbiAgICAuY2xhc3MoZnVuY3Rpb24gKGhhbmRsZXIsIGxheWVyKSB7XHJcblxyXG4gICAgICAgIHZhciB0aW1lID0gMDtcclxuICAgICAgICB2YXIgc3Vic2NyaWJlcjtcclxuICAgICAgICB2YXIgc3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBzdG9wcGVkID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIHBhdXNlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICB2YXIgYW5pbWF0aW9uID0gZnVuY3Rpb24gKGZyYW1lUmF0ZSkge1xyXG4gICAgICAgICAgICBoYW5kbGVyKHtcclxuICAgICAgICAgICAgICAgIGZyYW1lUmF0ZTogZnJhbWVSYXRlLFxyXG4gICAgICAgICAgICAgICAgbGFzdFRpbWU6IHRpbWUsXHJcbiAgICAgICAgICAgICAgICB0aW1lOiB0aW1lICsgMTAwMCAvIGZyYW1lUmF0ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGltZSArPSAxMDAwIC8gZnJhbWVSYXRlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChzdGFydGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHN0b3BwZWQgPSBwYXVzZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgc3Vic2NyaWJlciA9IGxheWVyLm9uKFwiYW5pbWF0ZVwiLCBhbmltYXRpb24pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMucmVzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRpbWUgPSAwO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMucGF1c2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChzdGFydGVkICYmIHN1YnNjcmliZXIpIHtcclxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBwYXVzZWQgPSB0cnVlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc3RvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHN0YXJ0ZWQgJiYgc3Vic2NyaWJlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgc3RvcHBlZCA9IHRydWU7XHJcbiAgICAgICAgfTtcclxuICAgIH0pOyIsInJlZ2lzdGVyTmFtZXNwYWNlKFwiUmVuZGVySnMuQ2FudmFzLkZpbHRlcnNcIik7XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRmlsdGVycy5Db252b2x1dGUgPSBmdW5jdGlvbiAoaW1hZ2UsIHdlaWdodHMsIG9wYXF1ZSkge1xyXG4gICAgdmFyIHNpZGUgPSBNYXRoLnJvdW5kKE1hdGguc3FydCh3ZWlnaHRzLmxlbmd0aCkpO1xyXG4gICAgdmFyIGhhbGZTaWRlID0gTWF0aC5mbG9vcihzaWRlIC8gMik7XHJcbiAgICB2YXIgcGl4ZWxzID0gVXRpbHMuZ2V0UGl4ZWxzKGltYWdlKTtcclxuICAgIHZhciBzcmMgPSBwaXhlbHMuZGF0YTtcclxuICAgIHZhciBzdyA9IHBpeGVscy53aWR0aDtcclxuICAgIHZhciBzaCA9IHBpeGVscy5oZWlnaHQ7XHJcbiAgICAvLyBwYWQgb3V0cHV0IGJ5IHRoZSBjb252b2x1dGlvbiBtYXRyaXhcclxuICAgIHZhciB3ID0gc3c7XHJcbiAgICB2YXIgaCA9IHNoO1xyXG4gICAgdmFyIG91dHB1dCA9IFV0aWxzLmdldENhbnZhcyh3LCBoKS5nZXRDb250ZXh0KFwiMmRcIikuY3JlYXRlSW1hZ2VEYXRhKHcsIGgpO1xyXG4gICAgdmFyIGRzdCA9IG91dHB1dC5kYXRhO1xyXG4gICAgLy8gZ28gdGhyb3VnaCB0aGUgZGVzdGluYXRpb24gaW1hZ2UgcGl4ZWxzXHJcbiAgICB2YXIgYWxwaGFGYWMgPSBvcGFxdWUgPyAxIDogMDtcclxuICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaDsgeSsrKSB7XHJcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyB4KyspIHtcclxuICAgICAgICAgICAgdmFyIHN5ID0geTtcclxuICAgICAgICAgICAgdmFyIHN4ID0geDtcclxuICAgICAgICAgICAgdmFyIGRzdE9mZiA9ICh5ICogdyArIHgpICogNDtcclxuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSB3ZWlnaGVkIHN1bSBvZiB0aGUgc291cmNlIGltYWdlIHBpeGVscyB0aGF0XHJcbiAgICAgICAgICAgIC8vIGZhbGwgdW5kZXIgdGhlIGNvbnZvbHV0aW9uIG1hdHJpeFxyXG4gICAgICAgICAgICB2YXIgciA9IDAsIGcgPSAwLCBiID0gMCwgYSA9IDA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGN5ID0gMDsgY3kgPCBzaWRlOyBjeSsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjeCA9IDA7IGN4IDwgc2lkZTsgY3grKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzY3kgPSBzeSArIGN5IC0gaGFsZlNpZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjeCA9IHN4ICsgY3ggLSBoYWxmU2lkZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2N5ID49IDAgJiYgc2N5IDwgc2ggJiYgc2N4ID49IDAgJiYgc2N4IDwgc3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNyY09mZiA9IChzY3kgKiBzdyArIHNjeCkgKiA0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgd3QgPSB3ZWlnaHRzW2N5ICogc2lkZSArIGN4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgciArPSBzcmNbc3JjT2ZmXSAqIHd0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnICs9IHNyY1tzcmNPZmYgKyAxXSAqIHd0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiICs9IHNyY1tzcmNPZmYgKyAyXSAqIHd0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhICs9IHNyY1tzcmNPZmYgKyAzXSAqIHd0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkc3RbZHN0T2ZmXSA9IHI7XHJcbiAgICAgICAgICAgIGRzdFtkc3RPZmYgKyAxXSA9IGc7XHJcbiAgICAgICAgICAgIGRzdFtkc3RPZmYgKyAyXSA9IGI7XHJcbiAgICAgICAgICAgIGRzdFtkc3RPZmYgKyAzXSA9IGEgKyBhbHBoYUZhYyAqICgyNTUgLSBhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0cHV0O1xyXG59XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRmlsdGVycy5CbHVyID0gZnVuY3Rpb24gKGltYWdlLCBibHVyUmFkaXVzKSB7XHJcbiAgICByZXR1cm4gc3RhY2tCbHVySW1hZ2UoaW1hZ2UsIGJsdXJSYWRpdXMpO1xyXG59XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRmlsdGVycy5HcmF5c2NhbGUgPSBmdW5jdGlvbiAoaW1hZ2UsIGFyZ3MpIHtcclxuICAgIHZhciBwaXhlbHMgPSBVdGlscy5nZXRQaXhlbHMoaW1hZ2UpO1xyXG4gICAgdmFyIGQgPSBwaXhlbHMuZGF0YTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZC5sZW5ndGg7IGkgKz0gNCkge1xyXG4gICAgICAgIHZhciByID0gZFtpXTtcclxuICAgICAgICB2YXIgZyA9IGRbaSArIDFdO1xyXG4gICAgICAgIHZhciBiID0gZFtpICsgMl07XHJcbiAgICAgICAgLy8gQ0lFIGx1bWluYW5jZSBmb3IgdGhlIFJHQlxyXG4gICAgICAgIHZhciB2ID0gMC4yMTI2ICogciArIDAuNzE1MiAqIGcgKyAwLjA3MjIgKiBiO1xyXG4gICAgICAgIGRbaV0gPSBkW2kgKyAxXSA9IGRbaSArIDJdID0gdlxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBpeGVscztcclxufTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5GaWx0ZXJzLkJyaWdodG5lc3MgPSBmdW5jdGlvbiAoaW1hZ2UsIGFkanVzdG1lbnQpIHtcclxuICAgIHZhciBwaXhlbHMgPSBVdGlscy5nZXRQaXhlbHMoaW1hZ2UpO1xyXG4gICAgdmFyIGQgPSBwaXhlbHMuZGF0YTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZC5sZW5ndGg7IGkgKz0gNCkge1xyXG4gICAgICAgIGRbaV0gKz0gYWRqdXN0bWVudDtcclxuICAgICAgICBkW2kgKyAxXSArPSBhZGp1c3RtZW50O1xyXG4gICAgICAgIGRbaSArIDJdICs9IGFkanVzdG1lbnQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGl4ZWxzO1xyXG59O1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLkZpbHRlcnMuVGhyZXNob2xkID0gZnVuY3Rpb24gKGltYWdlLCB0aHJlc2hvbGQpIHtcclxuICAgIHZhciBwaXhlbHMgPSBVdGlscy5nZXRQaXhlbHMoaW1hZ2UpO1xyXG4gICAgdmFyIGQgPSBwaXhlbHMuZGF0YTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZC5sZW5ndGg7IGkgKz0gNCkge1xyXG4gICAgICAgIHZhciByID0gZFtpXTtcclxuICAgICAgICB2YXIgZyA9IGRbaSArIDFdO1xyXG4gICAgICAgIHZhciBiID0gZFtpICsgMl07XHJcbiAgICAgICAgdmFyIHYgPSAoMC4yMTI2ICogciArIDAuNzE1MiAqIGcgKyAwLjA3MjIgKiBiID49IHRocmVzaG9sZCkgPyAyNTUgOiAwO1xyXG4gICAgICAgIGRbaV0gPSBkW2kgKyAxXSA9IGRbaSArIDJdID0gdlxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBpeGVscztcclxufTtcclxuIiwicmVnaXN0ZXJOYW1lc3BhY2UoXCJSZW5kZXJKcy5DYW52YXNcIik7XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuTGF5ZXIgPSBpbmplY3QoXCJVdGlsc1wiLCBcIkV2ZW50RGlzcGF0Y2hlclwiLCBcImpRdWVyeVwiKVxyXG4gICAgLmNsYXNzKGZ1bmN0aW9uICh1dGlscywgZGlzcGF0Y2hlciwgJCwgY29udGFpbmVyLCB3aWR0aCwgaGVpZ2h0LCBhY3RpdmUpIHtcclxuXHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgX2luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIF9mb3JjZVJlbmRlciA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBfZGlzcGF0Y2hlciA9IG5ldyBkaXNwYXRjaGVyKCk7XHJcbiAgICAgICAgdmFyIF90aW1lID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcikuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xyXG4gICAgICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuYWN0aXZlID0gYWN0aXZlO1xyXG4gICAgICAgIC8vRm9yIHRoZSBsaW5rZWQgbGlzdFxyXG4gICAgICAgIHRoaXMucHJldiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5uZXh0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy9BcnJheSBvZiBvYmplY3RzIG9uIHRoZSBsYXllclxyXG4gICAgICAgIHRoaXMub2JqZWN0cyA9IFtdO1xyXG5cclxuXHJcbiAgICAgICAgdmFyIF9jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24gfHwgVXRpbHMuZ2V0TW91c2VQb3MoZXZlbnQudGFyZ2V0LCBldmVudCk7XHJcbiAgICAgICAgICAgIF9kaXNwYXRjaGVyLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5jbGljaywgW2V2ZW50LCBwb3NpdGlvbl0pO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5vYmplY3RzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoUmVuZGVySnMuUGh5c2ljcy5Db2xsaXNpb25zLnBvaW50SW5PYmplY3QocG9zaXRpb24sIHRoaXMub2JqZWN0c1tpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9iamVjdHNbaV0udHJpZ2dlcihSZW5kZXJKcy5DYW52YXMuRXZlbnRzLmNsaWNrLCBldmVudClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2KSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMucHJldi5jYW52YXMpLnRyaWdnZXIoXCJjbGlja1wiLCBwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgX21vdXNlbW92ZUhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24gfHwgVXRpbHMuZ2V0TW91c2VQb3MoZXZlbnQudGFyZ2V0LCBldmVudCk7XHJcbiAgICAgICAgICAgIF9kaXNwYXRjaGVyLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5tb3VzZW1vdmUsIFtldmVudCwgcG9zaXRpb25dKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMub2JqZWN0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKFJlbmRlckpzLlBoeXNpY3MuQ29sbGlzaW9ucy5wb2ludEluT2JqZWN0KHBvc2l0aW9uLCB0aGlzLm9iamVjdHNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmplY3RzW2ldLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5tb3VzZW1vdmUsIFtldmVudCwgcG9zaXRpb25dKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcy5wcmV2LmNhbnZhcykudHJpZ2dlcihcIm1vdXNlbW92ZVwiLCBwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgX21vdXNlZW50ZXJIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uIHx8IFV0aWxzLmdldE1vdXNlUG9zKGV2ZW50LnRhcmdldCwgZXZlbnQpO1xyXG4gICAgICAgICAgICBfZGlzcGF0Y2hlci50cmlnZ2VyKFJlbmRlckpzLkNhbnZhcy5FdmVudHMubW91c2VlbnRlciwgW2V2ZW50LCBwb3NpdGlvbl0pO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5vYmplY3RzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoUmVuZGVySnMuUGh5c2ljcy5Db2xsaXNpb25zLnBvaW50SW5PYmplY3QocG9zaXRpb24sIHRoaXMub2JqZWN0c1tpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9iamVjdHNbaV0udHJpZ2dlcihSZW5kZXJKcy5DYW52YXMuRXZlbnRzLm1vdXNlZW50ZXIsIFtldmVudCwgcG9zaXRpb25dKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcy5wcmV2LmNhbnZhcykudHJpZ2dlcihcIm1vdXNlZW50ZXJcIiwgcG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIF9tb3VzZWxlYXZlSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgcG9zaXRpb24gPSBwb3NpdGlvbiB8fCBVdGlscy5nZXRNb3VzZVBvcyhldmVudC50YXJnZXQsIGV2ZW50KTtcclxuICAgICAgICAgICAgX2Rpc3BhdGNoZXIudHJpZ2dlcihSZW5kZXJKcy5DYW52YXMuRXZlbnRzLm1vdXNlbGVhdmUsIFtldmVudCwgcG9zaXRpb25dKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMub2JqZWN0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKFJlbmRlckpzLlBoeXNpY3MuQ29sbGlzaW9ucy5wb2ludEluT2JqZWN0KHBvc2l0aW9uLCB0aGlzLm9iamVjdHNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmplY3RzW2ldLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5tb3VzZWxlYXZlLCBbZXZlbnQsIHBvc2l0aW9uXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMucHJldikge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzLnByZXYuY2FudmFzKS50cmlnZ2VyKFwibW91c2VsZWF2ZVwiLCBwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgX2tleWRvd25IYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF9kaXNwYXRjaGVyLnRyaWdnZXIoUmVuZGVySnMuQ2FudmFzLkV2ZW50cy5rZXlkb3duLCBldmVudCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIF9rZXl1cEhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX2Rpc3BhdGNoZXIudHJpZ2dlcihSZW5kZXJKcy5DYW52YXMuRXZlbnRzLmtleXVwLCBldmVudCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIF9rZXlwcmVzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX2Rpc3BhdGNoZXIudHJpZ2dlcihSZW5kZXJKcy5DYW52YXMuRXZlbnRzLmtleXByZXNzLCBldmVudCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vRXZlbnQgd2lyZXVwc1xyXG4gICAgICAgICQodGhpcy5jYW52YXMpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50LCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICBfY2xpY2tIYW5kbGVyLmNhbGwoX3NlbGYsIGV2ZW50LCBwb3NpdGlvbik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQodGhpcy5jYW52YXMpLm9uKFwibW91c2Vtb3ZlXCIsIGZ1bmN0aW9uIChldmVudCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgX21vdXNlbW92ZUhhbmRsZXIuY2FsbChfc2VsZiwgZXZlbnQsIHBvc2l0aW9uKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCh0aGlzLmNhbnZhcykub24oXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uIChldmVudCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgX21vdXNlZW50ZXJIYW5kbGVyLmNhbGwoX3NlbGYsIGV2ZW50LCBwb3NpdGlvbik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQodGhpcy5jYW52YXMpLm9uKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoZXZlbnQsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIF9tb3VzZWxlYXZlSGFuZGxlci5jYWxsKF9zZWxmLCBldmVudCwgcG9zaXRpb24pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS5vbihcImtleWRvd25cIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF9rZXlkb3duSGFuZGxlci5jYWxsKF9zZWxmLCBldmVudCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKFwia2V5dXBcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF9rZXl1cEhhbmRsZXIuY2FsbChfc2VsZiwgZXZlbnQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS5vbihcImtleXByZXNzXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfa2V5cHJlc3NIYW5kbGVyLmNhbGwoX3NlbGYsIGV2ZW50KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbiA9IGZ1bmN0aW9uICh0eXBlLCBoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIGlmICghUmVuZGVySnMuQ2FudmFzLkV2ZW50c1t0eXBlXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBfZGlzcGF0Y2hlci5zdWJzY3JpYmUodHlwZSwgaGFuZGxlcik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9BZGQgYW4gb2JqZWN0IHRvIHRoZSBsYXllciwgaXQgd2lsbCBiZSByZW5kZXJlZCBvbiB0aGlzIGxheWVyXHJcbiAgICAgICAgdGhpcy5hZGRPYmplY3QgPSBmdW5jdGlvbiAob2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICghKG9iamVjdCBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5PYmplY3QpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbiBvYmplY3Qgb24gdGhlIGNhbnZhcyBzaG91bGQgYmUgaW5oZXJpdGVkIGZyb20gQ2FudmFzT2JqZWN0IVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvYmplY3QubGF5ZXIgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLm9iamVjdHMucHVzaChvYmplY3QpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMucmVtb3ZlT2JqZWN0ID0gZnVuY3Rpb24gKG9iamVjdCkge1xyXG4gICAgICAgICAgICBsaW5xKHRoaXMub2JqZWN0cykucmVtb3ZlKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbSA9PT0gb2JqZWN0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgb2JqZWN0LmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgX2ZvcmNlUmVuZGVyID0gdHJ1ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnJlc2l6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICAgICAgX2ZvcmNlUmVuZGVyID0gdHJ1ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL1JldHVybnMgdHJ1ZSBpZiB0aGUgbGF5ZXIgaGFzIHNwcml0ZSBvYmplY3RzIG90aGVyd2lzZSBmYWxzZVxyXG4gICAgICAgIHRoaXMuaGFzU3ByaXRlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHRoaXMub2JqZWN0cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub2JqZWN0c1tpXSBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuU3ByaXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vUmVkcmF3IG9iamVjdHMgb24gbGF5ZXJzIGlmIGl0J3MgYWN0aXZlXHJcbiAgICAgICAgdGhpcy5kcmF3T2JqZWN0cyA9IGZ1bmN0aW9uIChmcmFtZSwgYWJzUG9zaXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKCFfZm9yY2VSZW5kZXIgJiYgKChfaW5pdGlhbGl6ZWQgJiYgIV9kaXNwYXRjaGVyLmhhc1N1YnNjcmliZXJzKCdhbmltYXRlJykgJiYgIXRoaXMuaGFzU3ByaXRlcyh0aGlzKSAmJiAhdGhpcy5hY3RpdmUpIHx8IHRoaXMub2JqZWN0cy5sZW5ndGggPT09IDApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBha3RGcmFtZVJhdGUgPSBNYXRoLmZsb29yKDEwMDAgLyBmcmFtZSk7XHJcblxyXG4gICAgICAgICAgICBfZGlzcGF0Y2hlci50cmlnZ2VyKFwiYW5pbWF0ZVwiLCBmcmFtZSk7XHJcbiAgICAgICAgICAgIHZhciBvYmplY3RzTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHRoaXMub2JqZWN0cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm9iamVjdHNbaV0ubG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0c0xvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3RzW2ldLmRyYXcodGhpcy5jdHgsIHtcclxuICAgICAgICAgICAgICAgICAgICBmcmFtZVJhdGU6IGZyYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RUaW1lOiBfdGltZSxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBfdGltZSArIGFrdEZyYW1lUmF0ZVxyXG4gICAgICAgICAgICAgICAgfSwgYWJzUG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvYmplY3RzTG9hZGVkKVxyXG4gICAgICAgICAgICAgICAgX2luaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKF9mb3JjZVJlbmRlcikge1xyXG4gICAgICAgICAgICAgICAgX2ZvcmNlUmVuZGVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RpbWUgKz0gYWt0RnJhbWVSYXRlO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiIsInJlZ2lzdGVyTmFtZXNwYWNlKFwiUmVuZGVySnMuQ2FudmFzLlNoYXBlc1wiKTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5FdmVudHMgPSB7XHJcbiAgICBhbmltYXRlOiBcImFuaW1hdGVcIixcclxuICAgIGNsaWNrOiBcImNsaWNrXCIsXHJcbiAgICBrZXlkb3duOiBcImtleWRvd25cIixcclxuICAgIGtleXVwOiBcImtleXVwXCIsXHJcbiAgICBrZXlwcmVzczogXCJrZXlwcmVzc1wiLFxyXG4gICAgbW91c2Vtb3ZlOiBcIm1vdXNlbW92ZVwiLFxyXG4gICAgbW91c2Vob3ZlcjogXCJtb3VzZWhvdmVyXCIsXHJcbiAgICBtb3VzZWxlYXZlOiBcIm1vdXNlbGVhdmVcIixcclxuICAgIGNvbGxpc2lvbjogXCJjb2xsaXNpb25cIixcclxuICAgIG9iamVjdENoYW5nZWQ6IFwib2JqZWN0Q2hhbmdlZFwiXHJcbn07XHJcblxyXG4vKlxyXG4gKlJlcHJlc2VudHMgYSBiYXNlIGNsYXNzIGZvciBkaWZmZXJlbnQgdHlwZSBvZiBzaGFwZXNcclxuICovXHJcblJlbmRlckpzLkNhbnZhcy5PYmplY3QgPSBpbmplY3QoXCJFdmVudERpc3BhdGNoZXJcIiwgXCJqUXVlcnlcIiwgXCJVdGlsc1wiKVxyXG4gICAgLmNsYXNzKGZ1bmN0aW9uIChkaXNwYXRjaGVyLCAkLCB1dGlscywgb3B0aW9ucykge1xyXG5cclxuICAgICAgICB0aGlzLmRpc3BhdGNoZXIgPSBuZXcgZGlzcGF0Y2hlcigpO1xyXG5cclxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICB0aGlzLmlkID0gdXRpbHMuZ2V0R3VpZCgpO1xyXG4gICAgICAgIHRoaXMucG9zID0gbmV3IFJlbmRlckpzLlZlY3RvcihvcHRpb25zLngsIG9wdGlvbnMueSk7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IG9wdGlvbnMud2lkdGggfHwgMDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0IHx8IDA7XHJcbiAgICAgICAgdGhpcy5hbmdsZSA9IG9wdGlvbnMuYW5nbGUgfHwgMDtcclxuICAgICAgICB0aGlzLnNjYWxlWCA9IG9wdGlvbnMuc2NhbGVYO1xyXG4gICAgICAgIHRoaXMuc2NhbGVZID0gb3B0aW9ucy5zY2FsZVk7XHJcbiAgICAgICAgdGhpcy5ibHVyUmFkaXVzID0gb3B0aW9ucy5ibHVyUmFkaXVzO1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uID0gb3B0aW9ucy5jb2xsaXNpb24gfHwgZmFsc2U7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5sYXllciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqUmV0dXJucyB3aXRoIHRoZSBjZW50ZXIgcG9pbnQgb2YgdGhlIHNoYXBlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5nZXRDZW50ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVuZGVySnMuVmVjdG9yKHRoaXMucG9zLnggKyAodGhpcy53aWR0aCkgLyAyLCB0aGlzLnBvcy55ICsgKHRoaXMuaGVpZ2h0KSAvIDIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLypcclxuICAgICAgICAgKlJldHVybnMgd2l0aCB0aGUgcmVjdCBhcm91bmQgdGhlIHNoYXBlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5nZXRDZW50ZXJlZFJlY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBvID0gdGhpcy5wb3M7XHJcbiAgICAgICAgICAgIHJldHVybiB7eDogby54LCB5OiBvLnksIHdpZHRoOiB0aGlzLndpZHRoLCBoZWlnaHQ6IHRoaXMuaGVpZ2h0fTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogRmlsdGVycyB3aGljaCB3aWxsIGJlIGFwcGxpZWQgb24gdGhlIG9iamVjdChibHVyLCBncmV5c2NhbGUgZXRjLi4uKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc2V0ZmlsdGVycyA9IGZ1bmN0aW9uIChmaWx0ZXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVycyA9IGZpbHRlcnM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbiA9IGZ1bmN0aW9uIChkWCwgZFkpIHtcclxuICAgICAgICAgICAgdmFyIHByZXZQb3MgPSBSZW5kZXJKcy5WZWN0b3IuY2xvbmUodGhpcy5wb3MueCwgdGhpcy5wb3MueSk7XHJcbiAgICAgICAgICAgIHZhciBuZXdQb3MgPSB0aGlzLnBvcy5hZGQobmV3IFJlbmRlckpzLlZlY3RvcihNYXRoLmZsb29yKGRYKSwgTWF0aC5mbG9vcihkWSkpKTtcclxuICAgICAgICAgICAgdGhpcy5wb3MgPSBuZXdQb3M7XHJcbiAgICAgICAgICAgIGlmIChwcmV2UG9zLnggIT09IG5ld1Bvcy54IHx8IHByZXZQb3MueSAhPT0gbmV3UG9zLnkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihSZW5kZXJKcy5DYW52YXMuRXZlbnRzLm9iamVjdENoYW5nZWQsIHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKlJvdGF0ZSB0aGUgc2hhcGUgdG8gdGhlIGdpdmVuIGRlZ3JlZSwgZHVyaW5nIHRoZSB0aW1lXHJcbiAgICAgICAgICotZGVnIHJvdGF0aW9uIGFuZ2xlXHJcbiAgICAgICAgICotdCBhbmltYXRpb24gdGltZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucm90YXRlU2hhcGUgPSBmdW5jdGlvbiAoY3R4KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFuZ2xlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG8gPSB0aGlzLmdldENlbnRlcigpO1xyXG4gICAgICAgICAgICBjdHgudHJhbnNsYXRlKG8ueCwgby55KTtcclxuICAgICAgICAgICAgY3R4LnJvdGF0ZSh1dGlscy5jb252ZXJ0VG9SYWQodGhpcy5hbmdsZSkpO1xyXG4gICAgICAgICAgICBjdHgudHJhbnNsYXRlKC1vLngsIC1vLnkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICpTY2FsZSB0aGUgc2hhcGUgd2l0aCB0aGUgZ2l2ZW4gd2lkdGggYW5kIGhlaWdodCwgZHVyaW5nIHRoZSB0aW1lXHJcbiAgICAgICAgICotd2lkdGggc2NhbGUgaG9yaXpvbnRhbGx5IHJhdGlvIGludGVnZXIgMSBpcyAxMDAlXHJcbiAgICAgICAgICotaGVpZ2h0IHNjYWxlIHZlcnRpY2FsbHkgcmF0aW8gaW50ZWdlciAxIGlzIDEwMCVcclxuICAgICAgICAgKi10IGFuaW1hdGlvbiB0aW1lXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zY2FsZVNoYXBlID0gZnVuY3Rpb24gKGN0eCwgc2NhbGVYLCBzY2FsZVkpIHtcclxuICAgICAgICAgICAgdmFyIG8gPSB0aGlzLmdldENlbnRlcigpO1xyXG4gICAgICAgICAgICBjdHgudHJhbnNsYXRlKG8ueCwgby55KTtcclxuICAgICAgICAgICAgY3R4LnNjYWxlKHNjYWxlWCwgc2NhbGVZKTtcclxuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSgtby54LCAtby55KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLm9uID0gZnVuY3Rpb24gKHR5cGUsIGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgaWYgKCFSZW5kZXJKcy5DYW52YXMuRXZlbnRzW3R5cGVdKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2hlci5zdWJzY3JpYmUodHlwZSwgaGFuZGxlcik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy50cmlnZ2VyID0gZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XHJcbiAgICAgICAgICAgIGlmICghUmVuZGVySnMuQ2FudmFzLkV2ZW50c1tldmVudF0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoZXIudHJpZ2dlcihldmVudCwgYXJncyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBNQ0cgb24gMjAxNS4wMS4yNS4uXHJcbiAqL1xyXG52YXIgUmVuZGVySnMgPSBSZW5kZXJKcyB8fCB7fTtcclxuUmVuZGVySnMuQ2FudmFzID0gUmVuZGVySnMuQ2FudmFzIHx8IHt9O1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLlNwYWNlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuXHJcbiAgICB2YXIgX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuc3RhZ2UgPSBvcHRpb25zLnN0YWdlO1xyXG4gICAgfTtcclxuICAgIF9pbml0KG9wdGlvbnMpO1xyXG59IiwicmVnaXN0ZXJOYW1lc3BhY2UoXCJSZW5kZXJKcy5DYW52YXNcIik7XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuU3RhZ2UgPSBpbmplY3QoXCJVdGlsc1wiLCBcIkV2ZW50RGlzcGF0Y2hlclwiLCBcIkxpbmtlZExpc3RcIilcclxuICAgIC5jbGFzcyhmdW5jdGlvbiAodXRpbHMsIGRpc3BhdGNoZXIsIGxpbmtlZExpc3QsIG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgdmFyIF9jb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lciB8fCBcInZpZXdwb3J0XCI7XHJcbiAgICAgICAgdmFyIF9jdXJyZW50RnBzID0gMDtcclxuICAgICAgICB2YXIgX2Rpc3BhdGNoZXIgPSBuZXcgZGlzcGF0Y2hlcigpO1xyXG4gICAgICAgIHRoaXMubGF5ZXJzID0gbmV3IGxpbmtlZExpc3QoKTtcclxuXHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBSZW5kZXJKcy5WZWN0b3IoLTUwLCAtNTApO1xyXG5cclxuICAgICAgICB2YXIgX2ludmFsaWRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgX2N1cnJlbnRGcHMgPSB1dGlscy5nZXRGcHMoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBlbnVtZXJhdG9yID0gdGhpcy5sYXllcnMuZ2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgICAgICB3aGlsZSAoZW51bWVyYXRvci5uZXh0KCkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZW51bWVyYXRvci5jdXJyZW50KCkuZHJhd09iamVjdHMoX2N1cnJlbnRGcHMsIHRoaXMucG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX2ludmFsaWRhdGUuY2FsbChzZWxmKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBfaW52YWxpZGF0ZS5jYWxsKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLnJlc2l6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKF9jb250YWluZXIpLnN0eWxlLndpZHRoID0gdGhpcy53aWR0aCArIFwicHhcIjtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoX2NvbnRhaW5lcikuc3R5bGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHZhciBlbnVtZXJhdG9yID0gdGhpcy5sYXllcnMuZ2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgICAgICB3aGlsZSAoZW51bWVyYXRvci5uZXh0KCkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZW51bWVyYXRvci5jdXJyZW50KCkucmVzaXplKHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5vbkludmFsaWRhdGUgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gX2Rpc3BhdGNoZXIuc3Vic2NyaWJlKFwib25JbnZhbGlkYXRlXCIsIGhhbmRsZXIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuY3JlYXRlTGF5ZXIgPSBmdW5jdGlvbiAoYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHZhciBsYXllciA9IG5ldyBSZW5kZXJKcy5DYW52YXMuTGF5ZXIoX2NvbnRhaW5lciwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsIGFjdGl2ZSk7XHJcbiAgICAgICAgICAgIHRoaXMubGF5ZXJzLmFwcGVuZChsYXllcik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbGF5ZXI7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXNpemUob3B0aW9ucy53aWR0aCB8fCAxMjAwLCBvcHRpb25zLmhlaWdodCB8fCA4MDApO1xyXG4gICAgfSk7IiwidmFyIFJlbmRlckpzID0gUmVuZGVySnMgfHwge307XHJcblJlbmRlckpzLkNhbnZhcyA9IFJlbmRlckpzLkNhbnZhcyB8fCB7fTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5FYXNpbmdzID0gUmVuZGVySnMuQ2FudmFzLkVhc2luZ3MgfHwge307XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRWFzaW5ncy5Cb3VuY2VFYXNlT3V0ID0gZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcclxuICAgIGlmICgodCAvPSBkKSA8ICgxIC8gMi43NSkpIHtcclxuICAgICAgICByZXR1cm4gYyAqICg3LjU2MjUgKiB0ICogdCkgKyBiO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodCA8ICgyIC8gMi43NSkpIHtcclxuICAgICAgICByZXR1cm4gYyAqICg3LjU2MjUgKiAodCAtPSAoMS41IC8gMi43NSkpICogdCArIDAuNzUpICsgYjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHQgPCAoMi41IC8gMi43NSkpIHtcclxuICAgICAgICByZXR1cm4gYyAqICg3LjU2MjUgKiAodCAtPSAoMi4yNSAvIDIuNzUpKSAqIHQgKyAwLjkzNzUpICsgYjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBjICogKDcuNTYyNSAqICh0IC09ICgyLjYyNSAvIDIuNzUpKSAqIHQgKyAwLjk4NDM3NSkgKyBiO1xyXG4gICAgfVxyXG59O1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLkVhc2luZ3MuQm91bmNlRWFzZUluID0gZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcclxuICAgIHJldHVybiBjIC0gS2luZXRpYy5FYXNpbmdzLkJvdW5jZUVhc2VPdXQoZCAtIHQsIDAsIGMsIGQpICsgYjtcclxufTtcclxuXHJcblJlbmRlckpzLkNhbnZhcy5FYXNpbmdzLkJvdW5jZUVhc2VJbk91dCA9IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XHJcbiAgICBpZiAodCA8IGQgLyAyKSB7XHJcbiAgICAgICAgcmV0dXJuIEtpbmV0aWMuRWFzaW5ncy5Cb3VuY2VFYXNlSW4odCAqIDIsIDAsIGMsIGQpICogMC41ICsgYjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBLaW5ldGljLkVhc2luZ3MuQm91bmNlRWFzZU91dCh0ICogMiAtIGQsIDAsIGMsIGQpICogMC41ICsgYyAqIDAuNSArIGI7XHJcbiAgICB9XHJcbn07XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRWFzaW5ncy5FYXNlSW4gPSBmdW5jdGlvbiAodCwgYiwgYywgZCkge1xyXG4gICAgcmV0dXJuIGMgKiAodCAvPSBkKSAqIHQgKyBiO1xyXG59O1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLkVhc2luZ3MuRWFzZU91dCA9IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XHJcbiAgICByZXR1cm4gLWMgKiAodCAvPSBkKSAqICh0IC0gMikgKyBiO1xyXG59O1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLkVhc2luZ3MuRWFzZUluT3V0ID0gZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcclxuICAgIGlmICgodCAvPSBkIC8gMikgPCAxKSB7XHJcbiAgICAgICAgcmV0dXJuIGMgLyAyICogdCAqIHQgKyBiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIC1jIC8gMiAqICgoLS10KSAqICh0IC0gMikgLSAxKSArIGI7XHJcbn07XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRWFzaW5ncy5FbGFzdGljRWFzZUluID0gZnVuY3Rpb24gKHQsIGIsIGMsIGQsIGEsIHApIHtcclxuICAgIC8vIGFkZGVkIHMgPSAwXHJcbiAgICB2YXIgcyA9IDA7XHJcbiAgICBpZiAodCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBiO1xyXG4gICAgfVxyXG4gICAgaWYgKCh0IC89IGQpID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIGIgKyBjO1xyXG4gICAgfVxyXG4gICAgaWYgKCFwKSB7XHJcbiAgICAgICAgcCA9IGQgKiAwLjM7XHJcbiAgICB9XHJcbiAgICBpZiAoIWEgfHwgYSA8IE1hdGguYWJzKGMpKSB7XHJcbiAgICAgICAgYSA9IGM7XHJcbiAgICAgICAgcyA9IHAgLyA0O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcyA9IHAgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKGMgLyBhKTtcclxuICAgIH1cclxuICAgIHJldHVybiAtKGEgKiBNYXRoLnBvdygyLCAxMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApKSArIGI7XHJcbn07XHJcblxyXG5SZW5kZXJKcy5DYW52YXMuRWFzaW5ncy5FbGFzdGljRWFzZU91dCA9IGZ1bmN0aW9uICh0LCBiLCBjLCBkLCBhLCBwKSB7XHJcbiAgICAvLyBhZGRlZCBzID0gMFxyXG4gICAgdmFyIHMgPSAwO1xyXG4gICAgaWYgKHQgPT09IDApIHtcclxuICAgICAgICByZXR1cm4gYjtcclxuICAgIH1cclxuICAgIGlmICgodCAvPSBkIC8gMikgPT09IDIpIHtcclxuICAgICAgICByZXR1cm4gYiArIGM7XHJcbiAgICB9XHJcbiAgICBpZiAoIXApIHtcclxuICAgICAgICBwID0gZCAqICgwLjMgKiAxLjUpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhIHx8IGEgPCBNYXRoLmFicyhjKSkge1xyXG4gICAgICAgIGEgPSBjO1xyXG4gICAgICAgIHMgPSBwIC8gNDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHMgPSBwIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihjIC8gYSk7XHJcbiAgICB9XHJcbiAgICBpZiAodCA8IDEpIHtcclxuICAgICAgICByZXR1cm4gLTAuNSAqIChhICogTWF0aC5wb3coMiwgMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSkgKyBiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGEgKiBNYXRoLnBvdygyLCAtMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSAqIDAuNSArIGMgKyBiO1xyXG59O1xyXG5cclxuUmVuZGVySnMuQ2FudmFzLkVhc2luZ3MuRWxhc3RpY0Vhc2VJbk91dCA9IGZ1bmN0aW9uICh0LCBiLCBjLCBkLCBhLCBwKSB7XHJcbiAgICAvLyBhZGRlZCBzID0gMFxyXG4gICAgdmFyIHMgPSAwO1xyXG4gICAgaWYgKHQgPT09IDApIHtcclxuICAgICAgICByZXR1cm4gYjtcclxuICAgIH1cclxuICAgIGlmICgodCAvPSBkIC8gMikgPT09IDIpIHtcclxuICAgICAgICByZXR1cm4gYiArIGM7XHJcbiAgICB9XHJcbiAgICBpZiAoIXApIHtcclxuICAgICAgICBwID0gZCAqICgwLjMgKiAxLjUpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhIHx8IGEgPCBNYXRoLmFicyhjKSkge1xyXG4gICAgICAgIGEgPSBjO1xyXG4gICAgICAgIHMgPSBwIC8gNDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHMgPSBwIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihjIC8gYSk7XHJcbiAgICB9XHJcbiAgICBpZiAodCA8IDEpIHtcclxuICAgICAgICByZXR1cm4gLTAuNSAqIChhICogTWF0aC5wb3coMiwgMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSkgKyBiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGEgKiBNYXRoLnBvdygyLCAtMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSAqIDAuNSArIGMgKyBiO1xyXG59O1xyXG5cclxuXHJcblxyXG5SZW5kZXJKcy5DYW52YXMuVHJhbnNpdGlvbiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdmFyIHJldmVyc2UgPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLmR1cmF0aW9uID0gb3B0aW9ucy5kdXJhdGlvbiAqIDEwMDAgfHwgMTAwMDtcclxuXHJcbiAgICB0aGlzLnNoYXBlID0gb3B0aW9ucy5zaGFwZTtcclxuXHJcbiAgICB0aGlzLnByb3BzID0gb3B0aW9ucy5wcm9wcyB8fCB7fTtcclxuICAgIHRoaXMub3JpZ1Byb3BzID0ge307XHJcbiAgICBmb3IgKHZhciBwcm9wIGluIG9wdGlvbnMucHJvcHMpIHtcclxuICAgICAgICB0aGlzLm9yaWdQcm9wc1twcm9wXSA9IHRoaXMuc2hhcGVbcHJvcF07XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5lYXNpbmcgPSBvcHRpb25zLmVhc2luZyB8fCBSZW5kZXJKcy5DYW52YXMuRWFzaW5ncy5FYXNlSW5PdXQ7XHJcblxyXG4gICAgdmFyIGFuaW1hdGlvbiA9IG5ldyBSZW5kZXJKcy5DYW52YXMuQW5pbWF0aW9uKGZ1bmN0aW9uIChmcmFtZSkge1xyXG4gICAgICAgIGlmIChmcmFtZS50aW1lID49IHNlbGYuZHVyYXRpb24pIHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uLnN0b3AoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBzZWxmLnByb3BzKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNoYXBlW3Byb3BdID0gc2VsZi5lYXNpbmcoZnJhbWUudGltZSwgc2VsZi5vcmlnUHJvcHNbcHJvcF0gKyBzZWxmLnByb3BzW3Byb3BdLCBzZWxmLnByb3BzW3Byb3BdICogLTEsIHNlbGYuZHVyYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zaGFwZVtwcm9wXSA9IHNlbGYuZWFzaW5nKGZyYW1lLnRpbWUsIHNlbGYub3JpZ1Byb3BzW3Byb3BdLCBzZWxmLnByb3BzW3Byb3BdLCBzZWxmLmR1cmF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LCB0aGlzLnNoYXBlLmxheWVyKTtcclxuXHJcbiAgICB0aGlzLnBsYXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYW5pbWF0aW9uLnN0YXJ0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucGF1c2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYW5pbWF0aW9uLnBhdXNlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc3RvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhbmltYXRpb24uc3RvcCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJldmVyc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV2ZXJzZSA9IHRydWU7XHJcbiAgICAgICAgYW5pbWF0aW9uLnN0YXJ0KCk7XHJcbiAgICB9O1xyXG59IiwidmFyIFJlbmRlckpzID0gUmVuZGVySnMgfHwge307XHJcblJlbmRlckpzLlBoeXNpY3MgPSBSZW5kZXJKcy5QaHlzaWNzIHx8IHt9O1xyXG5cclxuUmVuZGVySnMuUGh5c2ljcy5Db2xsaXNpb25zID0gKGZ1bmN0aW9uIChtb2R1bGUpIHtcclxuXHJcbiAgICB2YXIgX3JheUNhc3RpbmdBbGcgPSBmdW5jdGlvbiAocCwgZWRnZSkge1xyXG4gICAgICAgICd0YWtlcyBhIHBvaW50IHA9UHQoKSBhbmQgYW4gZWRnZSBvZiB0d28gZW5kcG9pbnRzIGEsYj1QdCgpIG9mIGEgbGluZSBzZWdtZW50IHJldHVybnMgYm9vbGVhbic7XHJcbiAgICAgICAgdmFyIF9lcHMgPSAwLjAwMDAxO1xyXG4gICAgICAgIHZhciBfaHVnZSA9IE51bWJlci5NQVhfVkFMVUU7XHJcbiAgICAgICAgdmFyIF90aW55ID0gTnVtYmVyLk1JTl9WQUxVRTtcclxuICAgICAgICB2YXIgbV9ibHVlLCBtX3JlZCA9IDA7XHJcbiAgICAgICAgdmFyIGEgPSBlZGdlLnAxO1xyXG4gICAgICAgIHZhciBiID0gZWRnZS5wMjtcclxuXHJcbiAgICAgICAgaWYgKGEueSA+IGIueSkge1xyXG4gICAgICAgICAgICBhLnNldChiKTtcclxuICAgICAgICAgICAgYi5zZXQoYSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwLnkgPT0gYS55IHx8IHAueSA9PSBiLnkpXHJcbiAgICAgICAgICAgIHAueSArPSBfZXBzO1xyXG5cclxuICAgICAgICB2YXIgaW50ZXJzZWN0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICgocC55ID4gYi55IHx8IHAueSA8IGEueSkgfHwgKHAueCA+IE1hdGgubWF4KGEueCwgYi54KSkpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKHAueCA8IE1hdGgubWluKGEueCwgYi54KSlcclxuICAgICAgICAgICAgaW50ZXJzZWN0ID0gdHJ1ZTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGEueCAtIGIueCkgPiBfdGlueSlcclxuICAgICAgICAgICAgICAgIG1fcmVkID0gKGIueSAtIGEueSkgLyAoYi54IC0gYS54KTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgbV9yZWQgPSBfaHVnZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhhLnggLSBwLngpID4gX3RpbnkpXHJcbiAgICAgICAgICAgICAgICBtX2JsdWUgPSAocC55IC0gYS55KSAvIChwLnggLSBhLngpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBtX2JsdWUgPSBfaHVnZVxyXG4gICAgICAgICAgICBpbnRlcnNlY3QgPSBtX2JsdWUgPj0gbV9yZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaW50ZXJzZWN0O1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBfdm9ybm9pUmVnaW9uID0gZnVuY3Rpb24gKGxpbmUsIHBvaW50KSB7XHJcbiAgICAgICAgdmFyIGxlbjIgPSBsaW5lLmxlbmd0aDIoKTtcclxuICAgICAgICB2YXIgZHAgPSBwb2ludC5kb3QobGluZSk7XHJcbiAgICAgICAgLy8gSWYgdGhlIHBvaW50IGlzIGJleW9uZCB0aGUgc3RhcnQgb2YgdGhlIGxpbmUsIGl0IGlzIGluIHRoZVxyXG4gICAgICAgIC8vIGxlZnQgdm9ybm9pIHJlZ2lvbi5cclxuICAgICAgICBpZiAoZHAgPCAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgdGhlIHBvaW50IGlzIGJleW9uZCB0aGUgZW5kIG9mIHRoZSBsaW5lLCBpdCBpcyBpbiB0aGVcclxuICAgICAgICAvLyByaWdodCB2b3Jub2kgcmVnaW9uLlxyXG4gICAgICAgIGVsc2UgaWYgKGRwID4gbGVuMikge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBpdCdzIGluIHRoZSBtaWRkbGUgb25lLlxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIF9wb2ludEluUG9seWdvbiA9IGZ1bmN0aW9uIChwLCBwb2x5Z29uKSB7XHJcbiAgICAgICAgdmFyIHJlcyA9IGZhbHNlO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9seWdvbi5yRWRnZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKF9yYXlDYXN0aW5nQWxnKHAsIHBvbHlnb24uckVkZ2VzW2ldKSlcclxuICAgICAgICAgICAgICAgIHJlcyA9ICFyZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIF9wb2ludEluTGluZSA9IGZ1bmN0aW9uIChwLCBsaW5lKSB7XHJcbiAgICAgICAgdmFyIG0gPSAobGluZS5wb3MyLnkgLSBsaW5lLnBvcy55KSAvIChsaW5lLnBvczIueCAtIGxpbmUucG9zLngpO1xyXG5cclxuICAgICAgICByZXR1cm4gcC55IC0gbGluZS5wb3MueSA9PSBtICogKHAueCAtIGxpbmUucG9zLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBfcG9pbnRJbkNpcmNsZSA9IGZ1bmN0aW9uIChwLCBjKSB7XHJcbiAgICAgICAgbyA9IGMuZ2V0Q2VudGVyKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBNYXRoLnBvdyhwLnggLSBvLngsIDIpICsgTWF0aC5wb3cocC55IC0gby55LCAyKSA8PSBNYXRoLnBvdygodGhpcy53aWR0aCAvIDIpLCAyKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgX3JlY3RWc1JlY3QgPSBmdW5jdGlvbiAocjEsIHIyKSB7XHJcbiAgICAgICAgdmFyIHR3ID0gcjEud2lkdGg7XHJcbiAgICAgICAgdmFyIHRoID0gcjEuaGVpZ2h0O1xyXG4gICAgICAgIHZhciBydyA9IHIyLndpZHRoO1xyXG4gICAgICAgIHZhciByaCA9IHIyLmhlaWdodDtcclxuICAgICAgICBpZiAocncgPD0gMCB8fCByaCA8PSAwIHx8IHR3IDw9IDAgfHwgdGggPD0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0eCA9IHIxLng7XHJcbiAgICAgICAgdmFyIHR5ID0gcjEueTtcclxuICAgICAgICB2YXIgcnggPSByMi54O1xyXG4gICAgICAgIHZhciByeSA9IHIyLnk7XHJcbiAgICAgICAgcncgKz0gcng7XHJcbiAgICAgICAgcmggKz0gcnk7XHJcbiAgICAgICAgdHcgKz0gdHg7XHJcbiAgICAgICAgdGggKz0gdHk7XHJcbiAgICAgICAgLy9vdmVyZmxvdyB8fCBpbnRlcnNlY3RcclxuICAgICAgICByZXR1cm4gKChydyA8IHJ4IHx8IHJ3ID4gdHgpICYmXHJcbiAgICAgICAgKHJoIDwgcnkgfHwgcmggPiB0eSkgJiZcclxuICAgICAgICAodHcgPCB0eCB8fCB0dyA+IHJ4KSAmJlxyXG4gICAgICAgICh0aCA8IHR5IHx8IHRoID4gcnkpKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgX3JlY3RWc0NpcmNsZSA9IGZ1bmN0aW9uIChyLCBjKSB7XHJcbiAgICAgICAgcmV0dXJuIF9wb2ludEluUmVjdGFuZ2xlKGMuZ2V0Q2VudGVyKCksIHIpIHx8XHJcbiAgICAgICAgICAgIF9saW5lVnNDaXJjbGUoci50b3BFZGdlKCksIGMpIHx8XHJcbiAgICAgICAgICAgIF9saW5lVnNDaXJjbGUoci5yaWdodEVkZ2UoKSwgYykgfHxcclxuICAgICAgICAgICAgX2xpbmVWc0NpcmNsZShyLmJvdHRvbUVkZ2UoKSwgYykgfHxcclxuICAgICAgICAgICAgX2xpbmVWc0NpcmNsZShyLmxlZnRFZGdlKCksIGMpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBfbGluZVZzQ2lyY2xlID0gZnVuY3Rpb24gKGwsIGMpIHtcclxuICAgICAgICB2YXIgY28gPSBjLmdldENlbnRlcigpO1xyXG4gICAgICAgIHZhciByID0gYy5yYWRpdXM7XHJcbiAgICAgICAgdmFyIGQgPSBuZXcgUmVuZGVySnMuVmVjdG9yKGwucG9zMi54IC0gbC5wb3MueCwgbC5wb3MyLnkgLSBsLnBvcy55KTtcclxuICAgICAgICB2YXIgZiA9IG5ldyBSZW5kZXJKcy5WZWN0b3IobC5wb3MueCAtIGNvLngsIGwucG9zLnkgLSBjby55KTtcclxuXHJcbiAgICAgICAgdmFyIGEgPSBkLmRvdChkKTtcclxuICAgICAgICB2YXIgYiA9IDIgKiBmLmRvdChkKTtcclxuICAgICAgICB2YXIgYyA9IGYuZG90KGYpIC0gciAqIHI7XHJcblxyXG4gICAgICAgIHZhciBkaXNjcmltaW5hbnQgPSBiICogYiAtIDQgKiBhICogYztcclxuXHJcbiAgICAgICAgaWYgKGRpc2NyaW1pbmFudCA8IDApIHtcclxuICAgICAgICAgICAgLy8gbm8gaW50ZXJzZWN0aW9uXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHJheSBkaWRuJ3QgdG90YWxseSBtaXNzIHNwaGVyZSxcclxuICAgICAgICAgICAgLy8gc28gdGhlcmUgaXMgYSBzb2x1dGlvbiB0b1xyXG4gICAgICAgICAgICAvLyB0aGUgZXF1YXRpb24uXHJcblxyXG4gICAgICAgICAgICBkaXNjcmltaW5hbnQgPSBNYXRoLnNxcnQoZGlzY3JpbWluYW50KTtcclxuXHJcbiAgICAgICAgICAgIC8vIGVpdGhlciBzb2x1dGlvbiBtYXkgYmUgb24gb3Igb2ZmIHRoZSByYXkgc28gbmVlZCB0byB0ZXN0IGJvdGhcclxuICAgICAgICAgICAgLy8gdDEgaXMgYWx3YXlzIHRoZSBzbWFsbGVyIHZhbHVlLCBiZWNhdXNlIEJPVEggZGlzY3JpbWluYW50IGFuZFxyXG4gICAgICAgICAgICAvLyBhIGFyZSBub25uZWdhdGl2ZS5cclxuICAgICAgICAgICAgdmFyIHQxID0gKC1iIC0gZGlzY3JpbWluYW50KSAvICgyICogYSk7XHJcbiAgICAgICAgICAgIHZhciB0MiA9ICgtYiArIGRpc2NyaW1pbmFudCkgLyAoMiAqIGEpO1xyXG5cclxuICAgICAgICAgICAgLy8gM3ggSElUIGNhc2VzOlxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAtby0+ICAgICAgICAgICAgIC0tfC0tPiAgfCAgICAgICAgICAgIHwgIC0tfC0+XHJcbiAgICAgICAgICAgIC8vIEltcGFsZSh0MSBoaXQsdDIgaGl0KSwgUG9rZSh0MSBoaXQsdDI+MSksIEV4aXRXb3VuZCh0MTwwLCB0MiBoaXQpLCBcclxuXHJcbiAgICAgICAgICAgIC8vIDN4IE1JU1MgY2FzZXM6XHJcbiAgICAgICAgICAgIC8vICAgICAgIC0+ICBvICAgICAgICAgICAgICAgICAgICAgbyAtPiAgICAgICAgICAgICAgfCAtPiB8XHJcbiAgICAgICAgICAgIC8vIEZhbGxTaG9ydCAodDE+MSx0Mj4xKSwgUGFzdCAodDE8MCx0MjwwKSwgQ29tcGxldGVseUluc2lkZSh0MTwwLCB0Mj4xKVxyXG5cclxuICAgICAgICAgICAgaWYgKHQxID49IDAgJiYgdDEgPD0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gdDEgaXMgdGhlIGludGVyc2VjdGlvbiwgYW5kIGl0J3MgY2xvc2VyIHRoYW4gdDJcclxuICAgICAgICAgICAgICAgIC8vIChzaW5jZSB0MSB1c2VzIC1iIC0gZGlzY3JpbWluYW50KVxyXG4gICAgICAgICAgICAgICAgLy8gSW1wYWxlLCBQb2tlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaGVyZSB0MSBkaWRuJ3QgaW50ZXJzZWN0IHNvIHdlIGFyZSBlaXRoZXIgc3RhcnRlZFxyXG4gICAgICAgICAgICAvLyBpbnNpZGUgdGhlIHNwaGVyZSBvciBjb21wbGV0ZWx5IHBhc3QgaXRcclxuICAgICAgICAgICAgaWYgKHQyID49IDAgJiYgdDIgPD0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gRXhpdFdvdW5kXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gbm8gaW50bjogRmFsbFNob3J0LCBQYXN0LCBDb21wbGV0ZWx5SW5zaWRlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIF9jaXJjbGVWc0NpcmNsZSA9IGZ1bmN0aW9uIChjMSwgYzIpIHtcclxuICAgICAgICB2YXIgdmVsb2NpdHkgPSBjMi52O1xyXG4gICAgICAgIC8vYWRkIGJvdGggcmFkaWkgdG9nZXRoZXIgdG8gZ2V0IHRoZSBjb2xsaWRpbmcgZGlzdGFuY2VcclxuICAgICAgICB2YXIgdG90YWxSYWRpdXMgPSBjMS5yYWRpdXMgKyBjMi5yYWRpdXM7XHJcbiAgICAgICAgLy9maW5kIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSB0d28gY2lyY2xlcyB1c2luZyBQeXRoYWdvcmVhbiB0aGVvcmVtLiBObyBzcXVhcmUgcm9vdHMgZm9yIG9wdGltaXphdGlvblxyXG4gICAgICAgIHZhciBkaXN0YW5jZVNxdWFyZWQgPSAoYzEucG9zLnggLSBjMi5wb3MueCkgKiAoYzEucG9zLnggLSBjMi5wb3MueCkgKyAoYzEucG9zLnkgLSBjMi5wb3MueSkgKiAoYzEucG9zLnkgLSBjMi5wb3MueSk7XHJcbiAgICAgICAgLy9pZiB5b3VyIGRpc3RhbmNlIGlzIGxlc3MgdGhhbiB0aGUgdG90YWxSYWRpdXMgc3F1YXJlKGJlY2F1c2UgZGlzdGFuY2UgaXMgc3F1YXJlZClcclxuICAgICAgICBpZiAoZGlzdGFuY2VTcXVhcmVkIDwgdG90YWxSYWRpdXMgKiB0b3RhbFJhZGl1cykge1xyXG4gICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZGlzdGFuY2VTcXVhcmVkKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzZXBhcmF0aW9uID0gdG90YWxSYWRpdXMgLSBkaXN0YW5jZTtcclxuICAgICAgICAgICAgdmFyIHVuaXRWZWN0b3IgPSBuZXcgUmVuZGVySnMuVmVjdG9yKGMxLnBvcy5zdWIoYzIucG9zKS54IC8gZGlzdGFuY2UsIGMxLnBvcy5zdWIoYzIucG9zKS55IC8gZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICB2YXIgZGlmZlYgPSBjMi5wb3Muc3ViKGMxLnBvcyk7XHJcblxyXG4gICAgICAgICAgICAvL2ZpbmQgdGhlIG1vdmVtZW50IG5lZWRlZCB0byBzZXBhcmF0ZSB0aGUgY2lyY2xlc1xyXG4gICAgICAgICAgICByZXR1cm4gdmVsb2NpdHkuYWRkKHVuaXRWZWN0b3Iuc2NhbGUoc2VwYXJhdGlvbiAvIDIpKTsvL25ldyBSZW5kZXJKcy5WZWN0b3IoKGMyLnBvcy54IC0gYzEucG9zLngpICogZGlmZmVyZW5jZSwgKGMyLnBvcy55IC0gYzEucG9zLnkpICogZGlmZmVyZW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsOyAvL25vIGNvbGxpc2lvbiwgcmV0dXJuIG51bGxcclxuICAgIH1cclxuXHJcbiAgICB2YXIgX2NpcmNsZVZzUG9seWdvbiA9IGZ1bmN0aW9uIChjaXJjbGUsIHBvbHlnb24pIHtcclxuICAgICAgICAvLyBHZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBjaXJjbGUgcmVsYXRpdmUgdG8gdGhlIHBvbHlnb24uXHJcbiAgICAgICAgdmFyIGNpcmNsZVBvcyA9IGNpcmNsZS5wb3Muc3ViKHBvbHlnb24ucG9zKTtcclxuICAgICAgICB2YXIgcmFkaXVzID0gY2lyY2xlLnJhZGl1cztcclxuICAgICAgICB2YXIgcmFkaXVzMiA9IHJhZGl1cyAqIHJhZGl1cztcclxuICAgICAgICB2YXIgcG9pbnRzID0gcG9seWdvbi52ZXJ0aWNlcy5zbGljZSgpO1xyXG4gICAgICAgIHZhciBsZW4gPSBwb2ludHMubGVuZ3RoO1xyXG4gICAgICAgIHZhciBlZGdlID0gbmV3IFJlbmRlckpzLlZlY3RvcigwLCAwKTtcclxuICAgICAgICB2YXIgcG9pbnQgPSBuZXcgUmVuZGVySnMuVmVjdG9yKDAsIDApO1xyXG4gICAgICAgIHZhciByZXNwb25zZSA9IHtcclxuICAgICAgICAgICAgb3ZlcmxhcDogTnVtYmVyLk1BWF9WQUxVRSxcclxuICAgICAgICAgICAgb3ZlcmxhcE46IG5ldyBSZW5kZXJKcy5WZWN0b3IoMCwgMCksXHJcbiAgICAgICAgICAgIG92ZXJsYXBWOiBuZXcgUmVuZGVySnMuVmVjdG9yKDAsIDApXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBGb3IgZWFjaCBlZGdlIGluIHRoZSBwb2x5Z29uOlxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIG5leHQgPSBpID09PSBsZW4gLSAxID8gMCA6IGkgKyAxO1xyXG4gICAgICAgICAgICB2YXIgcHJldiA9IGkgPT09IDAgPyBsZW4gLSAxIDogaSAtIDE7XHJcbiAgICAgICAgICAgIHZhciBvdmVybGFwID0gMDtcclxuICAgICAgICAgICAgdmFyIG92ZXJsYXBOID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIC8vIEdldCB0aGUgZWRnZS5cclxuICAgICAgICAgICAgZWRnZS5zZXQocG9seWdvbi52ZXJ0aWNlc1tpXSk7XHJcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGUgcmVsYXRpdmUgdG8gdGhlIHN0YXJ0aW5nIHBvaW50IG9mIHRoZSBlZGdlLlxyXG4gICAgICAgICAgICBwb2ludC5zZXQoY2lyY2xlUG9zKTtcclxuICAgICAgICAgICAgcG9pbnQuc2V0KHBvaW50LnN1Yihwb2ludHNbaV0pKTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIGNlbnRlciBvZiB0aGUgY2lyY2xlIGFuZCB0aGUgcG9pbnRcclxuICAgICAgICAgICAgLy8gaXMgYmlnZ2VyIHRoYW4gdGhlIHJhZGl1cywgdGhlIHBvbHlnb24gaXMgZGVmaW5pdGVseSBub3QgZnVsbHkgaW5cclxuICAgICAgICAgICAgLy8gdGhlIGNpcmNsZS5cclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHBvaW50Lmxlbmd0aDIoKSA+IHJhZGl1czIpIHtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlWydhSW5CJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHdoaWNoIFZvcm5vaSByZWdpb24gdGhlIGNlbnRlciBvZiB0aGUgY2lyY2xlIGlzIGluLlxyXG4gICAgICAgICAgICB2YXIgcmVnaW9uID0gX3Zvcm5vaVJlZ2lvbihlZGdlLCBwb2ludCk7XHJcbiAgICAgICAgICAgIC8vIElmIGl0J3MgdGhlIGxlZnQgcmVnaW9uOlxyXG4gICAgICAgICAgICBpZiAocmVnaW9uID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBtYWtlIHN1cmUgd2UncmUgaW4gdGhlIFJJR0hUX1ZPUk5PSV9SRUdJT04gb2YgdGhlIHByZXZpb3VzIGVkZ2UuXHJcbiAgICAgICAgICAgICAgICBlZGdlLnNldChwb2x5Z29uLmVkZ2VzW3ByZXZdKTtcclxuICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGUgcmVsYXRpdmUgdGhlIHN0YXJ0aW5nIHBvaW50IG9mIHRoZSBwcmV2aW91cyBlZGdlXHJcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnQyID0gbmV3IFJlbmRlckpzLlZlY3RvcigwLCAwKS5zZXQoY2lyY2xlUG9zKS5zdWIocG9pbnRzW3ByZXZdKTtcclxuICAgICAgICAgICAgICAgIHJlZ2lvbiA9IF92b3Jub2lSZWdpb24oZWRnZSwgcG9pbnQyKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZWdpb24gPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJdCdzIGluIHRoZSByZWdpb24gd2Ugd2FudC4gIENoZWNrIGlmIHRoZSBjaXJjbGUgaW50ZXJzZWN0cyB0aGUgcG9pbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpc3QgPSBwb2ludC5sZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdCA+IHJhZGl1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBpbnRlcnNlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXQgaW50ZXJzZWN0cywgY2FsY3VsYXRlIHRoZSBvdmVybGFwLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZVsnYkluQSddID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXBOID0gcG9pbnQubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXAgPSByYWRpdXMgLSBkaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgdGhlIHJpZ2h0IHJlZ2lvbjpcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWdpb24gPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFrZSBzdXJlIHdlJ3JlIGluIHRoZSBsZWZ0IHJlZ2lvbiBvbiB0aGUgbmV4dCBlZGdlXHJcbiAgICAgICAgICAgICAgICBlZGdlLnNldChwb2x5Z29uLmVkZ2VzW25leHRdKTtcclxuICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGUgcmVsYXRpdmUgdG8gdGhlIHN0YXJ0aW5nIHBvaW50IG9mIHRoZSBuZXh0IGVkZ2UuXHJcbiAgICAgICAgICAgICAgICBwb2ludC5zZXQoY2lyY2xlUG9zKTtcclxuICAgICAgICAgICAgICAgIHBvaW50LnNldChwb2ludC5zdWIocG9pbnRzW25leHRdKSk7XHJcbiAgICAgICAgICAgICAgICByZWdpb24gPSBfdm9ybm9pUmVnaW9uKGVkZ2UsIHBvaW50KTtcclxuICAgICAgICAgICAgICAgIGlmIChyZWdpb24gPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSXQncyBpbiB0aGUgcmVnaW9uIHdlIHdhbnQuICBDaGVjayBpZiB0aGUgY2lyY2xlIGludGVyc2VjdHMgdGhlIHBvaW50LlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkaXN0ID0gcG9pbnQubGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3QgPiByYWRpdXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEl0IGludGVyc2VjdHMsIGNhbGN1bGF0ZSB0aGUgb3ZlcmxhcC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VbJ2JJbkEnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVybGFwTiA9IHBvaW50Lm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVybGFwID0gcmFkaXVzIC0gZGlzdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIGl0J3MgdGhlIG1pZGRsZSByZWdpb246XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIGNoZWNrIGlmIHRoZSBjaXJjbGUgaXMgaW50ZXJzZWN0aW5nIHRoZSBlZGdlLFxyXG4gICAgICAgICAgICAgICAgLy8gQ2hhbmdlIHRoZSBlZGdlIGludG8gaXRzIFwiZWRnZSBub3JtYWxcIi5cclxuICAgICAgICAgICAgICAgIHZhciBub3JtYWwgPSBlZGdlLnBlcnAoKS5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIHBlcnBlbmRpY3VsYXIgZGlzdGFuY2UgYmV0d2VlbiB0aGUgY2VudGVyIG9mIHRoZSBcclxuICAgICAgICAgICAgICAgIC8vIGNpcmNsZSBhbmQgdGhlIGVkZ2UuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGlzdCA9IHBvaW50LmRvdChub3JtYWwpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRpc3RBYnMgPSBNYXRoLmFicyhkaXN0KTtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjaXJjbGUgaXMgb24gdGhlIG91dHNpZGUgb2YgdGhlIGVkZ2UsIHRoZXJlIGlzIG5vIGludGVyc2VjdGlvbi5cclxuICAgICAgICAgICAgICAgIGlmIChkaXN0ID4gMCAmJiBkaXN0QWJzID4gcmFkaXVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEl0IGludGVyc2VjdHMsIGNhbGN1bGF0ZSB0aGUgb3ZlcmxhcC5cclxuICAgICAgICAgICAgICAgICAgICBvdmVybGFwTiA9IG5vcm1hbDtcclxuICAgICAgICAgICAgICAgICAgICBvdmVybGFwID0gcmFkaXVzIC0gZGlzdDtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGUgaXMgb24gdGhlIG91dHNpZGUgb2YgdGhlIGVkZ2UsIG9yIHBhcnQgb2YgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2lyY2xlIGlzIG9uIHRoZSBvdXRzaWRlLCB0aGUgY2lyY2xlIGlzIG5vdCBmdWxseSBpbnNpZGUgdGhlIHBvbHlnb24uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3QgPj0gMCB8fCBvdmVybGFwIDwgMiAqIHJhZGl1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZVsnYkluQSddID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGlzIGlzIHRoZSBzbWFsbGVzdCBvdmVybGFwIHdlJ3ZlIHNlZW4sIGtlZXAgaXQuIFxyXG4gICAgICAgICAgICAvLyAob3ZlcmxhcE4gbWF5IGJlIG51bGwgaWYgdGhlIGNpcmNsZSB3YXMgaW4gdGhlIHdyb25nIFZvcm5vaSByZWdpb24pLlxyXG4gICAgICAgICAgICBpZiAob3ZlcmxhcE4gJiYgcmVzcG9uc2UgJiYgTWF0aC5hYnMob3ZlcmxhcCkgPCBNYXRoLmFicyhyZXNwb25zZVsnb3ZlcmxhcCddKSkge1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VbJ292ZXJsYXAnXSA9IG92ZXJsYXA7XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZVsnb3ZlcmxhcE4nXSA9IG5ldyBSZW5kZXJKcy5WZWN0b3IoMCwgMCkuc2V0KG92ZXJsYXBOKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBmaW5hbCBvdmVybGFwIHZlY3RvciAtIGJhc2VkIG9uIHRoZSBzbWFsbGVzdCBvdmVybGFwLlxyXG4gICAgICAgIGlmIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXNwb25zZVsnYSddID0gcG9seWdvbjtcclxuICAgICAgICAgICAgcmVzcG9uc2VbJ2InXSA9IGNpcmNsZTtcclxuICAgICAgICAgICAgcmVzcG9uc2VbJ292ZXJsYXBWJ10gPSBuZXcgUmVuZGVySnMuVmVjdG9yKDAsIDApLnNldChyZXNwb25zZVsnb3ZlcmxhcE4nXSkuc2NhbGUocmVzcG9uc2VbJ292ZXJsYXAnXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAvL3ZhciB0ZXN0MTsvL251bWJlcnMgZm9yIHRlc3RpbmcgbWF4L21pbnNcclxuICAgICAgICAvL3ZhciB0ZXN0MjtcclxuICAgICAgICAvL3ZhciB0ZXN0O1xyXG4gICAgICAgIC8vdmFyIG1pbjE7Ly9zYW1lIGFzIGFib3ZlXHJcbiAgICAgICAgLy92YXIgbWF4MTtcclxuICAgICAgICAvL3ZhciBtaW4yO1xyXG4gICAgICAgIC8vdmFyIG1heDI7XHJcbiAgICAgICAgLy92YXIgbm9ybWFsQXhpcztcclxuICAgICAgICAvL3ZhciBvZmZzZXQ7XHJcbiAgICAgICAgLy92YXIgdmVjdG9yT2Zmc2V0O1xyXG4gICAgICAgIC8vdmFyIHZlY3RvcnM7XHJcbiAgICAgICAgLy92YXIgcDI7XHJcbiAgICAgICAgLy92YXIgZGlzdGFuY2U7XHJcbiAgICAgICAgLy92YXIgdGVzdERpc3RhbmNlID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgICAgICAvL3ZhciBjbG9zZXN0VmVjdG9yID0gbmV3IFJlbmRlckpzLlZlY3RvcigwLCAwKTsvL3RoZSB2ZWN0b3IgdG8gdXNlIHRvIGZpbmQgdGhlIG5vcm1hbFxyXG4gICAgICAgIC8vLy8gZmluZCBvZmZzZXRcclxuICAgICAgICAvL3ZlY3Rvck9mZnNldCA9IG5ldyBSZW5kZXJKcy5WZWN0b3IocG9seWdvbi5wb3MueCAtIGNpcmNsZS5wb3MueCwgcG9seWdvbi5wb3MueSAtIGNpcmNsZS5wb3MueSk7XHJcbiAgICAgICAgLy92ZWN0b3JzID0gcG9seWdvbi52ZXJ0aWNlcy5zbGljZSgpOy8vYWdhaW4sIHRoaXMgaXMganVzdCBhIGZ1bmN0aW9uIGluIG15IHBvbHlnb24gY2xhc3MgdGhhdCByZXR1cm5zIHRoZSB2ZXJ0aWNlcyBvZiB0aGUgcG9sZ29uXHJcbiAgICAgICAgLy8vL2FkZHMgc29tZSBwYWRkaW5nIHRvIG1ha2UgaXQgbW9yZSBhY2N1cmF0ZVxyXG4gICAgICAgIC8vaWYgKHZlY3RvcnMubGVuZ3RoID09IDIpIHtcclxuICAgICAgICAvLyAgICB2YXIgdGVtcCA9IG5ldyBSZW5kZXJKcy5WZWN0b3IoLSh2ZWN0b3JzWzFdLnkgLSB2ZWN0b3JzWzBdLnkpLCB2ZWN0b3JzWzFdLnggLSB2ZWN0b3JzWzBdLngpO1xyXG4gICAgICAgIC8vICAgIHRlbXAudHJ1bmNhdGUoMC4wMDAwMDAwMDAxKTtcclxuICAgICAgICAvLyAgICB2ZWN0b3JzLnB1c2godmVjdG9yc1sxXS5hZGQodGVtcCkpO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIC8vLy8gZmluZCB0aGUgY2xvc2VzdCB2ZXJ0ZXggdG8gdXNlIHRvIGZpbmQgbm9ybWFsXHJcbiAgICAgICAgLy9mb3IgKHZhciBpID0gMDsgaSA8IHZlY3RvcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyAgICBkaXN0YW5jZSA9IChjaXJjbGUucG9zLnggLSAocG9seWdvbi5wb3MueCArIHZlY3RvcnNbaV0ueCkpICogKGNpcmNsZS5wb3MueCAtIChwb2x5Z29uLnBvcy54ICsgdmVjdG9yc1tpXS54KSkgKyAoY2lyY2xlLnBvcy55IC0gKHBvbHlnb24ucG9zLnkgKyB2ZWN0b3JzW2ldLnkpKSAqIChjaXJjbGUucG9zLnkgLSAocG9seWdvbi5wb3MueSArIHZlY3RvcnNbaV0ueSkpO1xyXG4gICAgICAgIC8vICAgIGlmIChkaXN0YW5jZSA8IHRlc3REaXN0YW5jZSkgey8vY2xvc2VzdCBoYXMgdGhlIGxvd2VzdCBkaXN0YW5jZVxyXG4gICAgICAgIC8vICAgICAgICB0ZXN0RGlzdGFuY2UgPSBkaXN0YW5jZTtcclxuICAgICAgICAvLyAgICAgICAgY2xvc2VzdFZlY3Rvci54ID0gcG9seWdvbi5wb3MueCArIHZlY3RvcnNbaV0ueDtcclxuICAgICAgICAvLyAgICAgICAgY2xvc2VzdFZlY3Rvci55ID0gcG9seWdvbi5wb3MueSArIHZlY3RvcnNbaV0ueTtcclxuICAgICAgICAvLyAgICB9XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgLy8vL2dldCB0aGUgbm9ybWFsIHZlY3RvclxyXG4gICAgICAgIC8vbm9ybWFsQXhpcyA9IG5ldyBSZW5kZXJKcy5WZWN0b3IoY2xvc2VzdFZlY3Rvci54IC0gY2lyY2xlLnBvcy54LCBjbG9zZXN0VmVjdG9yLnkgLSBjaXJjbGUucG9zLnkpO1xyXG4gICAgICAgIC8vbm9ybWFsQXhpcy5zZXQobm9ybWFsQXhpcy5ub3JtYWxpemUoKSk7Ly9ub3JtYWxpemUgaXMoc2V0IGl0cyBsZW5ndGggdG8gMSlcclxuICAgICAgICAvLy8vIHByb2plY3QgdGhlIHBvbHlnb24ncyBwb2ludHNcclxuICAgICAgICAvL21pbjEgPSBub3JtYWxBeGlzLmRvdCh2ZWN0b3JzWzBdKTtcclxuICAgICAgICAvL21heDEgPSBtaW4xOy8vc2V0IG1heCBhbmQgbWluXHJcbiAgICAgICAgLy9mb3IgKGogPSAxOyBqIDwgdmVjdG9ycy5sZW5ndGg7IGorKykgey8vcHJvamVjdCBhbGwgaXRzIHBvaW50cywgc3RhcnRpbmcgd2l0aCB0aGUgZmlyc3QodGhlIDB0aCB3YXMgZG9uZSB1cCB0aGVyZV4pXHJcbiAgICAgICAgLy8gICAgdGVzdCA9IG5vcm1hbEF4aXMuZG90KHZlY3RvcnNbal0pOy8vZG90UHJvZHVjdCB0byBwcm9qZWN0XHJcbiAgICAgICAgLy8gICAgaWYgKHRlc3QgPCBtaW4xKSBtaW4xID0gdGVzdDsvL3NtYWxsZXN0IG1pbiBpcyB3YW50ZWRcclxuICAgICAgICAvLyAgICBpZiAodGVzdCA+IG1heDEpIG1heDEgPSB0ZXN0Oy8vbGFyZ2VzdCBtYXggaXMgd2FudGVkXHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgLy8vLyBwcm9qZWN0IHRoZSBjaXJjbGVcclxuICAgICAgICAvL21heDIgPSBjaXJjbGUucmFkaXVzOy8vbWF4IGlzIHJhZGl1c1xyXG4gICAgICAgIC8vbWluMiAtPSBjaXJjbGUucmFkaXVzOy8vbWluIGlzIG5lZ2F0aXZlIHJhZGl1c1xyXG4gICAgICAgIC8vLy8gb2Zmc2V0IHRoZSBwb2x5Z29uJ3MgbWF4L21pblxyXG4gICAgICAgIC8vb2Zmc2V0ID0gbm9ybWFsQXhpcy5kb3QodmVjdG9yT2Zmc2V0KTtcclxuICAgICAgICAvL21pbjEgKz0gb2Zmc2V0O1xyXG4gICAgICAgIC8vbWF4MSArPSBvZmZzZXQ7XHJcbiAgICAgICAgLy8vLyBkbyB0aGUgYmlnIHRlc3RcclxuICAgICAgICAvL3Rlc3QxID0gbWluMSAtIG1heDI7XHJcbiAgICAgICAgLy90ZXN0MiA9IG1pbjIgLSBtYXgxO1xyXG4gICAgICAgIC8vaWYgKHRlc3QxID4gMCB8fCB0ZXN0MiA+IDApIHsvL2lmIGVpdGhlciB0ZXN0IGlzIGdyZWF0ZXIgdGhhbiAwLCB0aGVyZSBpcyBhIGdhcCwgd2UgY2FuIGdpdmUgdXAgbm93LlxyXG4gICAgICAgIC8vICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIC8vLy8gZmluZCB0aGUgbm9ybWFsIGF4aXMgZm9yIGVhY2ggcG9pbnQgYW5kIHByb2plY3RcclxuICAgICAgICAvL2ZvciAoaSA9IDA7IGkgPCB2ZWN0b3JzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gICAgbm9ybWFsQXhpcyA9IF9maW5kTm9ybWFsQXhpcyh2ZWN0b3JzLCBpKTtcclxuICAgICAgICAvLyAgICAvLyBwcm9qZWN0IHRoZSBwb2x5Z29uKGFnYWluPyB5ZXMsIGNpcmNsZXMgdnMuIHBvbHlnb24gcmVxdWlyZSBtb3JlIHRlc3RpbmcuLi4pXHJcbiAgICAgICAgLy8gICAgbWluMSA9IG5vcm1hbEF4aXMuZG90KHZlY3RvcnNbMF0pOy8vcHJvamVjdFxyXG4gICAgICAgIC8vICAgIG1heDEgPSBtaW4xOy8vc2V0IG1heCBhbmQgbWluXHJcbiAgICAgICAgLy8gICAgLy9wcm9qZWN0IGFsbCB0aGUgb3RoZXIgcG9pbnRzKHNlZSwgY2lybGNlcyB2LiBwb2x5Z29ucyB1c2UgbG90cyBvZiB0aGlzLi4uKVxyXG4gICAgICAgIC8vICAgIGZvciAoaiA9IDE7IGogPCB2ZWN0b3JzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgLy8gICAgICAgIHRlc3QgPSBub3JtYWxBeGlzLmRvdCh2ZWN0b3JzW2pdKTsvL21vcmUgcHJvamVjdGlvblxyXG4gICAgICAgIC8vICAgICAgICBpZiAodGVzdCA8IG1pbjEpIG1pbjEgPSB0ZXN0Oy8vc21hbGxlc3QgbWluXHJcbiAgICAgICAgLy8gICAgICAgIGlmICh0ZXN0ID4gbWF4MSkgbWF4MSA9IHRlc3Q7Ly9sYXJnZXN0IG1heFxyXG4gICAgICAgIC8vICAgIH1cclxuICAgICAgICAvLyAgICAvLyBwcm9qZWN0IHRoZSBjaXJjbGUoYWdhaW4pXHJcbiAgICAgICAgLy8gICAgbWF4MiA9IGNpcmNsZS5yYWRpdXM7Ly9tYXggaXMgcmFkaXVzXHJcbiAgICAgICAgLy8gICAgbWluMiAtPSBjaXJjbGUucmFkaXVzOy8vbWluIGlzIG5lZ2F0aXZlIHJhZGl1c1xyXG4gICAgICAgIC8vICAgIC8vb2Zmc2V0IHBvaW50c1xyXG4gICAgICAgIC8vICAgIG9mZnNldCA9IG5vcm1hbEF4aXMuZG90KHZlY3Rvck9mZnNldCk7XHJcbiAgICAgICAgLy8gICAgbWluMSArPSBvZmZzZXQ7XHJcbiAgICAgICAgLy8gICAgbWF4MSArPSBvZmZzZXQ7XHJcbiAgICAgICAgLy8gICAgLy8gZG8gdGhlIHRlc3QsIGFnYWluXHJcbiAgICAgICAgLy8gICAgdGVzdDEgPSBtaW4xIC0gbWF4MjtcclxuICAgICAgICAvLyAgICB0ZXN0MiA9IG1pbjIgLSBtYXgxO1xyXG4gICAgICAgIC8vICAgIGlmICh0ZXN0MSA+IDAgfHwgdGVzdDIgPiAwKSB7XHJcbiAgICAgICAgLy8gICAgICAgIC8vZmFpbGVkLi4gcXVpdCBub3dcclxuICAgICAgICAvLyAgICAgICAgcmV0dXJuIG51bGxcclxuICAgICAgICAvLyAgICB9XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgLy9yZXR1cm4gbmV3IFJlbmRlckpzLlZlY3Rvcihub3JtYWxBeGlzLnggKiAobWF4MiAtIG1pbjEpICogLTEsIG5vcm1hbEF4aXMueSAqIChtYXgyIC0gbWluMSkgKiAtMSk7Ly9yZXR1cm4gdGhlIHNlcGFyYXRpb24gZGlzdGFuY2VcclxuICAgIH1cclxuXHJcbiAgICB2YXIgX3BvaW50SW5SZWN0YW5nbGUgPSBmdW5jdGlvbiAocCwgcikge1xyXG4gICAgICAgIHJldHVybiAocC54ID49IHIueCAmJlxyXG4gICAgICAgIHAueCA8PSByLnggKyByLndpZHRoICYmXHJcbiAgICAgICAgcC55ID49IHIueSAmJlxyXG4gICAgICAgIHAueSA8PSByLnkgKyByLmhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLkFhYmJDb2xsaXNpb24gPSBmdW5jdGlvbiAocmVjdEEsIHJlY3RCKSB7XHJcbiAgICAgICAgaWYgKE1hdGguYWJzKHJlY3RBLnggLSByZWN0Qi54KSA8IHJlY3RBLndpZHRoICsgcmVjdEIud2lkdGgpIHtcclxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHJlY3RBLnkgLSByZWN0Qi55KSA8IHJlY3RBLmhlaWdodCArIHJlY3RCLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICBtb2R1bGUucG9pbnRJbk9iamVjdCA9IGZ1bmN0aW9uIChwLCBvYmopIHtcclxuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5SZWN0YW5nbGUpXHJcbiAgICAgICAgICAgIHJldHVybiBfcG9pbnRJblJlY3RhbmdsZShwLCBvYmopO1xyXG4gICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLkFyYylcclxuICAgICAgICAgICAgcmV0dXJuIF9wb2ludEluQ2lyY2xlKHAsIG9iaik7XHJcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuUG9seWdvbilcclxuICAgICAgICAgICAgcmV0dXJuIF9wb2ludEluUG9seWdvbihwLCBvYmopO1xyXG4gICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLkxpbmUpXHJcbiAgICAgICAgICAgIHJldHVybiBfcG9pbnRJbkxpbmUocCwgb2JqKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jaGVja0NvbGxpc2lvbiA9IGZ1bmN0aW9uIChvYmoxLCBvYmoyLCB2ZWxvY2l0eSkge1xyXG4gICAgICAgIGlmIChvYmoxIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5SZWN0YW5nbGUgJiYgb2JqMiBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuUmVjdGFuZ2xlKVxyXG4gICAgICAgICAgICByZXR1cm4gX3JlY3RWc1JlY3Qob2JqMSwgb2JqMik7XHJcblxyXG4gICAgICAgIGlmIChvYmoxIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5SZWN0YW5nbGUgJiYgb2JqMiBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuQXJjKVxyXG4gICAgICAgICAgICByZXR1cm4gX3JlY3RWc0NpcmNsZShvYmoxLCBvYmoyKTtcclxuICAgICAgICBpZiAob2JqMSBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuQXJjICYmIG9iajIgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLlJlY3RhbmdsZSlcclxuICAgICAgICAgICAgcmV0dXJuIF9yZWN0VnNDaXJjbGUob2JqMiwgb2JqMSk7XHJcblxyXG4gICAgICAgIGlmIChvYmoxIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5BcmMgJiYgb2JqMiBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuQXJjKVxyXG4gICAgICAgICAgICByZXR1cm4gX2NpcmNsZVZzQ2lyY2xlKG9iajEsIG9iajIsIHZlbG9jaXR5KTtcclxuXHJcbiAgICAgICAgaWYgKG9iajEgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLkxpbmUgJiYgb2JqMiBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuQXJjKVxyXG4gICAgICAgICAgICByZXR1cm4gX2xpbmVWc0NpcmNsZShvYmoxLCBvYmoyKTtcclxuICAgICAgICBpZiAob2JqMSBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuQXJjICYmIG9iajIgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLkxpbmUpXHJcbiAgICAgICAgICAgIHJldHVybiBfbGluZVZzQ2lyY2xlKG9iajIsIG9iajEpO1xyXG5cclxuICAgICAgICBpZiAob2JqMSBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuUG9seWdvbiAmJiBvYmoyIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5Qb2x5Z29uKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqMS5zdWJQb2x5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvYmoyLnN1YlBvbHlzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gbW9kdWxlLnBvbHlnb25Db2xsaXNpb24ob2JqMS5zdWJQb2x5c1tpXSwgb2JqMi5zdWJQb2x5c1tqXSwgdmVsb2NpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5pbnRlcnNlY3QgfHwgcmVzcG9uc2Uud2lsbEludGVyc2VjdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsOy8vUmVuZGVySnMuVmVjdG9yLmNsb25lKDAsIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JqMSBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuQXJjICYmIG9iajIgaW5zdGFuY2VvZiBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLlBvbHlnb24pXHJcbiAgICAgICAgICAgIHJldHVybiBfY2lyY2xlVnNQb2x5Z29uKG9iajEsIG9iajIsIHZlbG9jaXR5KTtcclxuICAgICAgICBpZiAob2JqMSBpbnN0YW5jZW9mIFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuUG9seWdvbiAmJiBvYmoyIGluc3RhbmNlb2YgUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5BcmMpXHJcbiAgICAgICAgICAgIHJldHVybiBfY2lyY2xlVnNQb2x5Z29uKG9iajIsIG9iajEsIHZlbG9jaXR5KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBtb2R1bGU7XHJcblxyXG59KFJlbmRlckpzLlBoeXNpY3MuQ29sbGlzaW9ucyB8fCB7fSkpOyIsInZhciBSZW5kZXJKcyA9IFJlbmRlckpzIHx8IHt9O1xyXG5SZW5kZXJKcy5QaHlzaWNzLkNvbGxpc2lvbnMgPSAoZnVuY3Rpb24gKG1vZHVsZSkge1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHBvbHlnb24gQSBpcyBnb2luZyB0byBjb2xsaWRlIHdpdGggcG9seWdvbiBCIGZvciB0aGUgZ2l2ZW4gdmVsb2NpdHlcclxuICAgIG1vZHVsZS5wb2x5Z29uQ29sbGlzaW9uID0gZnVuY3Rpb24gKHBvbHlnb25BLCBwb2x5Z29uQiwgdmVsb2NpdHkpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICBpbnRlcnNlY3Q6IHRydWUsXHJcbiAgICAgICAgICAgIHdpbGxJbnRlcnNlY3Q6IHRydWVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBlZGdlQ291bnRBID0gcG9seWdvbkEuZWRnZXMubGVuZ3RoO1xyXG4gICAgICAgIHZhciBlZGdlQ291bnRCID0gcG9seWdvbkIuZWRnZXMubGVuZ3RoO1xyXG4gICAgICAgIHZhciBtaW5JbnRlcnZhbERpc3RhbmNlID0gSW5maW5pdHk7XHJcbiAgICAgICAgdmFyIHRyYW5zbGF0aW9uQXhpcyA9IG5ldyBSZW5kZXJKcy5WZWN0b3IoKTtcclxuICAgICAgICB2YXIgZWRnZTtcclxuXHJcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCB0aGUgZWRnZXMgb2YgYm90aCBwb2x5Z29uc1xyXG4gICAgICAgIGZvciAodmFyIGVkZ2VJbmRleCA9IDAsIGwgPSBlZGdlQ291bnRBICsgZWRnZUNvdW50QjsgZWRnZUluZGV4IDwgbDsgZWRnZUluZGV4KyspIHtcclxuICAgICAgICAgICAgaWYgKGVkZ2VJbmRleCA8IGVkZ2VDb3VudEEpIHtcclxuICAgICAgICAgICAgICAgIGVkZ2UgPSBwb2x5Z29uQS5lZGdlc1tlZGdlSW5kZXhdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWRnZSA9IHBvbHlnb25CLmVkZ2VzW2VkZ2VJbmRleCAtIGVkZ2VDb3VudEFdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyA9PT09PSAxLiBGaW5kIGlmIHRoZSBwb2x5Z29ucyBhcmUgY3VycmVudGx5IGludGVyc2VjdGluZyA9PT09PVxyXG5cclxuICAgICAgICAgICAgLy8gRmluZCB0aGUgYXhpcyBwZXJwZW5kaWN1bGFyIHRvIHRoZSBjdXJyZW50IGVkZ2VcclxuICAgICAgICAgICAgdmFyIGF4aXMgPSBuZXcgUmVuZGVySnMuVmVjdG9yKC1lZGdlLnksIGVkZ2UueCk7XHJcbiAgICAgICAgICAgIGF4aXMuc2V0KGF4aXMubm9ybWFsaXplKCkpO1xyXG5cclxuICAgICAgICAgICAgLy8gRmluZCB0aGUgcHJvamVjdGlvbiBvZiB0aGUgcG9seWdvbiBvbiB0aGUgY3VycmVudCBheGlzXHJcbiAgICAgICAgICAgIHZhciBtaW5BID0gMCwgbWluQiA9IDAsIG1heEEgPSAwLCBtYXhCID0gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9qZWN0ZWRBID0gX3Byb2plY3RQb2x5Z29uKGF4aXMsIHBvbHlnb25BLCBtaW5BLCBtYXhBKTtcclxuICAgICAgICAgICAgbWluQSA9IHByb2plY3RlZEEubWluO1xyXG4gICAgICAgICAgICBtYXhBID0gcHJvamVjdGVkQS5tYXg7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvamVjdGVkQiA9IF9wcm9qZWN0UG9seWdvbihheGlzLCBwb2x5Z29uQiwgbWluQiwgbWF4Qik7XHJcbiAgICAgICAgICAgIG1pbkIgPSBwcm9qZWN0ZWRCLm1pbjtcclxuICAgICAgICAgICAgbWF4QiA9IHByb2plY3RlZEIubWF4O1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHBvbHlnb24gcHJvamVjdGlvbnMgYXJlIGN1cnJlbnRsdHkgaW50ZXJzZWN0aW5nXHJcbiAgICAgICAgICAgIGlmIChfaW50ZXJ2YWxEaXN0YW5jZShtaW5BLCBtYXhBLCBtaW5CLCBtYXhCKSA+IDApIHJlc3VsdC5pbnRlcnNlY3QgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8vID09PT09IDIuIE5vdyBmaW5kIGlmIHRoZSBwb2x5Z29ucyAqd2lsbCogaW50ZXJzZWN0ID09PT09XHJcblxyXG4gICAgICAgICAgICAvLyBQcm9qZWN0IHRoZSB2ZWxvY2l0eSBvbiB0aGUgY3VycmVudCBheGlzXHJcbiAgICAgICAgICAgIHZhciB2ZWxvY2l0eVByb2plY3Rpb24gPSBheGlzLmRvdCh2ZWxvY2l0eSk7XHJcblxyXG4gICAgICAgICAgICAvLyBHZXQgdGhlIHByb2plY3Rpb24gb2YgcG9seWdvbiBBIGR1cmluZyB0aGUgbW92ZW1lbnRcclxuICAgICAgICAgICAgaWYgKHZlbG9jaXR5UHJvamVjdGlvbiA8IDApIHtcclxuICAgICAgICAgICAgICAgIG1pbkEgKz0gdmVsb2NpdHlQcm9qZWN0aW9uO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWF4QSArPSB2ZWxvY2l0eVByb2plY3Rpb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIERvIHRoZSBzYW1lIHRlc3QgYXMgYWJvdmUgZm9yIHRoZSBuZXcgcHJvamVjdGlvblxyXG4gICAgICAgICAgICB2YXIgaW50ZXJ2YWxEaXN0YW5jZSA9IF9pbnRlcnZhbERpc3RhbmNlKG1pbkEsIG1heEEsIG1pbkIsIG1heEIpO1xyXG4gICAgICAgICAgICBpZiAoaW50ZXJ2YWxEaXN0YW5jZSA+IDApIHJlc3VsdC53aWxsSW50ZXJzZWN0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGUgcG9seWdvbnMgYXJlIG5vdCBpbnRlcnNlY3RpbmcgYW5kIHdvbid0IGludGVyc2VjdCwgZXhpdCB0aGUgbG9vcFxyXG4gICAgICAgICAgICBpZiAoIXJlc3VsdC5pbnRlcnNlY3QgJiYgIXJlc3VsdC53aWxsSW50ZXJzZWN0KSBicmVhaztcclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjdXJyZW50IGludGVydmFsIGRpc3RhbmNlIGlzIHRoZSBtaW5pbXVtIG9uZS4gSWYgc28gc3RvcmVcclxuICAgICAgICAgICAgLy8gdGhlIGludGVydmFsIGRpc3RhbmNlIGFuZCB0aGUgY3VycmVudCBkaXN0YW5jZS5cclxuICAgICAgICAgICAgLy8gVGhpcyB3aWxsIGJlIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBtaW5pbXVtIHRyYW5zbGF0aW9uIHZlY3RvclxyXG4gICAgICAgICAgICBpbnRlcnZhbERpc3RhbmNlID0gTWF0aC5hYnMoaW50ZXJ2YWxEaXN0YW5jZSk7XHJcbiAgICAgICAgICAgIGlmIChpbnRlcnZhbERpc3RhbmNlIDwgbWluSW50ZXJ2YWxEaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgbWluSW50ZXJ2YWxEaXN0YW5jZSA9IGludGVydmFsRGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbkF4aXMgPSBheGlzO1xyXG5cclxuICAgICAgICAgICAgICAgIGQgPSBwb2x5Z29uQS5nZXRDZW50ZXIoKS5zdWIocG9seWdvbkIuZ2V0Q2VudGVyKCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGQuZG90KHRyYW5zbGF0aW9uQXhpcykgPCAwKSB0cmFuc2xhdGlvbkF4aXMgPSB0cmFuc2xhdGlvbkF4aXMuc2NhbGUoLTEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBUaGUgbWluaW11bSB0cmFuc2xhdGlvbiB2ZWN0b3IgY2FuIGJlIHVzZWQgdG8gcHVzaCB0aGUgcG9seWdvbnMgYXBwYXJ0LlxyXG4gICAgICAgIC8vIEZpcnN0IG1vdmVzIHRoZSBwb2x5Z29ucyBieSB0aGVpciB2ZWxvY2l0eVxyXG4gICAgICAgIC8vIHRoZW4gbW92ZSBwb2x5Z29uQSBieSBNaW5pbXVtVHJhbnNsYXRpb25WZWN0b3IuXHJcbiAgICAgICAgaWYgKHJlc3VsdC53aWxsSW50ZXJzZWN0KSByZXN1bHQubWluaW11bVRyYW5zbGF0aW9uVmVjdG9yID0gdHJhbnNsYXRpb25BeGlzLnNjYWxlKG1pbkludGVydmFsRGlzdGFuY2UpO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENhbGN1bGF0ZSB0aGUgZGlzdGFuY2UgYmV0d2VlbiBbbWluQSwgbWF4QV0gYW5kIFttaW5CLCBtYXhCXVxyXG4gICAgLy8gVGhlIGRpc3RhbmNlIHdpbGwgYmUgbmVnYXRpdmUgaWYgdGhlIGludGVydmFscyBvdmVybGFwXHJcbiAgICB2YXIgX2ludGVydmFsRGlzdGFuY2UgPSBmdW5jdGlvbiAobWluQSwgbWF4QSwgbWluQiwgbWF4Qikge1xyXG4gICAgICAgIGlmIChtaW5BIDwgbWluQikge1xyXG4gICAgICAgICAgICByZXR1cm4gbWluQiAtIG1heEE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1pbkEgLSBtYXhCO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdGhlIHByb2plY3Rpb24gb2YgYSBwb2x5Z29uIG9uIGFuIGF4aXMgYW5kIHJldHVybnMgaXQgYXMgYSBbbWluLCBtYXhdIGludGVydmFsXHJcbiAgICB2YXIgX3Byb2plY3RQb2x5Z29uID0gZnVuY3Rpb24gKGF4aXMsIHBvbHlnb24sIG1pbiwgbWF4KSB7XHJcbiAgICAgICAgLy8gVG8gcHJvamVjdCBhIHBvaW50IG9uIGFuIGF4aXMgdXNlIHRoZSBkb3QgcHJvZHVjdFxyXG4gICAgICAgIHZhciBkID0gYXhpcy5kb3QocG9seWdvbi52ZXJ0aWNlc1swXSk7XHJcbiAgICAgICAgbWluID0gZDtcclxuICAgICAgICBtYXggPSBkO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9seWdvbi52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBkID0gcG9seWdvbi52ZXJ0aWNlc1tpXS5kb3QoYXhpcyk7XHJcbiAgICAgICAgICAgIGlmIChkIDwgbWluKSB7XHJcbiAgICAgICAgICAgICAgICBtaW4gPSBkO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGQgPiBtYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXggPSBkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG1pbjogbWluLFxyXG4gICAgICAgICAgICBtYXg6IG1heFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG1vZHVsZTtcclxuXHJcbn0oUmVuZGVySnMuUGh5c2ljcy5Db2xsaXNpb25zIHx8IHt9KSk7IiwicmVnaXN0ZXJOYW1lc3BhY2UoXCJSZW5kZXJKcy5DYW52YXMuU2hhcGVzXCIpO1xyXG5cclxuLypcclxuICpSZXByZXNlbnRzIGEgY2lyY2xlIHNoYXBlLCBpbmhlcml0cyBmcm9tIHNoYXBlXHJcbiAqL1xyXG5SZW5kZXJKcy5DYW52YXMuU2hhcGVzLkFyYyA9IGluamVjdChcIlV0aWxzXCIpXHJcbiAgICAuYmFzZShSZW5kZXJKcy5DYW52YXMuT2JqZWN0KVxyXG4gICAgLmNsYXNzKGZ1bmN0aW9uICh1dGlscywgb3B0aW9ucykge1xyXG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgICAgIHRoaXMuYmFzZShvcHRpb25zKTtcclxuXHJcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgb3B0aW9ucy53aWR0aCA9IG9wdGlvbnMuaGVpZ2h0ID0gb3B0aW9ucy5yYWRpdXMgKiAyLCBvcHRpb25zLnJhZGl1cyAqIDI7XHJcblxyXG4gICAgICAgIHRoaXMucmFkaXVzID0gb3B0aW9ucy5yYWRpdXM7XHJcbiAgICAgICAgdGhpcy5zQW5nbGUgPSB1dGlscy5jb252ZXJ0VG9SYWQob3B0aW9ucy5zQW5nbGUgfHwgMCk7XHJcbiAgICAgICAgdGhpcy5lQW5nbGUgPSB1dGlscy5jb252ZXJ0VG9SYWQob3B0aW9ucy5lQW5nbGUgfHwgMzYwKTtcclxuICAgICAgICB0aGlzLmNvbG9yID0gb3B0aW9ucy5jb2xvcjtcclxuICAgICAgICB0aGlzLmZpbGxDb2xvciA9IG9wdGlvbnMuZmlsbENvbG9yO1xyXG4gICAgICAgIHRoaXMubGluZVdpZHRoID0gb3B0aW9ucy5saW5lV2lkdGggfHwgMTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKk92ZXJyaWRlcyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24sIGJlY2F1c2UgdGhlIGNpcmNsZSBjZW50ZXIgcG9pbnQgaXMgbm90IHRoZSB0b3AsbGVmdCBjb3JuZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmdldENlbnRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZW5kZXJKcy5WZWN0b3IodGhpcy5wb3MueCArIHRoaXMud2lkdGggLyAyLCB0aGlzLnBvcy55ICsgdGhpcy5oZWlnaHQgLyAyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqT3ZlcnJpZGVzIHRoZSBvcmlnaW5hbCBmdW5jdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucG9pbnRJbnRlcnNlY3QgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IHRoaXMuZ2V0Q2VudGVyKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5wb3cocC54IC0gYy54LCAyKSArIE1hdGgucG93KHAueSAtIGMueSwgMikgPD0gTWF0aC5wb3coKHRoaXMud2lkdGggLyAyKSwgMik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKkZ1bmN0aW9uIGlzIGNhbGxlZCBpbiBldmVyeSBmcmFtZSB0byByZWRyYXcgaXRzZWxmXHJcbiAgICAgICAgICotY3R4IGlzIHRoZSBkcmF3aW5nIGNvbnRleHQgZnJvbSBhIGNhbnZhc1xyXG4gICAgICAgICAqLWZwcyBpcyB0aGUgZnJhbWUgcGVyIHNlY29uZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uIChjdHgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYW5nbGUgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZVNoYXBlKGN0eCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBjdHgubGluZVdpZHRoID0gdGhpcy5saW5lV2lkdGg7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY29sb3I7XHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmZpbGxDb2xvcjtcclxuICAgICAgICAgICAgY3R4LmFyYyh0aGlzLnBvcy54ICsgdGhpcy53aWR0aCAvIDIsIHRoaXMucG9zLnkgKyB0aGlzLmhlaWdodCAvIDIsIHRoaXMud2lkdGggLyAyLCB0aGlzLnNBbmdsZSwgdGhpcy5lQW5nbGUpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb2xvcikge1xyXG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbGxDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hbmdsZSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTsiLCJyZWdpc3Rlck5hbWVzcGFjZShcIlJlbmRlckpzLkNhbnZhcy5TaGFwZXNcIik7XHJcblxyXG4vKlxyXG4gKlJlcHJlc2VudHMgYW4gaW1hZ2UsIGluaGVyaXRzIGZyb20gb2JqZWN0XHJcbiAqL1xyXG5SZW5kZXJKcy5DYW52YXMuU2hhcGVzLkltYWdlID0gaW5qZWN0KFwiVXRpbHNcIilcclxuICAgIC5iYXNlKFJlbmRlckpzLkNhbnZhcy5PYmplY3QpXHJcbiAgICAuY2xhc3MoZnVuY3Rpb24gKHV0aWxzLCBvcHRpb25zKSB7XHJcblxyXG4gICAgICAgIHRoaXMuYmFzZShvcHRpb25zKTtcclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIExvY2Fsc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBfaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgIF9pbWFnZS5zcmMgPSBvcHRpb25zLnVybDtcclxuICAgICAgICBfaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLndpZHRoID0gX2ltYWdlLndpZHRoO1xyXG4gICAgICAgICAgICBzZWxmLmhlaWdodCA9IF9pbWFnZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIF9sb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIF9sb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgX2JsdXJSYWRpdXMgPSBvcHRpb25zLmJsdXJSYWRpdXMgfHwgMDtcclxuICAgICAgICB2YXIgX2NhY2hlID0gb3B0aW9ucy5jYWNoZSA9PSB1bmRlZmluZWQgPyB0cnVlIDogb3B0aW9ucy5jYWNoZTtcclxuICAgICAgICB2YXIgX2ZpbHRlckNhY2hlID0gbnVsbDtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICpGdW5jdGlvbiBpcyBjYWxsZWQgaW4gZXZlcnkgZnJhbWUgdG8gcmVkcmF3IGl0c2VsZlxyXG4gICAgICAgICAqLWN0eCBpcyB0aGUgZHJhd2luZyBjb250ZXh0IGZyb20gYSBjYW52YXNcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmRyYXcgPSBmdW5jdGlvbiAoY3R4KSB7XHJcbiAgICAgICAgICAgIGlmICghX2xvYWRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIV9maWx0ZXJDYWNoZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZpbHRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuZmlsdGVyc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFJlbmRlckpzLkNhbnZhcy5GaWx0ZXJzLkJsdXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZmlsdGVyQ2FjaGUgPSBSZW5kZXJKcy5DYW52YXMuRmlsdGVycy5CbHVyKF9pbWFnZSwgX2JsdXJSYWRpdXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChfZmlsdGVyQ2FjaGUpIHtcclxuICAgICAgICAgICAgICAgIGN0eC5wdXRJbWFnZURhdGEoX2ZpbHRlckNhY2hlLCB0aGlzLnBvcy54LCB0aGlzLnBvcy55KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoX2ltYWdlLCB0aGlzLnBvcy54LCB0aGlzLnBvcy55KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIV9jYWNoZSlcclxuICAgICAgICAgICAgICAgIF9maWx0ZXJDYWNoZSA9IG51bGw7XHJcbiAgICAgICAgfTtcclxuICAgIH0pOyIsInJlZ2lzdGVyTmFtZXNwYWNlKFwiUmVuZGVySnMuQ2FudmFzLlNoYXBlc1wiKTtcclxuXHJcbi8qXHJcbiAqUmVwcmVzZW50cyBhIGxpbmUgc2hhcGUsIGluaGVyaXRzIGZyb20gc2hhcGVcclxuICovXHJcblJlbmRlckpzLkNhbnZhcy5TaGFwZXMuTGluZSA9IGluamVjdCgpXHJcbiAgICAuYmFzZShSZW5kZXJKcy5DYW52YXMuT2JqZWN0KVxyXG4gICAgLmNsYXNzKGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcblxyXG4gICAgICAgIHRoaXMuYmFzZSh7XHJcbiAgICAgICAgICAgIHg6IG9wdGlvbnMueDEsXHJcbiAgICAgICAgICAgIHk6IG9wdGlvbnMueTEsXHJcbiAgICAgICAgICAgIHdpZHRoOiBNYXRoLmFicyhvcHRpb25zLngyIC0gb3B0aW9ucy54MSksXHJcbiAgICAgICAgICAgIGhlaWdodDogTWF0aC5hYnMob3B0aW9ucy55MiAtIG9wdGlvbnMueTEpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY29sb3IgPSBcIiMwMDBcIjtcclxuICAgICAgICB0aGlzLmxpbmVXaWR0aCA9IDE7XHJcbiAgICAgICAgdGhpcy5wb3MyID0gbmV3IFJlbmRlckpzLlZlY3RvcihvcHRpb25zLngyLCBvcHRpb25zLnkyKTtcclxuICAgICAgICB0aGlzLmNvbG9yID0gb3B0aW9ucy5jb2xvcjtcclxuICAgICAgICB0aGlzLmxpbmVXaWR0aCA9IG9wdGlvbnMubGluZVdpZHRoIHx8IDE7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICpGdW5jdGlvbiBpcyBjYWxsZWQgaW4gZXZlcnkgZnJhbWUgdG8gcmVkcmF3IGl0c2VsZlxyXG4gICAgICAgICAqLWN0eCBpcyB0aGUgZHJhd2luZyBjb250ZXh0IGZyb20gYSBjYW52YXNcclxuICAgICAgICAgKi1mcHMgaXMgdGhlIGZyYW1lIHBlciBzZWNvbmRcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmRyYXcgPSBmdW5jdGlvbiAoY3R4LCBmcmFtZSwgc3RhZ2VQb3NpdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgYWJzUG9zaXRpb24gPSB0aGlzLnBvcy5zdWIoc3RhZ2VQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHZhciBhYnNQb3NpdGlvbjIgPSB0aGlzLnBvczIuc3ViKHN0YWdlUG9zaXRpb24pO1xyXG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oYWJzUG9zaXRpb24ueCwgYWJzUG9zaXRpb24ueSk7XHJcbiAgICAgICAgICAgIGN0eC5saW5lVG8oYWJzUG9zaXRpb24yLngsIGFic1Bvc2l0aW9uMi55KTtcclxuXHJcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHRoaXMubGluZVdpZHRoO1xyXG4gICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmNvbG9yO1xyXG4gICAgICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG4iLCJyZWdpc3Rlck5hbWVzcGFjZShcIlJlbmRlckpzLkNhbnZhcy5TaGFwZXNcIik7XHJcblxyXG4vKlxyXG4gKlJlcHJlc2VudHMgYSBsaW5lIHNoYXBlLCBpbmhlcml0cyBmcm9tIHNoYXBlXHJcbiAqL1xyXG5SZW5kZXJKcy5DYW52YXMuU2hhcGVzLlBvbHlnb24gPSBpbmplY3QoXCJVdGlsc1wiKVxyXG4gICAgLmJhc2UoUmVuZGVySnMuQ2FudmFzLk9iamVjdClcclxuICAgIC5jbGFzcyhmdW5jdGlvbiAodXRpbHMsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmJhc2Uob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHRoaXMuY29sb3IgPSBvcHRpb25zLmNvbG9yIHx8IFwiIzAwMFwiO1xyXG4gICAgICAgIHRoaXMubGluZVdpZHRoID0gb3B0aW9ucy5saW5lV2lkdGggfHwgMTtcclxuICAgICAgICB0aGlzLnZlcnRpY2VzID0gb3B0aW9ucy5wb2ludHMgfHwgW107XHJcbiAgICAgICAgdGhpcy5zdWJQb2x5cyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZWRnZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnJFZGdlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuYnVpbGRFZGdlcygpO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIERlY29tcG9zZSBhIHBvbHlnb24gaWYgaXQncyBjb25jYXZlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5kZWNvbXBvc2UgPSBmdW5jdGlvbiAocmVzdWx0LCByZWZsZXhWZXJ0aWNlcywgc3RlaW5lclBvaW50cywgZGVsdGEsIG1heGxldmVsLCBsZXZlbCkge1xyXG4gICAgICAgICAgICBtYXhsZXZlbCA9IG1heGxldmVsIHx8IDEwMDtcclxuICAgICAgICAgICAgbGV2ZWwgPSBsZXZlbCB8fCAwO1xyXG4gICAgICAgICAgICBkZWx0YSA9IGRlbHRhIHx8IDI1O1xyXG4gICAgICAgICAgICByZXN1bHQgPSB0eXBlb2YgKHJlc3VsdCkgIT09IFwidW5kZWZpbmVkXCIgPyByZXN1bHQgOiBbXTtcclxuICAgICAgICAgICAgcmVmbGV4VmVydGljZXMgPSByZWZsZXhWZXJ0aWNlcyB8fCBbXTtcclxuICAgICAgICAgICAgc3RlaW5lclBvaW50cyA9IHN0ZWluZXJQb2ludHMgfHwgW107XHJcblxyXG4gICAgICAgICAgICB2YXIgdXBwZXJJbnQgPSBuZXcgUmVuZGVySnMuVmVjdG9yKDAsIDApLCBsb3dlckludCA9IG5ldyBSZW5kZXJKcy5WZWN0b3IoMCwgMCksIHAgPSBuZXcgUmVuZGVySnMuVmVjdG9yKDAsIDApOyAvLyBQb2ludHNcclxuICAgICAgICAgICAgdmFyIHVwcGVyRGlzdCA9IDAsIGxvd2VyRGlzdCA9IDAsIGQgPSAwLCBjbG9zZXN0RGlzdCA9IDA7IC8vIHNjYWxhcnNcclxuICAgICAgICAgICAgdmFyIHVwcGVySW5kZXggPSAwLCBsb3dlckluZGV4ID0gMCwgY2xvc2VzdEluZGV4ID0gMDsgLy8gSW50ZWdlcnNcclxuICAgICAgICAgICAgdmFyIGxvd2VyUG9seSA9IG5ldyBSZW5kZXJKcy5DYW52YXMuU2hhcGVzLlBvbHlnb24oKSwgdXBwZXJQb2x5ID0gbmV3IFJlbmRlckpzLkNhbnZhcy5TaGFwZXMuUG9seWdvbigpOyAvLyBwb2x5Z29uc1xyXG4gICAgICAgICAgICB2YXIgcG9seSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICB2ID0gdGhpcy52ZXJ0aWNlcztcclxuXHJcbiAgICAgICAgICAgIGlmICh2Lmxlbmd0aCA8IDMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldmVsKys7XHJcbiAgICAgICAgICAgIGlmIChsZXZlbCA+IG1heGxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJxdWlja0RlY29tcDogbWF4IGxldmVsIChcIiArIG1heGxldmVsICsgXCIpIHJlYWNoZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9seS5pc1JlZmxleChpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZmxleFZlcnRpY2VzLnB1c2gocG9seS52ZXJ0aWNlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBwZXJEaXN0ID0gbG93ZXJEaXN0ID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7ICsraikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoUmVuZGVySnMuVmVjdG9yLmxlZnQocG9seS5hdChpIC0gMSksIHBvbHkuYXQoaSksIHBvbHkuYXQoaikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBSZW5kZXJKcy5WZWN0b3IucmlnaHRPbihwb2x5LmF0KGkgLSAxKSwgcG9seS5hdChpKSwgcG9seS5hdChqIC0gMSkpKSB7IC8vIGlmIGxpbmUgaW50ZXJzZWN0cyB3aXRoIGFuIGVkZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSB0aGlzLmdldEludGVyc2VjdGlvblBvaW50KHBvbHkuYXQoaSAtIDEpLCBwb2x5LmF0KGkpLCBwb2x5LmF0KGopLCBwb2x5LmF0KGogLSAxKSk7IC8vIGZpbmQgdGhlIHBvaW50IG9mIGludGVyc2VjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJlbmRlckpzLlZlY3Rvci5yaWdodChwb2x5LmF0KGkgKyAxKSwgcG9seS5hdChpKSwgcCkpIHsgLy8gbWFrZSBzdXJlIGl0J3MgaW5zaWRlIHRoZSBwb2x5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IFJlbmRlckpzLlZlY3Rvci5zcWRpc3QocG9seS52ZXJ0aWNlc1tpXSwgcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQgPCBsb3dlckRpc3QpIHsgLy8ga2VlcCBvbmx5IHRoZSBjbG9zZXN0IGludGVyc2VjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dlckRpc3QgPSBkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dlckludCA9IHA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VySW5kZXggPSBqO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoUmVuZGVySnMuVmVjdG9yLmxlZnQocG9seS5hdChpICsgMSksIHBvbHkuYXQoaSksIHBvbHkuYXQoaiArIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgUmVuZGVySnMuVmVjdG9yLnJpZ2h0T24ocG9seS5hdChpICsgMSksIHBvbHkuYXQoaSksIHBvbHkuYXQoaikpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gdGhpcy5nZXRJbnRlcnNlY3Rpb25Qb2ludChwb2x5LmF0KGkgKyAxKSwgcG9seS5hdChpKSwgcG9seS5hdChqKSwgcG9seS5hdChqICsgMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJlbmRlckpzLlZlY3Rvci5sZWZ0KHBvbHkuYXQoaSAtIDEpLCBwb2x5LmF0KGkpLCBwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBSZW5kZXJKcy5WZWN0b3Iuc3FkaXN0KHBvbHkudmVydGljZXNbaV0sIHApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkIDwgdXBwZXJEaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyRGlzdCA9IGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVySW50ID0gcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJJbmRleCA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbm8gdmVydGljZXMgdG8gY29ubmVjdCB0bywgY2hvb3NlIGEgcG9pbnQgaW4gdGhlIG1pZGRsZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb3dlckluZGV4ID09ICh1cHBlckluZGV4ICsgMSkgJSB0aGlzLnZlcnRpY2VzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiQ2FzZSAxOiBWZXJ0ZXgoXCIraStcIiksIGxvd2VySW5kZXgoXCIrbG93ZXJJbmRleCtcIiksIHVwcGVySW5kZXgoXCIrdXBwZXJJbmRleCtcIiksIHBvbHkuc2l6ZShcIit0aGlzLnZlcnRpY2VzLmxlbmd0aCtcIilcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHAueCA9IChsb3dlckludC54ICsgdXBwZXJJbnQueCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwLnkgPSAobG93ZXJJbnQueSArIHVwcGVySW50LnkpIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RlaW5lclBvaW50cy5wdXNoKHApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCB1cHBlckluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2xvd2VyUG9seS5pbnNlcnQobG93ZXJQb2x5LmVuZCgpLCBwb2x5LmJlZ2luKCkgKyBpLCBwb2x5LmJlZ2luKCkgKyB1cHBlckluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dlclBvbHkuYXBwZW5kKHBvbHksIGksIHVwcGVySW5kZXggKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyUG9seS52ZXJ0aWNlcy5wdXNoKHApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJQb2x5LnZlcnRpY2VzLnB1c2gocCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG93ZXJJbmRleCAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy91cHBlclBvbHkuaW5zZXJ0KHVwcGVyUG9seS5lbmQoKSwgcG9seS5iZWdpbigpICsgbG93ZXJJbmRleCwgcG9seS5lbmQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJQb2x5LmFwcGVuZChwb2x5LCBsb3dlckluZGV4LCBwb2x5LnZlcnRpY2VzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3VwcGVyUG9seS5pbnNlcnQodXBwZXJQb2x5LmVuZCgpLCBwb2x5LmJlZ2luKCksIHBvbHkuYmVnaW4oKSArIGkgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyUG9seS5hcHBlbmQocG9seSwgMCwgaSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbG93ZXJQb2x5Lmluc2VydChsb3dlclBvbHkuZW5kKCksIHBvbHkuYmVnaW4oKSArIGksIHBvbHkuZW5kKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyUG9seS5hcHBlbmQocG9seSwgaSwgcG9seS52ZXJ0aWNlcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9sb3dlclBvbHkuaW5zZXJ0KGxvd2VyUG9seS5lbmQoKSwgcG9seS5iZWdpbigpLCBwb2x5LmJlZ2luKCkgKyB1cHBlckluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dlclBvbHkuYXBwZW5kKHBvbHksIDAsIHVwcGVySW5kZXggKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyUG9seS52ZXJ0aWNlcy5wdXNoKHApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJQb2x5LnZlcnRpY2VzLnB1c2gocCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3VwcGVyUG9seS5pbnNlcnQodXBwZXJQb2x5LmVuZCgpLCBwb2x5LmJlZ2luKCkgKyBsb3dlckluZGV4LCBwb2x5LmJlZ2luKCkgKyBpICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlclBvbHkuYXBwZW5kKHBvbHksIGxvd2VySW5kZXgsIGkgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbm5lY3QgdG8gdGhlIGNsb3Nlc3QgcG9pbnQgd2l0aGluIHRoZSB0cmlhbmdsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiQ2FzZSAyOiBWZXJ0ZXgoXCIraStcIiksIGNsb3Nlc3RJbmRleChcIitjbG9zZXN0SW5kZXgrXCIpLCBwb2x5LnNpemUoXCIrdGhpcy52ZXJ0aWNlcy5sZW5ndGgrXCIpXFxuXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvd2VySW5kZXggPiB1cHBlckluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlckluZGV4ICs9IHRoaXMudmVydGljZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3Nlc3REaXN0ID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cHBlckluZGV4IDwgbG93ZXJJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IGxvd2VySW5kZXg7IGogPD0gdXBwZXJJbmRleDsgKytqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoUmVuZGVySnMuVmVjdG9yLmxlZnRPbihwb2x5LmF0KGkgLSAxKSwgcG9seS5hdChpKSwgcG9seS5hdChqKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBSZW5kZXJKcy5WZWN0b3IucmlnaHRPbihwb2x5LmF0KGkgKyAxKSwgcG9seS5hdChpKSwgcG9seS5hdChqKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gUmVuZGVySnMuVmVjdG9yLnNxZGlzdChwb2x5LmF0KGkpLCBwb2x5LmF0KGopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA8IGNsb3Nlc3REaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3Nlc3REaXN0ID0gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VzdEluZGV4ID0gaiAlIHRoaXMudmVydGljZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCBjbG9zZXN0SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyUG9seS5hcHBlbmQocG9seSwgaSwgY2xvc2VzdEluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xvc2VzdEluZGV4ICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJQb2x5LmFwcGVuZChwb2x5LCBjbG9zZXN0SW5kZXgsIHYubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyUG9seS5hcHBlbmQocG9seSwgMCwgaSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dlclBvbHkuYXBwZW5kKHBvbHksIGksIHYubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyUG9seS5hcHBlbmQocG9seSwgMCwgY2xvc2VzdEluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlclBvbHkuYXBwZW5kKHBvbHksIGNsb3Nlc3RJbmRleCwgaSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBzb2x2ZSBzbWFsbGVzdCBwb2x5IGZpcnN0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvd2VyUG9seS52ZXJ0aWNlcy5sZW5ndGggPCB1cHBlclBvbHkudmVydGljZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyUG9seS5kZWNvbXBvc2UocmVzdWx0LCByZWZsZXhWZXJ0aWNlcywgc3RlaW5lclBvaW50cywgZGVsdGEsIG1heGxldmVsLCBsZXZlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyUG9seS5kZWNvbXBvc2UocmVzdWx0LCByZWZsZXhWZXJ0aWNlcywgc3RlaW5lclBvaW50cywgZGVsdGEsIG1heGxldmVsLCBsZXZlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJQb2x5LmRlY29tcG9zZShyZXN1bHQsIHJlZmxleFZlcnRpY2VzLCBzdGVpbmVyUG9pbnRzLCBkZWx0YSwgbWF4bGV2ZWwsIGxldmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJQb2x5LmRlY29tcG9zZShyZXN1bHQsIHJlZmxleFZlcnRpY2VzLCBzdGVpbmVyUG9pbnRzLCBkZWx0YSwgbWF4bGV2ZWwsIGxldmVsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCByZXN1bHQubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tdLmJ1aWxkRWRnZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXN1bHQucHVzaCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBBcHBlbmQgcG9pbnRzIFwiZnJvbVwiIHRvIFwidG9cIi0xIGZyb20gYW4gb3RoZXIgcG9seWdvbiBcInBvbHlcIiBvbnRvIHRoaXMgb25lLlxyXG4gICAgICAgICAqIEBtZXRob2QgYXBwZW5kXHJcbiAgICAgICAgICogQHBhcmFtIHtQb2x5Z29ufSBwb2x5IFRoZSBwb2x5Z29uIHRvIGdldCBwb2ludHMgZnJvbS5cclxuICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gIGZyb20gVGhlIHZlcnRleCBpbmRleCBpbiBcInBvbHlcIi5cclxuICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gIHRvIFRoZSBlbmQgdmVydGV4IGluZGV4IGluIFwicG9seVwiLiBOb3RlIHRoYXQgdGhpcyB2ZXJ0ZXggaXMgTk9UIGluY2x1ZGVkIHdoZW4gYXBwZW5kaW5nLlxyXG4gICAgICAgICAqIEByZXR1cm4ge0FycmF5fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYXBwZW5kID0gZnVuY3Rpb24gKHBvbHksIGZyb20sIHRvKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKGZyb20pID09PSBcInVuZGVmaW5lZFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJGcm9tIGlzIG5vdCBnaXZlbiFcIik7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKHRvKSA9PT0gXCJ1bmRlZmluZWRcIikgdGhyb3cgbmV3IEVycm9yKFwiVG8gaXMgbm90IGdpdmVuIVwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0byAtIDEgPCBmcm9tKSB0aHJvdyBuZXcgRXJyb3IoXCJsb2wxXCIpO1xyXG4gICAgICAgICAgICBpZiAodG8gPiBwb2x5LnZlcnRpY2VzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKFwibG9sMlwiKTtcclxuICAgICAgICAgICAgaWYgKGZyb20gPCAwKSB0aHJvdyBuZXcgRXJyb3IoXCJsb2wzXCIpO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGZyb207IGkgPCB0bzsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZlcnRpY2VzLnB1c2gocG9seS52ZXJ0aWNlc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIEdldCBhIHZlcnRleCBhdCBwb3NpdGlvbiBpLiBJdCBkb2VzIG5vdCBtYXR0ZXIgaWYgaSBpcyBvdXQgb2YgYm91bmRzLCB0aGlzIGZ1bmN0aW9uIHdpbGwganVzdCBjeWNsZS5cclxuICAgICAgICAgKiBAbWV0aG9kIGF0XHJcbiAgICAgICAgICogQHBhcmFtICB7TnVtYmVyfSBpXHJcbiAgICAgICAgICogQHJldHVybiB7QXJyYXl9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5hdCA9IGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gdGhpcy52ZXJ0aWNlcyxcclxuICAgICAgICAgICAgICAgIHMgPSB2Lmxlbmd0aDtcclxuICAgICAgICAgICAgcmV0dXJuIHZbaSA8IDAgPyBpICUgcyArIHMgOiBpICUgc107XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBHZXQgZmlyc3QgdmVydGV4XHJcbiAgICAgICAgICogQG1ldGhvZCBmaXJzdFxyXG4gICAgICAgICAqIEByZXR1cm4ge0FycmF5fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZmlyc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZlcnRpY2VzWzBdO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogR2V0IGxhc3QgdmVydGV4XHJcbiAgICAgICAgICogQG1ldGhvZCBsYXN0XHJcbiAgICAgICAgICogQHJldHVybiB7QXJyYXl9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5sYXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy52ZXJ0aWNlc1t0aGlzLnZlcnRpY2VzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIENoZWNrcyB0aGF0IHRoZSBsaW5lIHNlZ21lbnRzIG9mIHRoaXMgcG9seWdvbiBkbyBub3QgaW50ZXJzZWN0IGVhY2ggb3RoZXIuXHJcbiAgICAgICAgICogQG1ldGhvZCBpc1NpbXBsZVxyXG4gICAgICAgICAqIEBwYXJhbSAge0FycmF5fSBwYXRoIEFuIGFycmF5IG9mIHZlcnRpY2VzIGUuZy4gW1swLDBdLFswLDFdLC4uLl1cclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAgICAgICAqIEB0b2RvIFNob3VsZCBpdCBjaGVjayBhbGwgc2VnbWVudHMgd2l0aCBhbGwgb3RoZXJzP1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaXNTaW1wbGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gdGhpcy52ZXJ0aWNlcztcclxuICAgICAgICAgICAgLy8gQ2hlY2tcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpIC0gMTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VnbWVudHNJbnRlcnNlY3QocGF0aFtpXSwgcGF0aFtpICsgMV0sIHBhdGhbal0sIHBhdGhbaiArIDFdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDaGVjayB0aGUgc2VnbWVudCBiZXR3ZWVuIHRoZSBsYXN0IGFuZCB0aGUgZmlyc3QgcG9pbnQgdG8gYWxsIG90aGVyc1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHBhdGgubGVuZ3RoIC0gMjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWdtZW50c0ludGVyc2VjdChwYXRoWzBdLCBwYXRoW3BhdGgubGVuZ3RoIC0gMV0sIHBhdGhbaV0sIHBhdGhbaSArIDFdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRJbnRlcnNlY3Rpb25Qb2ludCA9IGZ1bmN0aW9uIChwMSwgcDIsIHExLCBxMiwgZGVsdGEpIHtcclxuICAgICAgICAgICAgZGVsdGEgPSBkZWx0YSB8fCAwO1xyXG4gICAgICAgICAgICB2YXIgYTEgPSBwMi55IC0gcDEueTtcclxuICAgICAgICAgICAgdmFyIGIxID0gcDEueCAtIHAyLng7XHJcbiAgICAgICAgICAgIHZhciBjMSA9IChhMSAqIHAxLngpICsgKGIxICogcDEueSk7XHJcbiAgICAgICAgICAgIHZhciBhMiA9IHEyLnkgLSBxMS55O1xyXG4gICAgICAgICAgICB2YXIgYjIgPSBxMS54IC0gcTIueDtcclxuICAgICAgICAgICAgdmFyIGMyID0gKGEyICogcTEueCkgKyAoYjIgKiBxMS55KTtcclxuICAgICAgICAgICAgdmFyIGRldCA9IChhMSAqIGIyKSAtIChhMiAqIGIxKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghU2NhbGFyLmVxKGRldCwgMCwgZGVsdGEpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlbmRlckpzLlZlY3Rvci5jbG9uZSgoKGIyICogYzEpIC0gKGIxICogYzIpKSAvIGRldCwgKChhMSAqIGMyKSAtIChhMiAqIGMxKSkgLyBkZXQpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVuZGVySnMuVmVjdG9yLmNsb25lKDAsIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBDaGVjayBpZiBhIHBvaW50IGluIHRoZSBwb2x5Z29uIGlzIGEgcmVmbGV4IHBvaW50XHJcbiAgICAgICAgICogQG1ldGhvZCBpc1JlZmxleFxyXG4gICAgICAgICAqIEBwYXJhbSAge051bWJlcn0gIGlcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaXNSZWZsZXggPSBmdW5jdGlvbiAoaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUmVuZGVySnMuVmVjdG9yLnJpZ2h0KHRoaXMuYXQoaSAtIDEpLCB0aGlzLmF0KGkpLCB0aGlzLmF0KGkgKyAxKSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5tYWtlQ0NXID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYnIgPSAwLFxyXG4gICAgICAgICAgICAgICAgdiA9IHRoaXMudmVydGljZXM7XHJcblxyXG4gICAgICAgICAgICAvLyBmaW5kIGJvdHRvbSByaWdodCBwb2ludFxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIGlmICh2W2ldLnkgPCB2W2JyXS55IHx8ICh2W2ldLnkgPT0gdlticl0ueSAmJiB2W2ldLnggPiB2W2JyXS54KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gcmV2ZXJzZSBwb2x5IGlmIGNsb2Nrd2lzZVxyXG4gICAgICAgICAgICBpZiAoIVJlbmRlckpzLlZlY3Rvci5sZWZ0KHRoaXMuYXQoYnIgLSAxKSwgdGhpcy5hdChiciksIHRoaXMuYXQoYnIgKyAxKSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmV2ZXJzZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIFJldmVyc2UgdGhlIHZlcnRpY2VzIGluIHRoZSBwb2x5Z29uXHJcbiAgICAgICAgICogQG1ldGhvZCByZXZlcnNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5yZXZlcnNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdG1wID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBOID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkgIT09IE47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdG1wLnB1c2godGhpcy52ZXJ0aWNlcy5wb3AoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy52ZXJ0aWNlcyA9IHRtcDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnNlZ21lbnRzSW50ZXJzZWN0ID0gZnVuY3Rpb24gKHAxLCBwMiwgcTEsIHEyKSB7XHJcbiAgICAgICAgICAgIHZhciBkeCA9IHAyLnggLSBwMS54O1xyXG4gICAgICAgICAgICB2YXIgZHkgPSBwMi55IC0gcDEueTtcclxuICAgICAgICAgICAgdmFyIGRhID0gcTIueCAtIHExLng7XHJcbiAgICAgICAgICAgIHZhciBkYiA9IHEyLnkgLSBxMS55O1xyXG5cclxuICAgICAgICAgICAgLy8gc2VnbWVudHMgYXJlIHBhcmFsbGVsXHJcbiAgICAgICAgICAgIGlmIChkYSAqIGR5IC0gZGIgKiBkeCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIHMgPSAoZHggKiAocTEueSAtIHAxLnkpICsgZHkgKiAocDEueCAtIHExLngpKSAvIChkYSAqIGR5IC0gZGIgKiBkeClcclxuICAgICAgICAgICAgdmFyIHQgPSAoZGEgKiAocDEueSAtIHExLnkpICsgZGIgKiAocTEueCAtIHAxLngpKSAvIChkYiAqIGR4IC0gZGEgKiBkeSlcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAocyA+PSAwICYmIHMgPD0gMSAmJiB0ID49IDAgJiYgdCA8PSAxKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmJ1aWxkRWRnZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBwMTtcclxuICAgICAgICAgICAgdmFyIHAyO1xyXG4gICAgICAgICAgICB0aGlzLmVkZ2VzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuckVkZ2VzID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcDEgPSB0aGlzLnZlcnRpY2VzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgKyAxID49IHRoaXMudmVydGljZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcDIgPSB0aGlzLnZlcnRpY2VzWzBdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwMiA9IHRoaXMudmVydGljZXNbaSArIDFdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5lZGdlcy5wdXNoKHAyLnN1YihwMSkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yRWRnZXMucHVzaCh7cDE6IG5ldyBSZW5kZXJKcy5WZWN0b3IocDEueCwgcDEueSksIHAyOiBuZXcgUmVuZGVySnMuVmVjdG9yKHAyLngsIHAyLnkpfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmdldENlbnRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRvdGFsWCA9IDA7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbFkgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRvdGFsWCArPSB0aGlzLnZlcnRpY2VzW2ldLng7XHJcbiAgICAgICAgICAgICAgICB0b3RhbFkgKz0gdGhpcy52ZXJ0aWNlc1tpXS55O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlbmRlckpzLlZlY3Rvcih0b3RhbFggLyB0aGlzLnZlcnRpY2VzLmxlbmd0aCwgdG90YWxZIC8gdGhpcy52ZXJ0aWNlcy5sZW5ndGgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gZnVuY3Rpb24gKHgsIHkpIHtcclxuICAgICAgICAgICAgdmFyIHYgPSBhcmd1bWVudHMubGVuZ3RoID09PSAyID8gbmV3IFJlbmRlckpzLlZlY3Rvcihhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXSkgOiBhcmd1bWVudHNbMF07XHJcbiAgICAgICAgICAgIHRoaXMucG9zLnNldCh0aGlzLnBvcy5hZGQodikpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gdGhpcy52ZXJ0aWNlc1tpXTtcclxuICAgICAgICAgICAgICAgIHRoaXMudmVydGljZXNbaV0uc2V0KHAuYWRkKHYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnN1YlBvbHlzID0gdGhpcy5kZWNvbXBvc2UoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBcIlwiKSByZXN1bHQgKz0gXCIgXCI7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gXCJ7XCIgKyB0aGlzLnZlcnRpY2VzW2ldLnRvU3RyaW5nKHRydWUpICsgXCJ9XCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKkZ1bmN0aW9uIGlzIGNhbGxlZCBpbiBldmVyeSBmcmFtZSB0byByZWRyYXcgaXRzZWxmXHJcbiAgICAgICAgICotY3R4IGlzIHRoZSBkcmF3aW5nIGNvbnRleHQgZnJvbSBhIGNhbnZhc1xyXG4gICAgICAgICAqLWZwcyBpcyB0aGUgZnJhbWUgcGVyIHNlY29uZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uIChjdHgpIHtcclxuICAgICAgICAgICAgdmFyIGNvbG9ycyA9IFtcImluZGlhbnJlZFwiLCBcInllbGxvd1wiLCAnZ3JlZW4nXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YlBvbHlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmVydGljZXMgPSB0aGlzLnN1YlBvbHlzW2ldLnZlcnRpY2VzO1xyXG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyh2ZXJ0aWNlc1swXS54LCB2ZXJ0aWNlc1swXS55KTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAxOyBqIDwgdmVydGljZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHZlcnRpY2VzW2pdLngsIHZlcnRpY2VzW2pdLnkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHRoaXMubGluZVdpZHRoO1xyXG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5jb2xvcjtcclxuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcnNbaV07XHJcbiAgICAgICAgICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pOyIsInJlZ2lzdGVyTmFtZXNwYWNlKFwiUmVuZGVySnMuQ2FudmFzLlNoYXBlc1wiKTtcclxuXHJcbi8qXHJcbiAqUmVwcmVzZW50cyBhIHJlY3RhbmdsZSBzaGFwZSwgaW5oZXJpdHMgZnJvbSBzaGFwZVxyXG4gKi9cclxuUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5SZWN0YW5nbGUgPSBpbmplY3QoXCJVdGlsc1wiKVxyXG4gICAgLmJhc2UoUmVuZGVySnMuQ2FudmFzLk9iamVjdClcclxuICAgIC5jbGFzcyhmdW5jdGlvbiAodXRpbHMsIG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgdGhpcy5iYXNlKG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBvcHRpb25zLmNvbG9yO1xyXG4gICAgICAgIHRoaXMuZmlsbENvbG9yID0gb3B0aW9ucy5maWxsQ29sb3I7XHJcbiAgICAgICAgdGhpcy5saW5lV2lkdGggPSBvcHRpb25zLmxpbmVXaWR0aCB8fCAxO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqRnVuY3Rpb24gaXMgY2FsbGVkIGluIGV2ZXJ5IGZyYW1lIHRvIHJlZHJhdyBpdHNlbGZcclxuICAgICAgICAgKi1jdHggaXMgdGhlIGRyYXdpbmcgY29udGV4dCBmcm9tIGEgY2FudmFzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5kcmF3ID0gZnVuY3Rpb24gKGN0eCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb2xvcikge1xyXG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZVJlY3QodGhpcy5wb3MueCwgdGhpcy5wb3MueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbGxDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHRoaXMucG9zLngsIHRoaXMucG9zLnksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdHgubGluZVdpZHRoID0gdGhpcy5saW5lV2lkdGg7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY29sb3I7XHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmZpbGxDb2xvcjtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbiIsInJlZ2lzdGVyTmFtZXNwYWNlKFwiUmVuZGVySnMuQ2FudmFzLlNoYXBlc1wiKTtcclxuXHJcbi8qXHJcbiAqUmVwcmVzZW50cyBhIHNwcml0ZSBpbWFnZSwgaW5oZXJpdHMgZnJvbSBzaGFwZVxyXG4gKi9cclxuUmVuZGVySnMuQ2FudmFzLlNoYXBlcy5TcHJpdGUgPSBpbmplY3QoXCJVdGlsc1wiKVxyXG4gICAgLmJhc2UoUmVuZGVySnMuQ2FudmFzLk9iamVjdClcclxuICAgIC5jbGFzcyhmdW5jdGlvbiAodXRpbHMsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmJhc2Uob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogTG9jYWxzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHZhciBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLndpZHRoID0gaW1hZ2Uud2lkdGg7XHJcbiAgICAgICAgICAgIHNlbGYuaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xyXG4gICAgICAgICAgICBsb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaW1hZ2Uuc3JjID0gb3B0aW9ucy51cmw7XHJcbiAgICAgICAgdmFyIGxvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBmcmFtZUluZGV4ID0gMDtcclxuICAgICAgICB2YXIgZnJhbWVDb3VudCA9IG9wdGlvbnMuZnJhbWVDb3VudDtcclxuICAgICAgICB2YXIgc3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBsb29wID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGRlZkFuaW1hdGlvbiA9IG9wdGlvbnMuZGVmQW5pbWF0aW9uO1xyXG4gICAgICAgIHZhciBjdXJyZW50O1xyXG4gICAgICAgIHZhciBwcmV2aW91cztcclxuICAgICAgICB2YXIgYW5pbWF0aW9ucyA9IG9wdGlvbnMuYW5pbWF0aW9ucztcclxuXHJcbiAgICAgICAgdmFyIGFuaW1hdGlvbiA9IGZ1bmN0aW9uIChuYW1lLCBpc0xvb3ApIHtcclxuICAgICAgICAgICAgZnJhbWVJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBsb29wID0gaXNMb29wO1xyXG4gICAgICAgICAgICBpZiAoIWFuaW1hdGlvbnNbbmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwcmV2aW91cyA9IGN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBhbmltYXRpb25zW25hbWVdO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICB0aGlzLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhbmltYXRpb24oZGVmQW5pbWF0aW9uLCB0cnVlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnNldEFuaW1hdGlvbiA9IGZ1bmN0aW9uIChuYW1lLCBsb29wKSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGlvbihuYW1lLCBsb29wKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnBvaW50SW50ZXJzZWN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRSZWN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGVmRnJhbWUgPSBhbmltYXRpb25zW2RlZkFuaW1hdGlvbl1bMF07XHJcbiAgICAgICAgICAgIHJldHVybiB7eDogdGhpcy5wb3MueCwgeTogdGhpcy5wb3MueSwgd2lkdGg6IGRlZkZyYW1lWzJdLCBoZWlnaHQ6IGRlZkZyYW1lWzNdfTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnJvdGF0ZVNoYXBlID0gZnVuY3Rpb24gKGN0eCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYW5nbGUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZGVmRnJhbWUgPSBhbmltYXRpb25zW2RlZkFuaW1hdGlvbl1bMF07XHJcbiAgICAgICAgICAgIHZhciBvID0gbmV3IFJlbmRlckpzLlZlY3Rvcihwb3NpdGlvbi54ICsgKGRlZkZyYW1lWzJdIC8gMiksIHBvc2l0aW9uLnkgKyAoZGVmRnJhbWVbM10gLyAyKSk7XHJcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoby54LCBvLnkpO1xyXG4gICAgICAgICAgICBjdHgucm90YXRlKHV0aWxzLmNvbnZlcnRUb1JhZCh0aGlzLmFuZ2xlKSk7XHJcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoLW8ueCwgLW8ueSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKkZ1bmN0aW9uIGlzIGNhbGxlZCBpbiBldmVyeSBmcmFtZSB0byByZWRyYXcgaXRzZWxmXHJcbiAgICAgICAgICotY3R4IGlzIHRoZSBkcmF3aW5nIGNvbnRleHQgZnJvbSBhIGNhbnZhc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uIChjdHgsIGZyYW1lLCBzdGFnZVBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmICghbG9hZGVkIHx8ICFzdGFydGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBhYnNQb3NpdGlvbiA9IHRoaXMucG9zLnN1YihzdGFnZVBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFuZ2xlICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVTaGFwZShjdHgsIGFic1Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRGcmFtZSA9IGN1cnJlbnRbZnJhbWVJbmRleF07XHJcblxyXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltYWdlLCBjdXJyZW50RnJhbWVbMF0sIGN1cnJlbnRGcmFtZVsxXSwgY3VycmVudEZyYW1lWzJdLCBjdXJyZW50RnJhbWVbM10sIGFic1Bvc2l0aW9uLngsIGFic1Bvc2l0aW9uLnksIGN1cnJlbnRGcmFtZVsyXSwgY3VycmVudEZyYW1lWzNdKTtcclxuICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IoZnJhbWUudGltZSkgJSBmcmFtZUNvdW50ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBmcmFtZUluZGV4ID0gZnJhbWVJbmRleCA+PSBjdXJyZW50Lmxlbmd0aCAtIDEgPyAwIDogZnJhbWVJbmRleCArIDE7XHJcbiAgICAgICAgICAgICAgICBpZiAoZnJhbWVJbmRleCA9PT0gMCAmJiAhbG9vcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbihkZWZBbmltYXRpb24sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFuZ2xlICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=